(()=>{var e,t,a,r={54817:(e,t,a)=>{"use strict";var r=a(27378),n=a(37634),s=a(23884),i=a(65783),l=(a(75864),a(12760)),o=a(24930);function c(e,t,a){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class d{logEvent(e,t,a,r,n,s,i){if(!d.CLOG)return;const l="cfn_".concat(e).slice(0,d.CHARACTER_LIMIT),o=JSON.stringify(this.getMetadata(a)),c=r||"cfnv2",u="ms"===n?n:void 0,m=["custom","pageload"].includes(s)?s:void 0,p=["INFO","WARN","FATAL"].includes(i)?i:void 0;d.CLOG.log(l,t,o,c,u,m,p)}logEventNoSessionId(e,t,a,r,n,s,i){if(!d.CLOG)return;const l="cfn_".concat(e).slice(0,d.CHARACTER_LIMIT),o=a,c=r||"cfnv2",u="ms"===n?n:void 0,m=["custom","pageload"].includes(s)?s:void 0,p=["INFO","WARN","FATAL"].includes(i)?i:void 0;d.CLOG.log(l,t,o,c,u,m,p)}getMetadata(e){return{...e,account_id:(0,o.getCurrentAccountId)()||"0",s_fid:document.cookie.replace(/(?:(?:^|.*;\s*)s_fid\s*\=\s*([^;]*).*$)|^.*$/,"$1")||"test"}}}c(d,"CHARACTER_LIMIT",32),c(d,"CLOG",window.AWSC?window.AWSC.Clog:null);const u=new d;var m=a(20676);let p;const _=/\{(.*?)\}/gi,E=/\{[0-9]+\}/;function g(e){const t=p.default[e];for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];const s=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return a&&a.length?e.replace(_,((e,t)=>a[t])):e}(t,...r);if(!s)throw new Error(`Missing translation ${e}`);return s}function h(e){const t=p.default[e];if(!t)throw new Error(`Missing translation ${e}`);for(var a=arguments.length,n=new Array(a>1?a-1:0),s=1;s<a;s++)n[s-1]=arguments[s];return function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return a&&a.length?e.split(E).map(((e,t)=>r.createElement(r.Fragment,{key:e.split(" ").join()},e,a[t]))):e}(t,...n)}!function(){const e=window.__cfc_resources__,t=document.getElementById("awsc-mezz-locale");let a=t&&t.getAttribute("content");"zh_CN"===a&&(a="zh"),p=function(e){const t={},a=(0,m.cV)();return Object.keys(e).forEach((r=>{t[r]=a.processString(e[r])})),{default:t}}((e[a]||e.en).default)}();let S=function(e){return e[e._NotImplemented=0]="_NotImplemented",e[e.HookFailureMode=1]="HookFailureMode",e}({});function T(e){return({[S.HookFailureMode]:{WARN:g("warn_label"),FAIL:g("fail_label")}}[e.type]||{})[e.value]||e.value}var b=a(45834);function f(e,t,a){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const k=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;f(this,"host",""),f(this,"locale",""),f(this,"filter",""),f(this,"region",""),f(this,"docsPath",""),f(this,"awsDocsBasePath",""),f(this,"marketingPath",""),f(this,"composerPath",""),f(this,"stackSetsPath",""),f(this,"defaultLocale","en"),f(this,"getAwsLocale",(()=>{const e=this.win.document.querySelector("#awsc-mezz-locale");if(e){const t=e.getAttribute("content");return t&&t.split("_")[0]||""}})),this.win=e,this.initializeQuery(),this.initializePaths()}getLocale(){return this.locale}getDocsPath(){return this.docsPath}getMarketingPath(){return this.marketingPath}clearFragmentParameters(){const e=this.extractFragmentPathAndParameters();e&&(e.url||e.stackName)&&(this.win.location.hash=`${e.hashPath}${e.stackIdQuery}`)}constructComposerUrl(e,t,a,r,n){const s=(n?"changeset":r&&"update")||"";return`${this.getComposerBaseUrl()}${!a&&t&&`&templateURL=${t}`||""}${e&&`&stackId=${e}`||""}${s&&`&action=${s}`||""}`}getFragmentParameters(){const e=this.extractFragmentPathAndParameters();if(!e)return null;const{url:t,stackName:a,templateEtag:r}=e;return{url:t,stackName:a,templateEtag:r}}openTab(e){this.win.open(e,"_blank").focus()}getCurrentPath(){return this.win.location.hash.substring(1)}extractFragmentPathAndParameters(){const e=this.win.location.hash,t=e.indexOf("?");if(-1===t)return null;const a=e.slice(0,t),r=-1!==t&&e.slice(t+1)||"",n=(0,b.parse)(r),s=a.includes("/stacks/create")?n.stackName:null,i=n.stackId&&`?stackId=${n.stackId}`||"";return{url:n.templateURL||"",hashPath:a,stackIdQuery:i,stackName:s,templateEtag:n.templateEtag||""}}getComposerBaseUrl(){return`${this.composerPath}?region=${this.region}`}initializeQuery(){const e=this.win.location.search||"",t={};e.slice(1).split("&").filter((e=>e&&e.trim())).map((e=>e.split("="))).filter((e=>2===e.length)).forEach((e=>t[e[0]]=e[1])),this.filter=t.filter,this.locale=(t.locale||this.getAwsLocale()||this.defaultLocale).toLowerCase(),this.region=(0,o.isTangerineBox)()?(0,o.getRegion)():t.region,this.host=(0,o.isTangerineBox)()?(0,o.getCustomContext)("host"):this.win.location.host}initializePaths(){const e=this.win.document;if((0,o.isTangerineBox)())this.marketingPath=(0,o.getCustomContext)("marketingBaseUrl"),this.awsDocsBasePath=(0,o.getCustomContext)("docsBaseUrl"),this.docsPath=`${this.awsDocsBasePath}/console/cloudformation`,this.composerPath=(0,o.getCustomContext)("composerUrl");else{const t=e.querySelector("#url-docs");this.docsPath=t?t.getAttribute("href"):"";try{this.awsDocsBasePath=new URL(this.docsPath).origin}catch{this.awsDocsBasePath="https://docs.aws.amazon.com"}const a=e.querySelector("#url-marketing");this.marketingPath=a?a.getAttribute("href"):"";const r={};Array.prototype.slice.call(e.querySelector("body").attributes).filter((e=>0===e.name.indexOf("data-"))).forEach((e=>r[e.name]=e.value)),this.composerPath=r["data-composer-console"];const n=r["data-maestro-console"];this.stackSetsPath=`${n}?region=${this.region}`}}};let A=function(e){return e.CONSOLE_IA="consoleIA",e.SS_ALT="consoleSSAccountLevelTargeting",e.SS_DA="consoleSSDelegatedAdmin",e.SS_ORGS="consoleSSOrgs",e.SS_DRIFT_DETECTION="consoleSSDriftDetection",e.SS_RESOURCE_DRIFT_DETECTION="consoleSSResourceLevelDriftDetection",e.SS_FAILURE_HANDLE="consoleSSFailureHandle",e.SS_ACCOUNTS_S3_URL="consoleAccountsS3Url",e.CSNS="consoleChangeSetsNestedStacks",e.DRIFT_DETECTION="driftdetection",e.UNO_REGISTRY="consoleUno",e.MODULE="consoleModule",e.HOOKS="consoleHooks",e.REGION_CONCURRENCY="consoleRegionConcurrency",e.RESOURCE_IMPORT="consoleResourceImport",e.PAUSE_AND_RESUME="consolePauseAndResume",e.SS_IMPORT="consoleSSCarbon",e.SS_MANAGED_EXECUTION="consoleSSManagedExecution",e.SS_IMPORT_II="consoleSSCarbonOrganizations",e.NEXTGEN_CONSOLE_MIGRATION_PHASE="nextGenConsoleMigrationPhase",e.JAZZ="consoleJazz",e.VERIFIED_PUBLISHER="consoleVerifiedPublisher",e.FEATURE_SPOTLIGHT="consoleFeatureSpotlight",e.ROOT_CAUSE_EVENT="consoleEventRootCause",e.PRE_UNO_REGISTRY="consoleRegistryService",e.CANARY_ONLY="consoleCanaryOnly",e.APP_MANAGER="consoleApplicationManagerLink",e.PUBLISHER_CODE_CONNECTIONS="consoleUnoPublisherCodeStarConnections",e.SKIP_API_OUTPUT_FOR_GET_TEMPLATE_SUMMARY="skipApiOutputChangeForGetTemplateSummary",e.STACKSETS_BACKEND_REGION_BUILD="stackSetsRegionBuild",e}({});const I=`${k.marketingPath}/cloudformation/aws-cloudformation-templates`,y=["AWS::EC2::Image::Id","List<AWS::EC2::Image::Id>"];let C=function(e){return e.CAPABILITY_AUTO_EXPAND="CAPABILITY_AUTO_EXPAND",e.CAPABILITY_IAM="CAPABILITY_IAM",e.CAPABILITY_NAMED_IAM="CAPABILITY_NAMED_IAM",e}({}),R=function(e){return e.EXISTING="EXISTING",e.SAMPLE="SAMPLE",e.UPLOAD="UPLOAD",e.TEXT="TEXT",e.IMPORT="IMPORT",e.DESIGNER="DESIGNER",e}({}),v=function(e){return e.NONE="NONE",e.TEXT="TEXT",e.FILE="FILE",e}({});const L=["AWS::EC2::AvailabilityZone::Name","AWS::EC2::Instance::Id","AWS::EC2::KeyPair::KeyName","AWS::EC2::SecurityGroup::GroupName","AWS::EC2::SecurityGroup::Id","AWS::EC2::Subnet::Id","AWS::EC2::Volume::Id","AWS::EC2::VPC::Id","AWS::Route53::HostedZone::Id"],P={ACCOUNT_NUMBER_REGEX:/^\b\d{12}(?:,\d{12})*\b$/i,OU_ID_REGEX:/^(r-[0-9a-z]{4,32})|(ou-[0-9a-z]{4,32}-[a-z0-9]{8,32})$/i,S3_URL_REGEX:/^(s3:\/\/|http(s?):\/\/).+/i};let N=function(e){return e.ChangeSetHookInvocations="STACK_CHANGE_SET_HOOK_INVOCATIONS",e.Exports="EXPORTS",e.ExtensionHookTargetResourceTypes="EXTENSION_HOOK_TARGET_RESOURCE_TYPES",e.ExtensionInputs="EXTENSION_INPUT_PARAMETERS",e.ExtensionModuleResources="EXTENSION_MODULE_RESOURCES",e.MyExtensionsHooks="MY_EXTENSIONS_HOOKS",e.MyExtensionsModules="MY_EXTENSIONS_MODULES",e.MyExtensionsResourceTypes="MY_EXTENSIONS_RESOURCE_TYPES",e.PublicExtensions="PUBLIC_EXTENSIONS",e.ResourceBrowser="RESOURCE_BROWSER",e.StackChangeSetChanges="STACK_CHANGE_SET_CHANGES",e.StackChangeSetInputs="STACK_CHANGE_SET_INPUT_PARAMETERS",e.StackChangeSets="STACK_CHANGE_SETS",e.StackEvents="STACK_EVENTS",e.StackInstanceResourceDrifts="STACK_SET_STACK_INSTANCE_RESOURCE_DRIFTS",e.StackInstances="STACK_SET_STACK_INSTANCES",e.StackOutputs="STACK_OUTPUTS",e.StackParameters="STACK_PARAMETERS",e.StackResources="STACK_RESOURCES",e.Stacks="STACKS",e.StackSetOperationResults="STACK_SET_OPERATION_RESULTS",e.StackSets="STACK_SETS",e.StackTags="STACK_TAGS",e.TemplateBrowser="TEMPLATE_BROWSER",e}({});const O={[N.Stacks]:{wrapLines:!0,visibleContent:["stackName","stackStatus","creationTime","templateDescription"],pageSize:100},[N.StackChangeSets]:{wrapLines:!0,visibleContent:["changeSetName","formattedCreationTime","status","description"],pageSize:100},[N.StackChangeSetChanges]:{wrapLines:!0,contentSelection:["action","logicalResourceId","physicalResourceId","resourceType","replacement"]},[N.StackChangeSetInputs]:{wrapLines:!0},[N.ChangeSetHookInvocations]:{visibleContent:["hookName","resourceLogicalId","resourceType","invocationPoint","failureMode","version"],wrapLines:!0},[N.StackEvents]:{wrapLines:!0,visibleContent:["formattedTimestamp","resourceStatus","logicalResourceId","resourceStatusReason"]},[N.StackOutputs]:{wrapLines:!0,visibleContent:["outputKey","outputValue","description","exportName"]},[N.StackResources]:{wrapLines:!0,visibleContent:["logicalResourceId","physicalResourceId","resourceType","resourceStatus","module"]},[N.StackParameters]:{wrapLines:!0,visibleContent:["parameterKey","parameterValue","resolvedValue"],pageSize:100},[N.StackTags]:{wrapLines:!0},[N.StackSets]:{wrapLines:!0,visibleContent:["stackSetName","stackSetId","permissionModel","description","driftStatus","driftTimestamp"],pageSize:100},[N.StackInstances]:{wrapLines:!0,visibleContent:["account","region","originatingOu","stackId","status","detailedStatus","lastOperationId","statusReason","driftStatus","driftTimestamp"]},[N.StackSetOperationResults]:{wrapLines:!0,visibleContent:["account","region","status","statusReason"]},[N.StackInstanceResourceDrifts]:{wrapLines:!0,visibleContent:["logicalResourceId","physicalResourceId","resourceType","stackResourceDriftStatus","timestamp"]},[N.Exports]:{wrapLines:!0,visibleContent:["name","value","exportingStackName","exportingStackId"]},[N.MyExtensionsModules]:{wrapLines:!0,visibleContent:["typeName","version","registry","publisher","description"],pageSize:100},[N.MyExtensionsHooks]:{pageSize:100,wrapLines:!0,visibleContent:["hookName","targetStacks","failureMode","version","lastUpdated","description"]},[N.ExtensionModuleResources]:{wrapLines:!0,visibleContent:["logicalId","type"],pageSize:100},[N.ExtensionHookTargetResourceTypes]:{wrapLines:!0,visibleContent:["resourceType","handlers"],pageSize:100},[N.ExtensionInputs]:{wrapLines:!0,visibleContent:["name","required","value"],pageSize:100},[N.MyExtensionsResourceTypes]:{wrapLines:!0,visibleContent:["typeName","version","registry","publisher","description"],pageSize:100},[N.PublicExtensions]:{pageSize:100},[N.TemplateBrowser]:{wrapLines:!0,pageSize:10,overviewExpanded:!0,visibleContent:["name","status","creationTime","lastUpdated","numberOfResources"]},[N.ResourceBrowser]:{pageSize:5,visibleContent:["resourceId"],wrapLines:!1}};let x=function(e){return e.ResourceBrowser="RESOURCE_BROWSER",e.StackDetails="STACK_DETAILS",e.StackSetOperations="STACK_SET_OPERATIONS",e.Default="DEFAULT",e}({}),D=function(e){return e[e.TOOLS_WIDTH=250]="TOOLS_WIDTH",e[e.NAVIGATION_WIDTH=250]="NAVIGATION_WIDTH",e[e.POLARIS_ELEMENT_MIN_WIDTH=280]="POLARIS_ELEMENT_MIN_WIDTH",e}({}),w=function(e){return e.ESSENTIAL="essential",e.PERFORMANCE="performance",e.FUNCTIONAL="functional",e.ADVERTISING="advertising",e}({}),Z=function(e){return e.SPOTLIGHT_BOOKMARKS="spotlightBookmarks",e}({}),U=function(e){return e.GAMMA="gamma",e.PRODUCTION="production",e}({}),F=function(e){return e[e.DEBUG=1]="DEBUG",e[e.TRACE=2]="TRACE",e[e.INFO=4]="INFO",e[e.WARNING=8]="WARNING",e[e.ERROR=16]="ERROR",e}({}),M=function(e){return e.ERROR="errorHandler",e.VALIDATION="validationHandler",e.INFO="infoHandler",e.UPLOAD="uploadHandler",e}({});const K=new class{constructor(){const e=window.amzn;e&&e.sm&&e.sm.ClientReporter?this.clientReporter=new window.amzn.sm.ClientReporter("cloudformationInlineStartTimer","/cloudformation/service/reporting"):this.clientReporter={error:function(){return null},fault:function(){return null},info:function(){return null}}}error(e){this.clientReporter.error(M.ERROR,{message:e.message,stack:e.stack})}fault(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.VALIDATION;const{message:a,stack:r,errorMessage:n}=e;this.clientReporter.fault(t,{message:a,stack:r,errorMessage:n})}info(e){this.clientReporter.info(M.INFO,{message:e.message})}},W=e=>{try{navigator.clipboard.writeText(e)}catch(e){K.error({level:F.ERROR,message:e})}};var z=a(28365),$=a(54427),V=a(68898),G=a(91077);const B=a(97666).P;function H(e){return r.createElement("span",{title:e.resourceId},e.resourceId)}const q=function(e){const t=(0,o.getRegion)(),a=`?region=${t}`,n=(0,G.getPartitionForRegion)(t);let s=e.resourceId;const i=e.displayText||e.resourceId;if(!s)return r.createElement("span",null,"-");const l={resourceType:e.resourceType};u.logEvent("created_resource_type",1,l);const c=B[e.resourceType];if(c){let t=c.DeepLink;if(t){const l=c.ResourceShouldMatchRegex;if(l&&!s.match(new RegExp(l)))return H(e);const o=c.Sub;if(o&&Object.keys(o).forEach((e=>{s=s.replace(e,o[e])})),c.TruncateAfterLastSlash&&(s=s.substring(0,s.lastIndexOf("/"))),c.LegacyLink&&c.LegacyLinkPartitions?.some((e=>new RegExp(e).test(n)))&&(t=c.LegacyLink),t=t.split("$host").join(k.host),t=t.split("$region").join(a),t.includes("$resourceIdNoEncoding"))t=t.split("$resourceIdNoEncoding").join(s);else{const e=encodeURIComponent(s),a=encodeURIComponent(e);t=t.split("$resourceIdDoubleEncoded").join(a),t=t.split("$resourceId").join(e)}return r.createElement(V.Z,{href:t,target:"_blank",rel:"noreferrer",ariaLabel:"Deep link","data-testid":"deep-link"},i,r.createElement(z.Z,{variant:"span",padding:{left:"xxs"}},r.createElement($.Z,{alt:"external",size:"normal",variant:"link",name:"external"})))}}return u.logEventNoSessionId("missing_deep_link",1,e.resourceType),H(e)},Y=new class{syntaxHighlight(e,t,a,n){const s=[],i=[],l=[],o="cfn-diff-";let c=!1,d="";const u=/\{/,m=/\}/,p=/\[/,_=/\]/,E=/\{\}|\[\]/,g=/\"\:/;let h=e;if(""===e)return s;"object"!=typeof e&&(h=JSON.parse(e));let S=JSON.stringify(h,void 0,2);return S=S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),S.split(/\n/).forEach((e=>{let h,S=e,T="",b="",f=!1;S=S.trim().split(g)[0].replace(/"/g,"");const k=()=>{const e=l.length-1;l[e]=l[e]+1,i.push(l[e])};E.test(e)?g.test(e)?(i.push(S),f=!0):l.length>0&&(k(),f=!0):u.test(e)?g.test(e)?i.push(S):l.length>0&&k():p.test(e)?(g.test(e)?i.push(S):l.length>0&&k(),l.push(-1)):m.test(S)?f=!0:_.test(S)?(f=!0,l.pop()):g.test(e)?(i.push(S),f=!0):l.length>0&&(k(),f=!0),T=i.join("/");const A="/".concat(T);let I=n.find((e=>e.propertyPath===A));if(c&&(I?(c=!1,b=o.concat("last"," "),d=""):(I={differenceType:d},b=o.concat("middle"," "))),I)switch(!u.test(e)&&!p.test(e)||c||(b=o.concat("first"," "),d=I.differenceType,c=!0),I.differenceType){case"NOT_EQUAL":b=b.concat(o,"not-equal");break;case"REMOVE":b=b.concat(o,"remove");break;case"ADD":b=b.concat(o,"add")}f&&i.pop();let y=t?"current":"expected";h=a.concat(" ",b," ",y),y=y.concat("-",T,"-",e),s.push(r.createElement("div",{className:h,key:y},e))})),s}},X=["AuthFailure","UnauthorizedOperation","OptInRequired","AccessDenied","AuthorizationFailure","InvalidClientTokenId","ValidationError"];function j(e,t){return X.includes(e?.code)?e?.message:t}var Q=a(14935);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},J.apply(this,arguments)}function ee(e){let{children:t,to:a,onClick:n,...s}=e,i=(0,Q.s0)();const l=(0,Q.oQ)(a);return r.createElement(V.Z,J({},s,{href:l,onFollow:e=>{e.preventDefault(),n?.(),i(a)}}),t)}function te(e){let{typeName:t,type:a,children:n}=e;const s=`/registry/activated-extensions/details/schema?${(0,b.stringify)({type:a,typeName:t})}`;return r.createElement(ee,{to:s},n)}const ae=new class{constructor(){var e,t,a;e=this,a={},t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="features"),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a;const r=document.querySelector("#meta-features-json");if(r){const e=r&&r.getAttribute("data-featuresjson");JSON.parse(e).forEach((e=>this.features[e.externalId]=e.enabled))}}getExperimentValue(e){return!!this.features.hasOwnProperty(e)&&this.features[e]}},re=e=>Array(e).fill(0).map((()=>Math.floor(16*Math.random()).toString(16))).join(""),ne=()=>`${Math.random().toString(36).slice(2)}-${Math.random().toString(36).slice(2)}`,se=()=>`${re(8)}-${re(4)}-${re(4)}-${re(4)}-${re(12)}`;var ie=a(99729),le=a.n(ie);const oe={500:"api_error_message_500"};function ce(e){const t=le()(e,"status"),a=le()(e,"message","api_error_message_500"),r=t?100*Math.floor(t/100):void 0;return t?oe[t]?g(oe[t]):oe[r]?g(oe[r]):a:a}function de(e,t,a){return t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ue{constructor(){de(this,"xsrfToken",{token:""});const e=document.querySelector("#console-preload-data");if(e){const t=this.parseValue(e.getAttribute("data-stacks"));this.stacks=t&&t.hasOwnProperty("stackSummaries")?t:null;const a={...this.parseValue(e.getAttribute("data-xsrf-token")),created:Date.now()};this.xsrfToken=a.hasOwnProperty("token")?a:{token:null}}}getStacks(){return this.stacks}parseValue(e){try{return JSON.parse(e.replace(ue.BEGIN_PATTERN,"{").replace(ue.END_PATTERN,"}"))}catch(e){return null}}}de(ue,"BEGIN_PATTERN",/\\\{/g),de(ue,"END_PATTERN",/\\\}/g);const me=new ue;var pe=a(98813);const _e=["aws","aws-cn","aws-us-gov"],Ee={[A.SS_ACCOUNTS_S3_URL]:["developer","beta","gamma"]},ge={[A.STACKSETS_BACKEND_REGION_BUILD]:["ap-south-1","eu-west-3","us-east-2","eu-west-1","eu-central-1","sa-east-1","us-east-1","ap-northeast-2","eu-west-2","ap-northeast-1","us-west-2","us-west-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-north-1","ap-east-1","af-south-1","eu-south-1","me-south-1","ap-northeast-3","me-central-1","ap-south-2","ap-southeast-4","il-central-1","eu-south-2","eu-central-2","cn-north-1","cn-northwest-1","us-gov-west-1","us-gov-east-1"],[A.PUBLISHER_CODE_CONNECTIONS]:["eu-north-1","ap-south-1","eu-west-3","us-east-2","eu-west-1","eu-central-1","sa-east-1","us-east-1","ap-northeast-2","eu-west-2","ap-northeast-1","us-west-1","us-west-2","ap-southeast-1","ap-southeast-2","ca-central-1"],[A.MODULE]:["us-east-1","us-east-2","us-west-1","us-west-2","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-southeast-1","ap-southeast-2","ap-southeast-3","ap-south-1","ap-east-1","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","af-south-1","cn-north-1","cn-northwest-1","us-gov-west-1","us-gov-east-1"],[A.HOOKS]:["eu-north-1","me-south-1","ap-south-1","eu-west-3","ap-southeast-3","us-east-2","af-south-1","eu-west-1","me-central-1","eu-central-1","sa-east-1","ap-east-1","us-east-1","ap-northeast-2","ap-northeast-3","eu-west-2","eu-south-1","ap-northeast-1","us-west-2","us-west-1","ap-southeast-1","ap-southeast-2","ca-central-1"],[A.APP_MANAGER]:["eu-north-1","me-south-1","cn-north-1","ap-south-1","eu-west-3","ap-southeast-3","us-east-2","af-south-1","eu-west-1","me-central-1","eu-central-1","sa-east-1","ap-east-1","us-east-1","ap-northeast-2","ap-northeast-3","eu-west-2","eu-south-1","ap-northeast-1","us-gov-east-1","us-gov-west-1","us-west-2","us-west-1","ap-southeast-1","ap-southeast-2","ca-central-1","cn-northwest-1"]},he={[A.SS_ORGS]:_e,[A.SS_DA]:_e,[A.SS_DRIFT_DETECTION]:_e,[A.SS_MANAGED_EXECUTION]:_e,[A.SS_ALT]:_e,[A.SS_FAILURE_HANDLE]:_e,[A.REGION_CONCURRENCY]:_e,[A.DRIFT_DETECTION]:_e,[A.CSNS]:_e,[A.RESOURCE_IMPORT]:_e,[A.UNO_REGISTRY]:["aws"],[A.PRE_UNO_REGISTRY]:_e,[A.PAUSE_AND_RESUME]:_e,[A.FEATURE_SPOTLIGHT]:_e},Se=()=>{const e=(0,o.getRegion)(),t=(0,o.getCustomContext)("partition"),a=(0,o.getCustomContext)("stage"),r={};for(const[e,t]of Object.entries(Ee))r[e]=t.includes(a);for(const[e,a]of Object.entries(he))r[e]=a.includes(t);for(const[t,a]of Object.entries(ge))r[t]=a.includes(e);return r};let Te={};const be=()=>{const e=(0,o.getRegion)()||"",t=(0,o.getCustomContext)("stage");return"test"===e.toLocaleLowerCase()||"Desktop"===e||"PreProd"===e||"PreProd2"===e||0===e.indexOf("Gamma-")||"production"!==t},fe=e=>(0,o.isTangerineBox)()?be()?Ae(e):Te[e]??!1:ae.getExperimentValue(e),ke=e=>{const t=document.createElement("meta");t.setAttribute("id","meta-features-json-tb"),t.setAttribute("name","features-json"),t.setAttribute("data-featuresjson",JSON.stringify(e)),document.getElementsByTagName("head")[0].prepend(t)},Ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.querySelector("#meta-features-json-tb"),a=t?.getAttribute("data-featuresjson")||"{}";return JSON.parse(a)[e]??!1},Ie=e=>(0,o.getRIPRegion)()===e?fe(A.STACKSETS_BACKEND_REGION_BUILD)&&(0,G.isDependencyIAOrGAInRegion)(e,"stackSets"):fe(A.CONSOLE_IA)?(0,G.isDependencyIAOrGAInRegion)(e,"stackSets"):(0,G.isDependencyGAInRegion)(e,"stackSets");var ye=a(37665),Ce=a(61586),Re=a.n(Ce);const ve=()=>{const e=(0,o.getRIPRegion)()||"us-east-1",t=(0,G.getPartitionForRegion)(e);return(0,G.getExternalServiceEndpoint)(e,"s3")||{aws:`s3.${e}.amazonaws.com`,"aws-cn":`s3.${e}.amazonaws.com.cn`,"aws-us-gov":`s3.${e}.amazonaws.com`,"aws-iso":`s3.${e}.c2s.ic.gov`,"aws-iso-b":`s3.${e}.sc2s.sgov.gov`}[t]},Le=(e,t)=>`https://${t}-${(0,o.getRIPRegion)()||"us-east-1"}.${ve()}/${e}`,Pe=()=>{const e=(0,o.getRIPRegion)()||"us-east-1",t="cloudformation-templates",a=-1!==["af-south-1","ap-south-2","ap-southeast-3","eu-central-2","eu-south-1","eu-south-2"].indexOf(e)?`${t}-${Re()(e).substring(0,11)}`:t,r=(0,G.getPartitionForRegion)(e);return-1!==["aws-iso","aws-iso-b"].indexOf(r)?[{label:"Simple",options:[{label:"LAMP Stack",description:"Create a LAMP Stack using a single EC2 instance and a local MySQL database for storage",value:Le("LAMP_Single_Instance.template",n=a)}]},{label:"Multi_AZ_Simple",options:[{label:"LAMP Stack",description:"Create a highly available, scalable LAMP stack with an Amazon RDS database instance for the backend data store",value:Le("LAMP_Multi_AZ.template",n)}]},{label:"Windows",options:[{label:"Windows features and roles",description:"This template enables roles and features of Windows Server",value:Le("Windows_Roles_And_Features.template",n)},{label:"Windows Active Directory",description:"This template creates a single server installation of Active Directory",value:Le("Windows_Single_Server_Active_Directory.template",n)}]}]:(e=>[{label:"Simple",options:[{label:"LAMP Stack",description:"Create a LAMP Stack using a single EC2 instance and a local MySQL database for storage",value:Le("LAMP_Single_Instance.template",e)},{label:"Ruby on Rails Stack",description:"Create a Ruby on Rails stack using a single EC2 instance with a local MySQL database for storage",value:Le("Rails_Single_Instance.template",e)},{label:"WordPress blog",description:"This template installs WordPress with a local MySQL database for storage",value:Le("WordPress_Single_Instance.template",e)}]},{label:"Multi_AZ_Simple",options:[{label:"LAMP Stack",description:"Create a highly available, scalable LAMP stack with an Amazon RDS database instance for the backend data store",value:Le("LAMP_Multi_AZ.template",e)},{label:"Ruby on Rails Stack",description:"Create a highly available, scalable Ruby on Rails stack with a multi-AZ MySQL Amazon RDS database instance for the backend data store",value:Le("Rails_Multi_AZ.template",e)},{label:"WordPress blog",description:"This template installs a highly-available, scalable WordPress deployment using a multi-az Amazon RDS database instance for storage",value:Le("WordPress_Multi_AZ.template",e)}]},{label:"Windows",options:[{label:"Windows features and roles",description:"This template enables roles and features of Windows Server",value:Le("Windows_Roles_And_Features.template",e)},{label:"Windows Active Directory",description:"This template creates a single server installation of Active Directory",value:Le("Windows_Single_Server_Active_Directory.template",e)}]}])(a);var n};var Ne=a(75940),Oe=a.n(Ne),xe=a(39727);class De extends r.Component{constructor(e){super(e)}getPopoverContent(){const e=this.props.moduleLogicalIdPath.split("/"),t=this.props.moduleTypenamePath.split("/").map((e=>r.createElement(te,{key:e,type:"MODULE",typeName:e},e)));return Oe()(e,t).map(((e,t,a)=>{const n=e[0],s=e[1],i=a.length-1===t;return r.createElement(r.Fragment,{key:n},n,"(",s,")",i?"":"/",r.createElement("br",null))}))}render(){return r.createElement(xe.Z,{dismissAriaLabel:"Dismiss",size:"large",position:"left",triggerType:"text",header:g("registry_module"),content:this.getPopoverContent()},r.createElement(z.Z,{variant:"p"},this.props.moduleLogicalIdPath))}}const we=De;var Ze=a(29029),Ue=a(45683);const Fe="CLEAR_ALERTS",Me="DISMISS_ALERT",Ke="PUSH_ALERT",We="SET_TABLE_PREFERENCES",ze="SET_ANNOUNCEMENT_BANNER",$e="TOGGLE_NAVBAR",Ve="TOGGLE_SPLIT_PANEL",Ge="HIDE_SPLIT_PANEL",Be="TOGGLE_FIRST_LOAD";function He(e){let{id:t=ne(),dismissible:a=!0,type:r="SUCCESS",header:n="",content:s=""}=e;return{type:Ke,payload:{id:t,dismissible:a,type:r,header:n,content:s}}}function qe(){return{type:Fe}}function Ye(e){return{type:Me,payload:e}}function Xe(e){return{type:$e,payload:e}}function je(e){return{type:Ve,payload:e}}function Qe(e){return{type:Ge,payload:e}}function Je(e){return{type:We,payload:e}}const et=(0,r.createContext)({modalType:null,setModalType:()=>null}),tt=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(null);return r.createElement(et.Provider,{value:{modalType:a,setModalType:n}},t)},at={filteringText:"",filteringStatus:"active",viewNested:"true",stackId:""},rt=["CREATE_FAILED","DELETE_FAILED","UPDATE_FAILED","ROLLBACK_COMPLETE","ROLLBACK_FAILED","UPDATE_ROLLBACK_FAILED","IMPORT_ROLLBACK_FAILED"],nt={STACKINFO:"stackinfo",EVENTS:"events",RESOURCES:"resources",OUTPUTS:"outputs",PARAMETERS:"parameters",TEMPLATE:"template",CHANGESETS:"changesets"},st={ACTIVE:"active",COMPLETE:"complete",FAILED:"failed",DELETED:"deleted",IN_PROGRESS:"in_progress"},it={active:["CREATE_IN_PROGRESS","UPDATE_COMPLETE","DELETE_FAILED","REVIEW_IN_PROGRESS","ROLLBACK_IN_PROGRESS","UPDATE_ROLLBACK_IN_PROGRESS","CREATE_COMPLETE","UPDATE_ROLLBACK_COMPLETE","UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS","ROLLBACK_COMPLETE","ROLLBACK_FAILED","CREATE_FAILED","UPDATE_ROLLBACK_FAILED","UPDATE_COMPLETE_CLEANUP_IN_PROGRESS","UPDATE_IN_PROGRESS","UPDATE_FAILED","DELETE_IN_PROGRESS","IMPORT_COMPLETE","IMPORT_IN_PROGRESS","IMPORT_ROLLBACK_IN_PROGRESS","IMPORT_ROLLBACK_FAILED","IMPORT_ROLLBACK_COMPLETE"],complete:["CREATE_COMPLETE","UPDATE_COMPLETE","UPDATE_ROLLBACK_COMPLETE","IMPORT_COMPLETE","IMPORT_ROLLBACK_COMPLETE"],failed:["CREATE_FAILED","DELETE_FAILED","UPDATE_FAILED","ROLLBACK_COMPLETE","ROLLBACK_FAILED","UPDATE_ROLLBACK_FAILED","IMPORT_ROLLBACK_FAILED"],in_progress:["CREATE_IN_PROGRESS","DELETE_IN_PROGRESS","REVIEW_IN_PROGRESS","ROLLBACK_IN_PROGRESS","UPDATE_IN_PROGRESS","UPDATE_ROLLBACK_IN_PROGRESS","UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS","IMPORT_IN_PROGRESS","IMPORT_ROLLBACK_IN_PROGRESS"],deleted:["DELETE_COMPLETE"]};let lt=function(e){return e.CANCEL_UPDATE_STACK="CANCEL_UPDATE_STACK",e.CONTINUE_UPDATE_ROLLBACK="CONTINUE_UPDATE_ROLLBACK",e.CREATE_SNS_TOPIC="CREATE_SNS_TOPIC",e.CREATE_CHANGE_SET="CREATE_CHANGE_SET",e.CREATE_NESTED_STACK_CHANGE_SET="CREATE_NESTED_STACK_CHANGE_SET",e.DELETE_STACK="DELETE_STACK",e.EDIT_TERMINATION_PROTECTION="EDIT_TERMINATION_PROTECTION",e.EXECUTE_CHANGE_SET="EXECUTE_CHANGE_SET",e.RETRY_FAILED_STACK="RETRY_FAILED_STACK",e.ROLLBACK_STACK="ROLLBACK_STACK",e.UPDATE_NESTED_STACK="UPDATE_NESTED_STACK",e.NESTED_STACK_ROOT_CAUSE_EVENT="NESTED_STACK_ROOT_CAUSE_EVENT",e}({});const ot={DELETE_STATUS_LIST:["CREATE_COMPLETE","CREATE_FAILED","CREATE_IN_PROGRESS","DELETE_FAILED","REVIEW_IN_PROGRESS","ROLLBACK_IN_PROGRESS","ROLLBACK_COMPLETE","ROLLBACK_FAILED","UPDATE_COMPLETE","UPDATE_ROLLBACK_FAILED","UPDATE_ROLLBACK_COMPLETE","UPDATE_FAILED","IMPORT_COMPLETE","IMPORT_ROLLBACK_FAILED","IMPORT_ROLLBACK_COMPLETE"],UPDATE_STATUS_LIST:["CREATE_COMPLETE","CREATE_FAILED","UPDATE_COMPLETE","UPDATE_ROLLBACK_COMPLETE","UPDATE_FAILED","IMPORT_COMPLETE","IMPORT_ROLLBACK_COMPLETE"],IMPORT_RESOURCES_STATUS_LIST:["CREATE_COMPLETE","UPDATE_COMPLETE","UPDATE_ROLLBACK_COMPLETE","IMPORT_COMPLETE","IMPORT_ROLLBACK_COMPLETE"],CHANGE_SET_STATUS_LIST:["CREATE_COMPLETE","UPDATE_COMPLETE","UPDATE_ROLLBACK_COMPLETE","REVIEW_IN_PROGRESS","IMPORT_COMPLETE","IMPORT_ROLLBACK_COMPLETE"],TERMINATION_PROTECTION_STATUS_LIST:["CREATE_COMPLETE","CREATE_FAILED","CREATE_IN_PROGRESS","DELETE_FAILED","DELETE_SKIPPED","REVIEW_IN_PROGRESS","ROLLBACK_COMPLETE","ROLLBACK_FAILED","ROLLBACK_IN_PROGRESS","UPDATE_COMPLETE","UPDATE_COMPLETE_CLEANUP_IN_PROGRESS","UPDATE_FAILED","UPDATE_IN_PROGRESS","UPDATE_ROLLBACK_COMPLETE","UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS","UPDATE_ROLLBACK_FAILED","UPDATE_ROLLBACK_IN_PROGRESS","IMPORT_COMPLETE","IMPORT_IN_PROGRESS","IMPORT_ROLLBACK_IN_PROGRESS","IMPORT_ROLLBACK_FAILED","IMPORT_ROLLBACK_COMPLETE"],CANCEL_UPDATE_STATUS_LIST:["UPDATE_IN_PROGRESS"],CONTINUE_UPDATE_ROLLBACK_STATUS_LIST:["UPDATE_ROLLBACK_FAILED"],DRIFT_DETECTION_STATUS_LIST:["ROLLBACK_FAILED","CREATE_FAILED","CREATE_COMPLETE","UPDATE_COMPLETE","UPDATE_ROLLBACK_COMPLETE","UPDATE_ROLLBACK_FAILED","DELETE_FAILED","IMPORT_COMPLETE","IMPORT_ROLLBACK_COMPLETE"]},ct="UPDATE_FAILED",dt=(0,r.createContext)({splitPanelConfigs:{open:!1,position:"bottom",type:x.Default,size:0},lastRefreshed:"",setLastRefreshed:()=>null,onSplitPanelPreferencesChange:()=>null,onSplitPanelToggle:()=>null,onChangeSplitPanelType:()=>null,onSplitPanelResize:()=>null}),ut={[x.ResourceBrowser]:{open:!1,position:"bottom",type:x.ResourceBrowser,size:.8*window.innerHeight},[x.StackDetails]:{open:!0,position:"side",type:x.StackDetails,size:(()=>{const e=D.NAVIGATION_WIDTH,t=D.POLARIS_ELEMENT_MIN_WIDTH,a=D.POLARIS_ELEMENT_MIN_WIDTH,r=window.innerWidth-e-t-100;return r>a?r:.6*window.innerHeight})()},[x.StackSetOperations]:{open:!1,position:"bottom",type:x.StackSetOperations,size:.8*window.innerHeight},[x.Default]:{open:!1,position:"bottom",type:x.Default,size:0}},mt=e=>{let{children:t}=e;const{pathname:a}=(0,Q.TH)(),n=(0,s.I0)(),[i,l]=(0,r.useState)(ut[x.Default]),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(x.Default),m=e=>{e!==d&&(u(e),l(ut[e]))};return(0,r.useEffect)((()=>{const e=(e=>{const t={"template-generator/(.*)":x.ResourceBrowser},a={};Object.values(nt).map((e=>{a[`stacks/${e}$`]=x.StackDetails}));const r={"stacksets/(.*)/operations":x.StackSetOperations},n={...t,...a,...fe(A.SS_FAILURE_HANDLE)?r:{}};return Object.entries(n).find((t=>new RegExp(t[0],"g").test(e.toLowerCase())))})(a),t=e?e[1]:x.Default;m(t)}),[a]),r.createElement(dt.Provider,{value:{lastRefreshed:o,setLastRefreshed:c,splitPanelConfigs:i,onSplitPanelToggle:e=>{let{detail:{open:t}}=e;n(je(t)),l({...i,open:t})},onSplitPanelResize:e=>{let{detail:{size:t}}=e;l({...i,size:t})},onSplitPanelPreferencesChange:e=>{let{detail:{position:t}}=e;l({...i,position:t})},onChangeSplitPanelType:m}},t)},pt=(0,r.createContext)({item:{},setItem:()=>null}),_t=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(null);return r.createElement(pt.Provider,{value:{item:a,setItem:n}},t)},Et=(0,r.createContext)({deleteFlag:()=>null,setFlag:()=>null,getFlag:()=>null,resetFlags:()=>null,DebugComponent:()=>r.createElement(r.Fragment,null,r.createElement("div",null))}),gt=e=>{let{children:t}=e;const[a,n]=(0,r.useState)({}),s={deleteFlag:e=>{n((t=>(delete t[e],t)))},setFlag:e=>{let{key:t,value:a=!0}=e;n((e=>({...e,[t]:a})))},getFlag:e=>a?.[e],resetFlags:()=>{n({})},DebugComponent:()=>r.createElement("div",{style:{position:"fixed",bottom:0,left:0,zIndex:1e6,background:"#4B5358",color:"white",width:300,borderRadius:"10px",padding:"1rem",boxSizing:"border-box",fontFamily:"sans-serif"}},r.createElement("h3",null,"Flag Debugger:"),r.createElement("pre",null,r.createElement("code",null,JSON.stringify(a,null,2))))};return r.createElement(Et.Provider,{value:s},t)};var ht=a(69072);let St=function(e){return e.HOME="home",e.STACKS="stacks",e.STACKSETS="stacksets",e.EXPORTS="exports",e.REGISTRY="registry",e.TEMPLATE_GENERATOR="template-generator",e.SPOTLIGHT="spotlight",e.ERRORS="errors",e}({}),Tt=function(e){return e.PUBLIC_EXTENSIONS="PUBLIC_EXTENSIONS",e.PUBLISHER_DETAILS="PUBLISHER_DETAILS",e.PUBLISHER_REGISTRATION="PUBLISHER_REGISTRATION",e.ACTIVATED_RESOURCE_TYPES_LIST="ACTIVATED_RESOURCE_TYPES_LIST",e.ACTIVATED_MODULES_LIST="ACTIVATED_MODULES_LIST",e.ACTIVATED_HOOKS_LIST="ACTIVATED_HOOKS_LIST",e.REGISTRY_PUBLISHER="REGISTRY_PUBLISHER",e.REGISTRY_ACTIVATE_PUBLIC_EXTENSION="REGISTRY_ACTIVATE_PUBLIC_EXTENSION",e.CHANGE_SET_DETAILS="CHANGE_SET_DETAILS",e.CREATE_CHANGE_SET_WIZARD="CREATE_CHANGE_SET_WIZARD",e.CREATE_IMPORT_RESOURCE_WIZARD="CREATE_IMPORT_RESOURCE_WIZARD",e.UPDATE_IMPORT_RESOURCE_WIZARD="UPDATE_IMPORT_RESOURCE_WIZARD",e.CREATE_STACK_WIZARD="CREATE_STACK_WIZARD",e.UPDATE_STACK_WIZARD="UPDATE_STACK_WIZARD",e.STACK_RESOURCE_DRIFTS="STACK_RESOURCE_DRIFTS",e.STACK_DRIFTS="STACK_DRIFTS",e.QUICK_CREATE_WIZARD="QUICK_CREATE_WIZARD",e.STACKS="STACKS",e.STACK_LIST="STACK_LIST",e.STACK_DETAILS="STACK_DETAILS",e.STACK_SETS_LIST="STACK_SETS_LIST",e.STACK_SETS_CREATE="STACK_SETS_CREATE",e.STACK_SETS_MANAGE="STACK_SETS_MANAGE",e.STACK_SETS_UPDATE_STACKS="STACK_SETS_UPDATE_STACKS",e.STACK_SETS_DELETE="STACK_SETS_DELETE",e.ADD_STACK_TO_STACK_SET="STACK_SETS_ADD_STACK_TO_STACK_SET",e.STACK_SETS_DETAILS_INFO="STACK_SETS_DETAILS_INFO",e.STACK_SETS_DETAILS_STACK_INSTANCES="STACK_SETS_DETAILS_STACK_INSTANCES",e.STACK_SETS_DETAILS_OPERATIONS="STACK_SETS_DETAILS_OPERATIONS",e.STACK_SETS_DETAILS_PARAMETERS="STACK_SETS_DETAILS_PARAMETERS",e.STACK_SETS_DETAILS_TEMPLATE="STACK_SETS_DETAILS_TEMPLATE",e.STACK_SETS_RESOURCE_DRIFTS="STACK_SETS_RESOURCE_DRIFTS",e.EXPORTS_LIST="EXPORTS_LIST",e.EXPORT_DETAILS="EXPORT_DETAILS",e.TEMPLATE_GENERATOR_LIST="TEMPLATE_GENERATOR_LIST",e.TEMPLATE_GENERATOR_DETAIL="TEMPLATE_GENERATOR_DETAIL",e.SPOTLIGHT="SPOTLIGHT",e}({}),bt=function(e){return e.CHANGE_SETS_TABLE_DELETE_BUTTON_CLICKED="CHANGE_SETS_TABLE_DELETE_BUTTON_CLICKED",e.CHANGE_SETS_DETAILS_PAGE_DELETE_BUTTON_CLICKED="CHANGE_SETS_DETAILS_PAGE_DELETE_BUTTON_CLICKED",e}({}),ft=function(e){return e.VIEW="view",e.CLICK="click",e.HOVER="hover",e.SCROLL="scroll",e.RENDER="render",e.PERFORMANCE="performance",e.LOCATION_CHANGE="locationChange",e.MOUSE_ENTER="mouseEnter",e.MOUSE_LEAVE="mouseLeave",e}({}),kt=function(e){return e.EVENT_CONTEXT="eventContext",e.EVENT_DETAIL="eventDetail",e.SERVICE_CONSOLE_PAGE="serviceConsolePage",e.SERVICE_SUBSECTION="serviceSubSection",e.EVENT_VALUE="eventValue",e.FUNNEL="funnel",e}({}),At=function(e){return e.EVENT_CONTEXT="eventContext",e.EVENT_TYPE="eventType",e.EVENT_DETAIL="eventDetail",e.EVENT_VALUE="eventValue",e.SERVICE_CONSOLE_PAGE="serviceConsolePage",e.FUNNEL="funnel",e.TASK_ID="taskId",e}({});const It={[St.HOME]:"home",[St.STACKS]:"stacks",[St.STACKSETS]:"stack-sets",[St.EXPORTS]:"exports",[St.REGISTRY]:"registry",[St.TEMPLATE_GENERATOR]:"template-generator",[St.SPOTLIGHT]:"spotlight",error:"errors"};let yt=function(e){return e.STACK_SET_DETAILS="STACK_SET_DETAILS",e}({});const Ct={[yt.STACK_SET_DETAILS]:{info:Tt.STACK_SETS_DETAILS_INFO,stacks:Tt.STACK_SETS_DETAILS_STACK_INSTANCES,parameters:Tt.STACK_SETS_DETAILS_PARAMETERS,operations:Tt.STACK_SETS_DETAILS_OPERATIONS,template:Tt.STACK_SETS_DETAILS_TEMPLATE}};let Rt=function(e){return e.VIEW_MY_HOOKS="VIEW_ACTIVATED_HOOKS",e.VIEW_MY_MODULES="VIEW_ACTIVATED_MODULES",e.VIEW_MY_RESOURCE_TYPES="RESOURCE_TYPES",e.ACTIVATE_HOOKS="ACTIVATE_HOOKS",e.CHANGE_SETS="CHANGE_SETS",e.ACTIVATE_MODULES="ACTIVATE_MODULES",e.ACTIVATE_RESOURCE_TYPES="ACTIVATE_RESOURCE_TYPES",e}({});class vt extends r.Component{componentDidUpdate(){this.props.hideOnLoad&&document.querySelector(".awsui-app-layout__toggle--tools").click()}render(){return r.createElement("div",{className:"custom-app-layout__tools"},r.createElement("div",{className:"custom-app-layout-drawer__header"},r.createElement(z.Z,{variant:"h2",className:"custom-app-layout-drawer__header-title"},this.props.header)),r.createElement("div",{className:"custom-app-layout-drawer__content"},this.props.content))}}const Lt={cloud_formation:r.createElement(vt,{hideOnLoad:!0,header:"CloudFormation",content:r.createElement("ul",{className:"cfn-list-unstyled"},r.createElement("li",null,r.createElement(V.Z,{href:`${k.docsPath}/Welcome.html`},g("getting_started_cloudformation"))))})},Pt=(0,s.$j)((e=>({...e.tool})))((e=>Lt[e.toolName]));var Nt=a(38214),Ot=a(59199);function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},xt.apply(this,arguments)}const Dt=e=>{let{analyticsKey:t,text:a,icon:n,onClick:s,...i}=e;return r.createElement(Ot.Z,xt({},i,{iconName:n,onClick:()=>{Boolean(t)&&u.logEvent(t,1),s?.()}}),a)};class wt extends r.Component{constructor(e){super(e),this.state={expanded:!1},this.handleClick=this.handleClick.bind(this)}handleClick(){this.setState({expanded:!this.state.expanded},(()=>{this.props.onChange&&this.props.onChange({expanded:this.state.expanded})}))}render(){const e=this.state.expanded?React.createElement("div",{className:"cfn-expandable-section-content"},this.props.content):null,t=this.state.expanded?"caret-down-filled":"caret-right-filled";return React.createElement("div",{className:"cfn-expandable-section"},React.createElement("span",{className:"cfn-expandable-section-header"},React.createElement(Button,{ariaLabel:"Expand section",variant:"icon",iconName:t,onClick:this.handleClick}),React.createElement(Box,{margin:{top:"xxs"}},this.props.header)),e)}}var Zt=a(11525),Ut=a(24906);let Ft=function(e){return e.NONE="NONE",e.ALL="ALL",e}({}),Mt=function(e){return e.WARN="WARN",e.FAIL="FAIL",e}({}),Kt=function(e){return e.HOOK="HOOK",e.RESOURCE="RESOURCE",e.MODULE="MODULE",e}({}),Wt=function(e){return e.THIRD_PARTY="THIRD_PARTY",e.AWS_TYPES="AWS_TYPES",e.REGISTERED="REGISTERED",e.ENABLED="ENABLED",e}({});const zt="AUTO_UPDATE_ON",$t="AUTO_UPDATE_OFF",Vt="CONFIGURE_NOW",Gt={targetStacks:Ft.NONE,failureMode:"WARN",properties:{}},Bt="HOOK",Ht="MODULE",qt="RESOURCE",Yt={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},Xt="ACTIVATED",jt="AWS_TYPES",Qt="REGISTERED",Jt="schema",ea="configuration",ta="description",aa="registry",ra="publisher",na="arn",sa="date",ia="version",la="targetStacks",oa="hookBehavior",ca="public-extensions",da=["GitHub","Bitbucket"],ua="hooks",ma="resource-types",pa="modules",_a="date";let Ea=function(e){return e.VISIBLE="VISIBLE",e.FILTERED="FILTERED",e.VIEW_DETAILS="VIEW_DETAILS",e.VIEW_DETAILS_AFTER_FILTER="VIEW_DETAILS_AFTER_FILTER",e.ACTIVATE_FROM_LIST="ACTIVATE_FROM_LIST",e.ACTIVATE_FROM_LIST_AFTER_FILTER="ACTIVATE_FROM_LIST_AFTER_FILTER",e.ACTIVATE_FROM_OVERVIEW="ACTIVATE_FROM_OVERVIEW",e.ACTIVATE_FROM_OVERVIEW_AFTER_FILTER="ACTIVATE_FROM_OVERVIEW_AFTER_FILTER",e.FINISH_FROM_OVERVIEW="FINISH_FROM_OVERVIEW",e.FINISH_FROM_OVERVIEW_AFTER_FILTER="FINISH_FROM_OVERVIEW_AFTER_FILTER",e.FINISH_FROM_LIST="FINISH_FROM_LIST",e.FINISH_FROM_LIST_AFTER_FILTER="FINISH_FROM_LIST_AFTER_FILTER",e}({});const ga={"resource-types":Rt.VIEW_MY_RESOURCE_TYPES,modules:Rt.VIEW_MY_MODULES,hooks:Rt.VIEW_MY_HOOKS},ha="fromList",Sa="listFiltered",Ta="isThirdParty",ba=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.toLocaleDateString((t||k.getLocale()).replace("_","-"),{year:"numeric",month:"long",day:"numeric"})},fa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a=>{t.length||(t=Object.keys(a));const r=(e,t)=>Array.isArray(e)?e.some((e=>r(e,t))):(e instanceof Date&&(e=ba(e)),"string"==typeof e&&e.toLowerCase().indexOf(t.toLowerCase())>-1);return t.some((t=>r(a[t],e)))}},ka=e=>{let{externalValues:t,parametersState:a,stackId:r="",stackName:n,templateSummary:s}=e;const i=Boolean(Object.keys(a)?.length),l=Boolean(Object.keys(s?.constraints||{})?.length);let c={};if(i&&l){const{modifiedTemplateParameters:e,parameterKeysToValue:i}=(e=>{let{externalValues:t,templateParameters:a,parametersState:r}=e;const n={};return{modifiedTemplateParameters:a.map((e=>{const a={...e},{parameterKey:s,parameterType:i}=a;n[s]=r[s].parameterValue;const l=RegExp(/^List<(?:.*)>$/).test(i);let o=i;if(l&&(o=o.slice(5,o.length-1)),t.hasOwnProperty(o)){const e=t[o]?.values?.map((e=>e.value))||[];if(l&&r[s]){const t=n?.[s].split(",").filter((t=>e.includes(t))),r=t?t.join():null;a.defaultValue=r,n[s]=r}else e.includes(n?.[s])||(a.defaultValue=null,n[s]=null)}return l&&n?.[s]&&(n[s]=n?.[s].split(",")),a})),parameterKeysToValue:n}})({externalValues:t,parametersState:a,templateParameters:s?.parameters}),l=(e=>{let{externalValues:t}=e;const a={};return Object.keys(t).forEach((e=>{a[e]=t[e].values})),a})({externalValues:t}),d=new ye.ab(e,i,n,(0,o.getRegion)(),(0,o.getCurrentAccountId)(),[],l,r);c=s.constraints.collapse(d)}return c},Aa=(e,t)=>{if(!t||!t.length)return null;for(const a of t){if(!a.hasOwnProperty("options")&&a.value===e)return a;if(a.hasOwnProperty("options"))for(const t of a.options)if(t.value===e)return t}return null},Ia=function(e,t){return e.reduce(((e,a)=>(e[a[t]]={...a},e)),{})},ya=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return void 0!==e?.find((e=>{const t=e.split("::");return 4===t.length&&"MODULE"===t[3]}))},Ca="n/a";function Ra(e){const t=JSON.parse(e),{Parameters:a}=t.properties;return a?Object.keys(a.properties).map((e=>{const t=a.properties[e];return{name:e,required:(a.required||[]).includes(e),value:t.default||Ca}})):[]}const va=e=>{const t={jsonString:e,parsedJSON:null,error:null};if(e)try{t.parsedJSON=JSON.parse(e)}catch(e){t.error=e}return t},La=e=>(Object.keys(e).forEach((t=>(null===e[t]||""===e[t]||void 0===e[t])&&delete e[t])),e),Pa=["CREATE_FAILED","DELETE_FAILED","UPDATE_FAILED","IMPORT_FAILED","IMPORT_ROLLBACK_FAILED","UPDATE_ROLLBACK_FAILED","ROLLBACK_FAILED","ROLLBACK_IN_PROGRESS"],Na=function(e){if(!e)return e;const t=e.split("/");return t.length>1&&t[1]||e};let Oa=function(e){return e.AZ_NAME="AWS::EC2::AvailabilityZone::Name",e.KEYPAIR_KEYNAME="AWS::EC2::KeyPair::KeyName",e.INSTANCE_ID="AWS::EC2::Instance::Id",e.HOSTEDZONE_ID="AWS::Route53::HostedZone::Id",e.SECURITYGROUP_ID="AWS::EC2::SecurityGroup::Id",e.SECURITYGROUP_NAME="AWS::EC2::SecurityGroup::GroupName",e.SUBNET_ID="AWS::EC2::Subnet::Id",e.VOLUME_ID="AWS::EC2::Volume::Id",e.VPC_ID="AWS::EC2::VPC::Id",e}({});const xa=e=>e?.tags?.Name?`(${e?.tags?.Name})`:"",Da=e=>{let{allowedValues:t,externalValue:a}=e;return 0!==t.length?t?.map((e=>({value:e,label:e}))):a?.loading||0===a?.values?.length?[]:a?.values.map((e=>({label:(e=>{let{externalValueItem:t,type:a}=e;if(!t||!a)return{};switch(a){case Oa.SUBNET_ID:case Oa.VPC_ID:{const e=t.additionalInfo?.CidrBlock?`(${t.additionalInfo?.CidrBlock}) `:"";return`${t.value} ${e}${xa(t)}`}case Oa.SECURITYGROUP_ID:return`${t?.additionalInfo?.GroupName?`${t?.additionalInfo?.GroupName} `:""}(${t.value}) ${xa(t)}`;case Oa.VOLUME_ID:case Oa.INSTANCE_ID:return`${t.value} ${xa(t)}`;case Oa.HOSTEDZONE_ID:return`${`${t.additionalInfo&&t.additionalInfo?.HostedZoneName} `||""}(${t.value})`;default:return t.value}})({externalValueItem:e,type:a.type}),value:e.value,tags:Object.values(e?.tags||{})})))||[]};function wa(e){return-1===ot.UPDATE_STATUS_LIST.indexOf(e)}function Za(e){return-1===ot.CHANGE_SET_STATUS_LIST.indexOf(e)}function Ua(e){return-1===ot.DELETE_STATUS_LIST.indexOf(e)}function Fa(e){return-1===ot.CANCEL_UPDATE_STATUS_LIST.indexOf(e)}function Ma(e){return-1===ot.CONTINUE_UPDATE_ROLLBACK_STATUS_LIST.indexOf(e)}function Ka(e){return-1===ot.DRIFT_DETECTION_STATUS_LIST.indexOf(e)}function Wa(e,t){return!!e&&!t&&"AVAILABLE"===e}function za(e,t){return!!e&&!t&&["CREATE_COMPLETE","DELETE_FAILED","FAILED"].some((t=>t===e))}function $a(e){return-1===ot.IMPORT_RESOURCES_STATUS_LIST.indexOf(e)}function Va(e){return e?[{id:"terminationProtectionActions",items:[{id:"editTerminationProtection",text:g("termination_protection_link"),disabled:(t=e.stackStatus,-1===ot.TERMINATION_PROTECTION_STATUS_LIST.indexOf(t))}]},{id:"driftActions",items:[{id:"viewDrifts",text:g("stacksList.view_drifts_link"),disabled:!e.stackStatus},{id:"driftDetection",text:g("stacksList.drift_detection_link"),disabled:Ka(e.stackStatus)}]},{id:"changeSetActions",items:[{id:"createChangeSetForCurrentStack",text:g("stacksList.create_change_set_current"),disabled:Za(e.stackStatus)}]},{id:"resourceImportActions",items:[{id:"importResourcesIntoStack",text:g("stack_actions_import_resources"),disabled:$a(e.stackStatus)}]},{id:"updateActions",items:[{id:"cancelUpdateStack",text:g("stacksList.cancel_update_stack_link"),disabled:Fa(e.stackStatus)},{id:"continueUpdateRollback",text:g("stacksList.continue_update_rollback_link"),disabled:Ma(e.stackStatus)}]},{id:"externalLinks",items:[{id:"viewInApplicationManager",text:g("view_in_application_manager"),disabled:!e.stackStatus}]}].filter((e=>fe(A.DRIFT_DETECTION)?e.id:"driftActions"!==e.id)).filter((e=>fe(A.RESOURCE_IMPORT)?e.id:"resourceImportActions"!==e.id)).filter((e=>fe(A.APP_MANAGER)?e.id:"externalLinks"!==e.id)):[];var t}var Ga=a(30454),Ba=a.n(Ga);function Ha(e){return"SERVICE_MANAGED"===e.permissionModel}function qa(e){if(!e)return[];return function(e){return Ba()(e).map((e=>("stackSetActions"===e.id&&(e.items=e.items.filter((e=>fe(A.SS_ORGS)?e.id:"edit_automatic_deployment"!==e.id))),e)))}([{id:"stackSetActions",text:"",items:[{text:g("add_stacks_to_stacksets"),id:"create_stackset_stacks"},{text:g("stackSet.list.manage_stackset"),id:"manage_stackset"},{text:g("stackSet.list.manage_stacks"),id:"manage_stacks"},{text:g("stackSet.list.delete_stacks"),id:"delete_stacks"},{text:g("edit_automatic_deployment"),id:"edit_automatic_deployment",disabled:!Ha(e)}]},{id:"stackSetDriftActions",text:"",items:[{text:g("stacksList.drift_detection_link"),id:"detect_stackset_drift"}]},{id:"deleteStackSetActions",text:"",items:[{text:g("stackSet.list.delete_stackset"),id:"delete_stackset"}]}].filter((e=>fe(A.SS_DRIFT_DETECTION)?e.id:"stackSetDriftActions"!==e.id)))}const Ya=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e);return t.length?t.map((t=>({logicalResourceId:t,...e[t]}))):[]},Xa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e);return t.length?t.map((t=>{let a=e[t].parameterValue;return e[t].usePreviousValue?a=g("stack.parameters_use_current"):e[t].noEcho?a=(a||"").replace(/./g,"*"):a||(a="-"),{parameterKey:t,parameterValue:a}})):[]},ja=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((e=>!e.markedForRemoval)).map((e=>({key:e.key,value:e.value}))):[]},Qa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e);return t.length?t.map((t=>{let a=e[t].parameterValue,r=e[t].overrideValue;return e[t].noEcho&&(a="****"),e[t].revertValue?r=g("stackSet.wizard.revert_to_stackset_value"):e[t].noEcho?r=r&&r.replace(/./g,"*")||"-":r||(r="-"),{parameterKey:t,parameterValue:a,overrideValue:r}})):[]},Ja=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t={};if(!e.length)return t;for(const a of e){const{logicalResourceIds:e=[],resourceIdentifiers:r=[],resourceType:n}=a,s={};if(r.length){const e=r[0].split(",");for(const t of e)s[t]=""}if(e.length)for(const a of e)t[a]={resourceType:n,resourceIdentifiers:s}}return t};var er=a(66527),tr=a(69497);const ar={parsedJSON:null,error:null},rr=e=>{let{templateBody:t}=e;return t.length?(e=>{try{return{...ar,parsedJSON:JSON.parse(e)}}catch(t){return(e=>{try{return{...ar,parsedJSON:er.zD(e,{schema:tr.oR})}}catch(e){return{...ar,error:e}}})(e)}})(t):ar};let nr=function(e){return e.LEAF="leafNode",e.PARENT="parentNode",e}({});const sr="$resource",ir="aws:cdk:path";function lr(e,t,a){const r=1===t.length,n=t=>Boolean(void 0===e[t]);if(r&&n(sr))return void(e[sr]=a);if(r&&n(t[0]))return void(e[t[0]]={[sr]:a});const s=t.shift();let i=e[s];i||(i={},e[s]=i),lr(i,t,a)}function or(e,t,a){const r=a.get(e);if(!r||"parentNode"!==r.type)return;const n=r.descendants||[];n.push(t),r.descendants=n,r?.parentId&&or(r.parentId,t,a)}const cr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(0,o.getCurrentAccountId)();return e.map((e=>e.id)).indexOf(t)>-1},dr=["IMPORT_STACKS_TO_STACK_SET","IMPORT_STACKS_TO_ORGANIZATION","IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS"];function ur(e){return!!dr.includes(e)}const mr=e=>{let{eventType:t=ft.CLICK,eventContext:a,eventDetail:r="",eventValue:n="",funnel:s=""}=e;try{const e=window&&window.panorama;e&&"function"==typeof window.panorama&&!0===window.panorama.enabled&&e("trackCustomEvent",{[At.EVENT_TYPE]:t,[At.EVENT_CONTEXT]:a,[At.EVENT_DETAIL]:r?JSON.stringify(r):"",[At.EVENT_VALUE]:n,[At.FUNNEL]:s,timestamp:Date.now()})}catch(e){}},pr=e=>{const t=e.split("/");if(t.length>1){const e=t[1];return It[e]||St.HOME}return St.HOME},_r=(e,t)=>a=>r.createElement("section",{"data-analytics-type":kt.SERVICE_CONSOLE_PAGE,"data-analytics":t},r.createElement(e,a)),Er=e=>{let{category:t,selectedFilterOption:a,currentStep:r,eventDetail:n={},eventType:s=ft.CLICK}=e;t===Wt.THIRD_PARTY&&mr({eventContext:r,eventValue:a,eventDetail:n,eventType:s})},gr=e=>/^list<aws::/i.test(e)?e.replace(/^list</i,"").replace(/>$/i,""):e;function hr(e){const t=va(e).parsedJSON;if(!t||!t.CloudFormationConfiguration||!t.CloudFormationConfiguration.HookConfiguration)return Gt;const a=t.CloudFormationConfiguration.HookConfiguration,r={targetStacks:a.TargetStacks,failureMode:a.FailureMode};return a.Properties&&(r.properties=a.Properties),r}const Sr=()=>{const e=(0,o.getRIPRegion)(),t=(0,G.getPartitionForRegion)(e);return(0,G.getGAorIARegionsInPartition)(t).sort().reduce(((e,t)=>(Ie(t)&&e.push({label:g(t),value:t}),e)),[])};function Tr(e){if(e){const t=e.split("/"),a=/[A-Za-z0-9]{2,64}::[A-Za-z0-9]{2,64}::[A-Za-z0-9]{2,64}(::MODULE){0,1}/g;return t[t.length-1].replace(/-/g,"::").match(a)?e:Tr(t.slice(0,-1).join("/"))}return e}const br=e=>{const t=(e||"").trim();return t?/^[a-z][a-z0-9\-]*$/i.test(t)?t.length>128?g("stack.parameters_validation_stack_name_too_long"):"":g("stack.parameters_validation_stack_name_invalid_chracters"):g("stack.parameters_validation_stack_name_required")},fr=e=>{const t=(e||"").trim();return t?/^[a-z][a-z0-9\-]*$/i.test(t)?t.length>256?g("stack.parameters_validation_stack_changeset_name_too_long"):"":g("stack.parameters_validation_stack_changeset_name_invalid_chracters"):g("stack.parameters_validation_stack_changeset_name_required")},kr=e=>Object.keys(e||{}).map((t=>e[t])).reduce(((e,t)=>e&&t),!0),Ar=(e,t,a)=>{if("number"===a&&Number(e)<0)return g("stackSet.wizard.number_error");if("percentage"===a){const e=Number(t);if(e<0||e>100)return g("stackSet.wizard.percentage_error")}return""};function Ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=Tr(e).split("/");return 0!==e.indexOf("arn:")||3!==t.length&&4!==t.length?e:t[t.length-1].replace(/-/g,"::")}const yr=e=>{let{value:t}=e;const a=new RegExp(/(\b(https?|ftp):\/\/[\-A-Z0-9+&@#\/%?=~_|!:,.;]*[\-A-Z0-9+&@#\/%=~_|])/gim);return t?a.test(t)?r.createElement(V.Z,{href:t,ariaLabel:"Auto link","data-testid":"auto-link"},t):r.createElement("span",{title:t},t):r.createElement("span",null,"-")};var Cr=a(53286),Rr=a(45329),vr=a(60882);const Lr=e=>{let{header:t,className:a,children:n,description:s,loading:i,actionGroup:l}=e;return r.createElement(Cr.Z,{className:a,"data-testid":"cfn-container",header:r.createElement(Rr.Z,{description:s,actions:l},t)},i?r.createElement(vr.Z,{size:"large"}):n)},Pr=function(e){return r.createElement(z.Z,{variant:"pre",fontSize:"body-s",textAlign:"left",padding:"xs",className:"cfn-code"},r.createElement(z.Z,{variant:"code","data-testid":"code-content"},e.children))},Nr=function(e){return r.createElement("div",{id:e.id},r.createElement(z.Z,{"data-testid":`${e.id}-key`,variant:"awsui-key-label"},e.itemKey),r.createElement("div",{"data-testid":`${e.id}-value`,className:!0===e.disabled?"text-status-inactive":""},e.itemValue||"-"))};var Or=a(39125);const xr=function(e){const t=e.loading?r.createElement(vr.Z,{size:"big"}):e.children,a=e.description??null;return r.createElement(Cr.Z,{id:e.id,"data-testid":e.id,header:r.createElement(Rr.Z,{variant:"h2",description:a,actions:e.headerActions},e.header)},r.createElement(Or.Z,{columns:e.columns,variant:"text-grid"},t))},Dr=(0,m.cV)(),wr=function(e){let{isInline:t=!0,pathName:a,fontSize:n="body-s",ariaLabel:s}=e;const i=Dr.processString(s);return r.createElement("span",null,t&&r.createElement(z.Z,{variant:"span",margin:{left:"xxs"}},r.createElement(V.Z,{fontSize:n,external:!0,externalIconAriaLabel:"Opens in a new tab",target:"_blank",href:`${k.docsPath}/${a}`,ariaLabel:`Learn more about ${i}`},g("learn_more_label"))),!t&&r.createElement(V.Z,{fontSize:n,external:!0,externalIconAriaLabel:"Opens in a new tab",target:"_blank",href:`${k.docsPath}/${a}`,ariaLabel:`Learn more about ${i}`},g("learn_more_label")))},Zr=function(e){return r.createElement(Ot.Z,{ariaLabel:"Refresh","data-testid":e.testId||"refresh-button",className:"stacks-refresh-button",disabled:Boolean(e.disabled),onClick:e.onRefresh,iconName:"refresh",loading:e.loading})};class Ur extends r.Component{constructor(e){var t,a,r;super(e),t=this,r=0,a=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(a="timeoutHandle"),a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,this.onRefresh=this.onRefresh.bind(this),this.onAutoRefresh=this.onAutoRefresh.bind(this)}onRefresh(){this.props.onRefresh(),this.setTimer()}onAutoRefresh(){this.props.onAutoRefresh(),this.setTimer()}componentDidMount(){this.setTimer()}componentWillUnmount(){this.clearTimer()}componentDidUpdate(){this.setTimer()}componentDidCatch(){this.clearTimer()}render(){return!!this.props.visible&&r.createElement(Zr,{onRefresh:this.onRefresh,loading:this.props.loading,disabled:this.props.disabled})}setTimer(){this.clearTimer(),this.timeoutHandle=window.setTimeout((()=>{this.props.onAutoRefresh?this.onAutoRefresh():this.onRefresh()}),this.timeout)}clearTimer(){window.clearTimeout(this.timeoutHandle)}get timeout(){return this.props.timeout||6e4}}const Fr=Ur;var Mr=a(36453);const Kr=k.getDocsPath(),Wr=(0,m.cV)(),zr=e=>{let{externalLinkText:t=g("learn_more_label"),ariaLabel:a=g("learn_more_label"),docsBaseUrl:n=Kr,isInline:s=!0,pathAlias:i}=e;const l=t===g("learn_more_label"),o=Wr.processString(a);return r.createElement("span",null,s&&r.createElement(z.Z,{variant:"span",margin:{left:"xxs"}},r.createElement(V.Z,{external:!0,ariaLabel:l?`Learn more about ${o}`:`${t}`,externalIconAriaLabel:"Opens in a new tab",target:"_blank",href:`${n}/${i}`},t)),!s&&r.createElement(V.Z,{external:!0,ariaLabel:l?`Learn more about ${o}`:`${t}`,externalIconAriaLabel:"Opens in a new tab",target:"_blank",href:`${n}/${i}`},t))},$r=()=>r.createElement($.Z,{alt:"Verified",svg:r.createElement("span",null,r.createElement("svg",{fill:"none",focusable:"false",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{clipRule:"evenodd",d:"M8.50487 0.316831L8 0.0215454L7.49513 0.316831C5.80168 1.3073 3.89857 1.88457 1.94024 2.00182L1 2.05811V3.00003V8.00003C1 9.83117 1.90789 11.541 3.1371 12.8849C4.37261 14.2358 6.01607 15.3128 7.68377 15.8687L8 15.9741L8.31623 15.8687C9.98393 15.3128 11.6274 14.2358 12.8629 12.8849C14.0921 11.541 15 9.83117 15 8.00003V3.00003V2.05811L14.0598 2.00182C12.1014 1.88457 10.1983 1.3073 8.50487 0.316831ZM3 8.00003V3.91111C4.74828 3.6914 6.44292 3.15425 8 2.32514C9.55708 3.15425 11.2517 3.6914 13 3.91111V8.00003C13 9.16889 12.4079 10.4191 11.3871 11.5351C10.4528 12.5566 9.2284 13.3862 8 13.8579C6.7716 13.3862 5.54719 12.5566 4.6129 11.5351C3.59211 10.4191 3 9.16889 3 8.00003ZM4.5 8.4778L7.31882 11L11.5 5.76422L10.3031 5L7.13134 8.97172L5.5396 7.54785L4.5 8.4778Z",fill:Mr.tfR,fillRule:"evenodd"})))}),Vr=()=>r.createElement(xe.Z,{content:r.createElement(r.Fragment,null,r.createElement("span",null,g("verified_publisher_tooltip_description")),r.createElement(zr,{ariaLabel:"verified publishers",pathAlias:"verified-publisher"})),dismissButton:!1,position:"right",triggerType:"text"},r.createElement(z.Z,{color:"text-body-secondary",variant:"span"},r.createElement(z.Z,{variant:"span",margin:{right:"xxs"}},r.createElement($r,null)),g("verified_publisher"))),Gr=[{value:"RESOURCE",label:g("resource_types")},{value:"MODULE",label:g("registry_modules")}],Br=[{value:"AWS_TYPES",label:g("aws")},{value:"THIRD_PARTY",label:g("third_party")}],Hr=e=>{let{extensionTypeFilterOptions:t=Gr,selectedExtensionTypeFilterOption:a=Kt.RESOURCE,onExtensionTypeSelectionChange:n,publisherFilterOptions:s=Br,selectedPublisherFilterOption:i=Wt.THIRD_PARTY,onPublisherSelectionChange:l}=e;const[o,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{i===Wt.THIRD_PARTY&&Er({category:Wt.THIRD_PARTY,selectedFilterOption:a,currentStep:Ea.VISIBLE,eventType:ft.VIEW,eventDetail:{extensionType:a}})}),[a,i]),r.createElement(Lr,{header:g("filter_header")},r.createElement(z.Z,{padding:{bottom:"xxs"}},r.createElement(Zt.Z,{headerText:g("extension_type_filter_header"),expanded:o,onChange:e=>c(e.detail.expanded)},r.createElement(z.Z,{padding:{horizontal:"xl"}},r.createElement(Ut.Z,{"data-testid":"select-extension-type",ariaRequired:!0,value:a,items:t,onChange:n})))),r.createElement(z.Z,{padding:{top:"xxs"}},r.createElement(Zt.Z,{headerText:g("registry_publisher"),expanded:d,onChange:e=>u(e.detail.expanded)},r.createElement(z.Z,{padding:{horizontal:"xl"}},r.createElement(Ut.Z,{ariaRequired:!0,"data-testid":"select-publisher",value:i,items:s,onChange:l})))))};var qr=a(84605);const Yr=e=>{let{text:t,copiedText:a,showLabel:n=!0}=e;return r.createElement(r.Fragment,null,r.createElement(xe.Z,{size:"small",position:"top",triggerType:"custom",dismissButton:!1,content:r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},a||g("copied"))},r.createElement(Ot.Z,{ariaLabel:"Copy",onClick:()=>W(t),iconName:"copy",variant:"inline-icon","data-testid":"copy-to-clipboard-button"})),r.createElement(z.Z,{variant:"span","data-testid":"copy-to-clipboard-text"},n&&t))};let Xr=function(e){return e.TEMPLATE_DOWNLOAD_ERROR="TEMPLATE_DOWNLOAD_ERROR",e.TEMPLATE_DOWNLOAD_COMPLETE="TEMPLATE_DOWNLOAD_COMPLETE",e.TEMPLATE_LIST_FILTER="TEMPLATE_LIST_FILTER",e.TEMPLATE_LIST_VIEW_RESOURCES="TEMPLATE_LIST_VIEW_RESOURCES",e.TEMPLATE_LIST_VIEW_TEMPLATE_CODE="TEMPLATE_LIST_VIEW_TEMPLATE_CODE",e.TEMPLATE_LIST_DELETE_START="TEMPLATE_LIST_DELETE_START",e.TEMPLATE_LIST_DELETE_FINISH="TEMPLATE_LIST_DELETE_FINISH",e.TEMPLATE_LIST_REFRESH="TEMPLATE_LIST_REFRESH",e.TEMPLATE_LIST_CREATE_START="TEMPLATE_LIST_CREATE_START",e.TEMPLATE_LIST_CREATE_DELETION_POLICY="TEMPLATE_LIST_CREATE_DELETION_POLICY",e.TEMPLATE_LIST_CREATE_UPDATE_REPLACE_POLICY="TEMPLATE_LIST_CREATE_UPDATE_REPLACE_POLICY",e.TEMPLATE_LIST_CREATE_TEMPLATE_TYPE="TEMPLATE_LIST_CREATE_TEMPLATE_TYPE",e.TEMPLATE_LIST_CREATE_FINISH="TEMPLATE_LIST_CREATE_FINISH",e.TEMPLATE_DETAIL_EDIT_START="TEMPLATE_DETAIL_EDIT_START",e.TEMPLATE_DETAIL_EDIT_FINISH="TEMPLATE_DETAIL_EDIT_FINISH",e.TEMPLATE_DETAIL_EDIT_DELETION_POLICY="TEMPLATE_DETAIL_EDIT_DELETION_POLICY",e.TEMPLATE_DETAIL_EDIT_UPDATE_REPLACE_POLICY="TEMPLATE_DETAIL_EDIT_UPDATE_REPLACE_POLICY",e.TEMPLATE_DETAIL_DELETE_START="TEMPLATE_DETAIL_DELETE_START",e.TEMPLATE_DETAIL_DELETE_FINISH="TEMPLATE_DETAIL_DELETE_FINISH",e.TEMPLATE_DETAIL_RESYNC_START="TEMPLATE_DETAIL_RESYNC_START",e.TEMPLATE_DETAIL_RESYNC_FINISH="TEMPLATE_DETAIL_RESYNC_FINISH",e.TEMPLATE_DETAIL_TAB="TEMPLATE_DETAIL_TAB",e.TEMPLATE_RESOURCES_REMOVE_START="TEMPLATE_RESOURCES_REMOVE_START",e.TEMPLATE_RESOURCES_REMOVE_FINISH="TEMPLATE_RESOURCES_REMOVE_FINISH",e.TEMPLATE_RESOURCES_EDIT_START="TEMPLATE_RESOURCES_EDIT_START",e.TEMPLATE_RESOURCES_EDIT_FINISH="TEMPLATE_RESOURCES_EDIT_FINISH",e.TEMPLATE_RESOURCES_ADD="TEMPLATE_RESOURCES_ADD",e.RESOURCE_BROWSER_TYPE_FILTER="RESOURCE_BROWSER_TYPE_FILTER",e.RESOURCE_BROWSER_RESOURCE_FILTER="RESOURCE_BROWSER_RESOURCE_FILTER",e.RESOURCE_BROWSER_ADD="RESOURCE_BROWSER_ADD",e.TEMPLATE_CODE_COPY="TEMPLATE_CODE_COPY",e.TEMPLATE_CODE_ADD="TEMPLATE_CODE_ADD",e.TEMPLATE_CODE_TYPE="TEMPLATE_CODE_TYPE",e}({}),jr=function(e){return e.TEMPLATE_GENERATOR_DETAIL_OVERVIEW="TEMPLATE_GENERATOR_DETAIL_OVERVIEW",e.TEMPLATE_GENERATOR_DETAIL_RESOURCES="TEMPLATE_GENERATOR_DETAIL_RESOURCES",e.TEMPLATE_GENERATOR_DETAIL_CODE="TEMPLATE_GENERATOR_DETAIL_CODE",e.TEMPLATE_GENERATOR_DETAIL="TEMPLATE_GENERATOR_DETAIL",e.TEMPLATE_GENERATOR_LIST_OVERVIEW="TEMPLATE_GENERATOR_LIST_OVERVIEW",e.TEMPLATE_GENERATOR_LIST_TABLE="TEMPLATE_GENERATOR_LIST_TABLE",e.RESOURCE_BROWSER_FILTER="RESOURCE_BROWSER_FILTER",e.RESOURCE_BROWSER_TABLE="RESOURCE_BROWSER_TABLE",e.TEMPLATE_GENERATOR_CREATE="TEMPLATE_GENERATOR_CREATE",e.TEMPLATE_GENERATOR_DELETE="TEMPLATE_GENERATOR_DELETE",e.TEMPLATE_GENERATOR_EDIT="TEMPLATE_GENERATOR_EDIT",e.TEMPLATE_GENERATOR_CODE_EXPAND="TEMPLATE_GENERATOR_CODE_EXPAND",e.TEMPLATE_DOWNLOAD_ERROR="TEMPLATE_DOWNLOAD_ERROR",e.TEMPLATE_DOWNLOAD_COMPLETE="TEMPLATE_DOWNLOAD_COMPLETE",e}({});const Qr=e=>{let{disabled:t,downloadBody:a,fileName:n,fileType:s,buttonLabel:i}=e;const[l,o]=r.useState(!1);return r.createElement(Ot.Z,{"data-testid":"template-code-download",disabled:t||!1,loading:l,iconName:"download",onClick:()=>function(e){let{downloadBody:t,fileName:a,fileType:r,setDownloading:n}=e;n(!0);try{const e=new Blob([t],{type:r});if(window.navigator&&window.navigator.msSaveBlob)return void window.navigator.msSaveBlob(e,a);const n=URL.createObjectURL(e),s=document.createElement("a");s.download=a,s.href=n,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n),mr({eventType:ft.CLICK,eventContext:jr.TEMPLATE_DOWNLOAD_COMPLETE,eventDetail:{fileName:a,fileType:r,fileLength:t.length}})}catch(e){mr({eventType:ft.PERFORMANCE,eventContext:jr.TEMPLATE_DOWNLOAD_ERROR,eventDetail:{fileName:a,fileType:r,fileLength:t.length,errorMessage:e instanceof Error?e.message:"Unknown Error"}})}n(!1)}({downloadBody:a,fileName:n,fileType:s,setDownloading:o})},i)},Jr=e=>{let{policy:t,children:a,renderIfFalse:n}=e;return r.createElement("div",null,fe(t)?a:n||null)};var en=a(33481);const tn=[],an=e=>{let{loading:t=!1,disableFreeTextFiltering:a=!1,filteringProperties:n,filteringInitialState:s,getFilteringTokensFromValues:i,onPropertyFilteringChange:l,i18nStrings:o,filteringOptions:c,clearFiltersRef:d,className:u}=e;const[m,p]=(0,r.useState)(tn),_={operation:"and",tokens:m};return(0,r.useImperativeHandle)(d,(()=>({clearFilters(){p(tn)}}))),r.createElement(en.Z,{className:u,disabled:t,query:_,hideOperations:!0,filteringProperties:n,onChange:e=>{const{tokens:t}=e.detail,a=t.reduce(((e,t)=>Object.assign(e,{[t.propertyKey]:t.value})),{...s});p(i(a)),l({detail:{values:a}})},i18nStrings:o,filteringOptions:c,disableFreeTextFiltering:a})};function rn(){const e=new Date;e.setMonth(e.getMonth()+6),document.cookie=`awsc-experiment-override=${encodeURIComponent('{"cloudformationconsole_routing": "cloudformation"}')};expires=${e.toUTCString()};secure`,window.location.reload()}const nn=function(){const e=[{type:"info",dismissible:!1,content:r.createElement("span",null,g("try_it_out")),action:r.createElement(Dt,{onClick:rn,text:g("old_console_link_text")}),header:g("welcome_to_the_new_console")}];return r.createElement(Jr,{policy:A.NEXTGEN_CONSOLE_MIGRATION_PHASE},r.createElement(Nt.Z,{items:e,className:"e2e-test-console-migration-banner"}))};var sn=a(766);class ln extends r.Component{constructor(e){super(e),this.state={componentHasErrors:!1}}componentDidCatch(e,t){this.setState({componentHasErrors:!0}),e&&e.message&&K.fault({message:e.message,stack:`${e.stack}; ${t&&t.componentStack}`})}render(){return this.state.componentHasErrors?r.createElement(z.Z,{margin:{bottom:"xxl"}},r.createElement(sn.Z,{type:"error",header:g("errors.default_error_header")},g(`errors.${this.props.errorKey||"default_error"}_message`))):this.props.children}}const on=(0,m.cV)();function cn(e){const t=e.alerts.map((t=>({type:(t.type||"info").toLowerCase(),dismissible:t.dismissible||!1,onDismiss:()=>e.dismissAlert(t),content:on.processString(t.content),header:on.processString(t.header),id:t.id})));return r.createElement(Nt.Z,{className:"e2e-test-notification",items:t})}const dn=(0,s.$j)((e=>{const{alerts:t,appMetadata:a}=e;return{...t,announcementBanners:a.announcementBanners}}),{setAnnouncementBanner:function(e){return{type:ze,payload:e}},dismissAlert:Ye})((function(e){let t;return e.alerts&&e.alerts.length?(window.setTimeout((()=>{const e=document.querySelector(".cfn-alerts-container");e&&e.scrollIntoView()}),100),t=r.createElement(cn,e)):t=null,r.createElement("div",{className:"cfn-alerts-container"},r.createElement(nn,null),t)}));var un=a(25279);function mn(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=decodeURIComponent(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return 0===t.indexOf("arn:")&&3===t.split("/").length?t.split("/")[1]:e?t.charAt(0).toUpperCase()+t.slice(1):t}function pn(){switch(Ir(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("::").pop()){case"MODULE":return{text:g("registry_modules"),path:"modules"};case"HOOK":return{text:g("registry_hooks"),path:"hooks"};default:return{text:g("resource_types"),path:"resource-types"}}}const _n=e=>{const t=decodeURIComponent(e);return e&&t.split(":")[0]},En=e=>({text:g("breadcrumbs_stacks"),href:`#/stacks${e&&`?${e}`}`});function gn(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/stackinfo";return{text:mn(t),href:`#/stacks${a}?${e}`}}function hn(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{text:g("breadcrumbs_change_sets_details",mn(t)),href:`#/stacks/changesets${a}?${(0,b.stringify)({stackId:e,changeSetId:t})}`}}function Sn(e){return{text:g("breadcrumbs_drifts"),href:`#/stacks/drifts?${(0,b.stringify)({stackId:e})}`}}function Tn(e,t,a,r){return{text:g("breadcrumbs_drifts"),href:`#/stacksets/${e}/drifts?operationId=${t}&stackInstanceAccount=${a}&stackInstanceRegion=${r}`}}function bn(e,t){return{text:t,href:`#/stacks/drifts/info?${(0,b.stringify)({stackId:e,logicalResourceId:t})}`}}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{text:g("breadcrumbs_create"),href:`#/stacks/create${e}`}}function kn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{text:g("breadcrumbs_update"),href:`#/stacks/update${t}?${(0,b.stringify)({stackId:e})}`}}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{text:g("import_resources_breadcrumb"),href:`#/stacks/create-import-resources${e}`}}function In(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{text:g("import_resources_breadcrumb"),href:`#/stacks/update-import-resources${t}?${(0,b.stringify)({stackId:e})}`}}function yn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{text:g("breadcrumbs_create_change_set"),href:`#/stacks/changesets/create${t}?${(0,b.stringify)({stackId:e})}`}}function Cn(e){return{text:Ir(e),href:`#/registry/resourceTypes/details?${(0,b.stringify)({arn:e})}`}}function Rn(e){const t=pn(e);return{text:`${g("registry_title")}: ${t.text}`,href:`#/registry/activated-extensions/${t.path}`}}function vn(e){return{text:fe(A.UNO_REGISTRY)?g("registry_my_extensions_breadcrumb"):g("registry_title"),href:`#/registry/activated-extensions/${e}`}}function Ln(e,t){return{text:Ir(t),href:`#/registry/public-extensions/details/${e}`}}function Pn(e,t,a){return{text:t?Ir(t):a,href:`#/registry/activated-extensions/details/${e}`}}function Nn(e){return{text:g("activate_extension_header",Ir(e)),href:"#/registry/activate-extension"}}function On(e){return{text:g("configure_extension_header",Ir(e)),href:"#/registry/configure-extension"}}function xn(e,t){return{text:t,href:`#/template-generator/details/${e}`}}const Dn={text:g("public_extensions_header"),href:"#/registry/public-extensions"},wn={text:g("publisher_registration_page_title"),href:"#/registry/publisher/details"},Zn={text:g("register_publisher"),href:"#/registry/publisher/register"},Un={text:g("breadcrumbs_exports"),href:"#/exports"},Fn={text:g("breadcrumbs_stacksets"),href:"#/stacksets"},Mn={text:g("registry.breadcrumbs_resource_types"),href:"#/registry/resourceTypes"},Kn=e=>{let{path:t,analyticsKey:a,initialBreadcrumbs:r,finalBreadcrumbFn:n,steps:s}=e;return[{path:t,analyticsKey:a,breadcrumbs:[...r,n()]},...s.map((e=>({path:`${t}/${e}`,analyticsKey:`${a}_${e}`,breadcrumbs:[...r,n(e)]})))]},Wn=e=>({text:g("breadcrumbs_stackset_details",_n(e)),href:`#/stacksets/${e}/`}),zn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{text:g("breadcrumbs_create_stackset"),href:"#/stacksets/create"+(e?`/${e}`:"")}},$n={text:g("template_generator"),href:"#/template-generator"},Vn={text:g("spotlight"),href:"#/spotlight"};function Gn(e,t){return{text:t,href:`#/drift-details?${(0,b.stringify)({stackId:e,logicalResourceId:t})}`}}function Bn(e){const t=e.pathname.split("/"),{changeSetId:a="",logicalResourceId:r="",arn:n="",typeArn:s="",typeName:i="",templateName:l="",operationId:o="",stackInstanceAccount:c="",stackInstanceRegion:d="",...u}=(0,b.parse)(e.search),{stackId:m="",...p}=u,_=(0,b.stringify)(u),E=(0,b.stringify)(p),h="stacksets"!==t[1]||["create","manage"].includes(t[2])?null:t[2]||null,S=t.length>=3&&"exports"===t[1]&&t[2]||null,T=t.length>=4&&"errors"===t[1]&&t[3]||null,f=t.length>=4&&"activated-extensions"===t[2]&&t[3]||null,k=t.length>=5&&"details"===t[3]&&t[4]||null,I=t.length>=4&&"template-generator"===t[1]&&"details"===t[2]&&t[3]||null,y=Kn({path:"/stacksets/create",analyticsKey:"stacksets_create",initialBreadcrumbs:[Fn],finalBreadcrumbFn:zn,steps:["template","details","options","deployment","review"]}),C=Kn({path:`/stacksets/${h}/create`,analyticsKey:"stacksets_add_stacks",initialBreadcrumbs:[Fn],finalBreadcrumbFn:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{text:g("breadcrumbs_create_stackset_stacks",_n(e)),href:`#/stacksets/${e}/create${t?`/${t}`:""}`}}(h),steps:["deployment","overrides","review"]}),R=Kn({path:`/stacksets/${h}/delete`,analyticsKey:"stacksets_delete_stacks",initialBreadcrumbs:[Fn],finalBreadcrumbFn:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{text:g("breadcrumbs_delete_stackset_stacks",_n(e)),href:`#/stacksets/${e}/delete${t?`/${t}`:""}`}}(h),steps:["deployment","review"]}),v=Kn({path:`/stacksets/${h}/manage`,analyticsKey:"stacksets_manage_stackset",initialBreadcrumbs:[Fn],finalBreadcrumbFn:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{text:g("breadcrumbs_manage_stackset",_n(e)),href:`#/stacksets/${e}/manage${t?`/${t}`:""}`}}(h),steps:["template","details","options","deployment","review"]}),L=Kn({path:`/stacksets/${h}/manage/stacks`,analyticsKey:"stacksets_manage_stacks",initialBreadcrumbs:[Fn],finalBreadcrumbFn:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{text:g("breadcrumbs_override_stackset_stacks",_n(e)),href:`#/stacksets/${e}/manage/stacks${t?`/${t}`:""}`}}(h),steps:["deployment","overrides","review"]});return[{path:"/stacks",analyticsKey:"stacks",breadcrumbs:[En(_)]},{path:"/stacks/stackinfo",analyticsKey:"stack_detail_overview",breadcrumbs:[En(_),gn(_,m,"/stackinfo")]},{path:"/stacks/events",analyticsKey:"stack_detail_events",breadcrumbs:[En(_),gn(_,m,"/events")]},{path:"/stacks/resources",analyticsKey:"stack_detail_resources",breadcrumbs:[En(_),gn(_,m,"/resources")]},{path:"/stacks/outputs",analyticsKey:"stack_detail_outputs",breadcrumbs:[En(_),gn(_,m,"/outputs")]},{path:"/stacks/parameters",analyticsKey:"stack_detail_parameters",breadcrumbs:[En(_),gn(_,m,"/parameters")]},{path:"/stacks/template",analyticsKey:"stack_detail_template",breadcrumbs:[En(_),gn(_,m,"/template")]},{path:"/stacks/changesets",analyticsKey:"stacks_changesets",breadcrumbs:[En(_),gn(_,m,"/changesets")]},{path:"/stacks/changesets/changes",analyticsKey:"changesets_detail_changes",breadcrumbs:[En(_),gn(_,m,"/changesets"),hn(m,a,"/changes")]},{path:"/stacks/changesets/inputs",analyticsKey:"changesets_detail_inputs",breadcrumbs:[En(_),gn(_,m,"/changesets"),hn(m,a,"/inputs")]},{path:"/stacks/changesets/template",analyticsKey:"changesets_detail_template",breadcrumbs:[En(_),gn(_,m,"/changesets"),hn(m,a,"/template")]},{path:"/stacks/changesets/json",analyticsKey:"changesets_detail_json",breadcrumbs:[En(_),gn(_,m,"/changesets"),hn(m,a,"/json")]},{path:"/stacks/changesets/hooks",analyticsKey:"changesets_detail_hooks",breadcrumbs:[En(_),gn(_,m,"/changesets"),hn(m,a,"/hooks")]},{path:"/stacks/drifts",analyticsKey:"stacks_drifts",breadcrumbs:[En(_),gn(_,m),Sn(m)]},{path:"/stacks/drifts/info",analyticsKey:"drifts_resource_detail",breadcrumbs:[En(_),gn(_,m),Sn(m),bn(m,r)]},{path:"/stacks/create",analyticsKey:"stacks_create",breadcrumbs:[En(E),fn()]},{path:"/stacks/quickcreate",analyticsKey:"stacks_quickcreate",breadcrumbs:[En(E),{text:g("breadcrumbs_create"),href:"#/stacks/quickcreate"}]},{path:"/stacks/update",analyticsKey:"stacks_update",breadcrumbs:[En(E),gn(_,m),kn(m)]},{path:"/stacks/create-import-resources",analyticsKey:"import_create",breadcrumbs:[En(E),An()]},{path:"/stacks/update-import-resources",analyticsKey:"import_update",breadcrumbs:[En(E),gn(_,m),In(m)]},{path:"/stacks/changesets/create",analyticsKey:"stacks_cs_create",breadcrumbs:[En(E),gn(_,m),yn(m)]},{path:"/exports",analyticsKey:"exports",breadcrumbs:[Un]},{path:`/exports/${S}`,analyticsKey:"exports_details",breadcrumbs:[Un,{text:g("breadcrumbs_exports_details",S),href:`#/exports/${S}`}]},{path:"/stacksets",analyticsKey:"stacksets",breadcrumbs:[Fn]},...y,...C,...R,...v,...L,{path:`/stacksets/${h}`,analyticsKey:"stacksets_details",breadcrumbs:[Fn,Wn(h)]},{path:`/stacksets/${h}/info`,analyticsKey:"stacksets_details_info",breadcrumbs:[Fn,Wn(h)]},{path:`/stacksets/${h}/stacks`,analyticsKey:"stacksets_details_stacks",breadcrumbs:[Fn,Wn(h)]},{path:`/stacksets/${h}/operations`,analyticsKey:"stacksets_details_operations",breadcrumbs:[Fn,Wn(h)]},{path:`/stacksets/${h}/parameters`,analyticsKey:"stacksets_details_parameters",breadcrumbs:[Fn,Wn(h)]},{path:`/stacksets/${h}/template`,analyticsKey:"stacksets_details_template",breadcrumbs:[Fn,Wn(h)]},{path:`/stacksets/${h}/drifts/info`,analyticsKey:"stacksets_drift_details",breadcrumbs:[Fn,Wn(h),Tn(h,o,c,d),Gn(m,r)]},{path:`/stacksets/${h}/drifts`,analyticsKey:"stacksets_drifts",breadcrumbs:[Fn,Wn(h),Tn(h,o,c,d)]},{path:"/registry/resourceTypes",analyticsKey:"resourceTypes",breadcrumbs:[Mn]},{path:"/registry/resourceTypes/details",analyticsKey:"resourceTypes_details",breadcrumbs:[Mn,Cn(n)]},{path:"/registry/public-extensions",analyticsKey:"registry_publicExtensions",breadcrumbs:[Dn]},{path:"/registry/activate-extension",analyticsKey:`registry_activateExtension_${f}`,breadcrumbs:[Dn,Nn(s)]},{path:"/registry/configure-extension",analyticsKey:`registry_configureExtension_${f}`,breadcrumbs:[vn("resource-types"),On(s)]},{path:`/registry/activated-extensions/${f}`,analyticsKey:`registry_myExtensions_${f}`,breadcrumbs:[vn(f)]},{path:`/registry/public-extensions/details/${k}`,analyticsKey:`registry_details_${f}`,breadcrumbs:[fe(A.UNO_REGISTRY)?Dn:Rn(n),Ln(k,n)]},{path:`/registry/activated-extensions/details/${k}`,analyticsKey:`registry_details_${f}`,breadcrumbs:[fe(A.UNO_REGISTRY)?vn(pn(n).path):Rn(n),Pn(k,n,i)]},{path:"/registry/publisher/details",analyticsKey:"registry_publisher_details",breadcrumbs:[wn]},{path:"/registry/publisher/register",analyticsKey:"registry_publisher_registration_wizard",breadcrumbs:[wn,Zn]},{path:"/template-generator",analyticsKey:"template_generator",breadcrumbs:[$n]},{path:`/template-generator/details/${I}`,analyticsKey:"template_generator_details",breadcrumbs:[$n,xn(I,l)]},{path:"/spotlight",analyticsKey:"spotlight",breadcrumbs:[Vn]},{path:"/errors",analyticsKey:"errors",breadcrumbs:[]},{path:"/errors/page-notfound",analyticsKey:"error_page_not_found",breadcrumbs:[]},{path:`/errors/stack-notfound/${T}`,analyticsKey:"error_stack_not_found",breadcrumbs:[]},{path:`/errors/changeset-notfound/${T}`,analyticsKey:"error_change_set_not_found",breadcrumbs:[]}]}const Hn=()=>{const e=function(e){const t=Bn(e).filter((t=>t.path===e.pathname)),a={text:g("breadcrumbs_cloudformation"),href:"#/"};if(1===t.length){let e=t[0].breadcrumbs;return 0!==e.length&&(e=[a,...e]),e}const r=e.pathname.split("/");r.shift();let n=r.map((e=>({text:mn(e,!0),href:`#/${e}`})));return n=[a,...n],n}((0,Q.TH)());return r.createElement(un.Z,{ariaLabel:"Breadcrumbs",className:"e2e-test-breadcrumb-group",items:e,expandAriaLabel:"Show Path"})};var qn=a(21706);const Yn=(e,t,a,r)=>{let n=`#${e}`;return t&&e.includes("/stacks/")&&(n=`#/stacks/stackinfo${r}`),-1!==["/stacks/drifts","/stacks/drifts/info"].indexOf(e)&&(n=`#/stacks/drifts${a}`),e.includes("/registry/resourceTypes")&&(n="#/registry/resourceTypes"),e.includes("/registry/activated-extensions")&&(n="#/registry/activated-extensions"),e.includes("/registry/publisher")&&(n="#/registry/publisher"),e.includes("/registry/activate-extension")&&(n="#/registry/public-extensions"),e.includes("/registry/configure-extension")&&(n="#/registry/activated-extensions"),e.match(/\/registry\/.*extensions\/details/g)&&(n=fe(A.UNO_REGISTRY)&&e.includes("public")?"#/registry/public-extensions":"#/registry/activated-extensions"),e.includes("/template-generator")&&(n="#/template-generator"),n},Xn=r.createElement(z.Z,{color:"text-status-info",display:"inline"},r.createElement(xe.Z,{header:g("spotlight_side_nav_popup_header"),size:"medium",triggerType:"text",content:g("spotlight_intro_description"),renderWithPortal:!0,dismissAriaLabel:"Dismiss"},r.createElement(z.Z,{color:"text-status-info",fontSize:"body-s",fontWeight:"bold"},g("no_concat_new")))),jn=e=>e.filter((e=>e.enabled)),Qn=()=>{const{pathname:e,search:t}=(0,Q.TH)(),{stackId:a=""}=(0,b.parse)(t),n=e.split("/"),s=decodeURIComponent(a),i="stacksets"===n[1]&&-1===["create","edit"].indexOf(n[2])&&n[2]||null,l="exports"===n[1]&&n.length>=3&&n[2]||null,c=e.includes("/stacksets/")?`#${e}`:`#/stacksets/${i}/info`,d=s?`?${(0,b.stringify)({stackId:s})}`:"",u=`?${(0,b.stringify)({...at,stackId:s})}`,m=s&&e.includes("/stacks"),p=[{type:"link",text:g("navigation_stack_details"),href:`#/stacks/stackinfo${u}`,enabled:!0},{type:"link",text:g("navigation_drifts"),href:`#/stacks/drifts${d}`,enabled:fe(A.DRIFT_DETECTION)}],_=[{type:"link",text:g("public_extensions"),href:"#/registry/public-extensions",enabled:fe(A.UNO_REGISTRY)},{type:"link",text:fe(A.PRE_UNO_REGISTRY)?fe(A.UNO_REGISTRY)?g("activated_extensions"):g("registry_title"):g("registry.resource_types"),href:fe(A.PRE_UNO_REGISTRY)?"#/registry/activated-extensions":"#/registry/resourceTypes",enabled:!0},{type:"link",text:g("registry_publisher"),href:"#/registry/publisher",enabled:fe(A.UNO_REGISTRY)}],E=[{type:m?"link-group":"link",text:g("stacks_title"),href:"#/stacks",items:m?jn(p):[],enabled:!0},{type:e.includes("/stacksets/")?"link-group":"link",text:g("stacksets_title"),href:"#/stacksets",items:e.includes("/stacksets/")?[{type:"link",text:g("navigation_stackset_details"),href:c}]:[],enabled:Ie((0,o.getRIPRegion)())},{type:l?"link-group":"link",text:g("exports_title"),href:"#/exports",items:l?[{type:"link",text:g("navigation_exports_details"),href:`#/exports/${l}`}]:[],enabled:!0},{type:"divider",enabled:!0},{type:"link",text:g("designer_title"),href:k.constructComposerUrl(null,null,null,null,null),enabled:!0},{type:"link",text:g("template_generator"),href:"#/template-generator",info:r.createElement(z.Z,{color:"text-status-info",display:"inline"},r.createElement(xe.Z,{dismissAriaLabel:"Dismiss",header:g("template_generator_side_nav_popup_header"),size:"medium",triggerType:"text",content:r.createElement(r.Fragment,null,g("template_generator_intro_description"),r.createElement(z.Z,null,r.createElement(zr,{ariaLabel:"CloudFormation template generator",pathAlias:"generate-template"}))),renderWithPortal:!0},r.createElement(z.Z,{color:"text-status-info",fontSize:"body-s",fontWeight:"bold"},g("no_concat_new")))),enabled:fe(A.JAZZ)},{type:"divider",enabled:!0},{type:"section",text:g("registry_title"),items:jn(_),enabled:fe(A.PRE_UNO_REGISTRY)||fe(A.UNO_REGISTRY)},{type:"divider",enabled:fe(A.PRE_UNO_REGISTRY)||fe(A.UNO_REGISTRY)},{type:"link",text:g("spotlight"),href:"#/spotlight",info:Xn,enabled:fe(A.FEATURE_SPOTLIGHT)}];return r.createElement("span",null,r.createElement(qn.Z,{activeHref:Yn(e,s,d,u),header:{text:g("cloudformation"),href:"#/"},items:jn(E),className:"e2e-test-side-navigation"}),r.createElement("ul",{className:"cfn-list-unstyled"},r.createElement("li",null,r.createElement(Ot.Z,{variant:"link",onClick:()=>function(){const e=window;e.ConsoleNavService&&e.ConsoleNavService.openFeedbackDialog&&e.ConsoleNavService.openFeedbackDialog("CloudFormation","CloudFormation Console")}()},g("feedback_label")))))},Jn=e=>{let{acceptTypes:t,ariaLabel:a,ariaRequired:n=!0,buttonText:s,handleFileChange:i}=e;const l=(0,r.useRef)(null);return r.createElement(Ot.Z,{iconName:"upload",formAction:"none",onClick:()=>l.current&&l.current.click()},r.createElement("input",{"data-testid":"upload-file",accept:t||"*","aria-label":a,"aria-required":n?"true":"false",ref:l,type:"file",multiple:!1,onChange:e=>{let{target:t}=e;i(t.files[0])},hidden:!0}),r.createElement("span",null,s))},es=function(e){let{status:t,error:a,errorText:n,errorHandler:i}=e;const l=(0,s.I0)();(0,r.useEffect)((()=>{"error"===t&&(i?.(),l(He({...n.errorHeader&&{header:n.errorHeader},content:j(a,n.errorContent),type:"ERROR"})))}),[t])},ts=()=>{const e={resource:o.ApiResource.Topics,action:o.ApiAction.List,requestParams:{},xsrfToken:me.xsrfToken,placeholderData:{topics:[]}},t=(0,o.useSDKQuery)(e);return es({status:t.status,error:t.error,errorText:{errorContent:g("fetch_sns_topics_error_message")}}),t},as=e=>{let{stackId:t,shouldAutoRefetch:a,transformCb:n,fetchAll:s,enabled:i=!0}=e;const l={resource:o.ApiResource.ResourceDrift,action:o.ApiAction.Describe,requestParams:{stackName:t,maxResults:100},filteringFields:[],xsrfToken:me.xsrfToken,queryOptions:{enabled:i&&Boolean(t)},transformCb:n,shouldAutoRefetch:a},c=(0,o.useSDKInfiniteQuery)(l);es({status:c?.status,error:c?.error,errorText:{errorContent:c?.error?.isValidationError&&c?.error?.message||g("drift.fetch_stack_resource_drifts_error")}});const{hasNextPage:d,isFetching:u,fetchNextPage:m}=c||{};return(0,r.useEffect)((()=>{i&&s&&d&&!u&&m()}),[d,u]),c},rs=e=>{const t=(0,s.I0)(),a={resource:o.ApiResource.ResourceDrift,action:o.ApiAction.DetectDrift,xsrfToken:me.xsrfToken,onMutate:()=>{t(He({type:"INFO",content:g("drift_attempt_message",e)}))},onSuccess:()=>{t(He({type:"INFO",content:g("drift.detect_stack_resource_drift_success",e)}))},onError:a=>{t(He({type:"ERROR",content:a.isValidationError&&a.message||g("drift.detect_stack_resource_drift_error",e)}))}};return(0,o.useSDKMutation)(a)},ns={spotlightBookmarks:{category:w.FUNCTIONAL}},ss=()=>-1!==window?.location?.hostname?.indexOf(".aws.amazon.com"),is=e=>{const t=(e=>{if(ss()){if(void 0===ns[e])return!1;const t=(e=>{const t=window.AWSC||window.top.AWSC;if(!t||!t.Shortbread||!t.Locale)return null;const a={hasConsoleNavFooter:!0,language:t.Locale.getLocaleIdShortbread(t.Locale.getCurrentLocale()),registry:ns};return t.Shortbread.getShortbreadInstance(a)})();return t?.hasConsent?t?.hasConsent?.(e):!ss()}return!0})(e),{item:a,setItem:n}=(()=>{const e=(0,r.useContext)(pt);if(void 0===e)throw new Error("useLocalStorageFallback must be used within a LocalStorageFallbackProvider");return e})(),[s,i]=r.useState((()=>t?(e=>{const t=window.localStorage.getItem(e);try{return JSON.parse(t||"null")}catch(e){return t}})(e):a?.[e]));return r.useEffect((()=>{var r;e&&s&&(r=s,null!=e&&(t?window.localStorage.setItem(e,JSON.stringify(r)):n({...a,[e]:r})))}),[e,s]),[s,i]},ls=()=>{const e=(0,r.useContext)(et);if(void 0===e)throw new Error("useModalType must be used within a ModalTypeProvider");return e},os=function(){const{search:e}=(0,Q.TH)();return r.useMemo((()=>new URLSearchParams(e)),[e])},cs=()=>{const e=(0,r.useContext)(dt);if(void 0===e)throw new Error("useSplitPanel must be used within a SplitPanelTypeProvider");return e},ds={CLOUDFORMATION:g("cloudformation_document_title"),CREATE_STACK:g("create_stack_document_title"),CREATE_CHANGESET:g("create_stack_changeset_document_title"),EXPORTS:g("exports_document_title"),EXPORT_DETAILS:g("export_details_document_title"),CHANGE_SET_DETAILS:g("change_set_details_document_title"),STACK_DETAILS:g("stack_details_document_title"),UPDATE_STACK:g("update_stack_document_title"),DRIFT_DETAILS:g("drift_details_document_title"),ERROR:g("error_document_title"),STACKSETS:g("stacksets_document_title")},us=()=>{const{pathname:e}=(0,Q.TH)(),t=os().get("stackId")||"",a=t?` ${Na(t)}`:"";(0,r.useEffect)((()=>{document.title=n()}),[e]);const n=()=>{if(!e)return ds.CLOUDFORMATION;const t=e.split("/");if(t.length>1)switch(t[1]){case"exports":return ds.EXPORTS;case"stacks":return ds.STACK_DETAILS+a;case"stacksets":return ds.STACKSETS;case"error":return ds.ERROR;default:return ds.CLOUDFORMATION}}},ms=()=>{const e=(0,r.useContext)(Et);if(void 0===e)throw new Error("useFlagContext must be used within a FlagProvider");return e},ps=()=>{const e=(0,s.I0)(),t=(0,Q.TH)(),a=()=>{const e=function(e){const t=Bn(e).filter((t=>t.path===e.pathname));return 1===t.length?t[0].analyticsKey:e.pathname}(t);u.logEvent(e,1)},n=e=>(e=>-1!==e.indexOf("/create"))(e)||(e=>-1!==e.indexOf("/update"))(e)||(e=>-1!==e.indexOf("/manage"))(e);(0,r.useEffect)((()=>{e(qe()),a()}),[]),(0,r.useEffect)((()=>{const{pathname:r}=t||{};var s;s=r,-1===Object.values(nt).map((e=>`/stacks/${e}`)).indexOf(s)?e(je(!1)):e(je(!0)),n(r)&&e(Xe(!1)),(e=>-1!==e.indexOf("/stacks"))(r)||n(r)||(e=>-1!==e.indexOf("/registry/activated-extensions/resource-types"))(r)||e(qe()),a()}),[t?.pathname])},_s=e=>{let{acceptTypes:t,ariaLabel:a,ariaRequired:n=!0,buttonText:i,setFileUrl:l}=e;const[c,d]=(0,r.useState)(null),{data:u}=(e=>{const t={resource:o.ApiResource.S3BucketName,action:o.ApiAction.Get,requestParams:{},xsrfToken:me.xsrfToken,placeholderData:"",enabled:Boolean(e)},a=(0,o.useSDKQuery)(t);es({status:a.status,error:a.error,errorText:{errorContent:"Failed to create an S3 bucket. This may be a permissions issue."}});const r=a?.data?.bucketName||"";return{...a,data:r}})(c),{mutate:m,isLoading:p}=(()=>{const e=(0,s.I0)(),t={resource:o.ApiResource.Objects,action:o.ApiAction.Put,xsrfToken:me.xsrfToken,onError:()=>{e(He({type:"ERROR",content:g("file_upload_failed")}))},isFormData:!0,setContentType:!1};return(0,o.useSDKMutation)(t)})(),_=(0,r.useRef)(null),E=(0,r.useCallback)((e=>{let{target:t}=e;d(t.files[0])}),[c]);return(0,r.useEffect)((()=>{if(c&&u){const t=(e=>{const t=new RegExp("[^0-9a-zA-Z!_.*'()-]","g");return e.replace(t,"")})((e=c.name)?`${(new Date).toISOString()}${Math.random().toString(36).substring(2,5)}-${e}`:""),a=new FormData;a.append("multipartFile",c),a.append("bucketName",u),a.append("key",t),(0,o.isTangerineBox)()?m({bucket:u,key:t,body:c}):m(a),l(`https://${ve()}/${u}/${t}`)}var e}),[c?.name,u]),r.createElement("div",null,r.createElement(Ot.Z,{"data-testid":"upload-file-button",iconName:"upload",formAction:"none",loading:p,onClick:()=>_.current&&_.current.click()},r.createElement("input",{"data-testid":"upload-file-input",accept:t||"*","aria-label":a,"aria-required":n?"true":"false",ref:_,type:"file",multiple:!1,onChange:E,hidden:!0}),r.createElement("span",null,i||g("stack.upload_template_button_text"))),r.createElement(z.Z,{variant:"span",fontSize:"heading-xs",margin:{left:"s"}},r.createElement("i",null,c?.name||g("stack.upload_template_no_file"))))};var Es=a(17343);const gs=e=>{let{label:t,dataTestId:a,children:n}=e;return r.createElement("div",{"data-testid":a},r.createElement(z.Z,{variant:"awsui-key-label"},t),r.createElement("div",null,n))},hs=e=>{let{linkLabel:t,linkMessage:a,onClick:n}=e;return r.createElement(gs,{dataTestId:"popover-link",label:t},r.createElement("div",{onClick:n},r.createElement(V.Z,{ariaLabel:t},a)))},Ss=e=>{const{messageBody:t,link:a,textLabel:n,textValue:s}=e;return r.createElement(z.Z,null,r.createElement(Es.Z,{size:"l"},r.createElement("div",{"data-testid":"popover-message-body"},t),a,n&&s&&r.createElement(gs,{dataTestId:"popover-text",label:n},s)))};var Ts=a(24450);const bs=function(e){return e.isNested?r.createElement(Ts.Z,{"data-testid":"nested-stack-badge",color:"grey"},g("nested_content")):null},fs={NEUTRAL:{MOOD:"NEUTRAL",STATUS:"stopped",ICON:"status-stopped"},NEGATIVE:{MOOD:"NEGATIVE",STATUS:"error",ICON:"status-negative"},WARNING:{MOOD:"WARNING",STATUS:"warning",ICON:"status-warning"},PENDING:{MOOD:"PENDING",STATUS:"pending",ICON:"status-pending"},POSITIVE:{MOOD:"POSITIVE",STATUS:"success",ICON:"status-positive"},INFO:{MOOD:"INFO",STATUS:"info",ICON:"status-info"}},ks={ADOPTION_FAILED:fs.NEGATIVE,ADOPTION_COMPLETE:fs.POSITIVE,ADOPTION_IN_PROGRESS:fs.INFO,CREATE_IN_PROGRESS:fs.INFO,CREATE_FAILED:fs.NEGATIVE,CREATE_COMPLETE:fs.POSITIVE,DELETE_IN_PROGRESS:fs.INFO,DELETE_FAILED:fs.NEGATIVE,DELETE_COMPLETE:fs.POSITIVE,DELETE_SKIPPED:fs.INFO,UPDATE_IN_PROGRESS:fs.INFO,UPDATE_FAILED:fs.NEGATIVE,UPDATE_COMPLETE:fs.POSITIVE,UPDATE_COMPLETE_CLEANUP_IN_PROGRESS:fs.INFO,IMPORT_FAILED:fs.NEGATIVE,IMPORT_COMPLETE:fs.POSITIVE,IMPORT_IN_PROGRESS:fs.INFO,IMPORT_ROLLBACK_IN_PROGRESS:fs.NEGATIVE,IMPORT_ROLLBACK_FAILED:fs.NEGATIVE,IMPORT_ROLLBACK_COMPLETE:fs.NEGATIVE,UPDATE_ROLLBACK_IN_PROGRESS:fs.NEGATIVE,UPDATE_ROLLBACK_COMPLETE:fs.NEGATIVE,UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS:fs.NEGATIVE,UPDATE_ROLLBACK_FAILED:fs.NEGATIVE,ROLLBACK_IN_PROGRESS:fs.NEGATIVE,ROLLBACK_COMPLETE:fs.NEGATIVE,ROLLBACK_FAILED:fs.NEGATIVE},As={CREATE_COMPLETE:fs.POSITIVE,CREATE_FAILED:fs.NEGATIVE,CREATE_IN_PROGRESS:fs.INFO,CREATE_PENDING:fs.PENDING,DELETE_COMPLETE:fs.POSITIVE,DELETE_FAILED:fs.NEGATIVE,DELETE_IN_PROGRESS:fs.INFO,DELETE_SKIPPED:fs.INFO,FAILED:fs.NEGATIVE,REVIEW_IN_PROGRESS:fs.INFO,ROLLBACK_COMPLETE:fs.NEGATIVE,ROLLBACK_FAILED:fs.NEGATIVE,ROLLBACK_IN_PROGRESS:fs.NEGATIVE,UPDATE_COMPLETE:fs.POSITIVE,UPDATE_COMPLETE_CLEANUP_IN_PROGRESS:fs.INFO,UPDATE_FAILED:fs.NEGATIVE,UPDATE_IN_PROGRESS:fs.INFO,UPDATE_ROLLBACK_COMPLETE:fs.NEGATIVE,UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS:fs.NEGATIVE,UPDATE_ROLLBACK_FAILED:fs.NEGATIVE,UPDATE_ROLLBACK_IN_PROGRESS:fs.NEGATIVE,NOT_CHECKED:fs.NEUTRAL,DRIFTED:fs.WARNING,IN_SYNC:fs.POSITIVE,MODIFIED:fs.WARNING,DELETED:fs.WARNING,UNAVAILABLE:fs.NEUTRAL,AVAILABLE:fs.POSITIVE,EXECUTE_PENDING:fs.PENDING,EXECUTE_IN_PROGRESS:fs.INFO,EXECUTE_COMPLETE:fs.POSITIVE,EXECUTE_FAILED:fs.NEGATIVE,OBSOLETE:fs.WARNING,IMPORT_FAILED:fs.NEGATIVE,IMPORT_COMPLETE:fs.POSITIVE,IMPORT_IN_PROGRESS:fs.INFO,IMPORT_ROLLBACK_IN_PROGRESS:fs.NEGATIVE,IMPORT_ROLLBACK_FAILED:fs.NEGATIVE,IMPORT_ROLLBACK_COMPLETE:fs.NEGATIVE,COMPLETE:fs.POSITIVE},Is={NOT_CHECKED:fs.NEUTRAL,DRIFTED:fs.WARNING,IN_SYNC:fs.POSITIVE,MODIFIED:fs.WARNING,DELETED:fs.WARNING,PARTIAL_SUCCESS:fs.WARNING,COMPLETED:fs.POSITIVE,FAILED:fs.WARNING,STOPPED:fs.WARNING,IN_PROGRESS:fs.INFO},ys={CANCELLED:fs.NEGATIVE,CURRENT:fs.POSITIVE,FAILED:fs.NEGATIVE,INOPERABLE:fs.NEGATIVE,CONDITIONALLY_SUCCEEDED:fs.WARNING,OUTDATED:fs.NEGATIVE,PENDING:fs.PENDING,RUNNING:fs.INFO,STOPPED:fs.POSITIVE,STOPPING:fs.WARNING,SUCCEEDED:fs.POSITIVE,ACTIVE:fs.POSITIVE,DELETED:fs.WARNING},Cs={HOOK_IN_PROGRESS:fs.INFO,HOOK_COMPLETE_SUCCEEDED:fs.POSITIVE,HOOK_COMPLETE_FAILED:fs.NEGATIVE,HOOK_FAILED:fs.NEGATIVE},Rs={ALL:fs.POSITIVE,NONE:fs.NEUTRAL},vs={ALL:g("hook_target_stack_all_stacks"),NONE:g("hook_target_stack_no_stacks")},Ls=(e,t)=>a=>{const n=a.mood?fs[a.mood]:function(e,t){if(!e||!e.trim())return fs.NEUTRAL;return t[e]||fs.NEUTRAL}(a.status,e),s=r.createElement(qr.Z,{iconAriaLabel:n.STATUS,type:n.STATUS,className:n.STATUS},t&&t[a.status]||a.status),i=a.popoverSize||"medium",l={error:"text-status-error",warning:"text-status-error"};if(a.isPopover){const e=r.createElement(xe.Z,{header:a.header,dismissAriaLabel:"Close",size:i,triggerType:"text",content:a.popoverContent,position:a.popoverPosition,fixedWidth:!0},s);return n.STATUS&&l[n.STATUS]?r.createElement(z.Z,{color:l[n.STATUS]},e):e}return s},Ps=Ls(Is),Ns=Ls(As),Os=Ls(ys),xs=Ls(Cs),Ds=Ls(Rs,vs),ws=function(e){const t=e.enabled?e.hasRootId?g("enabled_on_root"):g("enabled_label"):e.hasRootId?g("disabled_on_root"):g("disabled_label");return r.createElement("span",null,t)},Zs=function(e){const{text:t}=e;return t&&(t.length<=50&&t||`${t.slice(0,47)}...`)},Us=function(e){const t=e.nextLoading?g("loading"):g("load_more"),a=e.nextLoading?g("searching"):g("search_more"),n=e.filteringText?a:t;return r.createElement(z.Z,{textAlign:"center",margin:{top:"xs"},color:"inherit"},r.createElement(Ot.Z,{"data-testid":"load-more-button",loading:e.nextLoading,onClick:e.onLoadMore},n))},Fs=function(){return r.createElement(z.Z,{"data-testid":"search-more",textAlign:"center",color:"inherit"},r.createElement(z.Z,{variant:"p",margin:{bottom:"xs"}},g("continue_search_description")))},Ms=function(e){return e.value||"boolean"==typeof e.value?r.createElement("span",{title:e.value},e.value):r.createElement("span",null,"-")};var Ks=a(42660);const Ws=e=>{let{errorText:t}=e;const a=k.constructComposerUrl("","",!1,!1,!1),n=r.createElement("div",{className:"custom-footer-container"},r.createElement(z.Z,{variant:"span",color:"text-body-secondary"},r.createElement(z.Z,{variant:"span",color:"inherit",margin:{right:"xs"}},g("stack.template_s3_url_label")),r.createElement(z.Z,{variant:"span",color:"inherit"},g("stack.s3_template_url_placeholder_use_designer"))));return r.createElement(Cr.Z,{"data-testid":"create-template-in-designer",header:r.createElement(Rr.Z,null,g("stack.create_in_designer")),footer:n},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},errorText:t,stretch:!0},r.createElement(z.Z,null,g("stack.template_in_designer_description")),r.createElement(z.Z,{margin:{vertical:"m"},textAlign:"center"},r.createElement(Dt,{analyticsKey:"use_designer",text:g("stack.create_template_in_designer_button_text"),href:a}))))},zs=e=>{let{isCreateChangeSetFlow:t,isUpdateFlow:a,stackId:n}=e;const s=k.constructComposerUrl(n,null,!0,a,t),i=r.createElement("div",{className:"custom-footer-container"},r.createElement(z.Z,{variant:"span"},r.createElement(z.Z,{variant:"span",margin:{right:"xs"}},g("stack.template_s3_url_label")),r.createElement(z.Z,{variant:"span"},g("stack.s3_template_url_text_edit_in_designer"))),r.createElement(z.Z,{float:"right"},r.createElement(Dt,{"data-testid":"edit-in-designer-button",analyticsKey:"edit_in_designer",href:s,disabled:!1,text:g("stack.view_in_designer_button_label")})));return r.createElement(Cr.Z,{"data-testid":"edit-in-designer",header:r.createElement(Rr.Z,null,g("stack.edit_template_in_designer")),footer:i},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0},r.createElement(z.Z,null,g("stack.template_in_designer_description"))))};var $s=a(47268),Vs=a(47746),Gs=a(42776);const Bs=[{label:g("stack.review_permissions_iam_role_name_label"),value:"iamRoleName"},{label:g("stack.review_permissions_iam_role_arn_label"),value:"iamRoleArn"}],Hs=e=>{let{iamRole:t,setIamRole:a}=e;const[n,s]=(0,r.useState)(Bs[0]),{isFetching:i,data:l=[]}=(()=>{const e={resource:o.ApiResource.Roles,action:o.ApiAction.List,requestParams:{},xsrfToken:me.xsrfToken,placeholderData:[]},t=(0,o.useSDKQuery)(e);es({status:t.status,error:t.error,errorText:{errorContent:g("fetch_iam_roles_error_message")}});const a=t?.data?.roles||[];return{...t,data:a}})(),c=(0,r.useMemo)((()=>l.map((e=>({label:e.roleName,value:e.arn})))),[l]),d=(0,r.useMemo)((()=>c.find((e=>e.value===t?.arn))||null),[t]);return r.createElement($s.Z,{gridDefinition:[{colspan:{default:12,xxs:2}},{colspan:{default:12,xxs:8}},{colspan:{default:12,xxs:2}}]},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select IAM role type","data-testid":"iam-role-input-type-select",options:Bs,selectedOption:n,onChange:e=>{s(e.detail.selectedOption)}}),"iamRoleName"===n.value?r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select IAM role",filteringAriaLabel:"Select IAM role",className:"e2e-test-iam-role-select",filteringType:"auto",options:c,placeholder:g("stack.options_permission_select_iam_placeholder"),empty:g("stack.options_permission_no_iam_roles"),selectedOption:d,onChange:e=>{a({arn:e.detail.selectedOption.value})},statusType:i?"loading":"finished"}):r.createElement(Vs.Z,{ariaRequired:!0,className:"e2e-test-iam-role-input",controlId:"iamRoleArn",type:"text",value:t.arn,placeholder:g("stack.options_permission_arn_placeholder"),onChange:e=>{a({arn:e.detail.value})}}),r.createElement(Ot.Z,{disabled:!t?.arn,onClick:()=>a({arn:"",roleName:""})},g("stack.options_permission_remove_btn_text")))},qs=["CommaDelimitedList"];var Ys=a(21180);const Xs=g("stack.parameters_use_current"),js=e=>{let{children:t,description:a,errorText:n,noEcho:s,onUsePreviousValue:i,parameterKey:l,parameterLabel:o,usePreviousValue:c,existsInStack:d}=e;return r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":`${l}-form-field`,className:"cfn--form-field",label:o,description:a,controlId:l,stretch:!0,secondaryControl:d&&s&&r.createElement(Ys.Z,{className:"cfn--formField",onChange:i,ariaLabel:Xs,checked:c},g("stackSet.wizard.use_previous_value")),errorText:n},t)},Qs=e=>{let{parameterType:t,noEcho:a}=e;return a?"password":-1!==["Number"].indexOf(t)?"number":"text"},Js=e=>{let{usePreviousValue:t,parameterValue:a,setParameterValueForWizard:n,existsInStack:s,noEcho:i,parameterKey:l,parameterType:o}=e;const c=Boolean(s&&t&&i),d=c?"":a;return r.createElement(Vs.Z,{ariaRequired:!0,value:d,onChange:e=>n({parameterKey:l,parameterValue:e.detail.value}),autoComplete:!1,disabled:c,type:Qs({parameterType:o,noEcho:i}),placeholder:c?"":g("enter_variable",o)})};var ei=a(53671);const ti=e=>{let{parameterValue:t}=e;return t?t.split(",").map((e=>({label:e.trim(),value:e.trim()}))):[]},ai=e=>{let{usePreviousValue:t,parameterValue:a,setParameterValueForWizard:n,existsInStack:s,noEcho:i,parameterKey:l,parameterType:o,externalValue:c,allowedValues:d}=e;const u=c&&c.loading?"loading":"finished",m=Boolean(s&&t&&i);return r.createElement(ei.Z,{options:Da({allowedValues:d,externalValue:c}),ariaRequired:!0,deselectAriaLabel:e=>`Remove ${e.label}`,filteringAriaLabel:"Filter parameter",onChange:e=>{let{detail:t}=e;return(e=>{const{selectedOptions:t}=e,a=t.length>0?t.map((e=>e.value)).join(","):"";n({parameterKey:l,parameterValue:a})})(t)},selectedOptions:ti({parameterValue:a}),statusType:u,disabled:m,empty:g("no_values"),filteringType:"auto",placeholder:g("select_variable",o)})},ri=e=>{let{parameterValue:t}=e;return t?{value:t,label:t}:null},ni=e=>{let{usePreviousValue:t,parameterValue:a,setParameterValueForWizard:n,existsInStack:s,noEcho:i,parameterKey:l,parameterType:o,externalValue:c,allowedValues:d}=e;const u=c&&c.loading?"loading":"finished",m=Boolean(s&&t&&i);return r.createElement(Gs.Z,{options:Da({allowedValues:d,externalValue:c}),ariaRequired:!0,filteringAriaLabel:"Filter parameter",ariaLabel:"Select parameter",onChange:e=>n({parameterKey:l,parameterValue:e.detail.selectedOption.value||""}),selectedOption:ri({parameterValue:a}),statusType:u,disabled:m,empty:g("no_values"),filteringType:"auto",placeholder:g("select_variable",o)})};var si=a(13885);const ii=e=>{let{usePreviousValue:t,parameterValue:a,setParameterValueForWizard:n,existsInStack:s,noEcho:i,parameterKey:l,parameterType:o}=e;const c=Boolean(s&&t&&i),d=c?"":a;return r.createElement(si.Z,{ariaRequired:!0,value:d,onChange:e=>n({parameterKey:l,parameterValue:e.detail.value}),disabled:c,placeholder:g("enter_variable",o)})},li=e=>{let{externalValue:t,parameterKey:a,parameter:n,setParameterValueForWizard:s,setParameterUsePreviousValueForWizard:i}=e;const l=(e=>{let{externalValue:t,parameterKey:a,parameter:n,setParameterValueForWizard:s}=e;return n.noEcho?r.createElement(Js,{usePreviousValue:n.usePreviousValue,parameterValue:n.parameterValue,setParameterValueForWizard:s,existsInStack:n.existsInStack,noEcho:n.noEcho,parameterKey:a,parameterType:n.parameterType}):-1!==qs.indexOf(n.parameterType)?r.createElement(ii,{usePreviousValue:n.usePreviousValue,parameterValue:n.parameterValue,setParameterValueForWizard:s,existsInStack:n.existsInStack,noEcho:n.noEcho,parameterKey:a,parameterType:n.parameterType}):-1!==(e=>{let t=["AWS::EC2::AvailabilityZone::Name","AWS::EC2::Instance::Id","AWS::EC2::KeyPair::KeyName","AWS::EC2::SecurityGroup::GroupName","AWS::EC2::SecurityGroup::Id","AWS::EC2::Subnet::Id","AWS::EC2::Volume::Id","AWS::EC2::VPC::Id","AWS::Route53::HostedZone::Id"];return 0!==e.length&&(t=t.concat(["Number","String"])),t})(n.allowedValues).indexOf(n.parameterType)?r.createElement(ni,{usePreviousValue:n.usePreviousValue,parameterValue:n.parameterValue,setParameterValueForWizard:s,existsInStack:n.existsInStack,noEcho:n.noEcho,parameterKey:a,parameterType:n.parameterType,externalValue:t,allowedValues:n.allowedValues}):-1!==(e=>{let t=["List<AWS::EC2::AvailabilityZone::Name>","List<AWS::EC2::Instance::Id>","List<AWS::EC2::KeyPair::KeyName>","List<AWS::EC2::SecurityGroup::GroupName>","List<AWS::EC2::SecurityGroup::Id>","List<AWS::EC2::Subnet::Id>","List<AWS::EC2::Volume::Id>","List<AWS::EC2::VPC::Id>","List<AWS::Route53::HostedZone::Id>"];return 0!==e.length&&(t=t.concat(["List<Number>","List<String>"])),t})(n.allowedValues).indexOf(n.parameterType)?r.createElement(ai,{usePreviousValue:n.usePreviousValue,parameterValue:n.parameterValue,setParameterValueForWizard:s,existsInStack:n.existsInStack,noEcho:n.noEcho,parameterKey:a,parameterType:n.parameterType,externalValue:t,allowedValues:n.allowedValues}):r.createElement(Js,{usePreviousValue:n.usePreviousValue,parameterValue:n.parameterValue,setParameterValueForWizard:s,existsInStack:n.existsInStack,noEcho:n.noEcho,parameterKey:a,parameterType:n.parameterType})})({externalValue:t,parameterKey:a,parameter:n,setParameterValueForWizard:s});return r.createElement(js,{key:a,description:n.description,errorText:n.errorText||"",noEcho:n.noEcho,onUsePreviousValue:e=>(e=>i({parameterKey:a,usePreviousValue:e.detail.checked}))(e),parameterKey:a,parameterLabel:n.parameterLabel,usePreviousValue:n.usePreviousValue,existsInStack:n.existsInStack},l)},oi=e=>{let{externalValues:t,isOverride:a=!1,parameterErrorKeys:n,parameterGroup:s,parameters:i,setParameterValue:l}=e;const o=s.Label?.default&&r.createElement(Rr.Z,{variant:"h3"},s.Label?.default)||null,c=s.Parameters||[];return r.createElement(z.Z,{"data-testid":"parameter-group"},o,r.createElement(Or.Z,null,c.map((e=>i[e]&&r.createElement(li,{key:e,parameterKey:e,parameter:{description:i[e].description,noEcho:i[e].noEcho,allowedValues:i[e].allowedValues,parameterType:i[e].parameterType,usePreviousValue:i[e].usePreviousValue,parameterValue:a?i[e].overrideValue:i[e].parameterValue,parameterLabel:i[e].parameterLabel,errorText:n?.failMap?.get(e)||"",existsInStack:i[e].existsInStack},setParameterValueForWizard:l,setParameterUsePreviousValueForWizard:l,externalValue:t[gr(i[e].parameterType)]})))))},ci=e=>{let{header:t,description:a,actionButton:n}=e;return r.createElement(z.Z,{textAlign:"center",color:"text-body-secondary"},r.createElement("b",null,t),r.createElement(z.Z,{padding:{bottom:"s"},variant:"p",color:"inherit"},a),n)};var di=a(90104),ui=a.n(di);const mi=e=>{let{externalValues:t,isOverride:a=!1,parameterErrorKeys:n,parameterGroups:s,parameters:i,parametersNotInAParameterGroup:l,setParameterValue:o}=e;const c=s.map(((e,s)=>!ui()(e)&&r.createElement(oi,{key:s,externalValues:t,isOverride:a,parameterErrorKeys:n,parameterGroup:e,parameters:i,setParameterValue:o}))),d=l.map((e=>i[e]&&r.createElement(li,{key:e,parameterKey:e,parameter:{description:i[e].description,noEcho:i[e].noEcho,allowedValues:i[e].allowedValues,parameterType:i[e].parameterType,usePreviousValue:i[e].usePreviousValue,parameterValue:a?i[e].overrideValue:i[e].parameterValue,parameterLabel:i[e].parameterLabel,existsInStack:i[e].existsInStack,errorText:n?.failMap?.get(e)||""},setParameterValueForWizard:o,setParameterUsePreviousValueForWizard:o,externalValue:t[gr(i[e].parameterType)]})));return r.createElement(Es.Z,{direction:"vertical",size:"xxs"},r.createElement(Or.Z,{borders:"horizontal"},c),r.createElement(z.Z,{"data-testid":"parameters-not-in-groups"},r.createElement(Or.Z,null,d)))};var pi=a(81501);const _i=e=>{let{tilesDefinition:t,selectedTile:a,setTile:n}=e;return r.createElement(Cr.Z,{"data-testid":"prepare-template-container",header:r.createElement(Rr.Z,null,g("stack.prepare_template_title"))},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.prepare_template_subtitle"),description:g("stack.prepare_template_description"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,className:"e2e-test-prepare-template-tiles",value:a,items:t,onChange:e=>n(e.detail.value)})))},Ei=e=>{let{children:t,headerId:a,headerText:n,stepIndex:s,setActiveStepIndex:i}=e;return r.createElement(Es.Z,{size:"l"},r.createElement(Rr.Z,{"data-testid":a,variant:"h3",actions:r.createElement(Ot.Z,{"data-testid":"edit-step-button",onClick:()=>i(s)},g("edit_label"))},g("stack.step",`${s+1}: ${n}`)),t)},gi=e=>{let{errorText:t,isCreateChangeSetFlow:a,isUpdateFlow:n,sampleTemplateGroups:s,sampleTemplateUrl:i,stackId:l="",setTemplateUrl:o}=e;const c=k.constructComposerUrl(l,i,!1,n,a),d=r.createElement(Rr.Z,{actions:r.createElement(Dt,{analyticsKey:"more_sample_templates",variant:"link",icon:"external",iconAlign:"right",target:"_blank",href:I,text:g("stack.view_more_sample_templates")})},g("stack.sample_template_title")),u=!i,m=r.createElement("div",{className:"custom-footer-container"},r.createElement(z.Z,{variant:"span",color:u?"text-body-secondary":"inherit"},r.createElement(z.Z,{variant:"span",color:"inherit",margin:{right:"xs"}},g("stack.template_s3_url_label")),r.createElement(z.Z,{variant:"span",color:"inherit"},i||g("stack.sample_template_url_placeholder"))),r.createElement(z.Z,{float:"right"},r.createElement(Dt,{"data-testid":"view-in-designer",analyticsKey:"edit_in_designer",href:c,disabled:u,text:g("stack.view_in_designer_button_label")})));return r.createElement(Cr.Z,{"data-testid":"select-sample-templates",header:d,footer:m},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.sample_template_select_label"),description:g("stack.sample_template_select_description"),errorText:t,stretch:!0},r.createElement(Gs.Z,{ariaRequired:!0,filteringAriaLabel:"Filter sample template",className:"e2e-test-sample-template-select",ariaLabel:"Select sample template",filteringType:"auto",placeholder:g("stack.sample_template_select_placeholder"),options:s,selectedOption:Aa(i,s),onChange:e=>o(R.SAMPLE,e.detail.selectedOption.value)})))},hi=e=>{let{isCreateChangeSetFlow:t,isUpdateFlow:a,showViewDesignerButton:n=!0,stackId:s="",templateType:i,templateUrls:l}=e;const o=i!==R.IMPORT&&l[i]||"",c=k.constructComposerUrl(s,o,i===R.EXISTING,a,t),d={[R.IMPORT]:g("s3_import_template_url_placeholder_specify_template"),[R.TEXT]:g("stack.s3_template_url_placeholder_specify_template"),[R.UPLOAD]:g("stack.s3_upload_template_url_placeholder_specify_template")},u=!o||!i;return r.createElement("div",{className:"custom-footer-container"},r.createElement(z.Z,{variant:"span",color:u?"text-body-secondary":"inherit"},r.createElement(z.Z,{variant:"span",color:"inherit",margin:{right:"xs"}},g("stack.template_s3_url_label")),r.createElement(z.Z,{"data-testid":"footer-placeholder-text",className:"custom-footer-s3-url",variant:"span",color:"inherit"},i===R.EXISTING?g("stack.s3_template_url_text_edit_in_designer"):o||d[i])),n&&r.createElement(z.Z,{float:"right"},r.createElement(Dt,{analyticsKey:"edit_in_designer",href:c,disabled:u,text:g("stack.view_in_designer_button_label")})))},Si=e=>{let{isCreateChangeSetFlow:t,isUpdateFlow:a,selectedTile:n,showViewDesignerButton:s=!0,stackId:i,templateErrorKey:l,templateType:o,templateUrls:c,tilesDefinition:d,setTemplateUrl:u,setTile:m}=e;return r.createElement(Cr.Z,{header:r.createElement(Rr.Z,{description:g("stack.specify_template_description")},g("stack.specify_template_title")),footer:r.createElement(hi,{isCreateChangeSetFlow:t,isUpdateFlow:a,showViewDesignerButton:s,stackId:i,templateType:o,templateUrls:c})},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.template_source"),description:g("stack.template_source_description"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,"data-testid":"specify-template-tiles",className:"e2e-test-specify-template-tiles",value:n,items:d,onChange:e=>m(e.detail.value)})),{UPLOAD_TEMPLATE:r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.upload_template_file"),constraintText:g("stack.upload_template_hint_text"),errorText:l,stretch:!0},r.createElement(_s,{ariaLabel:"Upload template",buttonText:g("stack.upload_template_button_text"),setFileUrl:e=>u(R.UPLOAD,e)})),S3_URL:r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.template_url_title"),constraintText:g("stack.template_url_hint_text"),errorText:l,stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"input-s3-url",ariaLabel:"Input template url",controlId:"templateUrl",placeholder:g("stack.template_url_placeholder"),value:c[R.TEXT],onChange:e=>u(R.TEXT,e.detail.value.trim())})),IMPORT_TEMPLATE:r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("specify_template_from_stack_id"),constraintText:g("template_from_stack_id_hint_text"),errorText:l,stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"import-stack-id-input",controlId:"stackIdTemplate",placeholder:g("template_stack_id_placeholder"),value:c[R.IMPORT],onChange:e=>u(R.IMPORT,e.detail.value.trim())}))}[n]))};var Ti=a(33306);const bi={keyPlaceholder:g("tags_keyPlaceholder"),valuePlaceholder:g("tags_valuePlaceholder"),addButton:g("tags_addButton"),removeButton:g("tags_removeButton"),undoButton:g("tags_undoButton"),undoPrompt:g("tags_undoPrompt"),loading:g("tags_loading"),keyHeader:g("tags_keyHeader"),valueHeader:g("tags_valueHeader"),optional:g("tags_optional"),keySuggestion:g("tags_keySuggestion"),valueSuggestion:g("tags_valueSuggestion"),emptyTags:g("tags_emptyTags"),tooManyKeysSuggestion:g("tags_tooManyKeysSuggestion"),tooManyValuesSuggestion:g("tags_tooManyValuesSuggestion"),keysSuggestionLoading:g("tags_keysSuggestionLoading"),keysSuggestionError:g("tags_keysSuggestionError"),valuesSuggestionLoading:g("tags_valuesSuggestionLoading"),valuesSuggestionError:g("tags_valuesSuggestionError"),emptyKeyError:g("tags_emptyKeyError"),maxKeyCharLengthError:g("tags_maxKeyCharLengthError"),maxValueCharLengthError:g("tags_maxValueCharLengthError"),duplicateKeyError:g("tags_duplicateKeyError"),invalidKeyError:g("tags_invalidKeyError"),invalidValueError:g("tags_invalidValueError"),awsPrefixError:g("tags_awsPrefixError"),tagLimit:e=>g("tags_tagLimit",e.toString()),tagLimitReached:e=>g("tags_tagLimitReached",e.toString()),tagLimitExceeded:e=>g("tags_tagLimitExceeded",e.toString()),enteredKeyLabel:e=>g("use_key",e),enteredValueLabel:e=>g("use_value",e)},fi=e=>{let{tags:t,loading:a,setTags:n}=e;return r.createElement(Cr.Z,{"data-testid":"tags-editor",header:r.createElement(Rr.Z,{description:g("stack.tags_list_header_title")},g("tags_header"))},r.createElement(Ti.Z,{tagLimit:50,tags:t,loading:a,onChange:e=>n(e.detail.tags),i18nStrings:bi,keysRequest:()=>Promise.resolve([]),valuesRequest:()=>Promise.resolve([])}))};var ki=a(43783),Ai=a(92740),Ii=a(52394),yi=a(61189),Ci=a(71445);function Ri(){return Ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ri.apply(this,arguments)}const vi={emptyState:{title:"",subtitle:"",action:""},noMatch:{title:"",subtitle:"",action:""},loadingText:"",paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{}},Li=e=>{let{testId:t,i18nStrings:a=vi,trackByKey:n,allItems:s,isItemDisabled:i,isLoading:l,columnDefinitions:o,preferences:c,collectionPreferencesProps:d,defaultSort:u,sortingDisabled:m=!1,hasPaginationToken:p=!1,includePagination:_=!0,resizableColumns:E,keepSelection:g=!0,header:h,fetchMore:S,setCurrentPage:T,onConfirmPreferences:b,onItemSelect:f,selectedItems:k=[],selectionType:A,stickyHeader:I=!1,stickyHeaderVerticalOffset:y,filterOnChangeRef:C,customFilter:R,customEmpty:v,className:L="cfn-table",cfnTableRef:P,onSortingChange:N,enableRowSelection:O=!1,variant:x}=e;const[D,w]=r.useState(!1),[Z,U]=r.useState({isPending:!1,requestedPageNumber:1}),{pageSize:F,visibleContent:M,wrapLines:K}=c,{items:W,actions:z,filteredItemsCount:$,collectionProps:V,filterProps:G,paginationProps:B}=(0,ki.K)(s,{...!R&&{filtering:{empty:r.createElement(ci,{header:a.emptyState.title,description:a.emptyState.subtitle}),noMatch:r.createElement(ci,{header:a.noMatch.title,description:a.noMatch.subtitle})}},pagination:{pageSize:F},sorting:{defaultState:u},selection:{defaultSelectedItems:k,keepSelection:g,trackBy:n}});C&&(C.current=G.onChange);const H=e=>e>B.pagesCount;return r.useEffect((()=>{T&&T(B.currentPageIndex)}),[B.currentPageIndex,T]),r.useEffect((()=>{!Z.isPending||!p&&H(Z.requestedPageNumber)||(B.onChange({detail:{currentPageIndex:Z.requestedPageNumber}}),U({isPending:!1,requestedPageNumber:Z.requestedPageNumber}),w(!1))}),[W]),r.useImperativeHandle(P,(()=>({setCurrentPageNumber:e=>{z.setCurrentPage(e)},setSelection:e=>{z.setSelectedItems(e)}}))),r.createElement(yi.Z,Ri({},V,{"data-testid":t,className:L,stickyHeader:I,stickyHeaderVerticalOffset:y,ariaLabels:a.selectionLabels,columnDefinitions:o,items:W,isItemDisabled:i,resizableColumns:E,visibleColumns:M,loading:l,loadingText:a.loadingText,wrapLines:K,selectionType:A,onSelectionChange:e=>{z.setSelectedItems(e.detail.selectedItems),f&&f(e.detail.selectedItems)},onRowClick:e=>{O&&(z.setSelectedItems([e.detail.item]),f&&f([e.detail.item]))},header:h,empty:v||V.empty,filter:R||a.filter&&r.createElement(Ci.Z,Ri({},G,{countText:a.filter.countText($),filteringAriaLabel:a.filter.ariaLabel,filteringPlaceholder:a.filter.placeholder,filteringClearAriaLabel:a.filter.filteringClearAriaLabel,onChange:e=>{z.setCurrentPage(1),G.onChange(e)}})),pagination:_&&r.createElement(Ii.Z,{currentPageIndex:B.currentPageIndex,pagesCount:B.pagesCount,openEnd:p,disabled:D,ariaLabels:a.paginationLabels,onChange:e=>{const{detail:{currentPageIndex:t}}=e;H(t)||B.onChange(e)},onNextPageClick:e=>{const{detail:{requestedPageAvailable:t,requestedPageIndex:a}}=e;S&&(!t||p&&H(a))?(S(),w(!0),U({isPending:!0,requestedPageNumber:a})):B.onChange({detail:{currentPageIndex:a}})}}),preferences:d&&b?r.createElement(Ai.Z,Ri({},d,{preferences:c,onConfirm:e=>{let{detail:t}=e;return b(t)}})):void 0,sortingDisabled:m,onSortingChange:e=>{N&&e.detail.sortingColumn.sortingField&&N({sortingField:e.detail.sortingColumn.sortingField}),V.onSortingChange&&V.onSortingChange(e)},variant:x}))},Pi={ADD:"add",REMOVE:"remove",NOT_EQUAL:"modify"},Ni=200,Oi=[{id:"propertyPath",header:g("drift.column_label_property"),cell:e=>e.propertyPath.replace(/\//g,".").slice(1)||"-",minWidth:Ni,sortingField:"propertyPath"},{id:"differenceType",header:g("drift.column_label_change"),cell:e=>{return e.differenceType&&r.createElement("span",{className:`cfn-status-${t=e.differenceType,Pi[t]}`},e.differenceType);var t},minWidth:Ni,sortingField:"differenceType"},{id:"expectedValue",header:g("drift.column_label_expected_value"),cell:e=>"ADD"===e.differenceType?"-":e.expectedValue||"-",minWidth:Ni,sortingField:"expectedValue"},{id:"actualValue",header:g("drift.column_label_current_value"),cell:e=>"REMOVE"===e.differenceType?"-":e.actualValue||"-",minWidth:Ni,sortingField:"actualValue"}],xi={isDescending:!1,sortingColumn:{sortingField:"propertyPath"}},Di=e=>{let{selectedProperties:t,propertyDifferences:a,isFetching:n,onSelectionChange:s}=e;const i=r.createElement(Rr.Z,{variant:"h2",counter:`(${a?.length||0})`},g("drift.label_differences"));return r.createElement(Li,{preferences:{},header:i,customEmpty:r.createElement("div",null,g("drift.no_differences")),isLoading:n,columnDefinitions:Oi,resizableColumns:!0,allItems:a||[],trackByKey:"propertyPath",selectedItems:t,onItemSelect:s,hasPaginationToken:!1,defaultSort:xi,selectionType:"multi",className:"resource-drift-differences-table",variant:"stacked"})},wi=e=>{let{selectedProperties:t,expectedProperties:a="",actualProperties:n=""}=e;const s=os().get("logicalResourceId")||"",i=Y.syntaxHighlight(a,!1,s,t),l=Y.syntaxHighlight(n||"",!0,s,t);return r.createElement(r.Fragment,null,i&&i.length>0&&l&&l.length>0&&r.createElement(Cr.Z,{className:"cfn-diff-viewer",header:r.createElement(Rr.Z,null,g("drift.label_details")),variant:"stacked"},r.createElement(z.Z,{padding:"l"},r.createElement(Or.Z,{columns:2},r.createElement("div",{className:"cfn-diff-viewer-expected-container"},r.createElement(z.Z,{variant:"strong"},g("drift.label_expected")),r.createElement(z.Z,{variant:"pre",fontSize:"body-s",textAlign:"left",padding:{top:"m",bottom:"m"},className:"cfn-code"},r.createElement(z.Z,{variant:"code"},i))),r.createElement("div",{className:"cfn-diff-viewer-current-container"},r.createElement(z.Z,{variant:"strong"},g("drift.label_current")),r.createElement(z.Z,{variant:"pre",fontSize:"body-s",textAlign:"left",padding:{top:"m",bottom:"m"},className:"cfn-code"},r.createElement(z.Z,{variant:"code"},l)))))))};var Zi=a(9178);const Ui=e=>{let{timestamp:t}=e;if(!t)return r.createElement("span",null,"-");const a=(0,Zi.Z)(new Date(t),g("datetime_format"));return r.createElement("span",{title:a},a)},Fi=[{id:"physicalResourceId",header:g("stacksList.stackResources.column_label_physical_id"),cell:e=>r.createElement(q,{resourceType:e.resourceType,resourceId:e.physicalResourceId})},{id:"resourceDriftStatus",header:g("drift.resource_drift_status"),cell:e=>e.stackResourceDriftStatus&&r.createElement(Ns,{status:e.stackResourceDriftStatus})},{id:"resourceType",header:g("stacksList.stackResources.column_label_resource_type"),cell:e=>e.resourceType},{id:"driftTimestamp",header:g("stacksList.stackOverview.label_drift_timestamp"),cell:e=>r.createElement(Ui,{timestamp:e.timestamp})}],Mi=e=>{let{displayData:t={},isFetching:a}=e;const n=Fi.map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(t)})));return r.createElement(xr,{header:g("drift.drift_resource_overview"),loading:a,columns:2},n)},Ki=e=>{let{displayDescription:t=!1,notificationARNs:a=[],variant:n="container"}=e;const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.filter((e=>e)).map((e=>({arn:e}))):[]}(a),i=r.createElement(Rr.Z,{description:t&&g("stack_info_notification_options_description")},g("stack.review_notifications_header")),l=r.createElement("div",{style:{overflow:"hidden"}},r.createElement(yi.Z,{"data-testid":"notification-arns-table",columnDefinitions:[{id:"arn",header:g("stack.review_notifications_sns_arn_label"),cell:e=>{let{arn:t}=e;return r.createElement(q,{resourceId:t,resourceType:"AWS::SNS::Topic"})},minWidth:200}],trackBy:"arn",empty:r.createElement(ci,{header:g("stack.review_notifications_empty_header"),description:g("stack.review_notifications_empty_description")}),items:s,resizableColumns:!0}));return"container"===n?r.createElement(Cr.Z,{"data-testid":"notification-options-section",header:i,disableContentPaddings:!0},l):r.createElement(Zt.Z,{"data-testid":"notification-options-section",headerText:g("stack.review_notifications_header"),headerDescription:t&&g("stack_info_notification_options_description"),variant:"container",disableContentPaddings:!0},l)},Wi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object.keys(e);return!!t.length&&t.some((t=>e[t].originalValue!==e[t].parameterValue))};var zi=a(89754),$i=a.n(zi);const Vi=e=>e.parameterConstraints&&e.parameterConstraints.allowedValues||[],Gi=e=>e.description||"",Bi=e=>e.noEcho||!1,Hi=e=>{let{parameterLabels:t,parameterKey:a}=e;return t&&t[a]&&t[a].default||a},qi=e=>e.parameterType,Yi=e=>{let{indexedDetailsParameters:t,parameter:a,parameterKey:r}=e;return t[r]&&t[r].parameterValue||a.defaultValue||""},Xi=e=>{let{indexedDetailsParameters:t,parameterKey:a}=e;return t[a]&&t[a].usePreviousValue||!1},ji=e=>{let{indexedDetailsParameters:t,parameterKey:a}=e;return t[a]&&t[a].existsInStack||!1},Qi=e=>{let{detailsParameters:t=[],templateSummary:a={parameters:[]},presetParameters:r=!1}=e;const n=(e=>{if(!e)return[];const t=JSON.parse(e)["AWS::CloudFormation::Interface"];return Array.isArray(t?.ParameterGroups)?t?.ParameterGroups:[]})(a?.metadata),s=(e=>{if(!e)return{};const t=JSON.parse(e)["AWS::CloudFormation::Interface"];return a=t?.ParameterLabels,null===a||"object"!=typeof a||Array.isArray(a)?{}:t?.ParameterLabels;var a})(a?.metadata),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return{};const t={};for(const r of e)t[r.parameterKey]={parameterKey:r.parameterKey,parameterValue:(a=r.parameterValue,"****"===a?"":a),resolvedValue:r.resolvedValue,usePreviousValue:!0,existsInStack:!0};var a;return t}(t),l={};for(const e of a?.parameters||[]){const{parameterKey:t}=e;l[t]={description:Gi(e),noEcho:Bi(e),allowedValues:Vi(e),parameterType:qi(e),...!r&&{usePreviousValue:Xi({indexedDetailsParameters:i,parameterKey:t})},originalValue:Yi({indexedDetailsParameters:i,parameter:e,parameterKey:t}),parameterValue:Yi({indexedDetailsParameters:i,parameter:e,parameterKey:t}),parameterLabel:Hi({parameterLabels:s,parameterKey:t}),...!r&&{existsInStack:ji({indexedDetailsParameters:i,parameterKey:t})}}}const o=(e=>{let{parameters:t,parameterGroups:a}=e;const r=Object.keys(t),n=$i()(a.map((e=>e.Parameters)));return r.filter((e=>-1===n.indexOf(e))).sort()})({parameters:l,parameterGroups:n});return{parameters:l,parameterGroups:n,parametersNotInAParameterGroup:o}},Ji=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.length?e.map((e=>gr(e.parameterType))).filter(((e,t,a)=>a.indexOf(e)===t)).filter((e=>-1!==t.indexOf(e))):[]},el=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e?.length?e.map((e=>({key:e.key,value:e.value,existing:!0}))):[]},tl=e=>e?.length?e.reduce(((e,t)=>({...e,[t]:!0})),{}):{},al=e=>{if(!e)return{monitoringTimeErrorKey:"",monitoringTimeInMinutes:null,rollbackTriggers:[{arn:"",type:"AWS::CloudWatch::Alarm"}]};const{monitoringTimeInMinutes:t="",rollbackTriggers:a=[]}=e;return{monitoringTimeErrorKey:"",monitoringTimeInMinutes:"number"==typeof t?t.toString():t,rollbackTriggers:a?.length?a:[{arn:"",type:"AWS::CloudWatch::Alarm"}]}},rl=e=>e.appMetadata,nl=e=>{let{onClick:t}=e;return r.createElement(z.Z,{textAlign:"center",color:"inherit"},r.createElement(z.Z,{margin:{bottom:"xxs"},padding:{top:"xs"}},r.createElement("b",null,g("no_matches"))),r.createElement(z.Z,{variant:"p",margin:{bottom:"xs"}},g("no_results_match")),r.createElement(z.Z,{margin:{bottom:"m"}},r.createElement(Ot.Z,{onClick:t},g("clear_filter"))))},sl=[{id:"parameterKey",header:g("stacksList.stackParameters.column_label_key"),cell:e=>e?.parameterKey||"-",minWidth:200,sortingField:"parameterKey"},{id:"parameterValue",header:g("stacksList.stackParameters.column_label_value"),cell:e=>e?.parameterValue||"-",minWidth:200,sortingField:"parameterValue"},{id:"resolvedValue",header:g("stacksList.stackParameters.column_label_resolved_value"),cell:e=>e?.resolvedValue||"-",minWidth:200,sortingField:"resolvedValue"}],il={isDescending:!1,sortingColumn:{sortingField:"parameterKey"}},ll=[{label:null,options:[{id:"parameterKey",label:g("stacksList.stackParameters.column_label_key"),editable:!0},{id:"parameterValue",label:g("stacksList.stackParameters.column_label_value"),editable:!0},{id:"resolvedValue",label:g("stacksList.stackParameters.column_label_resolved_value"),editable:!0}]}],ol=e=>({title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:e}}),cl=(0,Ue.P1)(rl,(e=>{const{visibleContent:t,wrapLines:a}=e.tablePreferences.STACK_PARAMETERS;return{visibleContent:t,wrapLines:a,pageSize:100}})),dl=e=>{let{columnDefinitions:t=sl,visibleContentOptionsGroups:a=ll,loading:n=!1,parameters:i=[],tableTestId:l="parameters-table",onRefresh:o}=e;const[c,d]=(0,r.useState)(""),u=(0,s.I0)(),m=(0,s.v9)(cl),p=i?.filter(fa(c))||[],_=r.createElement(Rr.Z,{counter:n||!p?.length?"":`(${p?.length})`,actions:o&&r.createElement(Zr,{loading:n,onRefresh:o})},g("stack.stack_details_parameters_label")),E=i?.length?r.createElement(nl,{onClick:()=>d("")}):r.createElement(ci,{header:g("stacksList.stackParameters.empty_parameters_header"),description:g("stacksList.stackParameters.empty_parameters_description")});return r.createElement(Li,{testId:l,header:_,isLoading:n,allItems:p,collectionPreferencesProps:ol(a),columnDefinitions:t,defaultSort:il,customEmpty:E,customFilter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter stack parameters",filteringPlaceholder:g("stackSet.details.filter_placeholder"),filteringText:c,filteringClearAriaLabel:"Clear stack parameters filter input",disabled:n,onChange:e=>d(e.detail.filteringText)}),trackByKey:"parameterKey",stickyHeader:!0,resizableColumns:!0,preferences:m,hasPaginationToken:!1,onConfirmPreferences:e=>u((e=>Je({preferenceType:N.StackParameters,preferenceSettings:e}))(e))})},ul=e=>{let{displayDescription:t=!1,rollbackConfiguration:a,variant:n="container"}=e;const{monitoringTimeInMinutes:s,rollbackTriggers:i}=a||{},l=r.createElement(Rr.Z,{description:t&&g("stack_info_rollbacks_description")},g("stacksList.stack_tab_rollback_configuration")),o=r.createElement("div",null,r.createElement(z.Z,{margin:{horizontal:"l",vertical:"l"}},r.createElement(Or.Z,null,r.createElement(Nr,{id:"monitoring-time-in-minutes",itemKey:g("stacksList.stackRollbackConfiguration.monitoring_time"),itemValue:s?g("stacksList.stackRollbackConfiguration.n_minutes",s):"-"}))),r.createElement("div",{style:{overflow:"hidden"}},r.createElement(yi.Z,{"data-testid":"rollback-triggers-table",columnDefinitions:[{id:"arn",header:g("stacksList.stackRollbackConfiguration.cloudwatch_alarm_arn"),cell:e=>r.createElement(q,{resourceId:e.arn.split("alarm:")[1],resourceType:"AWS::CloudWatch::Alarm",displayText:e.arn}),minWidth:200}],trackBy:"arn",items:i||[],empty:r.createElement(ci,{header:g("stacksList.stackRollbackConfiguration.no_rollback_triggers"),description:""})})));return"container"===n?r.createElement(Cr.Z,{"data-testid":"rollback-configuration-section",header:l,disableContentPaddings:!0},o):r.createElement(Zt.Z,{"data-testid":"rollback-configuration-section",headerText:g("stacksList.stack_tab_rollback_configuration"),headerDescription:t&&g("stack_info_rollbacks_description"),variant:"container",disableContentPaddings:!0},o)},ml=e=>{let{displayDescription:t=!1,loading:a=!1,tableTestId:n="tags-table",tags:s=[]}=e;const[i,l]=(0,r.useState)(""),o=s?.filter(fa(i))||[],c=i&&!o.length?r.createElement(nl,{onClick:()=>l("")}):r.createElement(ci,{header:g("stacksList.stackTags.empty_tags_header"),description:g("stacksList.stackTags.empty_tags_description")});return r.createElement(Li,{testId:n,header:r.createElement(Rr.Z,{description:t&&g("stack_info_tags_description")},g("stacksList.stack_tab_tags")),columnDefinitions:[{id:"key",header:g("stacksList.stackTags.column_label_key_id"),cell:e=>e.key,minWidth:200,sortingField:"key"},{id:"value",header:g("stacksList.stackTags.column_label_value_id"),cell:e=>e.value,minWidth:200,sortingField:"value"}],trackByKey:"key",customEmpty:c,allItems:o,defaultSort:{isDescending:!1,sortingColumn:{sortingField:"key"}},customFilter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter tags",filteringPlaceholder:g("stacksList.stackTags.search_tags"),filteringText:i,filteringClearAriaLabel:"Clear tags filter input",onChange:e=>l(e.detail.filteringText)}),resizableColumns:!0,isLoading:a,preferences:{}})},pl=e=>{let{className:t="",testId:a="",controlId:n="",placeholder:s,loading:i,filteringText:l,filterHandler:o,ariaLabel:c}=e;const[d,u]=(0,r.useState)("");(0,r.useEffect)((()=>{u(l)}),[l]);const m=e=>{d!==l&&o(e)};return r.createElement(Vs.Z,{ariaRequired:!0,ariaLabel:c,type:"search",controlId:n,className:t,"data-testid":a,placeholder:s,value:d,disabled:i,onChange:e=>{u(e.detail.value),""===e.detail.value&&m("")},onBlur:()=>m(d),onKeyDown:e=>{13===e.detail.keyCode&&m(d)}})};var _l=a(89779),El=a(66726),gl=a.n(El);const hl=e=>{let{filteringPlaceholder:t,filteringClearAriaLabel:a,filteringText:n,onChange:s}=e;const[i,l]=(0,r.useState)(n),o=(0,r.useCallback)(gl()((e=>{s&&s(e)}),200),[]);return(0,r.useEffect)((()=>()=>{o.cancel()}),[o]),(0,r.useEffect)((()=>{""===n&&l("")}),[n]),r.createElement(Ci.Z,{filteringAriaLabel:"Filter item",filteringPlaceholder:t,filteringText:i,filteringClearAriaLabel:a,className:"input-filter",onChange:e=>{l(e.detail.filteringText),o(e)}})},Sl=e=>{let{testId:t,columnDefinitions:a,defaultSort:n,filter:s,header:i,items:l,loading:o,preferences:c,stickyHeaderVerticalOffset:d,viewSelect:u,visibleContentOptionsGroups:m,onClearFilter:p,onConfirmPreferences:_,onRefresh:E}=e;const{collectionProps:{empty:h,onSortingChange:S,sortingColumn:T,sortingDescending:b},expandNode:f,items:k,actions:A,filterProps:{filteringText:I,onChange:y},reset:C}=(0,_l.jd)(l,{columnDefinitions:a,keyPropertyName:"id",parentKeyPropertyName:"parentId",expandedPropertyName:"expanded",filtering:{defaultFilteringText:s.filteringText,noMatch:r.createElement(nl,{onClick:()=>{C(),A.setFiltering(""),p()}}),empty:r.createElement(ci,{header:s.empty.title,description:s.empty.subtitle})},sorting:{defaultState:n}});return r.createElement(_l.xk,{stickyHeader:!0,stickyHeaderVerticalOffset:d,columnDefinitions:a,empty:h,expandChildren:f,"data-testid":t||"cfn-related-table",filter:r.createElement(hl,{filteringPlaceholder:s.filteringPlaceholder,filteringText:I,filteringClearAriaLabel:s.filteringClearAriaLabel,onChange:e=>{y(e),s.onChange&&s.onChange(e)}}),filteringText:I,header:r.createElement(Rr.Z,{description:i.description,counter:i.counter?`(${i.counter})`:void 0,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},u,E&&r.createElement(Zr,{loading:o,onRefresh:E}))},i.title),items:k,loading:o,onSortingChange:S,preferences:r.createElement(Ai.Z,{preferences:c,onConfirm:e=>{let{detail:t}=e;return _(t)},title:g("table_preferences_title"),cancelLabel:g("table_preferences_cancel_label"),confirmLabel:g("table_preferences_confirm_label"),visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:m},wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")}}),resizableColumns:!0,sortingColumn:T,sortingDescending:b,trackBy:"id",visibleColumns:c.visibleContent,wrapLines:c.wrapLines})},Tl=e=>{let{header:t,description:a,footer:n,children:s}=e;return r.createElement(z.Z,{margin:{vertical:"l"}},r.createElement(Cr.Z,{header:r.createElement(Rr.Z,{variant:"h2",description:a},t),footer:n},r.createElement(Or.Z,null,s)))};var bl=a(41129);function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fl.apply(this,arguments)}const kl=e=>{let{i18nStrings:t,loading:a,loadingText:n,hasPaginationToken:s,items:i,header:l,filter:o,selectedItems:c,cardDefinition:d,trackBy:u,fetchMore:m,setCurrentPage:p,selectionType:_,onSelectionChange:E,cardsPreferences:h,preferences:S,cardsPerRow:T,isItemDisabled:b,stickyHeader:f,scrollToTop:k,keepSelection:A,className:I="cfn-cards",variant:y}=e;const[C,R]=(0,r.useState)(!1),[v,L]=(0,r.useState)(1),{pageSize:P}=h,N={pagination:{pageSize:P},selection:{keepSelection:A}},O=(0,ki.K)(i,N),{items:x,collectionProps:D,paginationProps:w}=O;return r.useEffect((()=>{v!==w.currentPageIndex&&w.onChange({detail:{currentPageIndex:v}})}),[i]),r.useEffect((()=>{p(v)}),[v,p]),r.useEffect((()=>{R(w.disabled)}),[i,w.disabled]),r.useLayoutEffect((()=>{k&&D.ref.current&&D.ref.current.scrollToTop()}),[P]),r.createElement(bl.Z,fl({},D,{ariaLabels:t.ariaLabels,empty:r.createElement(ci,{header:t.emptyState.header,description:t.emptyState.description}),className:I,trackBy:u,cardDefinition:d,items:x,cardsPerRow:T,loading:a,loadingText:n,selectionType:_,selectedItems:c,onSelectionChange:E,header:l,filter:o,pagination:r.createElement(Ii.Z,{currentPageIndex:w.currentPageIndex,pagesCount:w.pagesCount,openEnd:s,disabled:C,ariaLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",e.toString())},onChange:e=>{const{detail:{currentPageIndex:t}}=e,a=t>w.pagesCount;L(e.detail.currentPageIndex),s&&a?(m(),R(!0)):w.onChange(e)}}),preferences:S,isItemDisabled:b,stickyHeader:f,variant:y}))},Al=function(e){let{itemKey:t,itemValue:a,id:n}=e;return r.createElement("div",{id:n},r.createElement(z.Z,{variant:"awsui-key-label"},t),r.createElement("div",null,a||"-"))},Il=()=>r.createElement(sn.Z,{type:"error",header:g("errors.page_not_found_message")},r.createElement(z.Z,{margin:{top:"m"}},r.createElement(ee,{to:"/stacks"},g("errors.page_not_found_link")))),yl=()=>{const{stackId:e}=(0,Q.UO)();return r.createElement(sn.Z,{type:"error",header:g("errors.stack_not_found_message")},r.createElement(z.Z,{margin:{top:"m"}},r.createElement("div",{"data-testid":"stack-id"},decodeURIComponent(e)),r.createElement(z.Z,{margin:{top:"m"}},r.createElement(ee,{to:"/stacks"},g("errors.page_not_found_link")))))},Cl=()=>(ps(),r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:"page-notfound",element:r.createElement(Il,null)}),r.createElement(Q.AW,{path:"stack-notfound/:stackId",element:r.createElement(yl,null)}),r.createElement(Q.AW,{path:"*",element:r.createElement(Il,null)})));var Rl=a(68120);const vl=[{id:"stackName",header:g("export.column_label_stack_name"),cell:e=>e&&r.createElement("span",null,r.createElement(ee,{to:`/stacks/stackinfo?stackId=${encodeURIComponent(e)}`},r.createElement(Zs,{text:e})))||"",minWidth:200}],Ll=[{id:"name",header:g("exportsList.column_label_export_name"),cell:e=>e&&r.createElement("span",{title:e.name},r.createElement(ee,{to:`/exports/${encodeURIComponent(e.name)}`},e.name))||"-",minWidth:200},{id:"value",header:g("exportsList.column_label_export_value"),cell:e=>r.createElement(yr,{value:e.value}),minWidth:200},{id:"exportingStackName",header:g("exportsList.column_label_stack_name"),cell:e=>e&&r.createElement("span",null,r.createElement(ee,{to:`/stacks/stackinfo?stackId=${encodeURIComponent(e.exportingStackId)}`},e.exportingStackName))||"-",minWidth:200},{id:"exportingStackId",header:g("exportsList.column_label_stack_id"),cell:e=>r.createElement(Ms,{value:e.exportingStackId}),minWidth:200}],Pl=[{label:null,options:[{id:"name",label:g("exportsList.column_label_export_name"),editable:!0,visible:!0},{id:"value",label:g("exportsList.column_label_export_value"),editable:!0,visible:!0},{id:"exportingStackName",label:g("exportsList.column_label_stack_name"),editable:!0,visible:!0},{id:"exportingStackId",label:g("exportsList.column_label_stack_id"),editable:!0,visible:!0}]}],Nl={emptyState:{title:g("exportsList.no_exported_values"),subtitle:"",action:""},noMatch:{title:g("no_matches"),subtitle:g("no_results_match"),action:""},filter:{ariaLabel:"",placeholder:"",countText:()=>"",filteringClearAriaLabel:"Clear exported values filter input"},loadingText:"",paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{}},Ol={isDescending:!1,sortingColumn:{sortingField:"name"}},xl={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:Pl}},Dl=e=>e.map((e=>({...e,exportingStackName:Na(e.exportingStackId)}))),wl=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a}=e.tablePreferences.EXPORTS;return{wrapLines:t,visibleContent:a,pageSize:100}})),Zl=_r((()=>{const e=(0,s.I0)(),t=(0,s.v9)(wl),a={resource:o.ApiResource.Exports,action:o.ApiAction.List,requestParams:{},xsrfToken:me.xsrfToken,filteringFields:t.visibleContent,transformCb:Dl},{status:n,error:i,cachedData:l,displayData:c,fetchNextPage:d,filteringText:u,hasNextPage:m,isFetching:p,refreshData:_,setFilteringText:E}=(0,o.useSDKInfiniteQuery)(a);es({status:n,error:i,errorText:{errorContent:g("exportsList.fetch_exports_error_message")}});const h=r.createElement(Rr.Z,{variant:"awsui-h1-sticky",actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:p,onRefresh:_}))},g("exports_title")),S=l?.exports?.length?r.createElement(nl,{onClick:()=>E("")}):r.createElement(ci,{header:g("exportsList.no_exported_values"),description:""});return r.createElement(ln,{errorKey:"exports_list_error"},r.createElement(Li,{className:"e2e-test-exports-list",i18nStrings:Nl,trackByKey:"name",preferences:t,defaultSort:Ol,collectionPreferencesProps:xl,columnDefinitions:Ll,isLoading:p,allItems:c,header:h,customEmpty:S,customFilter:r.createElement(pl,{ariaLabel:"Filter exports",placeholder:g("exportsList.filter_exports_by_name"),filteringText:u,loading:p,filterHandler:e=>{E(e)}}),hasPaginationToken:m,stickyHeader:!0,variant:"full-page",resizableColumns:!0,fetchMore:d,onConfirmPreferences:t=>e((e=>Je({preferenceType:N.Exports,preferenceSettings:e}))(t))}))}),Tt.EXPORTS_LIST),Ul=_r((function(){const{exportId:e}=(0,Q.UO)(),t=decodeURIComponent(e),a={resource:o.ApiResource.Imports,action:o.ApiAction.List,requestParams:{exportName:t},xsrfToken:me.xsrfToken,filteringFields:[]},{cachedData:n,displayData:s,error:i,fetchNextPage:l,filteringText:c,hasNextPage:d,isFetching:u,isFetchingNextPage:m,status:p,setFilteringText:_}=(0,o.useSDKInfiniteQuery)(a);es({status:p,error:i,errorText:{errorContent:g("export.fetch_import_list_error_message")}});const E=n?.imports?.length?r.createElement(nl,{onClick:()=>_("")}):r.createElement(ci,{header:"",description:g("export.no_values_found",t)});return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1"},t)},r.createElement(ln,{errorKey:"export_detail_error"},r.createElement(yi.Z,{className:"e2e-test-export-details",columnDefinitions:vl,header:r.createElement(Rr.Z,null,g("export.import_label")),empty:E,filter:r.createElement(pl,{ariaLabel:"Filter imports",placeholder:g("stacksList.filter_stacks"),filteringText:c,loading:u,filterHandler:e=>{_(e)}}),loading:u,items:s,stickyHeader:!0,resizableColumns:!0}),d&&r.createElement(Us,{onLoadMore:l,nextLoading:m})))}),Tt.EXPORT_DETAILS),Fl=()=>r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:":exportId",element:r.createElement(Ul,null)}),r.createElement(Q.AW,{path:"*",element:r.createElement(Zl,null)})),Ml="SET_CONFIGURATION_EXTENSION_STATE",Kl="CLEAR_CONFIGURATION_EXTENSION_STATE";function Wl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ml:return{...e,...t.payload};case Kl:return{...zl};default:return e}}const zl={typeArn:"",configuration:null,configurationAlias:"",setConfigureExtensionState:()=>{},clearConfigureExtensionState:()=>{}},$l=r.createContext({...zl}),Vl=e=>{let{children:t}=e;const[a,n]=r.useReducer(Wl,zl),s={...a,setConfigureExtensionState:e=>n({type:Ml,payload:e}),clearConfigureExtensionState:()=>{n({type:Kl})}};return r.createElement($l.Provider,{value:s},t)},Gl="SET_ACTIVATE_EXTENSION_STATE",Bl="CLEAR_ACTIVATE_EXTENSION_STATE";function Hl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Gl:return{...e,...t.payload,...Boolean(t.payload?.typeName)&&Boolean(!e.typeNameAlias)&&{typeNameAlias:t.payload?.typeName}};case Bl:return{...ql};default:return e}}const ql={arn:"",typeNameAlias:"",loggingConfig:null,executionRoleArn:"",autoUpdate:null,isActivated:!1,configurePreference:Vt,setActivateExtensionState:()=>{},clearActivateExtensionState:()=>{}},Yl=r.createContext({...ql}),Xl=e=>{let{children:t}=e;const[a,n]=r.useReducer(Hl,ql),s={...a,setActivateExtensionState:e=>n({type:Gl,payload:e}),clearActivateExtensionState:()=>{n({type:Bl})}};return r.createElement(Yl.Provider,{value:s},t)},jl=r.createContext({}),Ql=e=>{let{children:t}=e;const[a,n]=r.useState(null);return r.createElement(jl.Provider,{value:{modalType:a,setModalType:n}},t)},Jl="SET_REGISTER_PUBLISHER_DATA_STATE",eo="SET_REGISTER_PUBLISHER_METADATA_STATE",to="CLEAR_REGISTER_PUBLISHER_STATE";function ao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Jl:return{...e,data:{...t.payload}};case eo:return{...e,metadata:{...t.payload}};case to:return{...ro};default:return e}}const ro={data:{connections:{},acceptTerms:!1,createdConnection:{},selectedConnectionArn:""},metadata:{verificationMethod:"AWS_Marketplace",codeStarPreference:"EXISTING_CONNECTION",codeStarWindowStatus:null,showErrors:!1},setRegisterPublisherDataState:()=>{},setRegisterPublisherMetadataState:()=>{},clearRegisterPublisherState:()=>{}},no=r.createContext({...ro}),so=e=>{let{children:t}=e;const[a,n]=r.useReducer(ao,ro),s={...a,setRegisterPublisherDataState:e=>n({type:Jl,payload:e}),setRegisterPublisherMetadataState:e=>n({type:eo,payload:e}),clearRegisterPublisherState:()=>{n({type:to})}};return r.createElement(no.Provider,{value:s},t)};var io=a(98056),lo=a(9071);const oo=e=>[{id:"edit",text:g("edit_label"),items:[{id:"editConfiguration",text:g("edit_configuration"),disabled:Boolean(e.editConfiguration)},{id:"editAutomaticUpdates",text:g("edit_automatic_updates"),disabled:Boolean(e.editAutomaticUpdates)},{id:"editExecutionRole",text:g("edit_execution_role"),disabled:Boolean(e.editExecutionRole)},{id:"editLoggingConfig",text:g("edit_logging_config"),disabled:Boolean(e.editLoggingConfig)}]},{id:"updateExtension",text:g("update"),disabled:Boolean(e.updateExtension)},{id:"disableExtension",text:g("deactivate"),disabled:Boolean(e.disableExtension)}],co=e=>{let{dataTestId:t,text:a=g("actions_label"),actionsDropdownDisabled:n=!0,expandableGroups:s=!0,disabledItems:i={},onItemClick:l}=e;return r.createElement(lo.Z,{"data-testid":t,items:oo(i),onItemClick:l,expandableGroups:s,disabled:n},a)},uo=()=>{const e=(0,r.useContext)(Yl);if(void 0===e)throw new Error("ActivateExtensionContext must be used within a ActivateExtensionProvider");return e},mo=e=>{let{arn:t="",typeName:a="",type:r=""}=e;const n=(0,Q.s0)();let s;t?s={arn:t}:a&&r&&(s={typeName:a,type:r});const i={resource:o.ApiResource.Types,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,requestParams:s,enabled:Boolean(s),placeholderData:{},shouldAutoRefetch:!1},l=(0,o.useSDKQuery)(i);return es({status:l?.status,error:l?.error,errorText:{errorContent:l?.error?.message},errorHandler:()=>{n("/registry/activated-extensions/resource-types")}}),l},po=()=>{const e=(0,r.useContext)($l);if(void 0===e)throw new Error("ConfigureExtensionContext must be used within a ConfigureExtensionProvider");return e},_o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(0,Q.s0)(),[a,n]=(0,r.useState)(!0),[s,i]=(0,r.useState)(1),[l,c]=(0,r.useState)([]),d=e=>e.filter((e=>e&&e.length>0)).map((e=>Tr(e))),[u,m]=(0,r.useState)(d(e)),p=u.map((e=>({typeArn:e}))),_={resource:o.ApiResource.TypeConfigurations,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,requestParams:{...(0,o.isTangerineBox)()?{typeConfigurationIdentifiers:p}:{typeArns:u}},enabled:Boolean(u.length)},E=()=>{m(d(e)),c([]),i(1),n(!0)},g=(0,o.useSDKQuery)(_);return es({status:g?.status,error:g?.error,errorText:{errorContent:g?.error?.message},errorHandler:()=>{t("/registry/activated-extensions/resource-types")}}),(0,r.useEffect)((()=>{if(g?.data){const{typeConfigurations:e,unprocessedTypeConfigurations:t}=g.data;if(c([...l,...e]),s<3&&t.length>0){const e=t.map((e=>e.typeArn));m(e),n(Boolean(e.length)),i(s+1)}else n(!1)}}),[g?.data]),(0,r.useEffect)((()=>{m(d(e))}),[JSON.stringify(e)]),(0,r.useEffect)((()=>()=>E()),[]),{...g,refreshData:()=>{E(),g.refreshData()},isBatchFetching:a,data:l,configurationErrors:g?.data?.errors||[]}},Eo=e=>{let{publisherId:t}=e;const a=(0,s.I0)(),r=(0,Q.s0)(),n={resource:o.ApiResource.Publisher,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,requestParams:La({publisherId:t}),placeholderData:{},shouldAutoRefetch:!1,onError:e=>{!Boolean(t)&&e.message.includes("not registered as a publisher")||a(He({id:ne(),content:e.message,type:"ERROR",dismissible:!0}))},onSuccess:()=>{r("/registry/publisher/details")}};return(0,o.useSDKQuery)(n)},go=e=>{let{successHandler:t,errorHandler:a}=e;const r={resource:o.ApiResource.Types,action:o.ApiAction.Activate,xsrfToken:me.xsrfToken,onError:e=>{a?.(e)},onSuccess:()=>{t?.()}};return(0,o.useSDKMutation)(r)},ho=()=>{const e=(0,r.useContext)(jl);if(void 0===e)throw new Error("ExtensionActionsContext must be used within a ExtensionActionsProvider");return e},So=e=>{let{strictArnCheck:t=!1}=e;const a=(0,Q.s0)(),n=os(),s=n?.get("arn")||n?.get("typeArn")||"",i=n?.get("typeName")||"",l=n?.get("type")||"";return r.useEffect((()=>{(t&&!s||!s&&(!i||!l))&&a("/registry")}),[s,i,l]),{arn:s,typeName:i,type:l}},To=()=>{const e=(0,r.useContext)(no);if(void 0===e)throw new Error("RegisterPublisherContext must be used within a RegisterPublisherStateProvider");return e},bo=e=>{let{queryParams:{visibility:t,type:a,category:n,typeNamePrefix:s,publisherId:i,publisherNamePrefix:l,maxResults:c=100},shouldAutoFetch:d=!1,onError:u}=e;const m={...n&&{category:n},...s&&{typeNamePrefix:s},...i&&{publisherId:i},...l&&{publisherNamePrefix:l}},p={...(0,o.isTangerineBox)()?{filters:m}:{...m},...c&&{maxResults:c},...t&&{visibility:t},...a&&{type:a}},_={resource:o.ApiResource.Types,action:o.ApiAction.List,xsrfToken:me.xsrfToken,requestParams:p,filteringFields:[],enabled:!0,placeholderData:[],shouldAutoRefetch:!1},E=(0,o.useSDKInfiniteQuery)(_),{hasNextPage:g,isFetching:h,fetchNextPage:S,displayData:T}=E||{};return(0,r.useEffect)((()=>{const e=T.length<c;d&&g&&!h&&e&&S()}),[g,h,T]),es({status:E?.status,error:E?.error,errorText:{errorContent:E?.error?.message},errorHandler:u}),E},fo=()=>{const[e,t]=(0,r.useState)([]),a=(0,Q.UO)(),n=(0,Q.s0)(),s=a?.selectedTabId||Jt,i=a?.extensionGroup||ca,{arn:l,typeName:c,type:d}=So({strictArnCheck:!1}),{data:u,isFetching:m}=mo({arn:l,typeName:c,type:d}),p=u||{},{displayData:_,isFetching:E}=(e=>{let{typeName:t,type:a,publisherId:r}=e;const n=(0,Q.s0)(),s={resource:o.ApiResource.TypeVersions,action:o.ApiAction.List,xsrfToken:me.xsrfToken,requestParams:{typeName:t,type:a,...Boolean(r)&&{publisherId:r}},filteringFields:[],queryOptions:{enabled:Boolean(t&&a)},shouldAutoRefetch:!1},i=(0,o.useSDKInfiniteQuery)(s);return es({status:i?.status,error:i?.error,errorText:{errorContent:i?.error?.message},errorHandler:()=>{n("/registry/activated-extensions/resource-types")}}),i})({type:p.type,typeName:p.typeName,publisherId:p.publisherId}),h=_||[];(0,r.useEffect)((()=>{h.length>0&&t(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return fe(A.UNO_REGISTRY)?t.filter((t=>t.typeName===e.typeName&&t.publicVersionNumber)).map((e=>({label:g("registry.label_version",e.publicVersionNumber),value:e.arn}))):t.filter((t=>t.typeName===e.typeName&&t.versionId)).map((e=>{const t=e.isDefaultVersion?` (${g("label_default")})`:"";return{label:g("registry.label_version",e.versionId.replace(/^0+/,""))+t,value:e.arn}}))}(p,h))}),[h]);let S=p.arn;fe(A.UNO_REGISTRY)&&!function(e){return!!e&&/arn:aws[A-Za-z0-9-]{0,64}:cloudformation:[A-Za-z0-9-]{1,64}::type\/.+\/[0-9a-zA-Z]{12}\/.+(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(e)}(p.arn)&&Boolean(p.latestPublicVersion)&&(S=`${p.arn}/${p.latestPublicVersion}`);const T=e.find((e=>e.value===S));return r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select version","data-testid":"extension-version-select",options:e.reverse()||[],selectedOption:T,statusType:m||E?"loading":"finished",onChange:e=>n(`/registry/${i}/details/${s}?${(0,b.stringify)({arn:e.detail.selectedOption.value})}`),placeholder:g("versions_label"),empty:g("version_select_empty_description")})},ko=()=>{const e=(0,Q.s0)(),{arn:t,typeName:a,type:n}=So({strictArnCheck:!1}),{data:s,isFetching:i}=mo({arn:t,typeName:a,type:n}),{getFlag:l}=ms(),o=s||{},c=ho(),d=Ir(t||""),u="PUBLIC"===o.visibility&&Boolean(o.publisherId),m=fe(A.UNO_REGISTRY)&&u||!fe(A.UNO_REGISTRY)&&"PRIVATE"===o.visibility,p=u?r.createElement(Dt,{text:g("activate"),variant:"primary",disabled:i,"data-testid":"enable-extension-button",onClick:()=>{const t=`/registry/activate-extension?typeArn=${encodeURIComponent(o.arn)}`,a=l(Sa)?Ea.ACTIVATE_FROM_OVERVIEW_AFTER_FILTER:Ea.ACTIVATE_FROM_OVERVIEW;Er({category:l(Ta)?Wt.THIRD_PARTY:null,selectedFilterOption:o.type,currentStep:a,eventDetail:{activateLink:t}}),e(t)},key:"enable_extension_from_detail"}):null,_=o.type===Ht,E="PRIVATE"===o.visibility&&Boolean(o.publisherId)?r.createElement(Jr,{policy:A.UNO_REGISTRY},r.createElement(Es.Z,{size:"s",direction:"horizontal"},r.createElement(co,{dataTestId:"enabled-resource-type-actions",text:g("actions_label"),disabledItems:{updateExtension:!0,editConfiguration:!(Boolean(o.configurationSchema)&&o.visibility===Yt.PRIVATE&&o.type!==Ht),editExecutionRole:_,editLoggingConfig:_},expandableGroups:!0,actionsDropdownDisabled:!1,onItemClick:t=>{"editConfiguration"===t.detail.id?e(`/registry/configure-extension?typeArn=${encodeURIComponent(o.arn)}`):c.setModalType(t.detail.id)}}))):null;return r.createElement(Rr.Z,{variant:"h1",description:o.documentationUrl&&r.createElement(V.Z,{external:!0,externalIconAriaLabel:"Opens in a new tab",rel:"noopener noreferrer",target:"_blank",href:o.documentationUrl,ariaLabel:"View Documentation Link",fontSize:"inherit"},g("registry.view_documentation")),actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},E,p,m?r.createElement(fo,null):null)},a||o.typeName||d)},Ao=(e,t)=>({...e&&{pageSize:e.pageSize||t,wrapLines:e.wrapLines,visibleContent:e?.visibleContent||[]}}),Io=(e,t,a)=>({title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},pageSizePreference:{title:g("table_size"),options:t},...e?.visibleContent&&{visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:a}}}),yo=e=>{let{setTablePreferences:t,columns:a,emptyLabel:n,header:s,items:i,loading:l,preferences:o,pageSizeOptions:c,additionalProperties:d,propertyLabel:u,sortingColumn:m,filteringPlaceholder:p,searchableFields:_,visibleContentPreferenceOptions:E}=e;const[h,S]=(0,r.useState)(""),[T,b]=(0,r.useState)([]);r.useEffect((()=>{b(i)}),[i]);const f=Boolean(h)?r.createElement(nl,{onClick:()=>{S(""),b(i)}}):r.createElement(ci,{header:n,description:""}),k=r.createElement(Rr.Z,{variant:"h2",counter:`(${T.length})`},s),A=r.createElement(z.Z,{margin:{bottom:"m"}},r.createElement(sn.Z,{header:"Known Issues/Limitations"},g("registry.generic_schema_warning",u)));return r.createElement(r.Fragment,null,d&&A,r.createElement(Li,{className:"e2e-test-registry-details-list-table",trackByKey:null,resizableColumns:!0,columnDefinitions:a,isLoading:l,header:k,allItems:T,customEmpty:f,preferences:Ao(o,i?.length),collectionPreferencesProps:Io(o,c,E),onConfirmPreferences:t,customFilter:r.createElement(Ci.Z,{filteringText:h,filteringPlaceholder:p||g("stackSet.details.filter_placeholder"),filteringAriaLabel:"Filter registries",filteringClearAriaLabel:"Clear registries filter input",onChange:e=>{S(e.detail.filteringText);const t=i.filter((t=>_.map((e=>e.field)).some((a=>{const r=e.detail.filteringText.toLowerCase();return Array.isArray(t[a])?t[a].map((e=>e.toLowerCase())).some((e=>e.includes(r))):t[a].toLowerCase().includes(r)}))));b(t)},disabled:!i.length}),defaultSort:m,hasPaginationToken:!1}))},Co=[{label:g("on"),description:g("auto_update_on_description"),value:"AUTO_UPDATE_ON"},{label:g("off"),description:g("auto_update_off_description"),value:"AUTO_UPDATE_OFF"}],Ro=e=>{let{selectedTile:t,onTileChange:a}=e;return r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("auto_update"),description:g("auto_update_description"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,value:t,items:Co,onChange:a}))},vo=e=>{let{count:t,canEnable:a,onEnableClick:n}=e;return r.createElement(Rr.Z,{counter:t,variant:"h2",actions:r.createElement(Ot.Z,{variant:"primary",disabled:!a,onClick:n},g("activate"))},g("extensions"))},Lo=e=>{let{enabled:t}=e;return t?r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("activated")):r.createElement(qr.Z,{iconAriaLabel:"stopped",type:"stopped"},g("not_activated"))};var Po=a(81123);const No={disableExtension:()=>{const{arn:e,typeName:t,type:a}=So({strictArnCheck:!1}),{data:n,isFetching:i}=mo({arn:e,typeName:t,type:a}),l=n||{},{mutate:c,isLoading:d}=(()=>{let e="",t="";const a=(0,s.I0)(),r=(0,Q.s0)(),n={resource:o.ApiResource.Types,action:o.ApiAction.Deactivate,xsrfToken:me.xsrfToken,enabled:Boolean(t),onMutate:a=>{t=a.arn,e=Ir(a.arn)},onSuccess:()=>{r("/registry/activated-extensions"),a(He({id:ne(),content:g("deactivate_extension_success",e),type:"SUCCESS",dismissible:!0}))},onError:t=>{a(He({id:ne(),header:g("deactivate_extension_failure",e),content:ce(t),type:"ERROR",dismissible:!0}))}};return(0,o.useSDKMutation)(n)})(),u=ho(),m=()=>{u.setModalType(null)};r.useEffect((()=>()=>m()),[]);const p=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link","data-testid":"deactivate-cancel-button",onClick:()=>m(),disabled:d},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary","data-testid":"deactivate-button",onClick:()=>(c({arn:e||l.arn}),void u.setModalType(null)),disabled:i||d,loading:d},g("deactivate")));return r.createElement(Po.Z,{"data-testid":"deactivate-modal",header:i?"":g("deactivate_extension"),visible:!0,footer:p,onDismiss:()=>u.setModalType(null),closeAriaLabel:g("close_label")},i?r.createElement(vr.Z,{size:"large"}):r.createElement(r.Fragment,null,r.createElement(z.Z,{margin:{bottom:"s"}},h("deactivate_extension_confirmation",r.createElement("strong",null,l.typeName))),r.createElement(sn.Z,null,g("deactivate_extension_description"))))},editAutomaticUpdates:()=>{const[e,t]=r.useState(!0),a=(0,s.I0)(),{arn:n,typeName:i,type:l}=So({strictArnCheck:!1}),{data:o,isFetching:c,refreshData:d}=mo({arn:n,typeName:i,type:l}),u=o||{},m=ho(),{mutate:p,isLoading:_}=go({successHandler:()=>{m.setModalType(null),d()},errorHandler:e=>{a(He({id:ne(),content:ce(e),type:"ERROR",dismissible:!0}))}});r.useEffect((()=>{t(u.autoUpdate)}),[u]),r.useEffect((()=>()=>E()),[]);const E=()=>{m.setModalType(null)},h=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link","data-testid":"edit-automatic-updates-cancel-button",onClick:()=>E(),disabled:_},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary","data-testid":"edit-automatic-updates-button",onClick:()=>(()=>{const t={publicTypeArn:Tr(u.originalTypeArn),typeNameAlias:u.typeName,autoUpdate:e};p(t)})(),disabled:c||_,loading:_},g("save_label")));return r.createElement(Po.Z,{"data-testid":"edit-automatic-updates-modal",header:g("edit_automatic_updates"),visible:!0,onDismiss:()=>E(),closeAriaLabel:g("close_label"),footer:h},c?r.createElement(vr.Z,{size:"large"}):r.createElement(Ro,{onTileChange:e=>{return a=e.detail.value,void t(a===zt);var a},selectedTile:e?zt:$t}))},editExecutionRole:()=>{const[e,t]=r.useState(""),[a,n]=r.useState(""),{arn:s,typeName:i,type:l}=So({strictArnCheck:!1}),{data:c,isFetching:d,refreshData:u}=mo({arn:s,typeName:i,type:l}),m=c||{},p=ho(),{mutate:_,isLoading:E}=go({successHandler:()=>{p.setModalType(null),u()},errorHandler:e=>{n(ce(e))}});r.useEffect((()=>{t(m.executionRoleArn)}),[m]),r.useEffect((()=>()=>S()),[]);const S=()=>{p.setModalType(null)},T=`https://${k.host}/iam/home?region=${(0,o.getRIPRegion)()}`,b=d?r.createElement(vr.Z,{size:"large"}):r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"edit-execution-role-formfield",errorText:a,label:g("execution_role_arn"),constraintText:g("execution_role_arn_hint"),stretch:!0,description:h("execution_role_arn_description",r.createElement(z.Z,{variant:"span",fontSize:"body-s",margin:{left:"xxs"}},r.createElement(zr,{isInline:!1,externalLinkText:g("execution_role_arn_doc_text"),pathAlias:"extensions-role"})),r.createElement(z.Z,{variant:"span",fontSize:"body-s",margin:{left:"xxs"}},r.createElement(zr,{isInline:!1,externalLinkText:g("aws_iam"),docsBaseUrl:T,pathAlias:""})))},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"edit-execution-role-input",placeholder:g("execution_role_arn_placeholder"),value:e||"",onChange:e=>{return a=e.detail.value,void t(a);var a}})),f=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link","data-testid":"edit-execution-role-cancel-button",onClick:()=>S(),disabled:E},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary","data-testid":"edit-execution-role-button",onClick:()=>(()=>{const t={publicTypeArn:Tr(m.originalTypeArn),typeNameAlias:m.typeName,executionRoleArn:e};_(t)})(),disabled:d||E,loading:E},g("save_label")));return r.createElement(Po.Z,{"data-testid":"edit-execution-role-modal",header:g("edit_execution_role"),visible:!0,footer:f,onDismiss:()=>S(),closeAriaLabel:g("close_label")},b)},editLoggingConfig:()=>{const[e,t]=r.useState(va("")),[a,n]=r.useState(""),{arn:s,typeName:i,type:l}=So({strictArnCheck:!1}),{data:o,isFetching:c,refreshData:d}=mo({arn:s,typeName:i,type:l}),u=o||{},m=ho(),{mutate:p,isLoading:_}=go({successHandler:()=>{m.setModalType(null),d()},errorHandler:e=>{n(ce(e))}});r.useEffect((()=>{t(va(u.loggingConfig||""))}),[u]),r.useEffect((()=>()=>E()),[]);const E=()=>{m.setModalType(null)},h=e.error&&e.error.message,S=c?r.createElement(vr.Z,{size:"large"}):r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"edit-logging-config-formfield",errorText:h||a,label:g("logging_config"),constraintText:g("logging_config_hint"),stretch:!0,description:r.createElement(r.Fragment,null,r.createElement("span",null,g("logging_config_description")),r.createElement(zr,{ariaLabel:"activating public extensions for use in your AWS account",pathAlias:"extensions-logging"}))},r.createElement(si.Z,{ariaRequired:!0,"data-testid":"edit-logging-config-textarea",placeholder:g("logging_config_placeholder"),value:e.jsonString||"",onChange:e=>{return a=e.detail.value,void t(va(a||""));var a}})),T=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link","data-testid":"edit-logging-config-cancel-button",onClick:()=>E(),disabled:_},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary","data-testid":"edit-logging-config-button",onClick:()=>(()=>{const t={publicTypeArn:Tr(u.originalTypeArn),typeNameAlias:u.typeName,loggingConfig:e.parsedJSON};p(t)})(),disabled:c||_,loading:_},g("save_label")));return r.createElement(Po.Z,{"data-testid":"edit-logging-config-modal",header:g("edit_logging_config"),visible:!0,footer:T,onDismiss:()=>E(),closeAriaLabel:g("close_label")},S)},updateExtension:null},Oo=()=>{const e=ho(),t=No[e.modalType];return t?r.createElement(ln,{errorKey:"extension_action_error"},r.createElement(t,null)):null},xo={[na]:{header:g("registry.label_arn"),cell:e=>r.createElement(Yr,{text:e.arn})||"-"},[ra]:{header:g("registry_publisher"),cell:e=>r.createElement(z.Z,{variant:"span"},e?.typeName?.split("::")[0]||"-",fe(A.VERIFIED_PUBLISHER)&&"VERIFIED_PUBLISHER"===e?.publisherCategory&&r.createElement(r.Fragment,null,r.createElement(z.Z,{variant:"span",color:"text-body-secondary",padding:"xs"},"|"),r.createElement(Vr,null)))},[ta]:{header:g("registry.label_description"),cell:e=>e.description||"-"},[sa]:{header:g("registry.label_release_date"),cell:e=>r.createElement(Ui,{timestamp:e.timeCreated})||"-"},[aa]:{header:g("registry_title"),cell:e=>e.visibility===Yt.PUBLIC?g("registry.filter_public"):g("registry.filter_private")},[ia]:{header:g("registry.label_version",""),cell:e=>`${e.publicVersionNumber||e.arn&&e.arn.split("/").pop().replace(/^0+/,"")} ${e.isDefaultVersion?`(${g("registry.label_default")})`:""}`||"-"},[la]:{header:g("target_stacks"),cell:e=>e.hookConfiguration?Ds({status:e.hookConfiguration.targetStacks,isPopover:!0,popoverContent:Do[e.hookConfiguration.targetStacks]}):"-"},[oa]:{header:g("hook_behavior"),cell:e=>e.hookConfiguration&&T({type:S.HookFailureMode,value:e.hookConfiguration.failureMode||"-"})}},Do={[Ft.NONE]:g("target_stack_no_stacks_popover"),[Ft.ALL]:g("target_stack_all_stacks_popover")};function wo(e){return("HOOK"===e?[na,ta,la,ra,ia,oa,aa,sa]:[na,ra,ta,sa,aa,ia]).map((e=>({id:e,...xo[e]})))}const Zo=()=>{const{arn:e,typeName:t,type:a}=So({strictArnCheck:!1}),{data:n,isFetching:s}=mo({arn:e,typeName:t,type:a}),i=n||{},l=wo(i.type),o=(i.visibility===Yt.PUBLIC?l.filter((e=>e.id!==ia)):l).map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(i)})));return r.createElement(Lr,{header:g("registry.label_overview")},s?r.createElement(vr.Z,{size:"large"}):r.createElement(Or.Z,{columns:3,borders:"vertical"},o))},Uo=()=>{const{arn:e,typeName:t,type:a}=So({strictArnCheck:!1}),n=(0,Q.s0)(),{data:s,isFetching:i}=mo({arn:e,typeName:t,type:a}),l=s||{},{data:o,isBatchFetching:c,refreshData:d}=_o([e||s.arn]),u=o||[],m=l?.configurationSchema||"",p=u[0]?.configuration||"";return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Zt.Z,{"data-testid":"configuration-schema-expandable-section",variant:"container",header:r.createElement(Rr.Z,{description:r.createElement(r.Fragment,null,r.createElement("span",null,g("extension_detail_configuration_schema_tab_description")),r.createElement(wr,{ariaLabel:"extensions configuration",pathName:"extensions-configuration"})),actions:r.createElement(Es.Z,{direction:"horizontal",size:"s"},r.createElement(xe.Z,{size:"small",position:"top",triggerType:"custom",dismissButton:!1,content:r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("schema_copied"))},r.createElement(Ot.Z,{"data-testid":"copy-code-button",disabled:i,iconName:"copy",onClick:()=>{W(m)}},g("copy"))))},g("configuration_schema"))},i?r.createElement(vr.Z,{size:"large"}):m.length?r.createElement(Pr,null,m):r.createElement(ci,{header:g("extension_detail_configuration_schema_tab_empty_description"),description:""})),Boolean(m)&&r.createElement(Zt.Z,{"data-testid":"configuration-expandable-section",variant:"container",header:r.createElement(Rr.Z,{description:r.createElement(r.Fragment,null,r.createElement("span",null,g("extension_detail_configuration_tab_description")),r.createElement(wr,{ariaLabel:"extensions configuration",pathName:"extensions-configuration"})),actions:r.createElement(Es.Z,{direction:"horizontal",size:"s"},r.createElement(xe.Z,{size:"small",position:"top",triggerType:"custom",dismissButton:!1,content:r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("schema_copied"))},r.createElement(Ot.Z,{"data-testid":"edit-configuration-button",disabled:!(l.visibility===Yt.PRIVATE&&l.type!==Ht),onClick:()=>{n(`/registry/configure-extension?typeArn=${encodeURIComponent(l.arn)}`)}},g("edit_configuration"))))},g("configuration")),onChange:e=>{e.detail.expanded&&d()}},c?r.createElement(vr.Z,{size:"large"}):p.length?r.createElement(Pr,null,p):r.createElement(ci,{header:g("extension_detail_configuration_tab_empty_header"),description:g("extension_detail_configuration_tab_empty_description")})))},Fo=()=>{const{arn:e,typeName:t,type:a}=So({strictArnCheck:!1}),{data:n,isFetching:s}=mo({arn:e,typeName:t,type:a}),{schema:i=""}=n||{},l=()=>i?function(e){const t=JSON.parse(e),a=Ra(e),r={Resources:{MyModule:{Type:t.typeName,Properties:{}}}},n=a.reduce(((e,t)=>(e[t.name]=t.name,e)),{});return Object.assign(r.Resources.MyModule.Properties,n),JSON.stringify(r,null,4)}(i):"";return r.createElement(Lr,{header:g("registry.label_example_template"),loading:s,actionGroup:r.createElement(z.Z,{margin:{top:"xxs"}},r.createElement(xe.Z,{size:"small",position:"top",triggerType:"custom",dismissButton:!1,content:r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},`${g("stack.template_step_title")} ${g("copied")}`)},r.createElement(Dt,{analyticsKey:"resourceType_example_template_copy",onClick:()=>W(l()),icon:"copy",text:g("label_copy_template"),iconAlt:g("stackSet.details.copy_to_clipboard")},g("label_copy_template"))))},r.createElement(Pr,null,l()))},Mo=[{id:"name",header:g("registry.input_params_name"),cell:e=>e.name,minWidth:200,sortingField:"name"},{id:"value",header:g("registry.input_params_value"),cell:e=>e.value,minWidth:200},{id:"required",header:g("registry.input_params_required"),cell:e=>e.required?g("yes_label"):g("no_label"),minWidth:200}],Ko=[{id:"name",field:"name"},{id:"value",field:"value"}],Wo=[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}],zo=()=>{const[e,t]=r.useState([]),a=(0,s.I0)(),{arn:n,typeName:i,type:l}=So({strictArnCheck:!1}),{data:o,isFetching:c}=mo({arn:n,typeName:i,type:l}),{schema:d=""}=o||{};r.useEffect((()=>{!c&&d&&t(Ra(d))}),[c]);const u=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a,pageSize:r}=e.tablePreferences.EXTENSION_INPUT_PARAMETERS;return{pageSize:r,wrapLines:t,visibleContent:a}})),m=(0,s.v9)(u);return r.createElement(yo,{header:g("registry.label_input_parameters"),setTablePreferences:e=>{a(Je({preferenceType:N.ExtensionInputs,preferenceSettings:e}))},columns:Mo,emptyLabel:g("registry.empty_input_parameters"),items:e,loading:c,searchableFields:Ko,preferences:m,pageSizeOptions:Wo,additionalProperties:!1,propertyLabel:"",visibleContentPreferenceOptions:[{label:null,options:Mo.map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]})},$o=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("::");return 4===e.length&&e[e.length-1]===Ht?Ht:qt},Vo=e=>[{id:"logicalId",header:g("resource_import_logical_id"),cell:e=>e.logicalId,minWidth:200,sortingField:"logicalId"},{id:"type",header:g("stackSet.details.operation_type"),cell:t=>{const a=(0,b.stringify)({typeName:t.type,type:$o(t.type)}),n=`/registry/${e}/details/schema?${a}`;return r.createElement(ee,{to:n},t.type)},minWidth:200,sortingField:"type"}],Go=[{id:"logicalId",field:"logicalId"},{id:"type",field:"type"}],Bo=[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}],Ho=()=>{const[e,t]=r.useState([]),[a,n]=r.useState(!1),{arn:i,typeName:l,type:o}=So({strictArnCheck:!1}),c=(0,s.I0)(),d=(0,Q.UO)(),{data:u={},isFetching:m}=mo({arn:i,typeName:l,type:o}),{schema:p=""}=u||{},_=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a,pageSize:r}=e.tablePreferences.EXTENSION_MODULE_RESOURCES;return{wrapLines:t,visibleContent:a,pageSize:r}}));r.useEffect((()=>{!m&&p&&(t(function(e){let t=null;try{t=JSON.parse(e)}catch(e){return[]}if(!t.properties)return[];const{Resources:a}=t.properties;if(!a)return[];const r=e=>t=>{const a=e[t],{Type:r}=a.properties;return{logicalId:t,type:r.const}};return Object.keys(a.properties||{}).map(r(a.properties)).concat(Object.keys(a.patternProperties||{}).map(r(a.patternProperties)))}(p)),n(function(e){let t=null;try{t=JSON.parse(e)}catch(e){return[]}if(!t.properties)return[];const{properties:a}=t;return Object.keys(a).filter((e=>"object"==typeof a[e]&&(void 0===a[e].additionalProperties||a[e].additionalProperties)))}(p).includes("Resources")))}),[m]);const E=(0,s.v9)(_);return r.createElement(yo,{header:g("stacksList.stack_tab_resources"),setTablePreferences:e=>{c(Je({preferenceType:N.ExtensionModuleResources,preferenceSettings:e}))},columns:Vo(d.extensionGroup),emptyLabel:g("registry.empty_resource"),items:e,loading:m,searchableFields:Go,preferences:E,pageSizeOptions:Bo,additionalProperties:a,propertyLabel:g("registry.resources_lowercase"),visibleContentPreferenceOptions:(h=d.extensionGroup,[{label:null,options:Vo(h).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}])});var h},qo=()=>{const{arn:e,typeName:t,type:a}=So({strictArnCheck:!1}),{data:n,isFetching:s}=mo({arn:e,typeName:t,type:a}),{schema:i=""}=n||{};return r.createElement(Lr,{header:g("registry.label_schema"),description:g("extension_detail_schema_tab_description"),loading:s,actionGroup:r.createElement(z.Z,{margin:{top:"xxs"}},r.createElement(xe.Z,{size:"small",position:"top",triggerType:"custom",dismissButton:!1,content:r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("schema_copied"))},r.createElement(Dt,{analyticsKey:"resourceType_schema_copy",onClick:()=>W(i),icon:"copy",text:g("label_copy_schema"),iconAlt:g("stackSet.details.copy_to_clipboard")},g("label_copy_schema"))))},r.createElement(Pr,null,i))},Yo=[{id:"resourceType",header:g("registry.resource_types"),cell:e=>e&&e[0],minWidth:200,sortingField:"resourceType"},{id:"handlers",header:g("target_resource_types_handlers"),cell:e=>e&&e[1]&&e[1].join(", "),minWidth:200,sortingField:"handlers"}],Xo={isDescending:!1,sortingColumn:{sortingField:"resourceType"}},jo=[{id:"resourceType",field:"0"},{id:"handlers",field:"1"}],Qo=[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}],Jo=()=>{const[e,t]=r.useState([]),{arn:a,typeName:n,type:i}=So({strictArnCheck:!1}),l=(0,s.I0)(),{data:o,isFetching:c}=mo({arn:a,typeName:n,type:i}),{schema:d=""}=o||{};r.useEffect((()=>{!c&&d&&t(function(e){const t=va(e).parsedJSON;if(!t||!t.handlers)return[];const a=Object.keys(t.handlers).reduce(((e,a)=>{const{targetNames:r}=t.handlers[a];return r&&r instanceof Array?(r.forEach((t=>{e[t]?e[t].push(a):e[t]=[a]})),e):e}),{});return Object.entries(a)}(d))}),[c]);const u=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a,pageSize:r}=e.tablePreferences.EXTENSION_HOOK_TARGET_RESOURCE_TYPES;return{wrapLines:t,visibleContent:a,pageSize:r}})),m=(0,s.v9)(u);return r.createElement(yo,{header:g("target_resource_types"),setTablePreferences:e=>{l(Je({preferenceType:N.ExtensionHookTargetResourceTypes,preferenceSettings:e}))},columns:Yo,emptyLabel:g("target_resource_types_empty"),items:e,loading:c,searchableFields:jo,preferences:m,pageSizeOptions:Qo,sortingColumn:Xo,additionalProperties:!1,propertyLabel:"",filteringPlaceholder:g("find_resource_type"),visibleContentPreferenceOptions:[{label:null,options:Yo.map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]})},ec={label:g("configuration"),id:ea,content:r.createElement(Uo,null)},tc=[{label:g("target_resource_types"),id:"targetResourceTypes",content:r.createElement(Jo,null)},{label:g("label_schema"),id:Jt,content:r.createElement(qo,null)},{label:g("configuration"),id:ea,content:r.createElement(Uo,null)}],ac=[{label:g("label_schema"),id:Jt,content:r.createElement(qo,null)},{label:g("stacksList.stack_tab_resources"),id:"resources",content:r.createElement(Ho,null)},{label:g("registry.label_input_parameters"),id:"inputParameters",content:r.createElement(zo,null)},{label:g("registry.label_example_template"),id:"exampleTemplate",content:r.createElement(Fo,null)}],rc=()=>{const e=(0,Q.s0)(),t=(0,Q.UO)(),{arn:a,typeName:n,type:s}=So({strictArnCheck:!1}),{data:i}=mo({arn:a,typeName:n,type:s}),l=i||{},o=t?.selectedTabId||Jt,c=t?.extensionGroup||ca,d=(e=>{switch(e){case Bt:return tc;case Ht:return ac;default:return(()=>{const e=[{label:g("label_schema"),id:Jt,content:r.createElement(qo,null)}];return fe(A.UNO_REGISTRY)&&e.push(ec),e})()}})(l.type),u=La({arn:a,typeName:n,type:s});return(0,r.useEffect)((()=>{if(l.arn){const t="AWS"===Ir(l.arn).split("::")[0],a=l.visibility===Yt.PRIVATE?"activated-extensions":ca;c===a||t||e(`/registry/${a}/details/${o}?${(0,b.stringify)(u)}`)}}),[t,l]),r.createElement(Ql,null,r.createElement(Rl.Z,{header:r.createElement(ko,null)},r.createElement(Es.Z,{size:"l"},r.createElement(Zo,null),r.createElement(io.Z,{ariaLabel:"Registry detail tabs",tabs:d,activeTabId:o,onChange:t=>{e(`/registry/${c}/details/${t.detail.activeTabId}?${(0,b.stringify)(u)}`)}}),r.createElement(Jr,{policy:A.UNO_REGISTRY},r.createElement(Oo,null)))))},nc={typeNamePrefix:"",publisherId:"",publisherNamePrefix:""},sc=[{key:"typeNamePrefix",operators:["="],propertyLabel:g("registry_property_search_filter_prefix_label"),groupValuesLabel:g("registry_property_search_filter_prefix_group_label")},{key:"publisherId",operators:["="],propertyLabel:g("publisher_id"),groupValuesLabel:g("registry_property_search_filter_publisher_group_label")},{key:"publisherNamePrefix",operators:["="],propertyLabel:g("publisher_name_prefix"),groupValuesLabel:g("registry_property_search_filter_publisher_name_group_label")}],ic=[{propertyKey:"typeNamePrefix",value:"",operator:"="},{propertyKey:"publisherId",value:"",operator:"="},{propertyKey:"publisherNamePrefix",value:"",operator:"="}],lc={filteringAriaLabel:"your choice",dismissAriaLabel:"Dismiss",filteringPlaceholder:g("registry_property_search_filter_placeholder"),groupValuesText:g("values"),groupPropertiesText:g("properties"),operatorsText:g("operators"),operationAndText:g("no_concat_and"),operationOrText:"or",operatorLessText:"Less than",operatorLessOrEqualText:"Less than or equal",operatorGreaterText:"Greater than",operatorGreaterOrEqualText:"Greater than or equal",operatorContainsText:"Contains",operatorDoesNotContainText:"Does not contain",operatorEqualsText:"Equals",operatorDoesNotEqualText:"Does not equal",editTokenHeader:g("edit_filter"),propertyText:g("property"),operatorText:g("operator"),valueText:g("values"),cancelActionText:g("cancel_label"),applyActionText:g("apply"),allPropertiesLabel:g("all_properties"),tokenLimitShowMore:g("show_more"),tokenLimitShowFewer:g("show_fewer"),clearFiltersText:g("clear_text_filters"),removeTokenButtonAriaLabel:()=>"Remove token",enteredTextLabel:e=>g("property_filter_entered_text_label",e)},oc=e=>{if(!e)return[];const t=[...ic];return t.forEach((t=>{t.value=e[t.propertyKey]||""})),t.filter((e=>Boolean(e.value)))},cc=[{id:"hookName",header:g("column_label_hook_name"),cell:e=>{const t=(0,b.stringify)({arn:e.typeArn}),a="/registry/activated-extensions/details/schema?".concat(t);return r.createElement(ee,{to:a},e.typeName)},sortingField:"typeName",minWidth:200},{id:"targetStacks",header:g("target_stacks"),cell:e=>e.configuration&&Ds({status:e.configuration.targetStacks})||"-",minWidth:200},{id:"failureMode",header:g("column_label_failure_mode"),cell:e=>e.configuration&&T({type:S.HookFailureMode,value:e.configuration.failureMode||"-"}),minWidth:200},{id:"version",header:g("registry_default_version"),cell:e=>null!==e.defaultVersionId?e.defaultVersionId.replace(/^0+/,""):"-",minWidth:200},{id:"lastUpdated",header:g("last_updated"),cell:e=>e.lastUpdated&&r.createElement(Ui,{timestamp:e.lastUpdated})||"-",minWidth:200},{id:"description",header:g("registry.label_description"),cell:e=>e.description||"-",minWidth:200}],dc=[{value:Yt.PUBLIC,label:g("filter_public")},{value:Yt.PRIVATE,label:g("filter_private")}],uc=[{value:jt,label:g("aws")},{value:Xt,label:g("activated_third_party_dropdown_label")},{value:Qt,label:g("privately_registered_dropdown_label")}],mc=e=>{const t={updateExtension:!0};return e===Xt?t:{...t,disableExtension:!0,editAutomaticUpdates:!0}},pc={isDescending:!1,sortingColumn:{sortingField:"typeName"}},_c={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},pageSizePreference:{title:g("table_size"),options:[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}]},visibleContentPreference:{title:g("table_select_visible_columns_title"),options:[{label:null,options:cc.map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},Ec=(0,Ue.P1)(rl,(e=>{const{visibleContent:t,wrapLines:a,pageSize:r}=e.tablePreferences.MY_EXTENSIONS_HOOKS;return{visibleContent:t,wrapLines:a,pageSize:r}})),gc=()=>[{id:"typeName",header:g("registry_module"),cell:e=>{const t=(0,b.stringify)({arn:e.typeArn}),a="/registry/activated-extensions/details/schema?".concat(t);return r.createElement(ee,{to:a},e.typeName)},sortingField:"typeName",minWidth:200,enabled:!0},{id:"version",header:g("registry_default_version"),cell:e=>null!==e.defaultVersionId?e.defaultVersionId.replace(/^0+/,""):"-",minWidth:200,enabled:!0},{id:"registry",header:g("registry_title"),cell:e=>null!==e.defaultVersionId?g("filter_private"):g("filter_public"),minWidth:200,enabled:!0},{id:"publisher",header:g("registry_publisher"),cell:e=>e.typeName.split("::")[0],minWidth:200,enabled:!0},{id:"description",header:g("registry.label_description"),cell:e=>e.description,minWidth:200,enabled:!0},{id:"publisherId",header:g("publisher_id"),cell:e=>null!==e.publisherId?e.publisherId:"-",minWidth:200,enabled:fe(A.UNO_REGISTRY)},{id:"lastUpdated",header:g("last_updated"),cell:e=>r.createElement(Ui,{timestamp:e.lastUpdated}),minWidth:200,enabled:fe(A.UNO_REGISTRY)}],hc=[{value:Yt.PUBLIC,label:g("filter_public")},{value:Yt.PRIVATE,label:g("filter_private")}],Sc=[{value:jt,label:g("aws")},{value:Xt,label:g("activated_third_party_dropdown_label")},{value:Qt,label:g("privately_registered_dropdown_label")}],Tc={isDescending:!1,sortingColumn:{sortingField:"typeName"}},bc=(0,Ue.P1)(rl,(e=>{const{visibleContent:t,wrapLines:a,pageSize:r}=e.tablePreferences.MY_EXTENSIONS_MODULES;return{visibleContent:t,wrapLines:a,pageSize:r}})),fc=()=>[{id:"typeName",header:g("resource_types"),cell:e=>{const t=(0,b.stringify)({arn:e.typeArn}),a="/registry/activated-extensions/details/schema?".concat(t);return r.createElement(ee,{to:a},e.typeName)},sortingField:"typeName",minWidth:200,enabled:!0},{id:"version",header:g("registry_default_version"),cell:e=>e?.defaultVersionId?.replace(/^0+/,"")||"-",minWidth:200,enabled:!0},{id:"registry",header:g("registry_title"),cell:e=>null!==e.defaultVersionId?g("filter_private"):g("filter_public"),minWidth:200,enabled:!0},{id:"publisher",header:g("registry_publisher"),cell:e=>e.typeName.split("::")[0],minWidth:200,enabled:!0},{id:"description",header:g("registry.label_description"),cell:e=>e.description,minWidth:200,enabled:!0},{id:"publisherId",header:g("publisher_id"),cell:e=>null!==e.publisherId?e.publisherId:"-",minWidth:200,enabled:fe(A.UNO_REGISTRY)},{id:"lastUpdated",header:g("last_updated"),cell:e=>r.createElement(Ui,{timestamp:e.lastUpdated}),minWidth:200,enabled:fe(A.UNO_REGISTRY)}],kc=[{value:Yt.PUBLIC,label:g("filter_public")},{value:Yt.PRIVATE,label:g("filter_private")}],Ac=[{value:jt,label:g("aws")},{value:Xt,label:g("activated_third_party_dropdown_label")},{value:Qt,label:g("privately_registered_dropdown_label")}],Ic={isDescending:!1,sortingColumn:{sortingField:"typeName"}},yc=(0,Ue.P1)(rl,(e=>{const{visibleContent:t,wrapLines:a,pageSize:r}=e.tablePreferences.MY_EXTENSIONS_RESOURCE_TYPES;return{visibleContent:t,wrapLines:a,pageSize:r}})),Cc=_r((()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),a=(0,Q.TH)(),n=os(),i=n.get("typeArn")||"",l=n.get("visibility")||Yt.PUBLIC,o=n.get("category")||jt,c=(0,s.v9)(Ec),d=ho(),[u,m]=(0,r.useState)({typeNamePrefix:"",publisherId:"",publisherNamePrefix:""}),p=(0,r.useRef)(),_=fe(A.UNO_REGISTRY)?o===jt?Yt.PUBLIC:Yt.PRIVATE:l,{displayData:E,isFetching:h,isFetchingNextPage:S,hasNextPage:T,fetchNextPage:b}=((e,t)=>{const{displayData:a,isFetching:r,isFetchingNextPage:n,hasNextPage:s,fetchNextPage:i}=bo({queryParams:e,onError:t}),l=a||[],{data:o,isBatchFetching:c,configurationErrors:d}=_o(l.map((e=>e.typeArn))),u=(o||[]).map((e=>({typeArn:e.typeArn,...hr(e.configuration)}))),m=d.map((e=>({typeArn:e.typeConfigurationIdentifier.typeArn,targetStacks:Ft.NONE,failureMode:Mt.WARN}))),p=Ia([...u,...m],"typeArn");return l.map((e=>{e.configuration=p[e.typeArn]})),{displayData:l,isFetching:r&&c,isFetchingNextPage:n,hasNextPage:s,fetchNextPage:i}})(La({visibility:_,type:Kt.HOOK,category:o,typeNamePrefix:u.typeNamePrefix,publisherId:u.publisherId,publisherNamePrefix:u.publisherNamePrefix,maxResults:100}),(()=>t("/registry/activated-extensions/hooks"))),f=E?.filter((e=>e?.typeArn===i))||[],k=(e,r)=>{n.set(e,r),t(`${a.pathname}?${n.toString()}`,{replace:!0})};(0,r.useEffect)((()=>{fe(A.UNO_REGISTRY)?n.set("category",o):n.set("visibility",_),n.set("type",Kt.HOOK),t(`${a.pathname}?${n.toString()}`,{replace:!0})}),[]),(0,r.useEffect)((()=>{if(i&&!h){const e=f?.[0];p?.current?.setSelection(e?[e]:[])}}),[h]);const I=`${E?.length}${T?"+":""}`,y=f.length?`(${f.length}/${I})`:`(${I})`,C=fe(A.UNO_REGISTRY)?r.createElement(Rr.Z,{"data-testid":"activated-extensions-hooks-header",actions:r.createElement(co,{dataTestId:"enabled-hook-actions",text:g("actions_label"),disabledItems:mc(o),onItemClick:e=>{"editConfiguration"===e.detail.id?t(`/registry/configure-extension?typeArn=${encodeURIComponent(f[0].typeArn)}`):d.setModalType(e.detail.id)},expandableGroups:!0,actionsDropdownDisabled:!(o===Xt&&!h&&f?.length)}),counter:y},g("registry_hooks")):r.createElement(r.Fragment,null,r.createElement(Rr.Z,{"data-testid":"registry-hooks-header",counter:`(${I})`},g("registry_hooks")),r.createElement("br",null)),R=fe(A.UNO_REGISTRY)?g("extensions_empty_description"):l===Yt.PUBLIC?g("empty_public_hooks"):g("empty_private_hooks"),v=r.createElement(ci,{header:fe(A.UNO_REGISTRY)?g("activated_extensions_empty_header"):g("empty_hooks"),description:R}),L=fe(A.UNO_REGISTRY)?r.createElement("div",{className:"input-container"},r.createElement(an,{className:"input-filter",filteringProperties:sc,getFilteringTokensFromValues:oc,onPropertyFilteringChange:e=>{(e=>{const{typeNamePrefix:t,publisherId:a,publisherNamePrefix:r}=e.detail.values;m({typeNamePrefix:t,publisherId:a,publisherNamePrefix:r})})(e)},i18nStrings:lc,filteringInitialState:nc}),r.createElement(Gs.Z,{ariaRequired:!0,ariaLabelledby:"activated-extensions-hooks-header",ariaLabel:"Select category","data-testid":"cfn-e2e-rt-type-filter",className:"select-filter type-filter",options:uc,selectedOption:uc.find((e=>e.value===o)),onChange:e=>(e=>{const t=e.detail.selectedOption.value;o!==t&&k("category",t)})(e)})):r.createElement("div",{className:"input-container"},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabelledby:"registry-hooks-header",ariaLabel:"Select visibility","data-testid":"cfn-e2e-rt-visibility",className:"select-filter",options:dc,selectedOption:dc.find((e=>e.value===l)),onChange:e=>(e=>{const t=e.detail.selectedOption.value;l!==t&&k("visibility",t)})(e)}));return r.createElement(Li,{className:"e2e-test-my-extensions-hooks-table",trackByKey:"typeArn",preferences:c,defaultSort:pc,collectionPreferencesProps:_c,columnDefinitions:cc,isLoading:h||S,allItems:E,header:C,customEmpty:v,customFilter:L,hasPaginationToken:T,stickyHeader:!0,resizableColumns:!0,selectionType:fe(A.UNO_REGISTRY)?"single":void 0,selectedItems:f||[],onItemSelect:e=>{const t=e?.[0]||{};k("typeArn",t?.typeArn||""),p?.current?.setSelection(t?[t]:[])},fetchMore:()=>b(),onConfirmPreferences:t=>e((e=>Je({preferenceType:N.MyExtensionsHooks,preferenceSettings:e}))(t)),cfnTableRef:p})}),Tt.ACTIVATED_HOOKS_LIST),Rc=_r((()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),a=(0,Q.TH)(),n=os(),i=n.get("typeArn")||"",l=n.get("visibility")||Yt.PUBLIC,o=n.get("category")||jt,c=(0,s.v9)(bc),d=ho(),[u,m]=(0,r.useState)({typeNamePrefix:"",publisherId:"",publisherNamePrefix:""}),p=(0,r.useRef)(),_=fe(A.UNO_REGISTRY)?o===jt?Yt.PUBLIC:Yt.PRIVATE:l,{displayData:E,hasNextPage:h,isFetching:S,fetchNextPage:T}=bo({queryParams:La({visibility:_,type:Kt.MODULE,maxResults:100,...fe(A.UNO_REGISTRY)&&{category:o},...u})}),b=E?.filter((e=>e?.typeArn===i))||[],f=(e,r)=>{n.set(e,r),t(`${a.pathname}?${n.toString()}`,{replace:!0})};(0,r.useEffect)((()=>{fe(A.UNO_REGISTRY)?n.set("category",o):n.set("visibility",_),n.set("type",Kt.MODULE),t(`${a.pathname}?${n.toString()}`,{replace:!0})}),[]),(0,r.useEffect)((()=>{if(i&&!S){const e=b?.[0];p?.current?.setSelection(e?[e]:[])}}),[S]);const k=`${E?.length}${h?"+":""}`,I=b.length?`(${b.length}/${k})`:`(${k})`,y=fe(A.UNO_REGISTRY)?r.createElement(Rr.Z,{"data-testid":"activated-extensions-modules-header",counter:I,description:r.createElement(r.Fragment,null,g("activated_extensions_modules_description"),r.createElement(wr,{ariaLabel:"using modules to encapsulate and reuse resource configurations",pathName:"modules"})),actions:r.createElement(co,{dataTestId:"enabled-module-actions",text:g("actions_label"),disabledItems:{updateExtension:!0,editExecutionRole:!0,editLoggingConfig:!0},onItemClick:e=>{"editConfiguration"===e.detail.id?t(`/registry/configure-extension?typeArn=${encodeURIComponent(b[0].typeArn)}`):d.setModalType(e.detail.id)},expandableGroups:!0,actionsDropdownDisabled:!(o===Xt&&!S&&b?.length)})},g("registry_modules")):r.createElement(r.Fragment,null,r.createElement(Rr.Z,{"data-testid":"registry-modules-header",counter:`(${k})`,description:r.createElement(r.Fragment,null,g("registry_modules_description"),r.createElement(wr,{ariaLabel:"using modules to encapsulate and reuse resource configurations",pathName:"modules"}))},g("registry_modules")),r.createElement("br",null)),C=fe(A.UNO_REGISTRY)?g("extensions_empty_description"):l===Yt.PUBLIC?g("empty_public_modules"):g("empty_private_modules"),R=r.createElement(ci,{header:fe(A.UNO_REGISTRY)?g("activated_extensions_empty_header"):g("no_modules"),description:C}),v=fe(A.UNO_REGISTRY)?r.createElement("div",{className:"input-container"},r.createElement(an,{className:"input-filter",filteringProperties:sc,getFilteringTokensFromValues:oc,onPropertyFilteringChange:e=>{(e=>{const{typeNamePrefix:t,publisherId:a,publisherNamePrefix:r}=e.detail.values;m({typeNamePrefix:t,publisherId:a,publisherNamePrefix:r})})(e)},i18nStrings:lc,filteringInitialState:nc}),r.createElement(Gs.Z,{ariaRequired:!0,ariaLabelledby:"activated-extensions-modules-header",ariaLabel:"Select category","data-testid":"cfn-e2e-rt-type-filter",className:"select-filter type-filter",options:Sc,selectedOption:Sc.find((e=>e.value===o)),onChange:e=>(e=>{const t=e.detail.selectedOption.value;o!==t&&f("category",t)})(e)})):r.createElement("div",{className:"input-container"},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabelledby:"registry-modules-header",ariaLabel:"Select visibility","data-testid":"cfn-e2e-rt-visibility",className:"select-filter",options:hc,selectedOption:hc.find((e=>e.value===l)),onChange:e=>(e=>{const t=e.detail.selectedOption.value;l!==t&&f("visibility",t)})(e)}));return r.createElement(Li,{className:"e2e-test-my-extensions-modules-table",trackByKey:"typeArn",preferences:c,defaultSort:Tc,collectionPreferencesProps:{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},pageSizePreference:{title:g("table_size"),options:[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}]},visibleContentPreference:{title:g("table_select_visible_columns_title"),options:[{label:null,options:gc().filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},columnDefinitions:gc().filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),isLoading:S,allItems:E,header:y,customEmpty:R,customFilter:v,hasPaginationToken:h,stickyHeader:!0,resizableColumns:!0,selectionType:fe(A.UNO_REGISTRY)?"single":void 0,selectedItems:b||[],onItemSelect:e=>{const t=e?.[0]||{};f("typeArn",t?.typeArn||""),p?.current?.setSelection(t?[t]:[])},fetchMore:T,onConfirmPreferences:t=>e((e=>Je({preferenceType:N.MyExtensionsModules,preferenceSettings:e}))(t)),cfnTableRef:p})}),Tt.ACTIVATED_MODULES_LIST),vc=_r((()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),a=(0,Q.TH)(),n=os(),i=n.get("typeArn")||"",l=n.get("visibility")||Yt.PUBLIC,o=n.get("category")||jt,c=(0,s.v9)(yc),d=ho(),[u,m]=(0,r.useState)({typeNamePrefix:"",publisherId:"",publisherNamePrefix:""}),p=(0,r.useRef)(),_=fe(A.UNO_REGISTRY)?o===jt?Yt.PUBLIC:Yt.PRIVATE:l,{displayData:E,hasNextPage:h,isFetching:S,fetchNextPage:T}=bo({queryParams:La({visibility:_,type:Kt.RESOURCE,maxResults:100,...fe(A.UNO_REGISTRY)&&{category:o},...u})}),b=E?.filter((e=>e?.typeArn===i))||[],f=(e,r)=>{n.set(e,r),t(`${a.pathname}?${n.toString()}`,{replace:!0})};(0,r.useEffect)((()=>{fe(A.UNO_REGISTRY)?n.set("category",o):n.set("visibility",_),n.set("type",Kt.RESOURCE),t(`${a.pathname}?${n.toString()}`,{replace:!0})}),[]),(0,r.useEffect)((()=>{if(i&&!S){const e=b?.[0];p?.current?.setSelection(e?[e]:[])}}),[S]);const k=`${E?.length}${h?"+":""}`,I=b.length?`(${b.length}/${k})`:`(${k})`,y=fe(A.UNO_REGISTRY)?r.createElement(Rr.Z,{"data-testid":"activated-extensions-resource-type-header",actions:r.createElement(co,{dataTestId:"enabled-resource-type-actions",text:g("actions_label"),disabledItems:{updateExtension:!0},onItemClick:e=>{"editConfiguration"===e.detail.id?t(`/registry/configure-extension?typeArn=${encodeURIComponent(b[0].typeArn)}`):d.setModalType(e.detail.id)},expandableGroups:!0,actionsDropdownDisabled:!(o===Xt&&!S&&b?.length)}),counter:I,description:r.createElement(r.Fragment,null,g("activated_extensions_resource_type_description"),r.createElement(wr,{ariaLabel:"activating public extensions for use in your AWS account",pathName:"resource-types"}))},g("registry.resource_types")):r.createElement(r.Fragment,null,r.createElement(Rr.Z,{"data-testid":"registry-resource-type-header",counter:`(${k})`,description:r.createElement(r.Fragment,null,g("registry.resource_types_description"),r.createElement(wr,{ariaLabel:"AWS resource and property types reference",pathName:"resource-types"}))},g("registry.resource_types")),r.createElement("br",null)),C=fe(A.UNO_REGISTRY)?g("extensions_empty_description"):l===Yt.PUBLIC?g("registry.empty_public"):g("registry.empty_private"),R=r.createElement(ci,{header:fe(A.UNO_REGISTRY)?g("activated_extensions_empty_header"):g("registry.no_resource_types"),description:C}),v=fe(A.UNO_REGISTRY)?r.createElement("div",{className:"input-container"},r.createElement(an,{className:"input-filter",filteringProperties:sc,getFilteringTokensFromValues:oc,onPropertyFilteringChange:e=>{(e=>{const{typeNamePrefix:t,publisherId:a,publisherNamePrefix:r}=e.detail.values;m({typeNamePrefix:t,publisherId:a,publisherNamePrefix:r})})(e)},i18nStrings:lc,filteringInitialState:nc}),r.createElement(Gs.Z,{ariaRequired:!0,ariaLabelledby:"activated-extensions-resource-type-header",ariaLabel:"Select category","data-testid":"cfn-e2e-rt-type-filter",className:"select-filter type-filter",options:Ac,selectedOption:Ac.find((e=>e.value===o)),onChange:e=>(e=>{const t=e.detail.selectedOption.value;o!==t&&f("category",t)})(e)})):r.createElement("div",{className:"input-container"},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabelledby:"registry-resource-type-header",ariaLabel:"Select visibility","data-testid":"cfn-e2e-rt-visibility",className:"select-filter",options:kc,selectedOption:kc.find((e=>e.value===l)),onChange:e=>(e=>{const t=e.detail.selectedOption.value;l!==t&&f("visibility",t)})(e)}));return r.createElement(Li,{testId:"my-extensions-resource-types-table",trackByKey:"typeArn",preferences:c,defaultSort:Ic,collectionPreferencesProps:{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},pageSizePreference:{title:g("table_size"),options:[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}]},visibleContentPreference:{title:g("table_select_visible_columns_title"),options:[{label:null,options:fc().filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},columnDefinitions:fc().filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),isLoading:S,allItems:E,header:y,customEmpty:R,customFilter:v,hasPaginationToken:h,stickyHeader:!0,resizableColumns:!0,selectionType:fe(A.UNO_REGISTRY)?"single":void 0,selectedItems:b,onItemSelect:e=>{const t=e?.[0]||{};f("typeArn",t?.typeArn||""),p?.current?.setSelection(t?[t]:[])},fetchMore:T,onConfirmPreferences:t=>e((e=>Je({preferenceType:N.MyExtensionsResourceTypes,preferenceSettings:e}))(t)),cfnTableRef:p})}),Tt.ACTIVATED_RESOURCE_TYPES_LIST),Lc=()=>{const e=(0,Q.s0)(),t=(0,Q.UO)(),a=t?.selectedTabId||ma,n=r.createElement(Rr.Z,{variant:"h1","data-testid":"my-extensions-header",description:fe(A.UNO_REGISTRY)&&r.createElement(z.Z,{variant:"span","data-testid":"activated-ext-description",className:"e2e-test-my-ext-description"},g("activated_extensions_description"),r.createElement(wr,{ariaLabel:"activating public extensions for use in your AWS account",pathName:"extensions-activated",fontSize:"inherit"}))},fe(A.UNO_REGISTRY)?g("activated_extensions_header"):g("registry_title"));return r.createElement(Ql,null,r.createElement(Rl.Z,{disableOverlap:!0,header:n},r.createElement(io.Z,{"data-testid":"my-extensions-tabs",ariaLabel:"My extensions tab","data-analytics-type":kt.FUNNEL,"data-analytics":ga[a],tabs:[{label:g("registry.resource_types"),id:ma,content:r.createElement(vc,null),enabled:!0},{label:g("registry_modules"),id:pa,content:r.createElement(Rc,null),enabled:fe(A.MODULE)},{label:g("registry_hooks"),id:ua,content:r.createElement(Cc,null),enabled:fe(A.HOOKS)}].filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),activeTabId:a,onChange:t=>e(`/registry/activated-extensions/${t.detail.activeTabId}`)})),r.createElement(Oo,null))},Pc={MODULE:g("registry_module"),HOOK:g("registry_hook"),RESOURCE:g("registry_resource_type")},Nc={header:e=>(e=>{if(!e)return null;const{getFlag:t}=ms(),{typeArn:a,type:n,typeName:s,publisherCategory:i,publisherIdentity:l,publisherName:o}=e,c=(0,b.stringify)({arn:a}),d="/registry/public-extensions/details/schema?".concat(c),u=g("registry.filter_public"),p=Pc[n],_=Boolean(l)&&g(l?.toLowerCase()),E=(0,m.cV)();return r.createElement(r.Fragment,null,r.createElement(z.Z,{variant:"span",fontSize:"body-s",color:"text-body-secondary",display:"block"},r.createElement("b",null,p.toUpperCase()," | ",u.toUpperCase())),r.createElement(z.Z,{padding:{top:"s"}},r.createElement(ee,{fontSize:"heading-m",to:d,onClick:()=>{const e=t(Sa)?Ea.VIEW_DETAILS_AFTER_FILTER:Ea.VIEW_DETAILS;Er({category:t(Ta)?Wt.THIRD_PARTY:null,currentStep:e,selectedFilterOption:n,eventDetail:{extensionUrl:d}})}},s),r.createElement(z.Z,{variant:"p",color:"text-body-secondary"},g("public_extensions_published_by",o||E.processString(s.split("::")[0])),Boolean(l)&&r.createElement(r.Fragment,null,r.createElement(z.Z,{variant:"span",color:"text-body-secondary",padding:"xs"},"|"),g("public_extensions_verified_publisher_identity",_)),fe(A.VERIFIED_PUBLISHER)&&"VERIFIED_PUBLISHER"===i&&r.createElement(r.Fragment,null,r.createElement(z.Z,{variant:"span",color:"text-body-secondary",padding:"xs"},"|"),r.createElement(Vr,null)))))})(e),sections:[{id:"description",content:e=>e?.description},{id:"footer",content:e=>r.createElement(r.Fragment,null,r.createElement(z.Z,{variant:"span",color:"text-body-secondary"},g("last_updated")," ",r.createElement(Ui,{timestamp:e?.lastUpdated})),r.createElement(z.Z,{variant:"span",color:"text-body-secondary",padding:"xxs"},"|"),r.createElement(z.Z,{variant:"span",color:"text-body-secondary"},g("public_extensions_tested_footer")),r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Lo,{enabled:e?.isActivated||!e?.publisherIdentity})))}]},Oc={pageSize:100},xc={title:g("preferences_items_per_page"),options:[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}]},Dc=(g("public_extensions_empty_header"),g("extensions_empty_description"),e=>rl(e).tablePreferences.PUBLIC_EXTENSIONS),wc={AWS_Marketplace:g("aws_marketplace"),GitHub:"GitHub",Bitbucket:"Bitbucket"},Zc=[{id:"publisherId",header:g("publisher_id"),cell:e=>e.publisherId},{id:"verifiedBy",header:g("publisher_verification_method"),cell:e=>wc[e.identityProvider]}],Uc=[{id:"description",header:g("registry.label_description"),cell:e=>e.description||"-"},{id:"visibility",header:g("registry.label_availability"),cell:e=>e.visibility||"-"},{id:"arn",header:g("registry.label_arn"),cell:e=>e.arn||"-"},{id:_a,header:g("registry.label_release_date"),cell:e=>r.createElement(Ui,{timestamp:e.timeCreated})}],Fc=e=>{let{options:t,selectedOption:a,loading:n}=e;const s=(0,Q.s0)();return r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select version",options:t,selectedOption:a,statusType:n?"loading":"finished",onChange:e=>s(`/registry/resourceTypes/details?${(0,b.stringify)({arn:e.detail.selectedOption.value})}`),placeholder:g("versions_label"),empty:g("version_select_empty_description")})},Mc=()=>{const e=os().get("arn"),{data:t,isLoading:a}=(e=>{const t=(0,Q.s0)(),a={resource:o.ApiResource.Types,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,requestParams:{arn:e},enabled:Boolean(e),placeholderData:{},shouldAutoRefetch:!1},r=(0,o.useSDKQuery)(a);return es({status:r?.status,error:r?.error,errorText:{errorContent:r?.error?.message},errorHandler:()=>{t("/registry/resourceTypes")}}),r})(e),n=t||{},{data:s,isLoading:i}=((e,t,a)=>{const r=(0,Q.s0)(),n={resource:o.ApiResource.TypeVersions,action:o.ApiAction.List,xsrfToken:me.xsrfToken,requestParams:e,enabled:Boolean(null!=t&&!t&&a===Yt.PRIVATE&&e.type&&e.typeName),placeholderData:[],shouldAutoRefetch:!1},s=(0,o.useSDKQuery)(n);return es({status:s?.status,error:s?.error,errorText:{errorContent:s?.error?.message},errorHandler:()=>{r("/registry/resourceTypes")}}),s})({type:n.type,typeName:n.typeName},n.isActivated,n.visibility),l=s||[],{versions:c,selectedOption:d}=((e,t)=>{const a=fe(A.UNO_REGISTRY)?t.filter((t=>t.typeName===e.typeName&&t.publicVersionNumber)).map((e=>({label:g("registry.label_version",e.publicVersionNumber),value:e.arn}))):t.filter((t=>t.typeName===e.typeName&&t.versionId)).map((e=>({label:g("registry.label_version",e.versionId.replace(/^0+/,"")),value:e.arn})));return{versions:a,selectedOption:a.find((t=>t.value===e.arn))}})(n,l),u=n.visibility===Yt.PRIVATE?r.createElement(Fc,{options:c,selectedOption:d,loading:i}):null,m=(e=>e.visibility===Yt.PRIVATE?Uc:Uc.filter((e=>e.id!==_a)))(n).map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(n)})));return r.createElement(Es.Z,{className:"resource-type-details",size:"l"},r.createElement(Rr.Z,{variant:"h1",actions:u},n.typeName),r.createElement(Lr,{header:g("registry.label_overview"),actionGroup:n.sourceUrl&&r.createElement("div",null,r.createElement(Dt,{icon:"external",iconAlign:"right",text:g("registry.view_documentation"),href:n.sourceUrl}))},r.createElement(Or.Z,{columns:2,borders:"vertical"},m)),r.createElement(Lr,{header:g("registry.label_schema"),loading:a,actionGroup:r.createElement("div",null,r.createElement(Dt,{"data-testid":"schema-copy-button",analyticsKey:"resourceType_schema_copy",onClick:()=>W(n.schema),variant:"icon",icon:"copy",iconAlt:g("stackSet.details.copy_to_clipboard")}))},r.createElement("div",null,r.createElement(Pr,null,n.schema))))},Kc={header:e=>r.createElement("span",{title:e.typeName},r.createElement(ee,{fontSize:"heading-m",to:`/registry/resourceTypes/details?${(0,b.stringify)({arn:e.typeArn})}`},e.typeName)),sections:[{id:"description",header:null,content:e=>e.description,width:100}]},Wc=[{label:g("registry.filter_public"),value:Yt.PUBLIC},{label:g("registry.filter_private"),value:Yt.PRIVATE}],zc=[{value:5,label:"5"},{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"}];function $c(e){return{emptyState:{header:g("registry.no_resource_types"),description:e===Yt.PUBLIC?g("registry.empty_public"):g("registry.empty_private")}}}const Vc=e=>{let{resourceTypesLength:t,hasNextToken:a,canViewDetails:n,onViewDetailsClick:s}=e;return r.createElement(Rr.Z,{variant:"h2",className:"e2e-test-resource-type-header-title",counter:`(${t}${a?"+":""})`,actions:r.createElement(Dt,{analyticsKey:"view_resource_type",text:g("registry.view_details"),className:"e2e-test-view-resource-type",disabled:!n,onClick:s})},g("registry.resource_types"))},Gc=()=>{const e=(0,Q.s0)(),t=(0,Q.TH)(),a=os().get("visibility"),[n,s]=(0,r.useState)(a||Yt.PUBLIC),[i,l]=(0,r.useState)([]),[o,c]=(0,r.useState)({pageSize:100}),{displayData:d,isFetching:u,hasNextPage:m,fetchNextPage:p}=bo({queryParams:{visibility:n},onError:()=>e("/registry/resourceTypes")}),_=d||[];return r.createElement("div",null,r.createElement(z.Z,{variant:"h1"},g("resource_types")),r.createElement(z.Z,{variant:"p",margin:{bottom:"m"}},g("registry.resource_types_description"),r.createElement(wr,{ariaLabel:"AWS resource and property types reference",pathName:"resource-types"})),r.createElement(kl,{items:_,i18nStrings:$c(n),loading:u,loadingText:g("registry.loading_resource_types"),cardDefinition:Kc,selectionType:"single",selectedItems:i,trackBy:"typeArn",hasPaginationToken:Boolean(m),isItemDisabled:()=>u,setCurrentPage:()=>null,onSelectionChange:a=>{l([{typeArn:a.detail.selectedItems[0].typeArn}]);const r=new URLSearchParams({visibility:n,typeArn:a.detail.selectedItems[0].typeArn});e(`${t.pathname}?${r.toString()}`,{replace:!0})},filter:r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select resource type visibility",className:"cfn-e2e-rt-visibility select-filter",options:Wc,selectedOption:Wc.find((e=>e.value===n)),onChange:a=>{s(a.detail.selectedOption.value),l([]);const r=new URLSearchParams({visibility:a.detail.selectedOption.value,typeArn:""});e(`${t.pathname}?${r.toString()}`,{replace:!0})}}),header:r.createElement(Vc,{resourceTypesLength:_.length,hasNextToken:Boolean(m),canViewDetails:Boolean(i.length>0),onViewDetailsClick:()=>{e(`/registry/resourceTypes/details?${(0,b.stringify)({arn:i[0].typeArn})}`)}}),cardsPreferences:o,preferences:r.createElement(Ai.Z,{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),preferences:o,onConfirm:e=>{let{detail:t}=e;return c(t)},pageSizePreference:{title:g("registry.preferences_items_per_page"),options:zc}}),stickyHeader:!0,scrollToTop:!0,keepSelection:!0,fetchMore:()=>p()}))},Bc=()=>r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:"details",element:r.createElement(Mc,null)}),r.createElement(Q.AW,{path:"*",element:r.createElement(Gc,null)}));var Hc=a(40661);const qc=[{label:g("on"),description:g("auto_update_on_description"),value:"AUTO_UPDATE_ON"},{label:g("off"),description:g("auto_update_off_description"),value:"AUTO_UPDATE_OFF"}],Yc=()=>{const{autoUpdate:e,setActivateExtensionState:t}=uo(),a=null===e||!0===e?zt:$t;return r.createElement(Tl,{header:g("versioning")},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("auto_update"),description:g("auto_update_description"),"data-testid":"activate-extension-auto-update",stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,value:a,items:qc,onChange:e=>{t({autoUpdate:e.detail.value===zt})}})))},Xc=[{label:g("activate_extension_configure_now_label"),description:g("activate_extension_configure_now_description"),value:Vt},{label:g("activate_extension_configure_later_label"),description:g("activate_extension_configure_later_description"),value:"CONFIGURE_LATER"}],jc=()=>{const{arn:e,configurePreference:t,setActivateExtensionState:a}=uo(),{data:n}=mo({arn:e}),s=n||{};return r.createElement(z.Z,{margin:{vertical:"l"}},r.createElement(Cr.Z,{header:r.createElement(Rr.Z,{variant:"h2"},g("configuration"))},r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"activate-extension-configuration-preference",label:r.createElement(r.Fragment,null,g("activate_extension_configuration_preference_label"),r.createElement(zr,{ariaLabel:"extensions configuration",pathAlias:"extensions-configuration"})),description:g("activate_extension_configuration_preference_description"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,value:t,items:Xc,onChange:e=>{a({configurePreference:e.detail.value})}})),s.type===Kt.HOOK&&r.createElement(sn.Z,{dismissAriaLabel:"Hooks type configuration alert",type:"warning"},g("activate_extension_configure_preference_hooks_alert")))))},Qc=[{value:"DEFAULT",label:g("activate_extension_extension_alias_use_default_label")},{value:"OVERRIDE",label:g("activate_extension_extension_alias_override_default_label")}],Jc=()=>{const{arn:e,typeNameAlias:t,executionRoleArn:a,loggingConfig:n,setActivateExtensionState:s}=uo(),{data:i}=mo({arn:e}),l=i||{},[c,d]=r.useState(!0),u=`https://${k.host}/iam/home?region=${(0,o.getRIPRegion)()}`,m=l.type===Ht,p=r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"activate-extension-type-alias",label:g("activate_extension_extension_name_label"),description:r.createElement(r.Fragment,null,g("activate_extension_extension_name_description"),r.createElement(z.Z,{variant:"span",margin:{left:"xxs"},fontSize:"body-s"},r.createElement(zr,{isInline:!1,ariaLabel:"specifying aliases to refer to extensions",pathAlias:"extensions-alias"}))),constraintText:g("activate_extension_extension_name_hint"),stretch:!0},r.createElement(z.Z,{margin:{bottom:"xs"}},r.createElement(Ut.Z,{ariaRequired:!0,value:c?"DEFAULT":"OVERRIDE",items:Qc,onChange:e=>{d("OVERRIDE"!==e.detail.value)}})),r.createElement(Vs.Z,{ariaRequired:!0,value:c?l.typeName:t,onChange:e=>{s({typeNameAlias:e.detail.value})},disabled:c})),_=r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"activate-extension-execution-role-input",label:g("execution_role_arn"),description:r.createElement(r.Fragment,null,h("execution_role_arn_description",r.createElement(z.Z,{variant:"span",fontSize:"body-s",margin:{left:"xxs"}},r.createElement(zr,{externalLinkText:g("execution_role_arn_doc_text"),pathAlias:"extensions-role"})),r.createElement(z.Z,{variant:"span",fontSize:"body-s",margin:{left:"xxs"}},r.createElement(zr,{isInline:!1,externalLinkText:g("aws_iam"),docsBaseUrl:u,pathAlias:""})))),constraintText:g("execution_role_arn_hint"),stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,value:a,onChange:e=>{s({executionRoleArn:e.detail.value})},placeholder:g("execution_role_arn_placeholder")})),E=r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"activate-extension-logging-config-textarea",label:r.createElement("span",null,g("logging_config")," ",r.createElement("i",null,"- ",g("tags_optional"))),description:r.createElement(r.Fragment,null,g("logging_config_description"),r.createElement(z.Z,{variant:"span",margin:{left:"xxs"},fontSize:"body-s"},r.createElement(zr,{isInline:!1,ariaLabel:"activating public extensions for use in your AWS account",pathAlias:"extensions-logging"}))),constraintText:g("logging_config_hint"),errorText:n?.error&&g("json_parsing_error",n?.error?.message),stretch:!0},r.createElement(si.Z,{ariaRequired:!0,value:n?.jsonString||"",onChange:e=>{s({loggingConfig:va(e.detail.value)})},placeholder:g("logging_config_placeholder")}));return r.createElement(Tl,{header:g("activate_extension_extension_details_header")},p,!m&&_,!m&&E)};var ed=a(66081);const td=()=>{const{mutate:e,isLoading:t}=(()=>{const{typeArn:e,clearConfigureExtensionState:t}=po(),{refreshData:a}=_o([e]),r=(0,s.I0)(),n=(0,Q.s0)(),i={resource:o.ApiResource.TypeConfigurations,action:o.ApiAction.Set,xsrfToken:me.xsrfToken,onSuccess:()=>{const s=(0,b.stringify)({arn:e}),i="/registry/activated-extensions/details/schema?".concat(s);t(),a(),n(i),r(He({id:ne(),content:g("configure_extension_success",Ir(e||"")),type:"SUCCESS",dismissible:!0}))},onError:e=>{r(He({id:ne(),header:g("configure_extension_failure_label"),content:e.message||g("configure_extension_failure_description"),type:"ERROR",dismissible:!0}))}};return(0,o.useSDKMutation)(i)})(),a=po(),n=(0,Q.s0)();return r.createElement(z.Z,{textAlign:"right",float:"right"},r.createElement(Es.Z,{size:"s",direction:"horizontal"},r.createElement(Ot.Z,{variant:"link",onClick:()=>(n(`/registry/activated-extensions/details/schema?${(0,b.stringify)({arn:a.typeArn})}`),void a.clearConfigureExtensionState())},g("cancel_label")),r.createElement(Ot.Z,{className:"e2e-test-configure-extension-button",variant:"primary",loading:t,onClick:()=>(()=>{const t={typeArn:Tr(a.typeArn),configuration:a.configuration?.jsonString||null,configurationAlias:a.configurationAlias||null};e(t)})(),disabled:Boolean(a.configuration?.error)},g("configure_extension_submit_button_label"))))},ad=()=>{const[e,t]=r.useState(!0),a=(0,s.I0)(),n=(0,Q.s0)(),{arn:i}=So({strictArnCheck:!0}),{data:l,isFetching:o,isSuccess:c}=mo({arn:i}),d=l||{},{data:u,isBatchFetching:m}=_o([i]),p=u||[],_=po();return r.useEffect((()=>{c&&d.arn&&(_.setConfigureExtensionState({typeArn:d.arn}),Boolean(d.configurationSchema)&&d.visibility===Yt.PRIVATE&&d.type!==Ht||(n("/registry/activated-extensions"),K.error({level:F.ERROR,message:"Current extension is not supported for configuration."}),a(He({content:g("configure_extension_not_applicable_error"),type:"ERROR"}))))}),[o]),r.useEffect((()=>{!m&&p.length&&_.setConfigureExtensionState({...p[0].configuration&&{configuration:va(p[0].configuration)},configurationAlias:p[0].alias})}),[m]),r.useEffect((()=>()=>_.clearConfigureExtensionState()),[]),r.createElement(Rl.Z,{header:r.createElement(r.Fragment,null,r.createElement(Rr.Z,{variant:"h1",description:r.createElement(z.Z,{variant:"span"},g("configure_extension_description"),r.createElement(wr,{ariaLabel:"extensions configuration",pathName:"extensions-configuration"}))},g("configure_extension_header",Ir(i))),r.createElement(z.Z,{padding:{top:"xxs"}},r.createElement(ed.Z,{onChange:()=>t(!e),checked:e},g("configure_extension_view_configuration_schema_toggle_label"))))},o||m?r.createElement(vr.Z,null):r.createElement(r.Fragment,null,r.createElement($s.Z,{className:"e2e-test-public-ext-list",gridDefinition:e?[{colspan:{default:12,s:6,m:5}},{colspan:{default:12,s:6,m:5}},{colspan:{default:12,s:12,m:10}}]:[{colspan:{default:12,s:12,m:10}},{colspan:{default:12,s:12,m:10}}]},e&&r.createElement(z.Z,{margin:{vertical:"l"},"data-testid":"configure-extension-configuration-schema"},r.createElement(Cr.Z,{header:r.createElement(Rr.Z,{actions:r.createElement(Es.Z,{direction:"horizontal",size:"s"},r.createElement(xe.Z,{size:"small",position:"top",triggerType:"custom",dismissButton:!1,content:r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("schema_copied"))},r.createElement(Ot.Z,{"data-testid":"copy-code-button",disabled:o,iconName:"copy",onClick:()=>{W(d.configurationSchema)}},g("copy")))),description:g("configure_extension_configuration_schema_description")},g("configuration_schema"))},r.createElement(Pr,null,d.configurationSchema))),r.createElement(Tl,{header:g("configure_extension_set_configuration_header"),description:g("configure_extension_set_configuration_description")},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("configure_extension_configuration_alias_label"),description:g("configure_extension_configuration_alias_description"),constraintText:g("configure_extension_configuration_alias_hint"),"data-testid":"configure-extension-configuration-alias",stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,value:_.configurationAlias||"",onChange:e=>_.setConfigureExtensionState({configurationAlias:e.detail.value}),placeholder:g("configure_extension_configuration_alias_placeholder"),disabled:Boolean(p[0]?.alias)})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("configure_extension_configuration_label"),description:g("configure_extension_configuration_description"),constraintText:g("configure_extension_configuration_hint"),errorText:_.configuration?.error&&g("json_parsing_error",_.configuration?.error.message),"data-testid":"configure-extension-configuration-textarea",stretch:!0},r.createElement(si.Z,{ariaRequired:!0,value:_.configuration?.jsonString||"",onChange:e=>{return t=e.detail.value,void _.setConfigureExtensionState({configuration:va(t)});var t},placeholder:d.type===Bt?JSON.stringify({CloudFormationConfiguration:{HookConfiguration:{TargetStacks:"ALL",FailureMode:"FAIL",Properties:{}}}}):g("configure_extension_configuration_placeholder")}))),r.createElement(td,null))))},rd=()=>{const e=(0,Q.s0)(),{data:t,metadata:a,setRegisterPublisherMetadataState:n,clearRegisterPublisherState:i}=To(),{mutate:l,isLoading:c}=(()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),{clearRegisterPublisherState:a}=To(),{refreshData:r}=Eo({}),n={resource:o.ApiResource.Publisher,action:o.ApiAction.Register,xsrfToken:me.xsrfToken,onMutate:()=>{},onSuccess:()=>{a(),r(),t("/registry/publisher/details"),e(He({id:ne(),content:g("register_publisher_success"),type:"SUCCESS",dismissible:!0}))},onError:t=>{e(He({id:ne(),header:g("register_publisher_failure"),content:t.message,type:"ERROR",dismissible:!0}))}};return(0,o.useSDKMutation)(n)})();return r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{variant:"link",onClick:()=>(u.logEvent("cancel_reg_pub",1),i(),void e("/registry/publisher/details")),"data-testid":"cancel-register-publisher-button"},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary",loading:c,disabled:c,onClick:()=>(()=>{const{verificationMethod:e,codeStarPreference:r}=a,{selectedConnectionArn:s,createdConnection:i,acceptTerms:o}=t;let c=!1,d="";"CodeStar"===e&&("EXISTING_CONNECTION"===r?(c=!s,d=s):(c=!(i&&i.connectionArn),d=c?"":i.connectionArn)),o||(c=!0),c?n({...a,showErrors:!0}):(u.logEvent(`reg_pub_${e}`.toLowerCase(),1),l(La({connectionArn:d,acceptTermsAndConditions:o})))})(),"data-testid":"register-publisher-button"},g("register"))))},nd=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>da.includes(e?.providerType))).map((e=>({label:e.connectionName,value:e.connectionArn,description:e.connectionArn})))},sd=e=>{let{createConnectionStatus:t,createdConnection:a={},showErrors:n=!1,onCreateConnectionClick:s}=e,i=g("create_codestar_connection_not_created_error");switch(t){case"SUCCESS":if(a.connectionArn)return r.createElement(r.Fragment,null,r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("create_codestar_connection_success")),r.createElement(z.Z,{margin:{left:"l"}},r.createElement(Al,{itemKey:g("codestar_connection_name"),itemValue:a.connectionName})));case"FAILURE":i=g("create_codestar_connection_failure");default:return r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},errorText:n&&i,stretch:!0},r.createElement(Ot.Z,{"data-testid":"create-codestar-connection-button",iconName:"external",iconAlign:"right",onClick:s},g("create_codestar_connection")))}},id=e=>[{label:g("aws_marketplace"),description:g("aws_marketplace_verification_description"),value:"AWS_Marketplace"},{label:g("codestar_connections"),description:g("codestar_connections_verification_description"),value:"CodeStar",disabled:!e}],ld=[{label:g("codestar_use_existing_connection"),description:"",value:"EXISTING_CONNECTION"},{label:g("codestar_create_new_connection"),description:"",value:"NEW_CONNECTION"}],od=e=>{let{codeStarEnabled:t=!1,verificationMethod:a="AWS_Marketplace",codeStarPreference:n="EXISTING_CONNECTION",connectionsLoading:s,connectionOptions:i=[],selectedConnectionArn:l,createdConnection:o={},createConnectionStatus:c,showErrors:d=!1,onVerificationMethodChange:u,onCodeStarPreferenceChange:m,onListConnections:p,onSelectedConnectionChange:_,onCreateConnectionClick:E}=e;return r.createElement(z.Z,{margin:{vertical:"l"}},r.createElement(Cr.Z,{header:r.createElement(Rr.Z,null,g("register_publisher"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"publisher-verification-method-form-field",label:g("publisher_verification_method"),description:r.createElement(r.Fragment,null,g("publisher_verification_method_description"),r.createElement(zr,{ariaLabel:"registering your account to publish CloudFormation extensions",pathAlias:"publisher-registration"})),stretch:!0},r.createElement(pi.Z,{"data-testid":"verification-method-tiles",ariaRequired:!0,value:a,items:id(Boolean(t)),onChange:u,columns:2})),"CodeStar"===a&&r.createElement(r.Fragment,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("codestar_connection_preference"),"data-testid":"publisher-codestar-connection-preference-form-field",stretch:!0},r.createElement(pi.Z,{"data-testid":"code-star-preference-tiles",ariaRequired:!0,value:n,items:ld,onChange:m,columns:2})),"EXISTING_CONNECTION"===n&&r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"publisher-codestar-connection-name-form-field",label:g("codestar_connection_name"),errorText:d&&!l?g("create_codestar_connection_not_selected_error"):"",stretch:!0},r.createElement($s.Z,{gridDefinition:[{colspan:10},{colspan:2}]},r.createElement(Gs.Z,{"data-testid":"existing-connection-select",ariaRequired:!0,filteringAriaLabel:"Filter connection",ariaLabel:"Select connection",statusType:s?"loading":"finished",filteringType:"auto",className:"col-xxxs-10",placeholder:g("codestar_use_existing_connection_placeholder"),options:i,selectedOption:i.find((e=>e.value===l))||null,onChange:_,empty:g("codestar_existing_connections_empty")}),r.createElement(Zr,{loading:Boolean(s),onRefresh:p}))),"NEW_CONNECTION"===n&&r.createElement(sd,{createConnectionStatus:c,createdConnection:o,onCreateConnectionClick:E,showErrors:d})))))},cd=e=>{let{accepted:t,showAcknowledgementError:a,onAcceptChange:n}=e;return r.createElement(sn.Z,{type:"info",header:g("publisher_terms_title")},r.createElement(r.Fragment,null,r.createElement(z.Z,{margin:{left:"n"}},r.createElement(zr,{docsBaseUrl:"https://cloudformation-registry-documents.s3.amazonaws.com",pathAlias:"Terms_and_Conditions_for_AWS_CloudFormation_Registry_Publishers.pdf",externalLinkText:g("publisher_terms_content")})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},errorText:a?g("publisher_accept_terms_error"):"",stretch:!0},r.createElement(z.Z,{margin:{top:"m"}},r.createElement(Ys.Z,{checked:Boolean(t),onChange:n},g("publisher_accept_terms_checkbox_label"))))))},dd=_r((()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),a=(0,Q.TH)(),n=(0,s.v9)(Dc),[i,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(Kt.RESOURCE),[u,m]=(0,r.useState)(Wt.AWS_TYPES),[p,_]=(0,r.useState)({typeNamePrefix:"",publisherId:"",publisherNamePrefix:""}),{displayData:E,fetchNextPage:h,hasNextPage:S,isFetching:T,refreshData:b}=(e=>{let{queryParams:{visibility:t,type:a,category:n,typeNamePrefix:s,publisherId:i,publisherNamePrefix:l,maxResults:c=100},shouldAutoFetch:d=!1,onError:u}=e;const m={...n&&{category:n},...s&&{typeNamePrefix:s},...i&&{publisherId:i},...l&&{publisherNamePrefix:l}},p={...(0,o.isTangerineBox)()?{filters:m}:{...m},...c&&{maxResults:c},...t&&{visibility:t},...a&&{type:a}},_={resource:o.ApiResource.Types,action:o.ApiAction.List,xsrfToken:me.xsrfToken,requestParams:p,filteringFields:[],enabled:!0,placeholderData:[],shouldAutoRefetch:!1},E=(0,o.useSDKInfiniteQuery)(_),{hasNextPage:g,isFetching:h,fetchNextPage:S,displayData:T}=E||{};return(0,r.useEffect)((()=>{const e=T.length<c;d&&g&&!h&&e&&S()}),[g,h,T]),es({status:E?.status,error:E?.error,errorText:{errorContent:E?.error?.message},errorHandler:u}),E})({queryParams:La({visibility:Yt.PUBLIC,type:c,category:u,maxResults:100,...p}),shouldAutoFetch:!0}),{setFlag:f,getFlag:k,deleteFlag:I,resetFlags:y}=ms(),C=E||[],R=C.filter((e=>e?.typeArn===i)),v=`${C?.length}${S?"+":""}`,L=e=>{Object.values(e).some((e=>""!==e))?(f({key:Sa}),Er({category:u,selectedFilterOption:c,currentStep:Ea.FILTERED,eventDetail:{...e}})):I(Sa)},P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=new URLSearchParams(La({visibility:Yt.PUBLIC,typeArn:i,type:c,category:u,...e}));t(`${a.pathname}?${r.toString()}`,{replace:!0})};return(0,r.useEffect)((()=>{P(),b(),y()}),[]),r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1",className:"e2e-test-public-ext-title",description:r.createElement(z.Z,{"data-testid":"public-ext-description",className:"e2e-test-public-ext-description",variant:"span"},g("public_extensions_description"),r.createElement(wr,{ariaLabel:"using public extensions in CloudFormation",pathName:"extensions-public",fontSize:"inherit"}))},g("public_extensions_header"))},r.createElement($s.Z,{className:"e2e-test-public-ext-list",gridDefinition:[{colspan:{default:5,xxs:5,s:4,l:3,xl:2}},{colspan:{default:7,xxs:7,s:8,l:9,xl:10}}]},r.createElement(Hr,{extensionTypeFilterOptions:[{value:qt,label:g("resource_types"),enabled:!0},{value:Ht,label:g("registry_modules"),enabled:fe(A.MODULE)},{value:Bt,label:g("registry_hooks"),enabled:fe(A.HOOKS)}].filter((e=>e.enabled)),selectedExtensionTypeFilterOption:c,selectedPublisherFilterOption:u,onExtensionTypeSelectionChange:e=>{const t=e.detail.value;d(t),P({type:t}),k(Sa)&&Er({category:u,selectedFilterOption:t,currentStep:Ea.FILTERED})},onPublisherSelectionChange:e=>{const t=e.detail.value;m(t),P({category:t}),t===Wt.THIRD_PARTY?(f({key:Ta}),L(p)):y()}}),r.createElement(kl,{className:"cfn--browse-extensions-section",i18nStrings:{emptyState:{header:g("public_extensions_empty_header"),description:g("extensions_empty_description")}},loading:T,loadingText:g("public_extensions_loading"),hasPaginationToken:S,items:C,header:r.createElement(vo,{count:R?.length?`${R.length}/${v}`:v,canEnable:!T&&Boolean(i)&&u===Wt.THIRD_PARTY,onEnableClick:()=>(()=>{const e=`/registry/activate-extension?typeArn=${encodeURIComponent(i)}`;f({key:ha});const a=k(Sa)?Ea.ACTIVATE_FROM_LIST_AFTER_FILTER:Ea.ACTIVATE_FROM_LIST;Er({category:u,selectedFilterOption:c,currentStep:a,eventDetail:{activateLink:e}}),t(e)})()}),filter:r.createElement("div",{className:"input-container"},r.createElement(an,{className:"input-filter",filteringProperties:sc,getFilteringTokensFromValues:oc,onPropertyFilteringChange:e=>{(e=>{const{typeNamePrefix:t,publisherId:a,publisherNamePrefix:r}=e.detail.values;_({typeNamePrefix:t,publisherId:a,publisherNamePrefix:r}),P(),L({typeNamePrefix:t,publisherId:a,publisherNamePrefix:r})})(e)},i18nStrings:lc,filteringInitialState:nc})),trackBy:"typeArn",selectedItems:R,cardDefinition:Nc,cardsPerRow:[{cards:1}],fetchMore:h,selectionType:"single",setCurrentPage:()=>{},onSelectionChange:e=>{l(e.detail?.selectedItems[0]?.typeArn)},cardsPreferences:{...Oc,pageSize:n?.pageSize},preferences:r.createElement(Ai.Z,{id:"CFNRegistryBrowseExtensionsCardsPreferences",title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),preferences:{...Oc,...n},pageSizePreference:xc,onConfirm:t=>{let{detail:a}=t;return e((e=>Je({preferenceType:N.PublicExtensions,preferenceSettings:e}))(a))}})})))}),Tt.PUBLIC_EXTENSIONS),ud=_r((()=>{const e=(0,Q.s0)(),{data:t,isFetching:a}=Eo({}),n=t||{};return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1","data-testid":"publisher-details-header"},g("publisher_registration_page_title"))},r.createElement(Lr,{className:"e2e-registry-publisher-overview",header:g("publisher_registration_details_section_title"),description:r.createElement(r.Fragment,null,g("register_publisher_description"),r.createElement(zr,{ariaLabel:"registering your account to publish CloudFormation extensions",pathAlias:"publisher-registration"})),loading:a},n.publisherId&&r.createElement(Or.Z,{columns:2,borders:"vertical"},Zc.map((e=>r.createElement(Al,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(n)})))),!n.publisherId&&r.createElement(ci,{header:"",description:g("publisher_registration_details_section_empty_content"),actionButton:r.createElement(Ot.Z,{onClick:()=>e("/registry/publisher/register")},g("register_publisher"))})))}),Tt.PUBLISHER_DETAILS),md=_r((()=>{const[e,t]=r.useState(null),{isFetching:a}=Eo({}),{data:n,metadata:s,setRegisterPublisherDataState:i,setRegisterPublisherMetadataState:l}=To(),{cachedData:c,isFetching:d,refreshData:m}=(()=>{const{metadata:e}=To(),t=e||{},a={resource:o.ApiResource.Connections,action:o.ApiAction.List,xsrfToken:me.xsrfToken,requestParams:{},filteringFields:[],shouldAutoRefetch:!1,queryOptions:{enabled:"CodeStar"===t.verificationMethod&&"EXISTING_CONNECTION"===t.codeStarPreference}},r=(0,o.useSDKInfiniteQuery)(a);return es({status:r?.status,error:r?.error,errorText:{errorContent:r?.error?.message}}),r})(),p=(c||{})?.connections||[];r.useEffect((()=>()=>_()),[]);const _=()=>{try{window.removeEventListener("message",E),Boolean(e)&&e.hasOwnProperty("closed")&&!e.closed&&e.close()}catch(e){}t(null)},E=e=>{if((e.origin===k.host||e.data)&&"string"==typeof e.data){try{const t=JSON.parse(e.data);if("successful"===t.status){const e=t.payload.ConnectionArn||"",a=t.payload.ConnectionName||"-";if(!e)return;l({...s,codeStarWindowStatus:"SUCCESS",showErrors:!1}),i({createdConnection:{connectionName:a,connectionArn:e}})}}catch(e){l({...s,codeStarWindowStatus:"FAILURE",showErrors:!0})}_()}};return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1",description:r.createElement(r.Fragment,null,g("publisher_wizard_description"),r.createElement(zr,{ariaLabel:"registering your account to publish CloudFormation extensions",pathAlias:"publisher-registration"}))},g("register_publisher"))},r.createElement(Hc.Z,{actions:!a&&r.createElement(rd,null)},a?r.createElement(vr.Z,null):r.createElement(r.Fragment,null,r.createElement(od,{codeStarEnabled:fe(A.PUBLISHER_CODE_CONNECTIONS),verificationMethod:s.verificationMethod,codeStarPreference:s.codeStarPreference,connectionOptions:nd(p),connectionsLoading:d,createdConnection:n.createdConnection,selectedConnectionArn:n.selectedConnectionArn,showErrors:s.showErrors,createConnectionStatus:s.codeStarWindowStatus,onVerificationMethodChange:e=>{l({...s,verificationMethod:e.detail.value,showErrors:!1})},onCodeStarPreferenceChange:e=>{const t=e.detail.value;l({...s,codeStarPreference:t,showErrors:!1})},onCreateConnectionClick:()=>{const e=window.open((()=>{const e="https://$host/codesuite/settings/connections/create",t=(0,o.getRegion)(),a=da.join(","),r=La({region:t,providers:a,origin:"cloudformation"});return`${e.split("$host").join(k.host)}?${(0,b.stringify)(r)}`})(),"Create CodeStar Connection","resizable=yes,width=600,height=800");l({...s,codeStarWindowStatus:"OPEN",showErrors:!1}),t(e),u.logEvent("reg_pub_create_connection",1),window.addEventListener("message",E,!1)},onSelectedConnectionChange:e=>{i({...n,selectedConnectionArn:e.detail.selectedOption.value}),u.logEvent("reg_pub_select_connection",1)},onListConnections:()=>m()}),r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(cd,{accepted:n.acceptTerms,onAcceptChange:e=>{i({...n,acceptTerms:e.detail.checked})},showAcknowledgementError:!n.acceptTerms&&s.showErrors})))))}),Tt.PUBLISHER_REGISTRATION),pd=_r((()=>{const{arn:e}=So({strictArnCheck:!0}),{mutate:t,isLoading:a}=(()=>{const{arn:e,configurePreference:t,clearActivateExtensionState:a}=uo(),{data:r}=mo({arn:e}),n=r||{},i=(0,s.I0)(),l=(0,Q.s0)(),c={resource:o.ApiResource.Types,action:o.ApiAction.Activate,xsrfToken:me.xsrfToken,onMutate:()=>{},onSuccess:e=>{const r=Boolean(n.configurationSchema)&&t===Vt?`/registry/configure-extension?typeArn=${encodeURIComponent(e.arn)}`:"/registry/activated-extensions/details/schema?".concat((0,b.stringify)({arn:e.arn}));a(),l(r),i(He({id:ne(),content:g("activate_extension_success",n.typeName),type:"SUCCESS",dismissible:!0}))},onError:e=>{i(He({id:ne(),header:g("activate_extension_failure",n.typeName),content:e.message,type:"ERROR",dismissible:!0}))}};return(0,o.useSDKMutation)(c)})(),n=(0,s.I0)(),i=(0,Q.s0)(),{getFlag:l,resetFlags:c}=ms(),{data:d,isFetching:u,isSuccess:m}=mo({arn:e}),p=d||{},_=uo();r.useEffect((()=>{if(m&&Boolean(p?.arn)){_.setActivateExtensionState(p);const e=Boolean(p?.publisherId),t=p?.visibility===Yt.PRIVATE;e&&!t||(i("/registry/public-extensions"),K.error({level:F.ERROR,message:"Enable extension only apply on third party extensions."}),n(He({id:ne(),content:g("activate_extension_not_applicable_error"),type:"ERROR",dismissible:!0})))}}),[u]),r.useEffect((()=>()=>{_.clearActivateExtensionState(),c()}),[]);const E=(e,t)=>({visible:t||e===Ht,message:g(e===Ht?"activate_extension_module_alert":"activate_extension_duplicate_activate_alert")});return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1",description:r.createElement(r.Fragment,null,g("activate_extension_description"),r.createElement(wr,{ariaLabel:"activating public extensions for use in your AWS account",pathName:"extensions-activated"}))},g("activate_extension_header",Ir(e)))},r.createElement("form",{onSubmit:e=>e.preventDefault()},r.createElement(Hc.Z,{actions:r.createElement(Es.Z,{direction:"horizontal",size:"s"},r.createElement(Ot.Z,{variant:"link",onClick:()=>{i(`/registry/public-extensions/details/schema?${(0,b.stringify)({arn:p?.arn||""})}`),_.clearActivateExtensionState()},"data-testid":"activate-extension-cancel-button"},g("cancel_label")),r.createElement(Ot.Z,{className:"e2e-test-activate-extension-button",variant:"primary",loading:a,onClick:()=>{const{configurationSchema:e,typeName:a}=p,{configurePreference:r,loggingConfig:n,autoUpdate:s,executionRoleArn:i}=_,o={configurationSchema:e,configurePreference:r,loggingConfig:n,autoUpdate:s,executionRoleArn:i,typeName:a},c=(()=>{const e=l(ha),t=l(Sa);return e&&t?Ea.FINISH_FROM_LIST_AFTER_FILTER:t?Ea.FINISH_FROM_OVERVIEW_AFTER_FILTER:e?Ea.FINISH_FROM_LIST:Ea.FINISH_FROM_OVERVIEW})();Er({category:l(Ta)?Wt.THIRD_PARTY:null,selectedFilterOption:p.type,currentStep:c,eventDetail:o}),t((()=>{const{typeNameAlias:e,executionRoleArn:t,loggingConfig:a,autoUpdate:r}=_;return La({publicTypeArn:Tr(p?.arn),typeNameAlias:p?.typeName!==e?e:"",executionRoleArn:t,loggingConfig:a?.parsedJSON,autoUpdate:r})})())},disabled:u||Boolean(_.loggingConfig?.error),"data-testid":"activate-extension-button"},g("activate_extension_submit_button_label")))},u?r.createElement(vr.Z,null):r.createElement(r.Fragment,null,r.createElement(z.Z,{display:E(p?.type,p?.isActivated).visible?"block":"none"},r.createElement(sn.Z,{visible:E(p?.type,p?.isActivated).visible},E(p?.type,p?.isActivated).message)),r.createElement(Jc,null),r.createElement(Yc,null),Boolean(p?.configurationSchema)&&r.createElement(jc,null)))))}),Tt.REGISTRY_ACTIVATE_PUBLIC_EXTENSION),_d=()=>fe(A.UNO_REGISTRY)?r.createElement(Xl,null,r.createElement(Vl,null,r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:":extensionGroup/details/:selectedTabId",element:r.createElement(rc,null)}),r.createElement(Q.AW,{path:"activated-extensions/:selectedTabId",element:r.createElement(Lc,null)}),r.createElement(Q.AW,{path:"public-extensions",element:r.createElement(dd,null)}),r.createElement(Q.AW,{path:"activate-extension",element:r.createElement(pd,null)}),r.createElement(Q.AW,{path:"configure-extension",element:r.createElement(ad,null)}),r.createElement(Q.AW,{path:"publisher/details",element:r.createElement(ud,null)}),r.createElement(Q.AW,{path:"publisher/register",element:r.createElement(md,null)}),r.createElement(Q.AW,{key:"redirect-from-activated-extensions",path:"activated-extensions",element:r.createElement(Q.Fg,{to:"resource-types",replace:!0})}),r.createElement(Q.AW,{key:"redirect-from-publisher",path:"publisher",element:r.createElement(Q.Fg,{to:"details",replace:!0})}),r.createElement(Q.AW,{key:"redirect-from-registry",path:"*",element:r.createElement(Q.Fg,{to:"activated-extensions/resource-types",replace:!0})})))):fe(A.PRE_UNO_REGISTRY)?r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:":extensionGroup/details/:selectedTabId",element:r.createElement(rc,null)}),r.createElement(Q.AW,{path:"activated-extensions/:selectedTabId",element:r.createElement(Lc,null)}),r.createElement(Q.AW,{key:"redirect-from-activated-extensions",path:"activated-extensions",element:r.createElement(Q.Fg,{to:"activated-extensions/resource-types",replace:!0})}),r.createElement(Q.AW,{key:"redirect-from-registry",path:"*",element:r.createElement(Q.Fg,{to:"activated-extensions/resource-types",replace:!0})})):fe(A.PRE_UNO_REGISTRY)?null:r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:"resourceTypes/*",element:r.createElement(Bc,null)}),r.createElement(Q.AW,{path:"activated-extensions/:selectedTabId",element:r.createElement(Lc,null)}),r.createElement(Q.AW,{key:"redirect-from-registry",path:"*",element:r.createElement(Q.Fg,{to:"resourceTypes",replace:!0})})),Ed=[{title:g("spotlight_card_1_title"),datePublished:new Date(Date.UTC(2022,10,27,8)),description:g("spotlight_card_1_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/11/aws-backup-application-aware-data-protection-applications-defined-cloudformation/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_2_title"),datePublished:new Date(Date.UTC(2022,10,4,8)),description:g("spotlight_card_2_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/11/manage-resources-aws-organizations-cloudformation/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_3_title"),datePublished:new Date(Date.UTC(2022,10,4,8)),description:g("spotlight_card_3_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/11/aws-cloudformation-supports-amazon-rds-multi-az-deployments-readable-standbys/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_4_title"),datePublished:new Date(Date.UTC(2022,10,4,8)),description:g("spotlight_card_4_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/11/aws-cloudformation-stacksets-insights-stack-instances-set-operations/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_5_title"),datePublished:new Date(Date.UTC(2022,9,27,8)),description:g("spotlight_card_5_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/10/aws-cloud-control-api-available-aws-middle-east-uae-region/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_6_title"),datePublished:new Date(Date.UTC(2022,9,20,8)),description:g("spotlight_card_6_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/10/aws-cloudformation-language-extensions-transform-available-aws-govcloud/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_7_title"),datePublished:new Date(Date.UTC(2022,9,11,8)),description:g("spotlight_card_7_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/10/aws-cloudformation-stacksets-increases-limits-three-service-quotas/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_8_title"),datePublished:new Date(Date.UTC(2022,8,29,8)),description:g("spotlight_card_8_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/09/aws-cloud-control-api-supports-aws-privatelink/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_9_title"),datePublished:new Date(Date.UTC(2022,8,14,8)),description:g("spotlight_card_9_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/09/aws-cloud-development-kit-cdk-announces-cdk-construct-tree-view-cloudformation-console/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_10_title"),datePublished:new Date(Date.UTC(2022,8,8,8)),description:g("spotlight_card_10_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/09/aws-cloudformation-new-language-extensions-transform/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_11_title"),datePublished:new Date(Date.UTC(2022,7,2,8)),description:g("spotlight_card_11_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/08/build-aws-config-rules-cloudformation-guard/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_12_title"),datePublished:new Date(Date.UTC(2022,6,20,8)),description:g("spotlight_card_12_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/07/aws-cloudformation-event-notifications-amazon-eventbridge-event-driven-applications/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_13_title"),datePublished:new Date(Date.UTC(2022,6,7,8)),description:g("spotlight_card_13_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/07/aws-cloudformation-stacksets-support-account-level-targeting-organizational-unit/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_14_title"),datePublished:new Date(Date.UTC(2022,6,7,8)),description:g("spotlight_card_14_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/07/aws-cloudformation-stacksets-available-aws-asia-pacific-jakarta-region/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_15_title"),datePublished:new Date(Date.UTC(2022,5,30,8)),description:g("spotlight_card_15_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/06/aws-cloudformation-guard-2-1-available/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_16_title"),datePublished:new Date(Date.UTC(2022,3,19,8)),description:g("spotlight_card_16_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/04/introducing-35-types-cloudformation-registry/",tags:["spotlight_latest_news","spotlight_editors_choice"]},{title:g("spotlight_card_17_title"),datePublished:new Date(Date.UTC(2022,2,2,8)),description:g("spotlight_card_17_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/03/amazon-msk-aws-cloudformation-support/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_18_title"),datePublished:new Date(Date.UTC(2022,1,10,8)),description:g("spotlight_card_18_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/02/aws-announces-general-availability-aws-cloudformation-hooks/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_19_title"),datePublished:new Date(Date.UTC(2022,0,6,8)),description:g("spotlight_card_19_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/01/cloudformation-registry-37-resource-types/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_20_title"),datePublished:new Date(Date.UTC(2022,10,28,8)),description:g("spotlight_card_20_description"),url:"https://aws.amazon.com/blogs/devops/using-cloudformation-events-to-build-custom-workflows-for-post-provisioning-management/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_21_title"),datePublished:new Date(Date.UTC(2022,10,28,8)),description:g("spotlight_card_21_description"),url:"https://aws.amazon.com/blogs/security/deploy-aws-organizations-resources-by-using-cloudformation/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_22_title"),datePublished:new Date(Date.UTC(2022,10,27,8)),description:g("spotlight_card_22_description"),url:"https://aws.amazon.com/blogs/aws/new-for-aws-backup-protect-and-restore-your-cloudformation-stacks/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_23_title"),datePublished:new Date(Date.UTC(2021,1,19,8)),description:g("spotlight_card_23_description"),url:"https://aws.amazon.com/blogs/mt/cloudformation-stacksets-delegated-administration/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_24_title"),datePublished:new Date(Date.UTC(2021,5,21,8)),description:g("spotlight_card_24_description"),url:"https://aws.amazon.com/blogs/aws/introducing-a-public-registry-for-aws-cloudformation/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_25_title"),datePublished:new Date(Date.UTC(2020,3,30,8)),description:g("spotlight_card_25_description"),url:"https://aws.amazon.com/blogs/mt/managing-resources-using-aws-cloudformation-resource-types/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_26_title"),datePublished:new Date(Date.UTC(2021,6,12,8)),description:g("spotlight_card_26_description"),url:"https://aws.amazon.com/blogs/storage/automate-centralized-backup-at-scale-across-aws-services-using-aws-backup/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_27_title"),datePublished:new Date(Date.UTC(2021,0,14,8)),description:g("spotlight_card_27_description"),url:"https://aws.amazon.com/blogs/storage/secure-data-recovery-with-cross-account-backup-and-cross-region-copy-using-aws-backup/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_28_title"),datePublished:new Date(Date.UTC(2020,8,21,8)),description:g("spotlight_card_28_description"),url:"https://aws.amazon.com/blogs/storage/centralized-cross-account-management-with-cross-region-copy-using-aws-backup/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_29_title"),datePublished:new Date(Date.UTC(2022,8,29,8)),description:g("spotlight_card_29_description"),url:"https://aws.amazon.com/blogs/mt/introducing-new-language-extensions-in-aws-cloudformation/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_30_title"),datePublished:new Date(Date.UTC(2022,9,4,8)),description:g("spotlight_card_30_description"),url:"https://aws.amazon.com/blogs/mt/bootstrapping-multiple-aws-accounts-for-aws-cdk-using-cloudformation-stacksets/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_31_title"),datePublished:new Date(Date.UTC(2022,9,5,8)),description:g("spotlight_card_31_description"),url:"https://aws.amazon.com/blogs/mt/automate-cloud-foundational-services-for-compliance-in-aws/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_32_title"),datePublished:new Date(Date.UTC(2022,7,11,8)),description:g("spotlight_card_32_description"),url:"https://aws.amazon.com/blogs/mt/a-self-service-patching-solution-for-multi-account-organisations/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_33_title"),datePublished:new Date(Date.UTC(2022,11,24,8)),description:g("spotlight_card_33_description"),url:"https://www.youtube.com/watch?v=QGjAJsPf850",tags:["spotlight_podcasts"]},{title:g("spotlight_card_34_title"),datePublished:new Date(Date.UTC(2022,8,1,8)),description:g("spotlight_card_34_description"),url:"https://www.youtube.com/watch?v=VWoD0qA-sa0&t=206s",tags:["spotlight_podcasts"]},{title:g("spotlight_card_35_title"),datePublished:new Date(Date.UTC(2022,10,8,8)),description:g("spotlight_card_35_description"),url:"https://www.youtube.com/watch?v=l_RUPkPTMdY&t=152s",tags:["spotlight_podcasts"]},{title:g("spotlight_card_36_title"),datePublished:new Date(Date.UTC(2022,6,15,8)),description:g("spotlight_card_36_description"),url:"https://www.youtube.com/watch?v=gpI-6OnUkAU&t=237s",tags:["spotlight_podcasts"]},{title:g("spotlight_card_37_title"),datePublished:new Date(Date.UTC(2022,11,15,8)),description:g("spotlight_card_37_description"),url:"https://catalog.workshops.aws/cfn101/en-US",tags:["spotlight_getting_started","spotlight_editors_choice"]},{title:g("spotlight_card_38_title"),datePublished:new Date(Date.UTC(2022,11,15,8)),description:g("spotlight_card_38_description"),url:"https://catalog.us-east-1.prod.workshops.aws/workshops/d3460561-7264-4dbf-9587-2dd4b34306bf/en-US",tags:["spotlight_getting_started"]},{title:g("spotlight_card_39_title"),datePublished:new Date(Date.UTC(2022,11,15,8)),description:g("spotlight_card_39_description"),url:"https://mng.workshop.aws/cloudformation/mappingstacksets.html",tags:["spotlight_getting_started"]},{title:g("spotlight_card_40_title"),datePublished:new Date(Date.UTC(2022,0,25,8)),description:g("spotlight_card_40_description"),url:"https://wellarchitectedlabs.com/index.html",tags:["spotlight_getting_started"]},{title:g("spotlight_card_41_title"),datePublished:new Date(Date.UTC(2022,11,15,8)),description:g("spotlight_card_41_description"),url:"https://aws.amazon.com/premiumsupport/knowledge-center/#AWS_CloudFormation",tags:["spotlight_getting_started","spotlight_editors_choice"]},{title:g("spotlight_card_42_title"),datePublished:new Date(Date.UTC(2022,3,22,8)),description:g("spotlight_card_42_description"),url:"https://github.com/aws-cloudformation/cfn-language-discussion",tags:["spotlight_open_public_discussions","spotlight_editors_choice"]},{title:g("spotlight_card_43_title"),datePublished:new Date(Date.UTC(2019,6,24,8)),description:g("spotlight_card_43_description"),url:"https://github.com/aws-cloudformation/cloudformation-coverage-roadmap",tags:["spotlight_open_public_discussions","spotlight_editors_choice"]},{title:g("spotlight_card_44_title"),datePublished:new Date(Date.UTC(2022,1,13,8)),description:g("spotlight_card_44_description"),url:"https://github.com/aws-cloudformation/resource-providers-list",tags:["spotlight_open_public_discussions"]},{title:g("spotlight_card_45_title"),datePublished:new Date(Date.UTC(2022,5,30,8)),description:g("spotlight_card_45_description"),url:"https://github.com/aws-cloudformation/cloudformation-guard",tags:["spotlight_feature_spotlight","spotlight_editors_choice"]},{title:g("spotlight_card_46_title"),datePublished:new Date(Date.UTC(2018,3,17,8)),description:g("spotlight_card_46_description"),url:"https://github.com/aws-cloudformation/cfn-lint",tags:["spotlight_feature_spotlight","spotlight_editors_choice"]},{title:g("spotlight_card_47_title"),datePublished:new Date(Date.UTC(2022,11,15,8)),description:g("spotlight_card_47_description"),url:"https://aws-cloudformation.github.io/rain/",tags:["spotlight_feature_spotlight"]},{title:g("spotlight_card_48_title"),datePublished:new Date(Date.UTC(2023,1,13,8)),description:g("spotlight_card_48_description"),url:"https://www.youtube.com/watch?v=VWL-x-4lHCk",tags:["spotlight_podcasts","spotlight_editors_choice"]},{title:g("spotlight_card_49_title"),datePublished:new Date(Date.UTC(2020,10,15,8)),description:g("spotlight_card_49_description"),url:"https://aws.amazon.com/blogs/devops/integrating-aws-cloudformation-guard/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_50_title"),datePublished:new Date(Date.UTC(2020,11,16,8)),description:g("spotlight_card_50_description"),url:"https://aws.amazon.com/blogs/devops/configure-devops-guru-multiple-accounts-regions-using-cfn-stacksets/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_51_title"),datePublished:new Date(Date.UTC(2022,8,16,8)),description:g("spotlight_card_51_description"),url:"https://aws.amazon.com/blogs/devops/implementing-long-running-deployments-with-aws-cloudformation-custom-resources-using-aws-step-functions/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_52_title"),datePublished:new Date(Date.UTC(2023,1,1,8)),description:g("spotlight_card_52_description"),url:"https://aws.amazon.com/about-aws/whats-new/2023/02/aws-cloudformation-stacksets-access-list-regions-stack-instances-stack-set/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_53_title"),datePublished:new Date(Date.UTC(2023,0,11,8)),description:g("spotlight_card_53_description"),url:"https://aws.amazon.com/about-aws/whats-new/2023/01/aws-cloudformation-fnfindinmap-language-extension-default-values-additional-intrinsic-functions/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_54_title"),datePublished:new Date(Date.UTC(2023,0,18,8)),description:g("spotlight_card_54_description"),url:"https://aws.amazon.com/about-aws/whats-new/2023/01/validate-aws-serverless-application-model-templates-cloudformation-linter/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_55_title"),datePublished:new Date(Date.UTC(2022,10,17,8)),description:g("spotlight_card_55_description"),url:"https://aws.amazon.com/about-aws/whats-new/2022/11/event-driven-applications-cloudformation-stacksets-event-notifications-eventbridge/",tags:["spotlight_latest_news","spotlight_editors_choice"]},{title:g("spotlight_card_56_title"),datePublished:new Date(Date.UTC(2023,0,1,8)),description:g("spotlight_card_56_description"),url:"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/best-practices.html?sc_channel=sm&sc_campaign=AWS_CloudFormation&sc_publisher=TWITTER&sc_country=global&sc_geo=GLOBAL&sc_outcome=awareness&trkCampaign=AWSCloudFormation&sc_content=AWSCloudFormation&sc_category=AWS%20CloudFormation&trk=AWSCloudFormation&linkId=187284560",tags:["spotlight_getting_started","spotlight_editors_choice"]},{title:g("spotlight_card_57_title"),datePublished:new Date(Date.UTC(2022,11,22,8)),description:g("spotlight_card_57_description"),url:"https://aws.amazon.com/blogs/mt/deploying-custom-aws-config-rules-in-an-aws-organization-environment/",tags:["spotlight_latest_news","spotlight_editors_choice"]},{title:g("spotlight_card_58_title"),datePublished:new Date(Date.UTC(2020,11,21,8)),description:g("spotlight_card_58_description"),url:"https://aws.amazon.com/blogs/security/how-to-deploy-public-acm-certificates-across-multiple-aws-accounts-and-regions-using-aws-cloudformation-stacksets/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_59_title"),datePublished:new Date(Date.UTC(2022,2,10,8)),description:g("spotlight_card_59_description"),url:"https://aws.amazon.com/blogs/mt/gaining-more-control-over-multi-regional-aws-cloudformation-deployments/",tags:["spotlight_latest_news","spotlight_editors_choice"]},{title:g("spotlight_card_60_title"),datePublished:new Date(Date.UTC(2020,5,28,8)),description:g("spotlight_card_60_description"),url:"https://aws.amazon.com/blogs/devops/building-a-ci-cd-pipeline-for-multi-region-deployment-with-aws-codepipeline/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_61_title"),datePublished:new Date(Date.UTC(2020,9,15,8)),description:g("spotlight_card_61_description"),url:"https://aws.amazon.com/blogs/devops/integrating-aws-cloudformation-guard/",tags:["spotlight_latest_news","spotlight_editors_choice"]},{title:g("spotlight_card_62_title"),datePublished:new Date(Date.UTC(2022,2,10,8)),description:g("spotlight_card_62_description"),url:"https://aws.amazon.com/blogs/mt/enforce-best-practices-in-aws-systems-manager-documents-leveraging-cfn-guard/",tags:["spotlight_latest_news"]},{title:g("spotlight_card_63_title"),datePublished:new Date(Date.UTC(2022,1,10,8)),description:g("spotlight_card_63_description"),url:"https://aws.amazon.com/blogs/mt/proactively-keep-resources-secure-and-compliant-with-aws-cloudformation-hooks/",tags:["spotlight_latest_news","spotlight_editors_choice"]},{title:g("spotlight_card_64_title"),datePublished:new Date(Date.UTC(2022,3,26,8)),description:g("spotlight_card_64_description"),url:"https://aws.amazon.com/blogs/security/extend-your-pre-commit-hooks-with-aws-cloudformation-guard/",tags:["spotlight_latest_news"]}],gd={spotlight_editors_choice:"red",spotlight_feature_spotlight:"grey",spotlight_getting_started:"blue",spotlight_latest_news:"blue",spotlight_open_public_discussions:"grey",spotlight_podcasts:"blue"},hd=[{value:"spotlight_all_tags",label:g("spotlight_all_tags")},{value:"spotlight_feature_spotlight",label:g("spotlight_feature_spotlight")},{value:"spotlight_getting_started",label:g("spotlight_getting_started")},{value:"spotlight_latest_news",label:g("spotlight_latest_news")},{value:"spotlight_open_public_discussions",label:g("spotlight_open_public_discussions")},{value:"spotlight_podcasts",label:g("spotlight_podcasts")}],Sd=(e,t)=>("newest"===e?t.sort(((e,t)=>t.datePublished.getTime()-e.datePublished.getTime())):t.sort(((e,t)=>e.datePublished.getTime()-t.datePublished.getTime())),t),Td={emptyState:{header:g("no_matches"),description:g("no_results_match")}},bd=[{value:"newest",label:g("sort_by_newest")},{value:"oldest",label:g("sort_by_oldest")}],fd=(e,t)=>({header:e=>r.createElement(Rr.Z,{variant:"h2",info:e.newPost?r.createElement(z.Z,{color:"text-status-info",fontSize:"heading-s",fontWeight:"bold",variant:"span"},g("no_concat_new")):null},e.title),sections:[{id:"bookmark",content:a=>{const n=e?.[a.url],s=n?"check":"add-plus",i=g(n?"bookmarked":"bookmark");return r.createElement(Ot.Z,{"data-testid":"bookmark-add",iconName:s,onClick:()=>{t(n?{...e,[a.url]:!n}:{...e,[a.url]:!0})}},i)}},{id:"datePublished",content:e=>r.createElement(z.Z,{color:"text-body-secondary"},ba(e.datePublished))},{id:"description",content:e=>r.createElement(z.Z,null,e.description)},{id:"url",content:e=>r.createElement(z.Z,{variant:"span",margin:{left:"xxs"}},r.createElement(V.Z,{external:!0,externalIconAriaLabel:"Opens in a new tab",target:"_blank",href:e.url},g("learn_more_label")))},{id:"tags",content:e=>r.createElement(Es.Z,{direction:"horizontal",size:"xs"},e.tags.map(((e,t)=>r.createElement(Ts.Z,{color:gd[e],key:t},g(e)))))}]});function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},kd.apply(this,arguments)}const Ad=_r((()=>{const[e,t]=r.useState(hd[0]),[a,n]=r.useState(bd[0]),[s,i]=r.useState(!0),[l,o]=r.useState(!1),c={filtering:{filteringFunction:(e,t)=>fa(t)(e)},pagination:{pageSize:50,defaultPage:1}},{items:d,filterProps:u,paginationProps:m}=(0,ki.K)(Ed,c);let[p,_]=is(Z.SPOTLIGHT_BOOKMARKS);return r.createElement(kl,{variant:"full-page",stickyHeader:!0,i18nStrings:Td,hasPaginationToken:!1,fetchMore:()=>{},cardsPreferences:{wrapLines:!0},setCurrentPage:()=>{},header:r.createElement(Rr.Z,{variant:"awsui-h1-sticky",description:g("spotlight_watch")},g("cloudformation_spotlight")),filter:r.createElement(r.Fragment,null,r.createElement(z.Z,{margin:{bottom:"s"}},r.createElement(Ci.Z,kd({},u,{filteringPlaceholder:g("stackSet.details.filter_placeholder"),filteringAriaLabel:g("stackSet.details.filter_placeholder"),filteringClearAriaLabel:"Clear search filter input"}))),r.createElement($s.Z,{gridDefinition:[{colspan:{default:5,s:2,xl:1}},{colspan:{default:5,s:2,xl:1}},{colspan:{default:5,xs:4,s:3,m:2,xl:1}},{colspan:{default:5,xs:4,s:3,m:2,xl:1}}]},r.createElement(Gs.Z,{"data-testid":"tag-select",ariaRequired:!0,ariaLabel:"Dropdown for tag select",options:hd,selectedOption:hd.filter((t=>t.value===e.value))[0],onChange:e=>{let{detail:a}=e;t(a.selectedOption)}}),r.createElement(Gs.Z,{"data-testid":"date-select",ariaRequired:!0,ariaLabel:"Dropdown for sort by date",options:bd,selectedOption:a,onChange:e=>{let{detail:t}=e;return n(t.selectedOption)}}),r.createElement(z.Z,{padding:{left:"s",top:"xxs",bottom:"xxs"}},r.createElement(ed.Z,{"data-testid":"editors-choice-toggle",onChange:e=>{let{detail:t}=e;return i(t.checked)},checked:s},g("show_editors_choice"))),r.createElement(z.Z,{padding:{top:"xxs",bottom:"xxs"}},r.createElement(ed.Z,{"data-testid":"bookmark-toggle",onChange:e=>{let{detail:t}=e;return o(t.checked)},checked:l},g("show_bookmarks"))))),pagination:r.createElement(Ii.Z,kd({},m,{ariaLabels:{previousPageLabel:g("previous_page"),nextPageLabel:g("next_page"),pageLabel:e=>g("pagination_page_label",String(e))}})),items:Sd(a.value,[...d]).filter((t=>(t=>{const a=p?.[t.url],r=t.tags.includes("spotlight_editors_choice"),n="spotlight_all_tags"===e.value||t.tags.includes(e.value);return l&&!s?Boolean(a&&n):s&&!l?Boolean(r&&n):s&&l?Boolean(a&&r&&n):Boolean(n)})(t))),cardDefinition:fd(p,_),cardsPerRow:[{cards:1}]})}),Tt.SPOTLIGHT),Id=()=>r.createElement(Q.Z5,null,fe(A.FEATURE_SPOTLIGHT)&&r.createElement(Q.AW,{path:"*",element:r.createElement(Ad,null)})),yd=()=>{const e=Ie((0,o.getRIPRegion)()),t=fe(A.SS_ORGS),a=(0,o.getCurrentAccountId)(),r={resource:o.ApiResource.Organization,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,enabled:e&&t,shouldAutoRefetch:!1},n=(0,o.useSDKQuery)(r),s=n?.data?.organization||{};return{...n,isManagementAccount:a===s?.masterAccountId,data:s}},Cd=()=>{const e=Ie((0,o.getRIPRegion)()),t=fe(A.SS_ORGS),{isManagementAccount:a}=yd(),r={resource:o.ApiResource.OrganizationsAccess,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,enabled:e&&t&&a,shouldAutoRefetch:!1},n=(0,o.useSDKQuery)(r);return{...n,isTrustedAccessEnabled:"ENABLED"===n?.data?.status}},Rd=()=>{const e=Ie((0,o.getRIPRegion)()),t=fe(A.SS_ORGS),a=fe(A.SS_DA),r={resource:o.ApiResource.DelegatedAdministrators,action:o.ApiAction.List,requestParams:{},xsrfToken:me.xsrfToken,enabled:e&&t&&a,shouldAutoRefetch:!1},{data:n,isLoading:s,refreshData:i}=(0,o.useSDKQuery)(r),l=n?.delegatedAdministrators||[];return{isDelegatedAdminAccount:cr(l),delegatedAdministrators:l,isLoading:s,refreshData:i}},vd=(0,r.createContext)({isManagementAccount:!1,isDelegatedAdminAccount:!1,isTrustedAccessEnabled:!1}),Ld=e=>{let{children:t}=e;const{isManagementAccount:a}=yd(),{isTrustedAccessEnabled:n}=Cd(),{isDelegatedAdminAccount:s}=Rd();return r.createElement(vd.Provider,{value:{isManagementAccount:a,isTrustedAccessEnabled:n,isDelegatedAdminAccount:s}},t)};var Pd=a(15409),Nd=a.n(Pd);const Od={INFO:"info",STACKS:"stacks",OPERATIONS:"operations",PARAMETERS:"parameters",TEMPLATE:"template"};let xd=function(e){return e.OPERATION_DETAILS="OPERATION_DETAILS",e.EDIT_AUTOMATIC_DEPLOYMENT="EDIT_AUTOMATIC_DEPLOYMENT",e.REGISTER_DELEGATED_ADMINISTRATOR="REGISTER_DELEGATED_ADMINISTRATOR",e.DEREGISTER_DELEGATED_ADMINISTRATOR="DEREGISTER_DELEGATED_ADMINISTRATOR",e.DELETE_STACK_SET="DELETE_STACK_SET",e.STOP_STACK_SET_OPERATION="STOP_STACK_SET_OPERATION",e.OVERRIDE_PARAMETER="OVERRIDE_PARAMETER",e.REVERT_TO_STACK_SET_VALUE="REVERT_TO_STACK_SET_VALUE",e}({}),Dd=function(e){return e.SEQUENTIAL="SEQUENTIAL",e.PARALLEL="PARALLEL",e}({}),wd=function(e){return e.CREATE_STACK_SET="CREATE_STACK_SET",e.UPDATE_STACK_SET="UPDATE_STACK_SET",e.UPDATE_STACK_INSTANCES="UPDATE_STACK_INSTANCES",e.DELETE_STACK_INSTANCES="DELETE_STACK_INSTANCES",e.CREATE_STACK_INSTANCES="CREATE_STACK_INSTANCES",e}({}),Zd=function(e){return e.NONE="NONE",e.INTERSECTION="INTERSECTION",e.DIFFERENCE="DIFFERENCE",e.UNION="UNION",e}({}),Ud=function(e){return e.PENDING="PENDING",e.RUNNING="RUNNING",e.SUCCEEDED="SUCCEEDED",e.FAILED="FAILED",e.CANCELLED="CANCELLED",e.INOPERABLE="INOPERABLE",e.IN_SYNC="IN_SYNC",e.DRIFTED="DRIFTED",e.NOT_CHECKED="NOT_CHECKED",e}({}),Fd=function(e){return e.active="ACTIVE",e.deleted="DELETED",e}({}),Md=function(e){return e.RUNNING="RUNNING",e.SUCCEEDED="SUCCEEDED",e.FAILED="FAILED",e.STOPPING="STOPPING",e.STOPPED="STOPPED",e.CONDITIONALLY_SUCCEEDED="CONDITIONALLY_SUCCEEDED",e}({}),Kd=function(e){return e.AWS_ACCOUNT="stackInstanceAccount",e.AWS_REGION="stackInstanceRegion",e.DETAILED_STATUS="detailedStatus",e.LAST_OPERATION_ID="lastOperationId",e.DRIFT_STATUS="driftStatus",e}({});const Wd="CLEAR_STACK_SETS_WIZARD_STATE",zd="RESET_PARAMETER_VALUES",$d="REVERT_PARAMETER_VALUES",Vd="SET_OPERATION_PREFERENCES",Gd="SET_OVERRIDE_PARAMETER_VALUE",Bd="SET_PARAMETER_VALUE",Hd="SET_STACK_SETS_WIZARD_STATE",qd="SET_STACK_SETS_TEMPLATE_URL",Yd="SET_CAPABILITY_ACKNOWLEDGMENT",Xd={accountFilterType:null,accounts:[],accountsErrorKey:"",accountsFromOrganizationalUnit:[],accountsOption:"ACCOUNTS",accountsS3URL:"",addStacksToStackSetOption:"DEPLOY_NEW_STACKS",allChecked:!0,autoDeployment:{enabled:!0,retainStacksOnAccountRemoval:!1},capabilities:null,deploymentFormat:"ACCOUNTS",deploymentOption:"ACCOUNTS",executionRoleName:"AWSCloudFormationStackSetExecutionRole",failureToleranceErrorKey:"",iamAdminRole:{arn:"",roleName:""},iamAdminRoleErrorKey:"",managedExecution:{active:!1},maxConcurrentErrorKey:"",operationPreferences:{failureToleranceCount:"0",failureToleranceFormat:"number",failureTolerancePercentage:null,maxConcurrentCount:"1",maxConcurrentFormat:"number",maxConcurrentPercentage:null,regionConcurrencyType:Dd.SEQUENTIAL,regionOrder:[]},organization:[],organizationalUnitForAccounts:"",organizationalUnitIds:[""],organizationalUnitsOption:"ORGANIZATION",ouIdErrorKey:"",parameterGroups:[],parameters:{},parametersNotInAParameterGroup:[],permissionModel:null,prepareTemplateTile:"SPECIFY_TEMPLATE",previousTemplateSource:"",regions:[""],regionsErrorKey:"",retainStacks:!1,specifyTemplateTile:"S3_URL",stackIdsToImport:[""],stackIdsToImportErrorKey:"",stackIdsUrl:"",stackIdsUrlErrorKey:"",stackSetDescription:"",stackSetId:"",stackSetName:"",stackSetNameErrorKey:"",stacksToImportSource:"STACK_IDS",tags:[],templateErrorKey:"",templateType:null,templateUrls:{[R.IMPORT]:"",[R.SAMPLE]:"",[R.TEXT]:"",[R.UPLOAD]:""}},jd=(e,t)=>{const{type:a,payload:r}=t;switch(a){case Wd:return Xd;case Yd:return{...e,capabilities:{...e.capabilities,[r.capability]:r.checked}};case Bd:{const{parameterKey:t,parameterValue:a,usePreviousValue:n}=r,s=Nd()({},e.parameters[t],{..."string"==typeof a&&{parameterValue:a,usePreviousValue:!1},..."boolean"==typeof n&&{usePreviousValue:n}});return{...e,parameters:{...e.parameters,[t]:s}}}case Gd:{const{parameterKey:t,parameterValue:a,usePreviousValue:n}=r,s=Nd()({},e.parameters[t],{...a&&{overrideValue:a,revertValue:!1},..."boolean"==typeof n&&{usePreviousValue:n}});return{...e,parameters:{...e.parameters,[t]:s}}}case zd:{const t={};r.forEach((e=>{let{parameterKey:a}=e;t[a]={overrideValue:"",revertValue:!1}}));const a=Nd()({},e.parameters,t);return{...e,parameters:a}}case $d:{const t={};r.forEach((e=>{let{parameterKey:a}=e;t[a]={revertValue:!0}}));const a=Nd()({},e.parameters,t);return{...e,parameters:a}}case Hd:return{...e,...r};case qd:return{...e,templateUrls:{...e.templateUrls,[r.templateType]:r.templateUrl}};case Vd:return{...e,operationPreferences:{...e.operationPreferences,...r}};default:return e}},Qd=(0,r.createContext)({...Xd,setCapabilityAcknowledgment:()=>{},clearStackSetsWizardState:()=>{},setOperationPreferences:()=>{},setOverrideParameterValue:()=>{},setParameterValue:()=>{},setStackSetsWizardState:()=>{},setStackSetsTemplateUrl:()=>{},resetParameterValues:()=>{},revertParameterValues:()=>{}}),Jd=e=>{let{children:t}=e;const[a,n]=(0,r.useReducer)(jd,Xd),s={...a,clearStackSetsWizardState:()=>n({type:Wd}),setCapabilityAcknowledgment:(e,t)=>n({type:Yd,payload:{capability:e,checked:t}}),setOperationPreferences:e=>n({type:Vd,payload:e}),setOverrideParameterValue:e=>n({type:Gd,payload:e}),setParameterValue:e=>n({type:Bd,payload:e}),setStackSetsWizardState:e=>n({type:Hd,payload:e}),setStackSetsTemplateUrl:(e,t)=>n({type:qd,payload:{templateType:e,templateUrl:t}}),resetParameterValues:e=>n({type:zd,payload:e}),revertParameterValues:e=>n({type:$d,payload:e})};return r.createElement(Qd.Provider,{value:s},t)},eu=e=>{let{action:t,resource:a,redirectOnFailurePath:r,successHandler:n}=e;const i=(0,s.I0)(),l=(0,Q.s0)(),c={resource:a,action:t,xsrfToken:me.xsrfToken,...n&&{onSuccess:n},onError:e=>{r&&l(r),i(He({content:ce(e),type:"ERROR"}))}};return(0,o.useSDKMutation)(c)},tu=()=>{const e=(0,r.useContext)(Qd);if(void 0===e)throw new Error("useStackSetsWizardState must be used within a StackSetsWizardStateProvider");return e},au=(e,t)=>"SERVICE_MANAGED"!==t&&e?{administrationRoleARN:e}:{},ru=(e,t)=>{const a=e&&e.enabled?e:{enabled:!1};return"SERVICE_MANAGED"===t?{autoDeployment:a}:{}},nu=e=>{const t=Object.keys(e||{}).filter((t=>e[t]));return t.length?{capabilities:t}:{}},su=(e,t)=>{switch(e){case"ACCOUNTS":return{accounts:t.accounts};case"ACCOUNTS_FROM_ORGANIZATIONAL_UNITS":return{accounts:t.accountsFromOrganizationalUnit};case"ACCOUNT_S3_URL":return{deploymentTargets:{accountUrl:t.accountsS3URL}};case"ORGANIZATIONAL_UNITS":{const{organizationalUnitIds:e}=t;return{deploymentTargets:{organizationalUnitIds:e.filter((e=>e)),accounts:t.accounts,accountFilterType:t.accountFilterType}}}case"ORGANIZATION":{const{organization:e}=t;return{deploymentTargets:{organizationalUnitIds:e}}}case"IMPORT_STACKS_TO_STACK_SET":{const{stackIdsToImport:e,stackIdsUrl:a}=t;return"STACK_IDS"===t.stacksToImportSource?{stackIds:e}:{stackIdsUrl:a}}case"IMPORT_STACKS_TO_ORGANIZATION":{const{stackIdsToImport:e,stackIdsUrl:a}=t,{organization:r}=t;return"STACK_IDS"===t.stacksToImportSource?{stackIds:e,organizationalUnitIds:r}:{stackIdsUrl:a,organizationalUnitIds:r}}case"IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS":{const{stackIdsToImport:e,stackIdsUrl:a}=t,{organizationalUnitIds:r}=t,n=r.filter((e=>e));return"STACK_IDS"===t.stacksToImportSource?{stackIds:e,organizationalUnitIds:n}:{stackIdsUrl:a,organizationalUnitIds:n}}default:return{}}},iu=(e,t)=>"SERVICE_MANAGED"!==t&&e&&"AWSCloudFormationStackSetExecutionRole"!==e?{executionRoleName:e}:{},lu=e=>{let{failureToleranceCount:t,failureToleranceFormat:a,failureTolerancePercentage:r}=e;return"number"===a?{failureToleranceCount:t}:{failureTolerancePercentage:r}},ou=e=>{let{maxConcurrentCount:t,maxConcurrentFormat:a,maxConcurrentPercentage:r}=e;return"number"===a?{maxConcurrentCount:t}:{maxConcurrentPercentage:r}},cu=(e,t,a)=>"IMPORT_STACKS_TO_STACK_SET"===a||t.regionConcurrencyType===Dd.PARALLEL?{}:{regionOrder:Eu(e)},du=e=>fe(A.REGION_CONCURRENCY)?{regionConcurrencyType:e.regionConcurrencyType}:{},uu=(e,t,a)=>"IMPORT_STACKS_TO_STACK_SET"===a||"IMPORT_STACKS_TO_ORGANIZATION"===a||"IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS"===a?{...du(e),...lu(e),...ou(e)}:{...du(e),...cu(t,e,a),...lu(e),...ou(e)},mu=(e,t)=>{const a=Object.entries(e).reduce(((e,a)=>{let[r,n]=a;return t?n.revertValue||(n.overrideValue?e.push({parameterKey:r,parameterValue:n.overrideValue}):e.push({parameterKey:r,usePreviousValue:!0})):n.overrideValue&&e.push({parameterKey:r,parameterValue:n.overrideValue}),e}),[]);return t||a.length?{parameterOverrides:a}:{}},pu=e=>{const t=Object.entries(e).map((e=>{let[t,{parameterValue:a,usePreviousValue:r}]=e;return r?{parameterKey:t,usePreviousValue:r}:{parameterKey:t,parameterValue:a||""}}));return t.length?{parameters:t}:{}},_u=e=>e?{permissionModel:e}:{},Eu=e=>e.filter((e=>e)),gu=e=>({tags:e.filter((e=>!e.markedForRemoval&&e.value)).map((e=>{let{key:t,value:a}=e;return{key:t,value:a}}))}),hu=(e,t)=>e===R.IMPORT?{stackId:t[e]}:e===R.EXISTING?{usePreviousTemplate:!0}:{templateURL:t[e]},Su=(e,t)=>"SERVICE_MANAGED"===e&&t?{callAs:"DELEGATED_ADMIN"}:{},Tu=(e,t,a,r)=>{const n=r===wd.CREATE_STACK_SET||a===R.EXISTING&&r===wd.UPDATE_STACK_SET&&!Wi(t);return e&&n?{managedExecution:e}:{}},bu=(e,t,a)=>{const{accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,deploymentFormat:l,operationPreferences:o,organization:c,organizationalUnitIds:d,parameters:u,permissionModel:m,regions:p,stackIdsToImport:_,stackIdsUrl:E,stacksToImportSource:g}=e,h={accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,organization:c,organizationalUnitIds:d,stackIdsToImport:_,stackIdsUrl:E,stacksToImportSource:g};return{operationId:se(),operationPreferences:uu(o,p,l),regions:Eu(p),stackSetName:t,...Su(m,a),...su(l,h),...mu(u,!1)}},fu=(e,t,a)=>{const{accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,deploymentFormat:l,operationPreferences:o,organization:c,organizationalUnitIds:d,permissionModel:u,regions:m,stackIdsToImport:p,stackIdsUrl:_,stacksToImportSource:E}=e,g={accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,organization:c,organizationalUnitIds:d,stackIdsToImport:p,stackIdsUrl:_,stacksToImportSource:E};return{operationId:se(),operationPreferences:uu(o,m,l),stackSetName:t,...Su(u,a),...su(l,g)}},ku=()=>{const e=(0,r.useContext)(vd);if(void 0===e)throw new Error("useStackSetsPermissions must be used within a StackSetsPermissionsProvider");return e},Au=()=>{const e=tu(),{mutate:t}=(e=>{const t=(0,Q.s0)(),{permissionModel:a}=tu(),r="SERVICE_MANAGED"===a?"service":"self";return eu({action:o.ApiAction.Create,resource:o.ApiResource.StackInstances,redirectOnFailurePath:`/stacksets/${e}?permissions=${r}`,successHandler:()=>{t(`/stacksets/${e}/operations?permissions=${r}`)}})})(e.stackSetId),{mutate:a}=(e=>{const t=(0,Q.s0)(),{permissionModel:a}=tu(),r="SERVICE_MANAGED"===a?"service":"self";return eu({action:o.ApiAction.ImportStacks,resource:o.ApiResource.StackSets,redirectOnFailurePath:`/stacksets/${e}?permissions=${r}`,successHandler:()=>{t(`/stacksets/${e}/operations?permissions=${r}`)}})})(e.stackSetId),{isDelegatedAdminAccount:n}=ku();return(0,r.useEffect)((()=>{if(e.stackSetId)if(ur(e.deploymentFormat)){const t=fu(e,e.stackSetId,n);a(t)}else{const a=bu(e,e.stackSetId,n);t(a)}}),[e.stackSetId]),eu({action:o.ApiAction.Create,resource:o.ApiResource.StackSets,successHandler:t=>{e.setStackSetsWizardState({stackSetId:t.stackSetId})}})},Iu=e=>{let{stackSetId:t,shouldAutoRefetch:a,enabled:r=!0}=e;const n=(0,Q.TH)(),{permissions:s}=(0,b.parse)(n.search),{isDelegatedAdminAccount:i}=ku(),{isLoading:l}=Rd(),c={stackSetName:t,...i&&"service"===s&&{callAs:"DELEGATED_ADMIN"}},d={resource:o.ApiResource.StackSets,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,requestParams:c,enabled:Boolean(t)&&!l&&r,placeholderData:{},...a&&{shouldAutoRefetch:a}},u=(0,o.useSDKQuery)(d);return es({status:u.status,error:u.error,errorText:{errorContent:g("stackSet.details.fetch_failed")}}),{...u,data:u?.data?.stackSet||{}}},yu=e=>{const{isManagementAccount:t,isDelegatedAdminAccount:a}=ku(),r={resource:o.ApiResource.Roots,action:o.ApiAction.List,requestParams:{},xsrfToken:me.xsrfToken,placeholderData:[],enabled:(t||a)&&("ORGANIZATION"===e||"IMPORT_STACKS_TO_ORGANIZATION"===e),shouldAutoRefetch:!1},n=(0,o.useSDKQuery)(r);es({status:n.status,error:n.error,errorText:{errorContent:ce(n.error)}});const s=n?.data?.roots||[];return{...n,data:s}},Cu=e=>{let{stackSetId:t,makeInitialCall:a=!0}=e;const r=os().get("permissions"),{isDelegatedAdminAccount:n}=ku(),{isLoading:s}=Rd(),i={resource:o.ApiResource.StackSetOperations,action:o.ApiAction.List,requestParams:{stackSetName:t,maxResults:"100",...n&&"service"===r&&{callAs:"DELEGATED_ADMIN"}},filteringFields:["action","operationId","status","statusReason"],xsrfToken:me.xsrfToken,queryOptions:{enabled:Boolean(t)&&!s&&a}},l=(0,o.useSDKInfiniteQuery)(i);return es({status:l?.status,error:l?.error,errorText:{errorContent:g("stackSet.details.fetch_failed")}}),l},Ru=e=>{let{stackSetId:t,operationId:a,stackInstanceAccount:n,stackInstanceRegion:s,transformCb:i,fetchAll:l,enabled:c=!0}=e;const d=os().get("permissions"),{isDelegatedAdminAccount:u}=ku(),{isLoading:m}=Rd(),p={resource:o.ApiResource.StackInstanceResourceDrifts,action:o.ApiAction.List,requestParams:{stackSetName:t,stackInstanceAccount:n,stackInstanceRegion:s,operationId:a,maxResults:100,...u&&"service"===d&&{callAs:"DELEGATED_ADMIN"}},filteringFields:[],xsrfToken:me.xsrfToken,queryOptions:{enabled:c&&Boolean(t)&&Boolean(n)&&Boolean(s)&&!m},transformCb:i},_=(0,o.useSDKInfiniteQuery)(p);es({status:_?.status,error:_?.error,errorText:{errorContent:_?.error?.message}});const{hasNextPage:E,isFetching:g,fetchNextPage:h}=_||{};return(0,r.useEffect)((()=>{l&&E&&!g&&h()}),[E,g]),_},vu=e=>{let{stackSetId:t,stackId:a,templateURL:r,enabled:n=!0,refetchOnMount:s=!1,successHandler:i,errorHandler:l}=e;const c=(0,Q.TH)(),{permissions:d}=(0,b.parse)(c.search),{isDelegatedAdminAccount:u}=ku(),m={resource:o.ApiResource.TemplateSummary,action:o.ApiAction.Get,requestParams:{...t&&{stackSetName:t},...a&&{stackName:a},...r&&{templateURL:r.replace(/\+/g,"%20")},...u&&"service"===d&&t&&{callAs:"DELEGATED_ADMIN"},...(0,o.isTangerineBox)()?{templateSummaryConfig:{treatUnrecognizedResourceTypesAsWarnings:fe(A.SKIP_API_OUTPUT_FOR_GET_TEMPLATE_SUMMARY)}}:{treatUnrecognizedResourceTypesAsWarnings:fe(A.SKIP_API_OUTPUT_FOR_GET_TEMPLATE_SUMMARY)}},xsrfToken:me.xsrfToken,placeholderData:{capabilities:null,capabilitiesReason:null,declaredTransforms:null,description:null,metadata:null,parameters:[],resourceIdentifierSummaries:[],resourceTypes:[],version:null},enabled:n,refetchOnMount:s,shouldAutoRefetch:!1,transformCb:e=>{const t=(e=>e?.declaredTransforms?.length?{...e,capabilities:[C.CAPABILITY_IAM,C.CAPABILITY_NAMED_IAM,C.CAPABILITY_AUTO_EXPAND],capabilitiesReason:g("stack.review_transforms_capabilities_reason")}:e)(e);let a={};try{t.rules&&(a=ye.cv.parse(t.rules))}catch(e){K.error({level:F.ERROR,message:e})}return{...t,constraints:a}},...i&&{onSuccess:i}},p=(0,o.useSDKQuery)(m);return es({status:p.status,error:p.error,errorText:{errorContent:ce(p.error)},...l&&{errorHandler:l}}),p},Lu=e=>{const{id:t}=(0,Q.UO)(),{isManagementAccount:a}=ku(),{data:n,isFetching:s}=Iu({stackSetId:t}),{setStackSetsWizardState:i}=tu();(0,r.useEffect)((()=>{if(!s){const{autoDeployment:t,capabilities:a,permissionModel:r,executionRoleName:s,administrationRoleARN:l,managedExecution:o,description:c,stackSetName:d,tags:u}=n||{},m={autoDeployment:t,capabilities:tl(a),deploymentFormat:"SERVICE_MANAGED"===r?e?"ORGANIZATION":"ORGANIZATIONAL_UNITS":"ACCOUNTS",deploymentOption:"SERVICE_MANAGED"===r?"ORGANIZATIONAL_UNITS":"ACCOUNTS",executionRoleName:s,iamAdminRole:{arn:l},managedExecution:o,permissionModel:r,stackSetDescription:c,stackSetName:d,tags:el(u),templateType:e?R.TEXT:R.EXISTING};i(m)}}),[a,n?.stackSetId,!s])},Pu=e=>{const{accounts:t,accountsS3URL:a,addStacksToStackSetOption:r,deploymentFormat:n,operationPreferences:s,organizationalUnitForAccounts:i,organizationalUnitIds:l,regions:o,stackIdsToImport:c,stackIdsUrl:d,stacksToImportSource:u,setStackSetsWizardState:m}=tu(),{failureToleranceCount:p,failureToleranceFormat:_,failureTolerancePercentage:E,maxConcurrentCount:h,maxConcurrentFormat:S,maxConcurrentPercentage:T}=s;return{validate:b=>{const f=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).join(",").trim();return P.ACCOUNT_NUMBER_REGEX.test(e)?"":g("stackSet.wizard.deployment_validation_account_invalid_characters")}(t),k=0===a.length?g("stacksets_wizard_accounts_s3_url_validation_error"):"",I=(e=>P.OU_ID_REGEX.test(e.trim())?"":g("stackSet.wizard.deployment_validation_organization_unit_invalid_characters"))(i),y=Ar(p,E,_),C=Ar(h,T,S)||(e=>{if("number"===e.maxConcurrentFormat&&"number"===e.failureToleranceFormat&&e.maxConcurrentCount&&e.failureToleranceCount){const t=Number(e.maxConcurrentCount),a=Number(e.failureToleranceCount);if(fe(A.SS_FAILURE_HANDLE)&&t-a>1)return g("stackSet_deploymentOptions_maximum_concurrent_accounts_error_message")}return""})(s),R=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>e));return 0===e.length?g("stacksets_wizard_organizational_unit_ids_validation_error"):e.every((e=>P.OU_ID_REGEX.test(e)))?"":"One or more of the OU IDs are invalid"}(l),v=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>e)).length?"":g("stackSet.wizard.deployment_validation_region_required")}(o),L=(e=>0===e.filter((e=>e)).length?g("empty_stack_id_error"):"")(c),N=(e=>{const t=e.trim();return P.S3_URL_REGEX.test(t)?"":g("invalid_stack_ids_url_error")})(d),O=R===g("stacksets_wizard_organizational_unit_ids_validation_error");if(e)"ORGANIZATIONAL_UNITS"===n?v||y||C||O?m({failureToleranceErrorKey:y,maxConcurrentErrorKey:C,regionsErrorKey:v,ouIdErrorKey:R}):b():y||C?m({failureToleranceErrorKey:y,maxConcurrentErrorKey:C}):b();else switch(n){case"ACCOUNTS":"DEPLOY_NEW_STACKS"===r&&(f||v||y||C?m({accountsErrorKey:f,regionsErrorKey:v,failureToleranceErrorKey:y,maxConcurrentErrorKey:C}):b());break;case"ACCOUNT_S3_URL":"DEPLOY_NEW_STACKS"===r&&(k||v||y||C?m({accountsErrorKey:k,regionsErrorKey:v,failureToleranceErrorKey:y,maxConcurrentErrorKey:C}):b());break;case"ACCOUNTS_FROM_ORGANIZATIONAL_UNITS":"DEPLOY_NEW_STACKS"===r&&(I||v||y||C?m({accountsErrorKey:I,regionsErrorKey:v,failureToleranceErrorKey:y,maxConcurrentErrorKey:C}):b());break;case"IMPORT_STACKS_TO_STACK_SET":case"IMPORT_STACKS_TO_ORGANIZATION":"STACK_IDS"===u?L||y||C?m({stackIdsToImportErrorKey:L,failureToleranceErrorKey:y,maxConcurrentErrorKey:C}):b():N||y||C?m({stackIdsUrlErrorKey:N,failureToleranceErrorKey:y,maxConcurrentErrorKey:C}):b();break;case"IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS":"STACK_IDS"===u?L||y||C||O?m({stackIdsToImportErrorKey:L,failureToleranceErrorKey:y,maxConcurrentErrorKey:C,ouIdErrorKey:R}):b():N||y||C||O?m({stackIdsUrlErrorKey:N,failureToleranceErrorKey:y,maxConcurrentErrorKey:C,ouIdErrorKey:R}):b();break;case"ORGANIZATIONAL_UNITS":v||y||C||O?m({failureToleranceErrorKey:y,maxConcurrentErrorKey:C,regionsErrorKey:v,ouIdErrorKey:R}):b();break;default:v||y||C?m({failureToleranceErrorKey:y,maxConcurrentErrorKey:C,regionsErrorKey:v}):b()}}}},Nu=()=>{const{stackSetName:e,setStackSetsWizardState:t}=tu();return{validate:a=>{const r=(e=>{const t=(e||"").trim();return t?/^[a-z][a-z0-9\-]*$/i.test(t)?t.length>128?g("stackSet.wizard.parameters_validation_stack_set_name_too_long"):"":g("stackSet.wizard.parameters_validation_stack_set_name_invalid_chracters"):g("stackSet.wizard.parameters_validation_stack_set_name_required")})(e);r?t({stackSetNameErrorKey:r}):a()}}},Ou=()=>{const{capabilities:e,setStackSetsWizardState:t}=tu();return{validate:a=>{const r=kr(e);let n=!0;r||(n=!1),n?a():t({allChecked:r})}}},xu=e=>{const{id:t}=(0,Q.UO)(),{data:a}=Iu({stackSetId:t,shouldAutoRefetch:!1}),{iamAdminRole:{arn:r},templateType:n,templateUrls:s,setStackSetsWizardState:i}=tu();return{validate:t=>{const l=s[n]||"",o=((e,t)=>{if(t&&e===R.IMPORT)return/^([a-zA-Z][-a-zA-Z0-9]*|arn:[-a-zA-Z0-9:/._+]*)$/i.test(t)?"":g("invalid_stack_id");if(!t)switch(e){case R.TEXT:return g("stack.template_validation_enter_template");case R.UPLOAD:return g("stack.template_validation_upload_template");case R.IMPORT:return g("stack.template_validation_import_template");case R.SAMPLE:return g("stack.template_validation_select_template");default:return""}return""})(n,l),c=((e,t,a)=>a&&""===e&&"AWSCloudFormationStackSetAdministrationRole"!==t?.split("/")[1]?g("stackSet.wizard.null_iam_role_error"):"")(r,a?.administrationRoleARN,e);o||c?i({templateErrorKey:o,iamAdminRoleErrorKey:c}):t()}}},Du=e=>{let{disabled:t,stackSet:a,stackSetId:n}=e;const{setModalType:i}=ls(),l=(0,Q.s0)(),c=(0,Q.TH)(),{isDelegatedAdminAccount:d}=ku(),{permissions:u="self"}=(0,b.parse)(c.search),{mutate:m}=(e=>{const t=(0,s.I0)(),{refreshData:a}=Iu({stackSetId:e}),r={resource:o.ApiResource.StackSets,action:o.ApiAction.DetectDrift,xsrfToken:me.xsrfToken,onMutate:()=>{t(He({type:"INFO",content:g("drift_attempt_message",e)}))},onSuccess:()=>{t(He({type:"INFO",content:g("stacksList.drift_detection_initiated",e)})),a()},onError:e=>{t(He({type:"ERROR",content:e?.isValidationError&&e?.message||g("stacksList.drift_detection_error")}))}};return(0,o.useSDKMutation)(r)})(n),p={create_stackset_stacks:()=>l(`/stacksets/${n}/create?permissions=${u}`),manage_stackset:()=>l(`/stacksets/${n}/manage?permissions=${u}`),manage_stacks:()=>l(`/stacksets/${n}/manage/stacks?permissions=${u}`),delete_stacks:()=>l(`/stacksets/${n}/delete?permissions=${u}`),delete_stackset:()=>i(xd.DELETE_STACK_SET),detect_stackset_drift:()=>m({stackSetName:n,operationId:se(),...d&&"service"===u&&{callAs:"DELEGATED_ADMIN"}}),edit_automatic_deployment:()=>i(xd.EDIT_AUTOMATIC_DEPLOYMENT)};return r.createElement(lo.Z,{items:qa(a),disabled:t,onItemClick:e=>{let{detail:{id:t}}=e;return p[t]()},className:"e2e-test-stacksets-actions-dropdown"},g("stackSet.stacksets_action_button"))},wu=e=>{let{selectedAccount:t,setSelectedAccount:a}=e;const{setModalType:n}=ls(),{id:i}=t,{mutate:l}=(e=>{let{accountId:t,setSelectedAccount:a}=e;const{setModalType:r}=ls(),{refreshData:n}=Rd(),i=(0,s.I0)(),l={resource:o.ApiResource.DelegatedAdministrators,action:o.ApiAction.Deregister,xsrfToken:me.xsrfToken,onMutate:()=>{r(null)},onSuccess:()=>{i(He({header:g("deregister_delegated_admin_success_header",t),content:g("deregister_delegated_admin_success_description")})),a(null),n()},onError:e=>{i(He({type:"ERROR",header:g("deregister_delegated_admin_failure_header",t),content:ce(e)}))}};return(0,o.useSDKMutation)(l)})({accountId:i,setSelectedAccount:a});return r.createElement(Po.Z,{header:g("deregister_delegated_administrator"),visible:!0,onDismiss:()=>n(null),closeAriaLabel:g("close_label"),footer:r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link",onClick:()=>n(null)},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary",onClick:()=>l({accountId:i})},g("deregister")))},r.createElement(z.Z,{margin:{bottom:"s"}},h("deregister_delegated_admin_modal_header",r.createElement("strong",null,i))),r.createElement(sn.Z,null,g("deregister_delegated_admin_modal_description")))},Zu=[{header:g("drift_overview_column_header"),items:[{id:"drift-detection-status",header:g("drift_detection_status_label"),cell:e=>{let{status:t}=e;return t&&r.createElement(Os,{status:t})||"-"}},{id:"drift-status",header:g("stacksList.stackResources.column_label_drift_information"),cell:e=>{let{stackSetDriftDetectionDetails:t={}}=e;return t?.driftStatus&&r.createElement(Ps,{status:t?.driftStatus})||"-"}},{id:"last-drift-check-time",header:g("stacksList.column_label_drift_timestamp"),cell:e=>{let{stackSetDriftDetectionDetails:t={}}=e;return r.createElement(Ui,{timestamp:t?.lastDriftCheckTimestamp})}}]},{header:g("instances_checked_column_header"),items:[{id:"total-instances",header:g("total_instances_label"),cell:e=>{let{stackSetDriftDetectionDetails:t={}}=e;return"number"==typeof t?.totalStackInstancesCount?t?.totalStackInstancesCount.toString():"-"}},{id:"in-progress-instances",header:g("in_progress_instances_label"),cell:e=>{let{stackSetDriftDetectionDetails:t={}}=e;return"number"==typeof t?.inProgressStackInstancesCount?t?.inProgressStackInstancesCount.toString():"-"}},{id:"failed-stack-instances",header:g("failed_stack_instances_label"),cell:e=>{let{stackSetDriftDetectionDetails:t={}}=e;return"number"==typeof t?.failedStackInstancesCount?t?.failedStackInstancesCount.toString():"-"}}]},{header:g("drift_results_column_header"),items:[{id:"in-sync-instances",header:g("in_sync_instances_label"),cell:e=>{let{stackSetDriftDetectionDetails:t={}}=e;return"number"==typeof t?.inSyncStackInstancesCount?r.createElement(qr.Z,{iconAriaLabel:"in-sync-stack-instances-count"},t?.inSyncStackInstancesCount.toString()):"-"}},{id:"drifted-instances",header:g("drifted_instances_label"),cell:e=>{let{stackSetDriftDetectionDetails:t={}}=e;return"number"==typeof t?.driftedStackInstancesCount?r.createElement(qr.Z,{type:"warning",iconAriaLabel:"drifted-stack-instances-count"},t?.driftedStackInstancesCount.toString()):"-"}}]}],Uu=e=>{let{stackSetId:t,operationId:a}=e;const{setModalType:n}=ls(),{data:s,isLoading:i,isSuccess:l,status:c,refreshData:d}=(e=>{let{stackSetId:t,operationId:a}=e;const r=(0,Q.TH)(),{permissions:n}=(0,b.parse)(r.search),{isDelegatedAdminAccount:s}=ku(),{isLoading:i}=Rd(),l={stackSetName:t,operationId:a,...s&&"service"===n&&{callAs:"DELEGATED_ADMIN"}},c={resource:o.ApiResource.StackSetOperations,action:o.ApiAction.Describe,xsrfToken:me.xsrfToken,requestParams:l,enabled:Boolean(t&&a)&&!i,placeholderdata:{}},d=(0,o.useSDKQuery)(c);return es({status:d.status,error:d.error,errorText:{errorContent:ce(d?.error)}}),d})({stackSetId:t,operationId:a});(0,r.useEffect)((()=>{"error"===c&&n(null)}),[c]);const u=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{"data-testid":"close-modal-button",onClick:()=>n(null)},g("close_label")));return r.createElement(Po.Z,{visible:!0,closeAriaLabel:"Close modal",size:"large",header:g("operation_details_header"),footer:u,onDismiss:()=>n(null)},l?r.createElement(r.Fragment,null,r.createElement(z.Z,{margin:{vertical:"l"},float:"right"},r.createElement(Zr,{loading:i,onRefresh:d})),r.createElement(Or.Z,{columns:3,variant:"text-grid"},Zu.map((e=>r.createElement("div",{key:e.header},r.createElement(Es.Z,{size:"l"},r.createElement(z.Z,{variant:"h3",padding:"n"},e.header),e.items.map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(s.stackSetOperation)}))))))))):r.createElement(vr.Z,{size:"large"}))},Fu=e=>{let{selectedParameters:t,setSelectedParameters:a}=e;const{id:n}=(0,Q.UO)(),{setModalType:s}=ls(),{parameters:i,parameterGroups:l,parametersNotInAParameterGroup:c,resetParameterValues:d,setOverrideParameterValue:u}=tu(),{data:m}=vu({stackSetId:n}),p=Ji(m.parameters,L),{externalValues:_={}}=(0,o.useListExternalValues)({uniqueAWSTypes:p,xsrfToken:me.xsrfToken}),{overrideParameterGroups:E,overrideParametersNotInAParameterGroup:h}=(e=>{let{allParameters:t,parameterGroups:a,parametersNotInAParameterGroup:r,selectedParameters:n}=e;const s=n.map((e=>{let{parameterKey:t}=e;return t})),i=$i()(a.map((e=>e.Parameters))),l=r.filter((e=>s.includes(e)));return{overrideParameterGroups:a.reduce(((e,a)=>{const r=a.Parameters,n=s.filter((e=>i.includes(e))),l=Object.keys(t).filter((e=>n.includes(e))).reduce(((e,a)=>({...e,[a]:t[a]})),{}),o=r.filter((e=>Object.keys(l).includes(e)));return Boolean(o.length)&&e.push({...a,Parameters:o}),e}),[]),overrideParametersNotInAParameterGroup:l}})({allParameters:i,parameterGroups:l,parametersNotInAParameterGroup:c,selectedParameters:t}),S=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{"data-testid":"close-modal-button",variant:"link",onClick:()=>{d(t),s(null)}},g("stackSet.wizard.cancel")),r.createElement(Ot.Z,{className:"e2e-test-button-confirm-override",variant:"primary",onClick:()=>{a([]),s(null)}},g("stackSet.wizard.save_changes")));return r.createElement(Po.Z,{visible:!0,closeAriaLabel:"Close modal",header:g("stackSet.wizard.override_header"),onDismiss:()=>{d(t),s(null)},footer:S},r.createElement("div",{className:"cfn-min-modal-height"},r.createElement(mi,{externalValues:_,isOverride:!0,parameterGroups:E,parameters:i,parametersNotInAParameterGroup:h,setParameterValue:u})))},Mu=()=>{const{setModalType:e}=ls(),[t,a]=(0,r.useState)(""),[n,i]=(0,r.useState)(!1),{mutate:l}=(e=>{const{setModalType:t}=ls(),a=(0,s.I0)(),{refreshData:r}=Rd(),n={resource:o.ApiResource.DelegatedAdministrators,action:o.ApiAction.Register,xsrfToken:me.xsrfToken,onMutate:()=>{t(null)},onSuccess:()=>{a(He({header:g("register_delegated_admin_success_header",e),content:g("register_delegated_admin_success_description")})),r()},onError:t=>{a(He({header:g("register_delegated_admin_failure_header",e),content:ce(t),type:"ERROR"}))}};return(0,o.useSDKMutation)(n)})(t);return r.createElement(Po.Z,{header:g("register_delegated_administrator"),visible:!0,onDismiss:()=>e(null),closeAriaLabel:g("close_label"),footer:r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link",onClick:()=>e(null)},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary",onClick:()=>{/^\b\d{12}\b$/i.test(t)?l({accountId:t}):i(!0)}},g("register_delegated_administrator")))},r.createElement(r.Fragment,null,r.createElement("div",null,g("register_delegated_admin_modal_description")),r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(sn.Z,null,g("register_delegated_admin_modal_info_box"))),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("delegated_administrator_account_id"),constraintText:g("account_id_description"),errorText:n&&g("valid_account_id_required")},r.createElement(Vs.Z,{ariaRequired:!0,value:t,onChange:e=>{a(e.detail.value),i(!1)}}))))},Ku=e=>{let{loading:t,selectedParameters:a,setSelectedParameters:n}=e;const{setModalType:s}=ls(),{revertParameterValues:i}=tu(),l=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{"data-testid":"close-modal-button",variant:"link",onClick:()=>s(null),loading:t},g("stackSet.wizard.cancel")),r.createElement(Ot.Z,{className:"e2e-test-button-confirm-reset",variant:"primary",onClick:()=>{i(a),n([]),s(null)},loading:t},g("stackSet.wizard.set_values")));return r.createElement(Po.Z,{visible:!0,closeAriaLabel:"Close modal",header:g("stackSet.wizard.reset_header"),onDismiss:()=>s(null),footer:l},g("stackSet.wizard.reset_content"))},Wu=e=>{let{operationId:t,stackSetId:a}=e;const{setModalType:n}=ls(),i=os().get("permissions"),{isDelegatedAdminAccount:l}=ku(),{mutate:c}=(e=>{let{operationId:t,stackSetId:a}=e;const{setModalType:r}=ls(),n=(0,s.I0)(),{refreshData:i}=Cu({stackSetId:a}),l={resource:o.ApiResource.StackSetOperations,action:o.ApiAction.Stop,xsrfToken:me.xsrfToken,onMutate:()=>{r(null)},onSuccess:()=>{n(He({content:g("stackSet.details.stop_stackset_operation_succeeded",t)}))},onError:e=>{n(He({type:"ERROR",content:g("stackSet.details.stop_stackset_operation_failed",t,e.message)}))},onSettled:()=>{i()},enabled:Boolean(a&&t)};return(0,o.useSDKMutation)(l)})({operationId:t,stackSetId:a}),d=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",variant:"link",onClick:()=>n(null)},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"stop-stack-set-operation-button",variant:"primary",onClick:()=>c({stackSetName:a,operationId:t,...l&&"service"===i&&{callAs:"DELEGATED_ADMIN"}})},g("stackSet.details.stop_operation"))));return r.createElement(Po.Z,{visible:!0,closeAriaLabel:"Close modal",header:g("stackSet.details.stop_operation_modal_header",t),footer:d,onDismiss:()=>n(null)},g("stackSet.details.stop_operation_are_you_sure"))},zu={[xd.DELETE_STACK_SET]:e=>{let{stackSet:t,stackSetId:a}=e;const{setModalType:n}=ls(),{mutate:i,isLoading:l}=(e=>{const{setModalType:t}=ls(),a=(0,s.I0)(),r=(0,Q.s0)(),n=(0,Q.TH)(),{permissions:i}=(0,b.parse)(n.search),{isDelegatedAdminAccount:l}=ku(),c={stackSetName:e,..."service"===i&&l&&{callAs:"DELEGATED_ADMIN"}},d={action:o.ApiAction.Delete,resource:o.ApiResource.StackSets,xsrfToken:me.xsrfToken,requestParams:c,method:"DELETE",onMutate:()=>{t(null)},onSuccess:()=>{r(i?`/stacksets?permissions=${i}`:"/stacksets")},onError:e=>{a(He({content:`${g("stackSet.stacksets_delete_failed")} - ${e.message}`,type:"ERROR"}))}};return(0,o.useSDKMutation)(d)})(a),c=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link",onClick:()=>n(null)},g("stackSet.delete_stackset_modal_cancel")),r.createElement(Ot.Z,{variant:"primary",className:"e2e-test-button-delete-stackset",onClick:()=>i({}),loading:l},g("delete")));return r.createElement(Po.Z,{visible:!0,closeAriaLabel:"Close modal",header:g("stackSet.delete_stackset"),onDismiss:()=>n(null),footer:c},h("stackSet.delete_stackset_modal_content",r.createElement("strong",null,t.stackSetName)))},[xd.EDIT_AUTOMATIC_DEPLOYMENT]:e=>{let{stackSet:t,stackSetId:a}=e;const{setModalType:n}=ls(),[i,l]=(0,r.useState)(t.autoDeployment),{isDelegatedAdminAccount:c}=ku(),d=(0,Q.TH)(),{permissions:u="self"}=(0,b.parse)(d.search),{mutate:m}=(e=>{const{setModalType:t}=ls(),a=(0,s.I0)(),r={resource:o.ApiResource.StackSets,action:o.ApiAction.Update,xsrfToken:me.xsrfToken,onMutate:()=>{t(null)},onSuccess:()=>{a(He({content:g("edit_auto_deployment_success_message",e)}))},onError:e=>{a(He({content:ce(e),type:"ERROR"}))}};return(0,o.useSDKMutation)(r)})(a),{data:p,isLoading:_,refetch:E}=Iu({stackSetId:a,enabled:!1});(0,r.useEffect)((()=>{E({throwOnError:!0,cancelRefetch:!0})}),[]);const h=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link",onClick:()=>n(null)},g("cancel_label")),r.createElement(Ot.Z,{loading:_,variant:"primary",className:"e2e-test-button-edit-automatic-deployment",onClick:()=>m({operationId:se(),stackSetName:a,usePreviousTemplate:!0,capabilities:p?.capabilities,...ru(i,"SERVICE_MANAGED"),..."service"===u&&c&&{callAs:"DELEGATED_ADMIN"}})},g("save_termination_protection_label")));return r.createElement(Po.Z,{visible:!0,closeAriaLabel:"Close modal",header:g("edit_automatic_deployment"),footer:h,onDismiss:()=>n(null)},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("automatic_deployment"),description:g("automatic_deployment_description")},r.createElement(Ut.Z,{"data-testid":"auto-deployment",onChange:e=>{let{detail:{value:t}}=e;l({enabled:"enabled"===t,...i.retainStacksOnAccountRemoval?{retainStacksOnAccountRemoval:!0}:{retainStacksOnAccountRemoval:!1}})},ariaRequired:!0,value:i?.enabled?"enabled":"disabled",items:[{value:"enabled",label:g("enabled_label")},{value:"disabled",label:g("disabled_label")}]})),i?.enabled&&r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("account_removal_behavior"),description:g("retain_stacks_on_account_removal_description")},r.createElement(Ut.Z,{"data-testid":"retain-stacks",onChange:e=>{let{detail:{value:t}}=e;l({...i,retainStacksOnAccountRemoval:"retain"===t})},ariaRequired:!0,value:i?.retainStacksOnAccountRemoval?"retain":"delete",items:[{value:"delete",label:g("delete_stacks")},{value:"retain",label:g("retain_stacks")}]}))))}},$u=e=>{const{modalType:t}=ls(),a=zu[t];return a?r.createElement(a,e):null},Vu=e=>{switch(e){case Md.SUCCEEDED:case Md.FAILED:case Md.CONDITIONALLY_SUCCEEDED:return!0;default:return!1}},Gu=e=>{let{item:t}=e;const a=(0,Q.s0)(),n=(0,Q.TH)(),s=os();return((e,t)=>{const a=r.createElement(hs,{linkLabel:g("failed_stack_instances_label"),linkMessage:g("stack_instances_with_count",e?.statusDetails?.failedStackInstancesCount||"0"),onClick:t});switch(e.status){case Md.SUCCEEDED:return r.createElement(z.Z,null,g("stackSet_operations_succeeded_popover_message"));case Md.FAILED:return r.createElement(Ss,{messageBody:g("stackSet_operations_failed_popover_message"),link:a,textLabel:g("failure_tolerance_label"),textValue:e?.operationPreferences?.failureToleranceCount||"0"});case Md.CONDITIONALLY_SUCCEEDED:return r.createElement(Ss,{messageBody:g("stackSet_operations_conditionally_succeeded_popover_message"),link:a,textLabel:g("failure_tolerance_label"),textValue:e?.operationPreferences?.failureToleranceCount||"0"});default:return null}})(t,(()=>{((e,t)=>{e?.operationId&&t.set("operationId",e.operationId),t.toString()})(t,s),a(`${n.pathname}?${s.toString()}`,{replace:!0})}))},Bu=200,Hu=e=>[{id:"operationId",header:g("stackSet.details.operation_id"),cell:e=>r.createElement(Ms,{value:e.operationId}),minWidth:Bu},{id:"action",header:g("stackSet.details.operation_type"),cell:e=>r.createElement(Ms,{value:e.action}),minWidth:Bu},{id:"status",header:g("stackSet.details.operation_status"),cell:t=>(e&&(t.status=(e=>e.status===Md.SUCCEEDED&&0!==Number(e?.statusDetails?.failedStackInstancesCount||0)&&Number(e?.statusDetails?.failedStackInstancesCount||0)<Number(e?.operationPreferences?.failureToleranceCount||0)?Md.CONDITIONALLY_SUCCEEDED:e.status)(t)),r.createElement(Os,{header:t.status,status:t.status,popoverContent:r.createElement(Gu,{item:t}),isPopover:Vu(t.status)&&e})),minWidth:Bu},{id:"creationTimestamp",header:g("stackSet.details.operation_created"),cell:e=>r.createElement(Ui,{timestamp:e.creationTimestamp}),minWidth:Bu,...e?{sortingField:"creationTimestamp"}:{}},{id:"completed",header:g("stackSet.details.operation_completed"),cell:e=>r.createElement(Ui,{timestamp:e.endTimestamp}),minWidth:Bu}],qu={isDescending:!0,sortingColumn:{sortingField:"creationTimestamp",sortingComparator:(e,t)=>new Date(e.creationTimestamp).getTime()-new Date(t.creationTimestamp).getTime()}},Yu=["RUNNING","PENDING","QUEUED"],Xu={emptyState:{title:"",subtitle:"",action:""},noMatch:{title:"",subtitle:"",action:""},filter:{ariaLabel:"",placeholder:"",countText:()=>"",filteringClearAriaLabel:"Clear operations filter input"},loadingText:"",paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{}};function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ju.apply(this,arguments)}const Qu=e=>{let{selectedOperation:t,setSelectedOperation:a}=e;const{id:n}=(0,Q.UO)(),s=(0,Q.TH)(),i=(0,Q.s0)(),l=os(),o=l.get("operationId")||"",{setModalType:c}=ls(),[d,u]=(0,r.useState)(!1),m=Yu.includes(t.status),p="DETECT_DRIFT"===t.action,_=(0,r.useRef)(),{cachedData:E,displayData:h,filteringText:S,hasNextPage:T,isFetching:b,fetchNextPage:f,refreshData:k,setFilteringText:I}=Cu({stackSetId:n,makeInitialCall:d});(0,r.useEffect)((()=>{u(!0)}),[]);const y=r.createElement(Rr.Z,{variant:"h2",actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:b,onRefresh:k}),fe(A.SS_DRIFT_DETECTION)&&r.createElement(Ot.Z,{"data-testid":"view-drift-details",disabled:!p,onClick:()=>c(xd.OPERATION_DETAILS)},g("view_drift_details_button_label")),r.createElement(Ot.Z,{"data-testid":"stop-operation",disabled:!m,onClick:()=>c(xd.STOP_STACK_SET_OPERATION)},g("stackSet.details.stop_operation")))},g("stackSet.details.operations_label")),C=E?.summaries?.length?r.createElement(nl,{onClick:()=>I("")}):r.createElement(ci,{header:g("stackSet.details.no_operations_found"),description:""}),R=fe(A.SS_FAILURE_HANDLE);(0,r.useEffect)((()=>{if(!b&&o&&h?.length&&fe(A.SS_RESOURCE_DRIFT_DETECTION)){const e=h?.find((e=>e?.operationId===o))||null;e&&_?.current?.setSelection(e?[e]:[])}}),[o,b,h?.length]);const v=fe(A.SS_RESOURCE_DRIFT_DETECTION);return r.createElement(ln,{errorKey:"stack_set_operations_error"},r.createElement(Li,ju({className:"e2e-test-table-operations",i18nStrings:Xu,trackByKey:"operationId",columnDefinitions:Hu(R),preferences:{wrapLines:!0,pageSize:10},defaultSort:qu,selectionType:"single",hasPaginationToken:T,fetchMore:f,onItemSelect:e=>{a(e[0]),l.set("operationId",e[0]?.operationId),i(`${s.pathname}?${l.toString()}`,{replace:!0})},customEmpty:C,customFilter:r.createElement(pl,{ariaLabel:"Filter operations",className:"e2e-test-operations-table-filter",placeholder:g("stackSet.details.filter_placeholder"),filteringText:S,loading:b,filterHandler:e=>{I(e)}}),header:y,isLoading:b,sortingDisabled:!0,allItems:h},v?{cfnTableRef:_}:{},{resizableColumns:!0})))},Ju=()=>{const{id:e}=(0,Q.UO)(),[t,a]=(0,r.useState)({action:null,creationTimestamp:null,endTimestamp:null,operationId:null,status:null}),{modalType:n}=ls();return r.createElement("div",null,r.createElement(Qu,{selectedOperation:t,setSelectedOperation:a}),n===xd.OPERATION_DETAILS&&r.createElement(Uu,{operationId:t.operationId,stackSetId:e}),n===xd.STOP_STACK_SET_OPERATION&&r.createElement(Wu,{operationId:t.operationId,stackSetId:e}))},em=()=>{const{id:e}=(0,Q.UO)(),{data:t,isFetching:a,refreshData:n,refetch:s}=Iu({stackSetId:e,shouldAutoRefetch:!0,enabled:!1}),{parameters:i}=t||{};return(0,r.useEffect)((()=>{s({throwOnError:!0,cancelRefetch:!0})}),[]),r.createElement(dl,{tableTestId:"stack-set-details-parameters-table",loading:a,onRefresh:n,parameters:i||[]})},tm={[Kd.AWS_ACCOUNT]:"",[Kd.AWS_REGION]:"",[Kd.LAST_OPERATION_ID]:"",[Kd.DETAILED_STATUS]:"",[Kd.DRIFT_STATUS]:""},am=[{key:Kd.AWS_ACCOUNT,operators:["="],propertyLabel:g("stackSet.details.stack_account"),groupValuesLabel:""},{key:Kd.AWS_REGION,operators:["="],propertyLabel:g("stackSet.details.stack_region"),groupValuesLabel:""},{key:Kd.LAST_OPERATION_ID,operators:["="],propertyLabel:g("last_operation_id"),groupValuesLabel:""},{key:Kd.DETAILED_STATUS,operators:["="],propertyLabel:g("detailed_status"),groupValuesLabel:""},{key:Kd.DRIFT_STATUS,operators:["="],propertyLabel:g("stacksList.column_label_drift_information"),groupValuesLabel:""}],rm=[{propertyKey:Kd.AWS_ACCOUNT,value:"",operator:"="},{propertyKey:Kd.AWS_REGION,value:"",operator:"="},{propertyKey:Kd.LAST_OPERATION_ID,value:"",operator:"="},{propertyKey:Kd.DETAILED_STATUS,value:"",operator:"="},{propertyKey:Kd.DRIFT_STATUS,value:"",operator:"="}],nm={[Kd.AWS_ACCOUNT]:"",[Kd.AWS_REGION]:"",[Kd.LAST_OPERATION_ID]:"",[Kd.DETAILED_STATUS]:"",[Kd.DRIFT_STATUS]:""},sm=e=>{if(!e)return[];const t=[...rm];return t.forEach((t=>{t.value=e[t.propertyKey]||""})),t.filter((e=>Boolean(e.value)))},im=[{propertyKey:Kd.DETAILED_STATUS,value:Ud.PENDING},{propertyKey:Kd.DETAILED_STATUS,value:Ud.RUNNING},{propertyKey:Kd.DETAILED_STATUS,value:Ud.SUCCEEDED},{propertyKey:Kd.DETAILED_STATUS,value:Ud.FAILED},{propertyKey:Kd.DETAILED_STATUS,value:Ud.CANCELLED},{propertyKey:Kd.DETAILED_STATUS,value:Ud.INOPERABLE},{propertyKey:Kd.DRIFT_STATUS,value:Ud.IN_SYNC},{propertyKey:Kd.DRIFT_STATUS,value:Ud.DRIFTED},{propertyKey:Kd.DRIFT_STATUS,value:Ud.NOT_CHECKED}],lm={filteringAriaLabel:"Filter stack instances",dismissAriaLabel:"Dismiss",filteringPlaceholder:g("stackSet_stack_instances_table_filter_placeholder"),groupValuesText:g("values"),groupPropertiesText:g("properties"),operatorsText:g("operators"),operationAndText:g("no_concat_and"),operationOrText:"or",operatorLessText:"Less than",operatorLessOrEqualText:"Less than or equal",operatorGreaterText:"Greater than",operatorGreaterOrEqualText:"Greater than or equal",operatorContainsText:"Contains",operatorDoesNotContainText:"Does not contain",operatorEqualsText:"Equals",operatorDoesNotEqualText:"Does not equal",editTokenHeader:g("edit_filter"),propertyText:g("property"),operatorText:g("operator"),valueText:g("values"),cancelActionText:g("cancel_label"),applyActionText:g("apply"),allPropertiesLabel:g("all_properties"),tokenLimitShowMore:g("show_more"),tokenLimitShowFewer:g("show_fewer"),clearFiltersText:g("clear_filter"),removeTokenButtonAriaLabel:()=>"Remove token",enteredTextLabel:e=>g("property_filter_entered_text_label",e)},om=[{id:"account",header:g("stackSet.details.stack_account"),cell:e=>e.account,minWidth:200,enabled:!0},{id:"region",header:g("stackSet.details.stack_region"),cell:e=>r.createElement(Ms,{value:e.region}),minWidth:200,enabled:!0},{id:"stackId",header:g("stacksList.column_label_stack_id"),cell:e=>r.createElement(Ms,{value:e.stackId}),minWidth:200,enabled:!0},{id:"status",header:g("stackSet.details.stack_status"),cell:e=>r.createElement(Os,{status:e.status}),minWidth:200,enabled:!fe(A.SS_FAILURE_HANDLE)},{id:"detailedStatus",header:g("detailed_status"),cell:e=>r.createElement(Os,{status:e?.stackInstanceStatus?.detailedStatus}),minWidth:200,enabled:fe(A.SS_FAILURE_HANDLE)},{id:"lastOperationId",header:g("last_operation_id"),cell:e=>r.createElement(Yr,{text:e.lastOperationId}),minWidth:200,enabled:fe(A.SS_FAILURE_HANDLE)},{id:"statusReason",header:g("stackSet.details.status_reason"),cell:e=>r.createElement(Ms,{value:e.statusReason}),minWidth:200,enabled:!0},{id:"driftStatus",header:g("stacksList.column_label_drift_information"),cell:e=>e.driftStatus&&r.createElement(Ps,{header:e.driftStatus,status:e.driftStatus})||"-",minWidth:200,enabled:fe(A.SS_DRIFT_DETECTION)},{id:"driftTimestamp",header:g("stacksList.stackOverview.label_drift_timestamp"),cell:e=>r.createElement(Ui,{timestamp:e.lastDriftCheckTimestamp}),minWidth:200,enabled:fe(A.SS_DRIFT_DETECTION)}],cm={isDescending:!1,sortingColumn:{sortingField:"account"}},dm={emptyState:{title:g("stackSet.details.no_stacks_found"),subtitle:"",action:""},noMatch:{title:g("no_matches"),subtitle:g("no_results_match"),action:""},filter:{ariaLabel:"",placeholder:"",countText:()=>"",filteringClearAriaLabel:"Clear stacks filter input"},loadingText:"",paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{}},um={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:[{label:null,options:om.filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},mm=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a}=e.tablePreferences.STACK_SET_STACK_INSTANCES;return{wrapLines:t,visibleContent:a,pageSize:100}})),pm=()=>{const{id:e}=(0,Q.UO)(),t=(0,s.I0)(),a=(0,s.v9)(mm),[n,i]=(0,r.useState)(tm),[l,c]=(0,r.useState)(!1),d=(0,r.useRef)(),{displayData:u=[],hasNextPage:m,isFetching:p,fetchNextPage:_,filteringText:E,refreshData:h,setFilteringText:S}=(e=>{let{stackSetId:t,filters:{stackInstanceAccount:a,stackInstanceRegion:r,detailedStatus:n,lastOperationId:s,driftStatus:i},makeInitialCall:l=!0}=e;const c=(0,Q.TH)(),{permissions:d}=(0,b.parse)(c.search),{isDelegatedAdminAccount:u}=ku(),{isLoading:m}=Rd(),p={...n&&{detailedStatus:n},...i&&{driftStatus:i},...s&&{lastOperationId:s}},_=[],E={detailedStatus:"DETAILED_STATUS",lastOperationId:"LAST_OPERATION_ID",driftStatus:"DRIFT_STATUS"};for(const[e,t]of Object.entries(p))_.push({name:E[e],values:t});const h={...(0,o.isTangerineBox)()?{filters:_}:{...p},...a&&{stackInstanceAccount:a},...r&&{stackInstanceRegion:r},stackSetName:t,maxResults:100,...u&&"service"===d&&{callAs:"DELEGATED_ADMIN"}},S={resource:o.ApiResource.StackInstances,action:o.ApiAction.List,requestParams:h,filteringFields:["account","region","stackId","status"],xsrfToken:me.xsrfToken,queryOptions:{enabled:Boolean(t)&&!m&&l}},T=(0,o.useSDKInfiniteQuery)(S);return es({status:T?.status,error:T?.error,errorText:{errorContent:g("stackSet.details.fetch_failed")}}),T})({stackSetId:e,filters:n,makeInitialCall:l});(0,r.useEffect)((()=>{c(!0)}),[]);const T=r.createElement(Rr.Z,{variant:"h2",counter:p?"":m?`(${u.length}+)`:`(${u.length})`,description:g("stack_instances_guide_description"),actions:r.createElement(Zr,{loading:p,onRefresh:h})},g("stackSet.details.stacks_label")),f=JSON.stringify(n)===JSON.stringify(tm)||u.length?r.createElement(ci,{header:g("stackSet.details.no_stacks_found"),description:""}):r.createElement(nl,{onClick:()=>{d.current&&d.current.clearFilters(),i(tm)}}),k=fe(A.SS_FAILURE_HANDLE);return r.createElement(Li,{className:"e2e-test-table-stack-instances",i18nStrings:dm,trackByKey:null,preferences:a,defaultSort:cm,collectionPreferencesProps:um,columnDefinitions:om.filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),isLoading:p,allItems:u,header:T,customEmpty:f,customFilter:k?r.createElement(an,{loading:p,clearFiltersRef:d,filteringProperties:am,getFilteringTokensFromValues:sm,filteringInitialState:nm,onPropertyFilteringChange:e=>{i(e.detail.values)},i18nStrings:lm,filteringOptions:im}):r.createElement(pl,{ariaLabel:"Filter stack instances",className:"e2e-test-stack-instances-table-filter",placeholder:g("stackSet.details.filter_placeholder"),filteringText:E,loading:p,filterHandler:e=>S(e)}),hasPaginationToken:m,stickyHeader:!0,resizableColumns:!0,fetchMore:_,onConfirmPreferences:e=>t((e=>Je({preferenceType:N.StackInstances,preferenceSettings:e}))(e))})},_m=()=>{const{id:e}=(0,Q.UO)(),{setModalType:t}=ls(),{data:a={}}=Iu({stackSetId:e,shouldAutoRefetch:!0});return r.createElement(Cr.Z,{"data-testid":"deployment-configuration-container",disableContentPaddings:!0,header:r.createElement(Rr.Z,{variant:"h2",actions:r.createElement(Ot.Z,{onClick:()=>t(xd.EDIT_AUTOMATIC_DEPLOYMENT)},g("edit_automatic_deployment"))},g("deployment_configuration"))},r.createElement(z.Z,{padding:{horizontal:"l",bottom:"l",top:"m"}},r.createElement(Or.Z,{columns:2,variant:"text-grid"},r.createElement(Es.Z,{size:"l"},r.createElement("div",null,r.createElement(z.Z,null,g("automatic_deployment")),a?.autoDeployment?.enabled?r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("enabled_label")):r.createElement(qr.Z,{iconAriaLabel:"error",type:"error"},g("disabled_label")))),a?.autoDeployment?.enabled&&r.createElement("div",null,r.createElement(Es.Z,{size:"l"},r.createElement("div",null,r.createElement(z.Z,{"data-testid":"retain-stacks-setting"},g("retain_stacks_on_account_removal")),r.createElement("div",null,g(a?.autoDeployment?.retainStacksOnAccountRemoval?"retain_stacks":"delete_stacks"))))))))},Em=e=>{let{active:t}=e;return t?r.createElement(qr.Z,{iconAriaLabel:"active",type:"success"},g("active")):r.createElement(qr.Z,{iconAriaLabel:"inactive",type:"stopped"},g("inactive"))};function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},gm.apply(this,arguments)}const hm=e=>{let{driftDetails:t,stackSetId:a}=e;return r.createElement(r.Fragment,null,r.createElement(Nr,{id:"drift-status",itemKey:g("stacksList.stackResources.column_label_drift_information"),itemValue:t&&r.createElement(Sm,{driftStatus:t.driftStatus,driftedStackInstancesCount:t.driftedStackInstancesCount,totalStackInstancesCount:t.totalStackInstancesCount,stackSetId:a})}),r.createElement(Nr,{id:"last-drift-check-time",itemKey:g("stacksList.column_label_drift_timestamp"),itemValue:t&&r.createElement(Ui,{timestamp:t?.lastDriftCheckTimestamp})}))},Sm=e=>{let{driftStatus:t,driftedStackInstancesCount:a,totalStackInstancesCount:n,stackSetId:s}=e;const i=(0,Q.TH)(),l=(0,Q.s0)(),o=r.createElement("div",null,g("drifted_label",`${a}/${n}`)),c=fe(A.SS_RESOURCE_DRIFT_DETECTION);return t&&r.createElement("span",null,r.createElement(Ps,gm({},c?{header:t,popoverContent:r.createElement(Ss,{messageBody:g("drifted_resources_message"),link:r.createElement(hs,{linkLabel:g("stackSet_info_drift_stack_instances"),linkMessage:g("drifted_stack_instances_with_count",a.toString()),onClick:()=>l(`/stacksets/${s}/stacks/${i.search}`)})})}:{},{status:t,isPopover:"DRIFTED"===t&&c})),"DRIFTED"===t&&o)},Tm=e=>{let{details:t,loading:a,onRefresh:n}=e;const[s,i]=(0,r.useState)(""),l=(t?.organizationalUnitIds??[]).filter(fa(s)),o=r.createElement(Rr.Z,{counter:a?"":`(${t?.organizationalUnitIds?.length})`},"Organizational unit IDs");return r.createElement(Es.Z,{size:"l"},r.createElement(xr,{header:g("stackSet.details.overview_label"),headerActions:r.createElement(Zr,{loading:a,onRefresh:n}),loading:!1,columns:2,id:"overview"},r.createElement(Nr,{id:"status",itemKey:g("stackSet.details.stackset_status_label"),itemValue:t?.status&&r.createElement(Os,{status:t.status})||"-"}),r.createElement(Nr,{id:"id",itemKey:g("stackSet.details.stackset_id_label"),itemValue:t?.stackSetId}),r.createElement(Nr,{id:"description",itemKey:g("stackSet.details.stackset_description_label"),itemValue:t?.description}),r.createElement(Nr,{id:"arn",itemKey:g("stackSet.details.stackset_arn_label"),itemValue:t?.stackSetARN}),r.createElement(Jr,{policy:A.SS_ORGS},r.createElement(Nr,{id:"permission-model",itemKey:g("permission_model_label"),itemValue:t?.permissionModel||"SELF_MANAGED"})),r.createElement(Nr,{id:"admin-arn",itemKey:g("stackSet.details.stackset_admin_arn_label"),itemValue:t?.administrationRoleARN}),r.createElement(Jr,{policy:A.SS_MANAGED_EXECUTION},r.createElement(Nr,{id:"managed-execution",itemKey:g("managed_execution"),itemValue:t?.managedExecution&&r.createElement(Em,{active:t.managedExecution.active})||"-"})),r.createElement(Jr,{policy:A.SS_DRIFT_DETECTION},r.createElement(hm,{driftDetails:t?.stackSetDriftDetectionDetails,stackSetId:t?.stackSetId}))),t?.organizationalUnitIds?.length>0&&r.createElement(Li,{testId:"e2e-test-stackset-ouid-table",isLoading:a,columnDefinitions:[{id:"organizationalUnitIds",header:g("id"),cell:e=>r.createElement("span",null,e)}],allItems:l,trackByKey:"id",preferences:{pageSize:5},defaultSort:null,header:o,customFilter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter organizational unit IDs",filteringPlaceholder:g("stackSet.details.filter_placeholder"),filteringText:s,filteringClearAriaLabel:"Clear organizational unit IDs filter input",disabled:a,onChange:e=>i(e.detail.filteringText)})}))},bm=()=>{const{id:e}=(0,Q.UO)(),{data:t,isFetching:a,isSuccess:n,refreshData:s,refetch:i}=Iu({stackSetId:e,shouldAutoRefetch:!0,enabled:!1});return(0,r.useEffect)((()=>{i({throwOnError:!0,cancelRefetch:!0})}),[]),r.createElement(Es.Z,{size:"l"},r.createElement(Tm,{details:t,loading:a,onRefresh:s}),n&&"SERVICE_MANAGED"===t.permissionModel&&r.createElement(Jr,{policy:A.SS_ORGS},r.createElement(_m,null)),r.createElement(ml,{tags:t?.tags,loading:a}))},fm=e=>{let{loading:t,originalTemplateBody:a,processedTemplateBody:n,stackId:s,onRefresh:i}=e;const[l,o]=(0,r.useState)(!1),c=l?(e=>{try{return JSON.stringify(JSON.parse(e),null,2)}catch(t){return e}})(n||""):a||"",d=n&&a!==n?r.createElement(ed.Z,{checked:l,onChange:()=>o(!l)},g("stacksList.stackTemplate.view_processed_template")):null;return r.createElement(Cr.Z,{"data-testid":"template-viewer",header:r.createElement(Rr.Z,{actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},s&&r.createElement(Ot.Z,{"data-testid":"view-in-designer-button",href:k.constructComposerUrl(s,null,null,null,null),disabled:!a},g("view_in_designer")),r.createElement(Ot.Z,{"data-testid":"copy-to-clipboard-button",loading:t,onClick:()=>W(c)},g("stackSet.details.copy_to_clipboard")),i&&r.createElement(Ot.Z,{"data-testid":"refresh-template-button",ariaLabel:"Refresh template",iconName:"refresh",loading:t,onClick:i}))},g("stack.stack_details_template_label"))},t?r.createElement(vr.Z,null):a?r.createElement("div",null,d,r.createElement(Pr,null,c)):r.createElement(sn.Z,{type:"info"},g("stacksList.stackTemplate.stack_in_review")))},km=()=>{const{id:e}=(0,Q.UO)(),{data:t,isLoading:a,refetch:n}=Iu({stackSetId:e,shouldAutoRefetch:!0,enabled:!1}),{templateBody:s=""}=t||{};return(0,r.useEffect)((()=>{n({throwOnError:!0,cancelRefetch:!0})}),[]),r.createElement(fm,{loading:a,originalTemplateBody:s})},Am=[{label:g("stackSet.details.stackset_info_label"),id:Od.INFO,content:r.createElement(bm,null)},{label:g("stackSet.details.stacks_label"),id:Od.STACKS,content:r.createElement(pm,null)},{label:g("stackSet.details.operations_label"),id:Od.OPERATIONS,content:r.createElement(Ju,null)},{label:g("stackSet.details.parameters_label"),id:Od.PARAMETERS,content:r.createElement(em,null)},{label:g("stackSet.details.template_label"),id:Od.TEMPLATE,content:r.createElement(km,null)}],Im=(ym=()=>{const e=(0,Q.s0)(),t=(0,Q.TH)(),{id:a,selectedTabId:n}=(0,Q.UO)(),s=decodeURIComponent(a).split(":")[0],{data:i,isLoading:l}=Iu({stackSetId:a,shouldAutoRefetch:!0});return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{"data-testid":"stack-sets-details-header",variant:"h1",actions:r.createElement(Du,{stackSet:i,stackSetId:a,disabled:l})},s),disableOverlap:!0},r.createElement(io.Z,{ariaLabel:"Stackset review tabs",tabs:Am,className:"e2e-stackset-review-tabs",activeTabId:n,onChange:r=>e(`/stacksets/${a}/${r.detail.activeTabId}${t.search}`)}),r.createElement($u,{stackSet:i,stackSetId:a}))},Cm=()=>{const{selectedTabId:e=Od.INFO}=(0,Q.UO)();return t=yt.STACK_SET_DETAILS,Ct[t][e];var t},e=>r.createElement("section",{"data-analytics-type":kt.SERVICE_CONSOLE_PAGE,"data-analytics":Cm()},r.createElement(ym,e)));var ym,Cm;const Rm=e=>[{id:"logicalResourceId",header:g("stacksList.stackResources.column_label_logical_id"),cell:e=>e.logicalResourceId,minWidth:200},{id:"physicalResourceId",header:g("stacksList.stackResources.column_label_physical_id"),cell:t=>e?r.createElement(q,{resourceType:t.resourceType,resourceId:t.physicalResourceId}):r.createElement("span",null," ",t.physicalResourceId),minWidth:200},{id:"resourceType",header:g("stacksList.stackResources.column_label_resource_type"),cell:e=>e.resourceType,minWidth:200},{id:"stackResourceDriftStatus",header:g("stacksList.stackResources.column_label_resource_status"),cell:e=>e.stackResourceDriftStatus&&r.createElement(Ps,{status:e.stackResourceDriftStatus})||"-",minWidth:200},{id:"timestamp",header:g("timestamp"),cell:e=>e.timestamp,minWidth:200}],vm=[{label:null,options:[{id:"logicalResourceId",label:g("stacksList.stackResources.column_label_logical_id"),editable:!0},{id:"physicalResourceId",label:g("stacksList.stackResources.column_label_physical_id"),editable:!0},{id:"resourceType",label:g("stacksList.stackResources.column_label_resource_type"),editable:!0},{id:"stackResourceDriftStatus",label:g("drift_status"),editable:!0},{id:"timestamp",label:g("timestamp"),editable:!0}]}],Lm=(g("stacksList.stackResources.no_resources_found"),g("no_matches"),g("no_results_match"),g("next_page"),g("previous_page"),{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:vm}}),Pm=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a}=e.tablePreferences.STACK_SET_STACK_INSTANCE_RESOURCE_DRIFTS;return{wrapLines:t,visibleContent:a,pageSize:100}})),Nm=()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),a=os(),n=a.get("stackInstanceAccount"),i=a.get("stackInstanceRegion"),l=a.get("operationId"),{id:c}=(0,Q.UO)(),d=(0,s.v9)(Pm),[u,m]=(0,r.useState)(null),p=(0,o.getCurrentAccountId)(),_=(0,o.getRegion)(),E=n===p&&i===_,{cachedData:h,displayData:S,hasNextPage:T,isFetching:b,fetchNextPage:f,filteringText:k,refreshData:A,setFilteringText:I}=Ru({stackSetId:c,operationId:l,stackInstanceAccount:n,stackInstanceRegion:i,fetchAll:!0}),y=r.createElement(Rr.Z,{variant:"h2",counter:b?"":T?`(${S.length}+)`:`(${S.length})`,description:g("stack_instances_guide_description"),actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:b,onRefresh:A}),r.createElement(Dt,{analyticsKey:"drift_detail_view_resource",text:g("view_drift_details_button_label"),"data-testid":"cfn-stack-set-view-resource-drift-button",disabled:null==u,onClick:()=>{t(`/stacksets/${c}/drifts/info?${a.toString()}&stackId=${encodeURIComponent(u.stackId)}&logicalResourceId=${encodeURIComponent(u.logicalResourceId)}`)},loading:b}))},g("resource_drift_status")),C=h?.summaries?.length?r.createElement(nl,{onClick:()=>I("")}):r.createElement(ci,{header:g("stackSet.details.no_stack_drift_status_found"),description:""});return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1"},g("breadcrumbs_drifts"))},r.createElement(Li,{className:"stack-set-resource-drift-status-table",trackByKey:null,preferences:d,defaultSort:void 0,collectionPreferencesProps:Lm,columnDefinitions:Rm(E),isLoading:b,allItems:S,header:y,customEmpty:C,selectionType:"single",onItemSelect:e=>{m(e[0])},customFilter:r.createElement(pl,{ariaLabel:"Filter stack instance resource drifts",className:"e2e-test-resource-drift-status-table-filter",placeholder:g("filter_resources"),filteringText:k,loading:b,filterHandler:e=>{I(e)}}),hasPaginationToken:T,stickyHeader:!0,fetchMore:f,onConfirmPreferences:t=>e((e=>Je({preferenceType:N.StackInstanceResourceDrifts,preferenceSettings:e}))(t))}))},Om=()=>{const{data:e}=Cd();return r.createElement(z.Z,{margin:{bottom:"m"}},r.createElement(sn.Z,{type:"info",header:g("delegated_admin_info_box_header")},r.createElement(r.Fragment,null,r.createElement("span",null,g("ENABLED"===e?.status?"delegated_admin_info_box_description":"delegated_admin_trusted_access_validation")),r.createElement(zr,{ariaLabel:"registering a delegated administrator",pathAlias:"delegated-administrators"}))))};function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},xm.apply(this,arguments)}const Dm=[{id:"id",header:g("account_id"),cell:e=>e.id,minWidth:250,sortingField:"id"},{id:"name",header:g("account_name"),cell:e=>e.name,minWidth:250,sortingField:"name"},{id:"email",header:g("account_email"),cell:e=>e.email,minWidth:250,sortingField:"email"},{id:"enabledDate",header:g("delegation_enabled_date"),cell:e=>r.createElement(Ui,{timestamp:e.delegationEnabledDate}),minWidth:250,sortingField:"enabledDate"}],wm=()=>{const[e,t]=(0,r.useState)(null),{modalType:a,setModalType:n}=ls(),{delegatedAdministrators:s,isLoading:i}=Rd(),{items:l,collectionProps:o}=(0,ki.K)(s,{sorting:{defaultState:{sortingColumn:Dm[0]}},selection:{defaultSelectedItems:e?[e]:[],keepSelection:!0,trackBy:"id"}}),c=r.createElement(Rr.Z,{counter:`(${s.length})`,description:r.createElement(r.Fragment,null,r.createElement("span",null,g("delegated_admin_description")),r.createElement(zr,{ariaLabel:"registering a delegated administrator",pathAlias:"delegated-administrators"})),actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"deregister-delegated-admin-button",disabled:!e,ariaLabel:"Deregister",onClick:()=>n(xd.DEREGISTER_DELEGATED_ADMINISTRATOR)},g("deregister")),r.createElement(Ot.Z,{"data-testid":"register-delegated-admin-button",disabled:!(s.length<5),ariaLabel:"Register",onClick:()=>n(xd.REGISTER_DELEGATED_ADMINISTRATOR)},g("register_delegated_administrator")))},g("delegated_administrators"));return r.createElement(r.Fragment,null,r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(Zt.Z,{variant:"container",header:c},r.createElement("div",{style:{margin:"-1.5rem -2rem -2rem"}},r.createElement(yi.Z,xm({"data-testid":"delegated-admin-list-table"},o,{ariaLabels:{selectionGroupLabel:"Items selection",allItemsSelectionLabel:e=>{let{selectedItems:t}=e;return`${t.length} ${1===t.length?"item":"items"} selected`},itemSelectionLabel:(e,t)=>{let{selectedItems:a}=e;const r=a.filter((e=>e.name===t.name)).length;return`${t.name} is ${r?"":"not"} selected`}},empty:r.createElement(ci,{header:g("no_delegated_administrators"),description:g("delegated_admin_empty_description"),actionButton:r.createElement(Ot.Z,{onClick:()=>n(xd.REGISTER_DELEGATED_ADMINISTRATOR)},g("register_delegated_administrator"))}),loading:i,columnDefinitions:Dm,items:l,selectionType:"single",onSelectionChange:e=>{t(e.detail.selectedItems[0]),o.onSelectionChange&&o.onSelectionChange(e)},resizableColumns:!0,variant:"embedded"}))))),a===xd.DEREGISTER_DELEGATED_ADMINISTRATOR&&r.createElement(wu,{selectedAccount:e,setSelectedAccount:t}),a===xd.REGISTER_DELEGATED_ADMINISTRATOR&&r.createElement(Mu,null))},Zm=400,Um=200,Fm={emptyState:{title:g("stackSet.list.no_stacksets"),subtitle:"",action:""},noMatch:{title:"",subtitle:"",action:""},loadingText:g("loading_stack_sets"),paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{}},Mm={isDescending:!0,sortingColumn:{sortingField:"stackSetId"}},Km=(e=>{let t=(e=>fe(A.SS_ORGS)?e:e.filter((e=>"permissionModel"!==e.id)))(e);return t=(e=>fe(A.SS_DRIFT_DETECTION)?e:e.filter((e=>"driftStatus"!==e.id&&"driftTimestamp"!==e.id)))(t),t})([{id:"stackSetName",header:g("stackSet.list.stackset_name_label"),minWidth:Um,maxWidth:Zm,cell:e=>{const t="SERVICE_MANAGED"===e.permissionModel?"?permissions=service":"?permissions=self";return r.createElement(ee,{to:`/stacksets/${e.stackSetId}${t}`},r.createElement(Ms,{value:e.stackSetName}))}},{id:"stackSetId",header:g("stackSet.list.stackset_id_label"),minWidth:Um,maxWidth:Zm,cell:e=>r.createElement(Ms,{value:e.stackSetId})},{id:"permissionModel",header:g("permission_model_label"),minWidth:Um,maxWidth:Zm,cell:e=>r.createElement(Ms,{value:e.permissionModel?e.permissionModel:"SELF_MANAGED"})},{id:"description",header:g("stackSet.list.stackset_description_label"),minWidth:250,maxWidth:Zm,cell:e=>r.createElement(Ms,{value:e.description})},{id:"driftStatus",header:g("stacksList.stackResources.column_label_drift_information"),minWidth:Um,maxWidth:Zm,cell:e=>e.driftStatus&&r.createElement(Ps,{status:e.driftStatus})||"-"},{id:"driftTimestamp",header:g("stacksList.column_label_drift_timestamp"),minWidth:250,maxWidth:Zm,cell:e=>e.lastDriftCheckTimestamp&&r.createElement(Ui,{timestamp:e.lastDriftCheckTimestamp})||"-"},{id:"status",header:g("status"),minWidth:250,maxWidth:Zm,cell:e=>r.createElement(Ms,{value:e.status})}]),Wm=(e=>{let t=[...e[0].options];return t=fe(A.SS_DRIFT_DETECTION)?t:(e=>(e=e.filter((e=>-1===["driftStatus","driftTimestamp"].indexOf(e.id))),[...e]))(t),t=fe(A.SS_ORGS)?t:(e=>(e=e.filter((e=>"permissionModel"!==e.id)),[...e]))(t),[{label:null,options:t}]})([{label:null,options:[{id:"stackSetName",label:g("stackSet.list.stackset_name_label"),editable:!0},{id:"stackSetId",label:g("stackSet.list.stackset_id_label"),editable:!0},{id:"permissionModel",label:g("permission_model_label"),editable:!0},{id:"description",label:g("stackSet.list.stackset_description_label"),editable:!0},{id:"driftStatus",label:g("stacksList.stackResources.column_label_drift_information"),editable:!0},{id:"driftTimestamp",label:g("stacksList.column_label_drift_timestamp"),editable:!0},{id:"status",label:g("status"),editable:!0}]}]),zm=e=>{let{permissions:t,loading:a,hasNextPage:n,stackSetsLength:s,selected:i,refreshData:l}=e;const o=(0,Q.s0)(),{isDelegatedAdminAccount:c}=ku(),d=g(c?"self"===t?"self_managed_stacksets":"service_managed_stacksets":"stackSet.list.stacksets_title");return r.createElement(Rr.Z,{variant:"h2",counter:a?"":n?`(${s}+)`:`(${s})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:a,onRefresh:l}),r.createElement(Du,{stackSet:i,stackSetId:i?.stackSetId,disabled:!i?.stackSetId}),r.createElement(Ot.Z,{className:"e2e-test-create-stacksets-button",variant:"primary",onClick:()=>o("/stacksets/create")},g("stackSet.list.create_stacksets_button")))},r.createElement("span",{className:"e2e-test-stacksets-list-header-title"},d))},$m=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a}=e.tablePreferences.STACK_SETS;return{wrapLines:t,visibleContent:a,pageSize:100}})),Vm=[{value:Fd.active,label:g("stack_status_filter_active")},{value:Fd.deleted,label:g("stack_status_filter_deleted")}],Gm=e=>{let{selectedStackSet:t,setSelectedStackSet:a}=e;const n=(0,Q.TH)(),i=(0,Q.s0)(),l=(0,s.v9)($m),{isDelegatedAdminAccount:c}=ku(),d=(0,s.I0)(),[u,m]=(0,r.useState)(!1),[p,_]=(0,r.useState)(Vm[0].value),{permissions:E="self",filteringText:h=""}=(0,b.parse)(n.search),S={resource:o.ApiResource.StackSets,action:o.ApiAction.List,requestParams:{maxResults:"100",status:p,...c&&"service"===E&&{callAs:"DELEGATED_ADMIN"}},xsrfToken:me.xsrfToken,filteringFields:["stackSetName"],queryOptions:{enabled:u}},{status:T,error:f,cachedData:k,displayData:A,fetchNextPage:I,filteringText:y,hasNextPage:C,isFetching:R,refreshData:v,setFilteringText:L}=(0,o.useSDKInfiniteQuery)(S);es({status:T,error:f,errorText:{errorContent:g("stackSet.list.stacksets_fetch_failed")}}),(0,r.useEffect)((()=>{m(!0)}),[]),(0,r.useEffect)((()=>{L(h)}),[h]);const P=k?.summaries?.length?r.createElement(nl,{onClick:()=>L("")}):r.createElement(ci,{header:g("stackSet.list.no_stacksets"),description:g("no_stacksets_to_display")}),O=(x=Wm,{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:x}});var x;return r.createElement(Li,{i18nStrings:Fm,preferences:l,header:r.createElement(zm,{permissions:E,loading:R,hasNextPage:C,stackSetsLength:A.length,selected:t,refreshData:v}),stickyHeader:!0,allItems:A,selectionType:"single",isLoading:R,defaultSort:Mm,customEmpty:P,resizableColumns:!0,trackByKey:"stackSetId",collectionPreferencesProps:O,onItemSelect:e=>a(e[0]),columnDefinitions:Km,fetchMore:I,hasPaginationToken:C,onConfirmPreferences:e=>{let{visibleContent:t,wrapLines:a}=e;return d((e=>Je({preferenceType:N.StackSets,preferenceSettings:e}))({visibleContent:t,wrapLines:a}))},customFilter:r.createElement($s.Z,{gridDefinition:[{colspan:{default:12,xxs:12,xs:8}},{colspan:{default:12,xxs:6,xs:2}}]},r.createElement(pl,{ariaLabel:"Filter stackset",placeholder:g("stackSet.list.filter_stacksets_by_name"),filteringText:y,loading:R,filterHandler:e=>{const t={...(0,b.parse)(n.search),filteringText:e};L(e),i(`${n.pathname}?${(0,b.stringify)(t)}`,{replace:!0})}}),r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select stack sets status",controlId:"stacksets-status-filter",selectedOption:Vm.find((e=>e.value===p))||null,onChange:e=>{let{detail:t}=e;return _(t.selectedOption.value)},options:Vm,selectedAriaLabel:"Selected"}))})},Bm=(e,t)=>[{label:g("self_managed"),id:"self",content:r.createElement(Gm,{selectedStackSet:e,setSelectedStackSet:t})},{label:g("service_managed"),id:"service",content:r.createElement(Gm,{selectedStackSet:e,setSelectedStackSet:t})}],Hm=()=>{const{mutate:e,isLoading:t}=(()=>{const e=(0,s.I0)(),{refreshData:t}=Cd(),a={resource:o.ApiResource.OrganizationsAccess,action:o.ApiAction.Enable,xsrfToken:me.xsrfToken,onSuccess:()=>{e(He({content:g("enabled_trusted_access_success_message")})),t()},onError:t=>{e(He({type:"ERROR",content:ce(t)||g("trusted_access_failure_message")}))}};return(0,o.useSDKMutation)(a)})();return r.createElement(z.Z,{margin:{bottom:"m"}},r.createElement(sn.Z,null,r.createElement($s.Z,{gridDefinition:[{colspan:{s:9}},{colspan:{s:3}}]},r.createElement("div",null,g("enable_trusted_access_description"),r.createElement(zr,{ariaLabel:"enabling trusted access with AWS Organizations",pathAlias:"stack-set-enable-trusted-access"})),r.createElement(z.Z,{float:"right"},r.createElement(Ot.Z,{loading:t,onClick:()=>e({}),"data-testid":"enable-trusted-access"},g("enable_trusted_access_label"))))))},qm=_r((()=>{const e=(0,Q.TH)(),t=(0,Q.s0)(),{permissions:a="self",filteringText:n=""}=(0,b.parse)(e.search),[s,i]=(0,r.useState)({stackSetId:null}),{isManagementAccount:l,isDelegatedAdminAccount:o}=ku(),{data:c,isLoading:d}=Cd();return r.createElement(r.Fragment,null,o&&r.createElement(r.Fragment,null,r.createElement(Jr,{policy:A.SS_DA},r.createElement(z.Z,{variant:"h1",margin:{bottom:"xs"}},g("stacksets_title"))),r.createElement(Om,null)),l&&!d&&!("ENABLED"===c?.status)&&r.createElement(Hm,null),l&&"ENABLED"===c?.status&&r.createElement(Jr,{policy:A.SS_DA},r.createElement(wm,null)),o?r.createElement(Jr,{policy:A.SS_DA,renderIfFalse:r.createElement(Gm,{setSelectedStackSet:i,selectedStackSet:s})},r.createElement(io.Z,{ariaLabel:"Delegated admin tabs",tabs:Bm(s,i),activeTabId:a,onChange:e=>t(`/stacksets?permissions=${e.detail.activeTabId}&filteringText=${n}`)})):r.createElement(Gm,{setSelectedStackSet:i,selectedStackSet:s}),r.createElement($u,{stackSet:s,stackSetId:s.stackSetId}))}),Tt.STACK_SETS_LIST);var Ym=a(78730);const Xm=()=>{const e=(()=>{const e=(0,s.I0)(),{deploymentFormat:t,setStackSetsWizardState:a}=tu(),r={ACCOUNTS:/^\b\d{12}(?:,\d{12})*\b,?$/,ORGANIZATIONAL_UNITS:/^\b\d{12}(?:,\d{12})*\b,?$/};return n=>{const[,s]=n.name.split(".");return"csv"===s?(e=>new Promise(((t,a)=>{const r=new FileReader;r.onerror=()=>{r.abort(),a(new Error("Unable to parse file"))},r.onload=()=>t(r.result),r.readAsText(e)})))(n).then((n=>{let s=n.trim().replace(/(\r\n|\r|\n)/g,"");if(","===s.slice(-1)&&(s=s.slice(0,-1)),r[t].test(s))"ACCOUNTS"!==t&&"ORGANIZATIONAL_UNITS"!==t||a({accounts:s.split(",")});else{const t=g("stackSet.wizard.deployment_validation_account_invalid_characters");K.error({level:F.ERROR,message:t}),e(He({type:"ERROR",content:t}))}})):Promise.resolve(g("stackSet.wizard.deployment_validation_account_invalid_file_format")).then((t=>{K.error({level:F.ERROR,message:t}),e(He({type:"ERROR",content:t}))}))}})(),{accounts:t,accountsErrorKey:a,setStackSetsWizardState:n}=tu();return r.createElement(r.Fragment,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("stackSet.wizard.account_numbers"),description:g("stackSet.wizard.account_number_description"),constraintText:g("stackSet.wizard.account_number_hint"),errorText:a},r.createElement(si.Z,{ariaRequired:!0,className:"e2e-test-account",onChange:e=>n({accounts:e.detail.value.replace(/\s/g,"").split(","),accountsErrorKey:""}),value:t.join(",").replace(/\s/g,"")})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "}},r.createElement(Jn,{buttonText:g("stackSet.wizard.account_csv"),ariaLabel:"Upload CSV file",acceptTypes:".csv",handleFileChange:t=>e(t)})))},jm=e=>[{value:"ACCOUNTS",label:g("stackSet.wizard.deployment_in_accounts")},{value:"ACCOUNT_S3_URL",label:g("stackSet.wizard.specify_account_numbers_s3_url")},{value:"ACCOUNTS_FROM_ORGANIZATIONAL_UNITS",..."SELF_MANAGED"===e?{label:g("stackSet.wizard.deployment_in_an_organization")}:{label:g("stackSet.wizard.deployment_in_organizations")}}],Qm=()=>{const{accountsErrorKey:e,accountsOption:t,accountsS3URL:a,organizationalUnitForAccounts:n,permissionModel:s,setStackSetsWizardState:i}=tu(),l=fe(A.SS_ACCOUNTS_S3_URL)?jm(s):jm(s).filter((e=>"ACCOUNT_S3_URL"!==e.value));return r.createElement(Cr.Z,{header:r.createElement(Rr.Z,{description:g("stackSet.wizard.specify_accounts_description")},g("stackSet.wizard.specify_accounts_title"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stackSet.wizard.deployment_location"),description:g("stackSet.wizard.deployment_location_description"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,"data-testid":"accounts-tiles",value:t,items:l,onChange:e=>i({accountsOption:e.detail.value,accountsErrorKey:""})})),{ACCOUNTS:r.createElement(Xm,null),ACCOUNTS_FROM_ORGANIZATIONAL_UNITS:r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stackSet.wizard.organization_numbers"),description:g("stackSet.wizard.organization_number_description"),constraintText:g("stackSet.wizard.organization_number_hint"),errorText:e,stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"organizational-unit-for-accounts-input",value:n,onChange:e=>i({organizationalUnitForAccounts:e.detail.value.trim(),accountsErrorKey:""})})),ACCOUNT_S3_URL:r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("s3_url"),constraintText:g("s3_url_hint"),errorText:e,stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"accounts-s3-url-input",value:a,placeholder:g("enter_s3_url"),onChange:e=>i({accountsS3URL:e.detail.value.trim(),accountsErrorKey:""})}))}[t]))},Jm=()=>{const{deploymentOption:e,setStackSetsWizardState:t}=tu();return r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:"",description:"",stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,className:"e2e-test-deployment-options-tiles",value:e,items:[{label:g("deploy_to_organizational_units_label"),description:g("deploy_to_organizational_units_description"),value:"ORGANIZATIONAL_UNITS"},{label:g("deploy_to_accounts_label"),description:g("deploy_to_accounts_description"),value:"ACCOUNTS"}],onChange:e=>t({deploymentOption:e.detail.value,ouIdErrorKey:""})}))};var ep=a(11283);const tp=[{label:g("no_concat_none"),value:Zd.NONE,description:g("alt_filter_type_none_description"),iconSvg:r.createElement("span",null,r.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 32C7.16345 32 0 24.8366 0 16C0 7.16345 7.16345 0 16 0C24.8366 0 32 7.16345 32 16C32 24.8366 24.8366 32 16 32ZM25.7815 22.9531C27.1785 20.9915 28 18.5917 28 16C28 9.37257 22.6274 4 16 4C13.4083 4 11.0086 4.82158 9.04693 6.21849L25.7815 22.9531ZM22.9531 25.7815C20.9915 27.1785 18.5917 28 16 28C9.37257 28 4 22.6274 4 16C4 13.4083 4.82158 11.0086 6.21851 9.04693L22.9531 25.7815Z",fill:Mr.tfR})))},{label:g("alt_filter_type_intersection"),value:Zd.INTERSECTION,description:g("alt_filter_type_intersection_description"),iconSvg:r.createElement("span",null,r.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.14286 2.28571V9.14286H2.28571C1.02335 9.14286 0 10.1662 0 11.4286V29.7143C0 30.9767 1.02335 32 2.28571 32H20.5714C21.8338 32 22.8571 30.9767 22.8571 29.7143V22.8571H29.7143C30.9767 22.8571 32 21.8338 32 20.5714V2.28571C32 1.02335 30.9767 0 29.7143 0H11.4286C10.1662 0 9.14286 1.02335 9.14286 2.28571ZM13.7143 4.57143V9.14286H20.5714C21.8338 9.14286 22.8571 10.1662 22.8571 11.4286V18.2857H27.4286V4.57143H13.7143ZM18.2857 27.4286V22.8571H11.4286C10.1662 22.8571 9.14286 21.8338 9.14286 20.5714V13.7143H4.57143V27.4286H18.2857Z",fill:Mr.tfR})))},{label:g("alt_filter_type_difference"),value:Zd.DIFFERENCE,description:g("alt_filter_type_difference_description"),iconSvg:r.createElement("span",null,r.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.4286 0C10.1662 0 9.14286 1.02335 9.14286 2.28571V9.14286H2.28571C1.02335 9.14286 0 10.1662 0 11.4286V29.7143C0 30.9767 1.02335 32 2.28571 32H20.5714C21.8338 32 22.8571 30.9767 22.8571 29.7143V22.8571H29.7143C30.9767 22.8571 32 21.8338 32 20.5714V2.28571C32 1.02335 30.9767 0 29.7143 0H11.4286ZM22.8571 22.8571V11.4286C22.8571 10.1662 21.8338 9.14286 20.5714 9.14286H9.14286V20.5714C9.14286 21.8338 10.1662 22.8571 11.4286 22.8571H22.8571Z",fill:Mr.tfR})))},{label:g("alt_filter_type_union"),value:Zd.UNION,description:g("alt_filter_type_union_description"),iconSvg:r.createElement("span",null,r.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M11.4286 0C10.1662 0 9.14286 1.02335 9.14286 2.28571V9.14286H2.28571C1.02335 9.14286 0 10.1662 0 11.4286V29.7143C0 30.9767 1.02335 32 2.28571 32H20.5714C21.8338 32 22.8571 30.9767 22.8571 29.7143V22.8571H29.7143C30.9767 22.8571 32 21.8338 32 20.5714V2.28571C32 1.02335 30.9767 0 29.7143 0H11.4286Z",fill:Mr.tfR})))}],ap=()=>{const{accountFilterType:e,setStackSetsWizardState:t}=tu(),a=tp.find((t=>t.value===e));return r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:r.createElement("span",null,g("account_filter_type_header")," ",r.createElement("i",null,"- ",g("tags_optional"))),description:g("account_filter_type_description")},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select account",className:"e2e-test-account-filter-select",selectedOption:a||null,onChange:e=>{let{detail:a}=e;t({accountFilterType:a.selectedOption.value})},options:tp,placeholder:g("account_filter_type_placeholder")}))},rp=e=>{let{organizationalUnitIds:t,setOrganizationalUnitIds:a}=e;return[{label:"AWS OU ID",control:(e,n)=>r.createElement(Vs.Z,{ariaRequired:!0,className:"e2e-test-ou-id-input",value:e,placeholder:"Enter OU",onChange:e=>{const r=t.slice();r.splice(n,1,e.detail.value),a(r)}}),errorText:e=>(e=>{const t=RegExp(/^(r-[0-9a-z]{4,32})|(ou-[0-9a-z]{4,32}-[a-z0-9]{8,32})$/);return e?t.test(e)?null:g("invalid_ou_id_validation_message"):null})(e)}]},np=()=>{const{accountFilterType:e,organizationalUnitIds:t,ouIdErrorKey:a,setStackSetsWizardState:n}=tu(),s=e=>{n({organizationalUnitIds:e,ouIdErrorKey:""})},i=10-t.length;return r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},errorText:a},r.createElement(ep.Z,{empty:g("no_ous_specified"),addButtonText:g("add_ou_label"),removeButtonText:g("remove_item_button_label"),items:t,additionalInfo:g("remaining_additional_ou",i.toString()),definition:rp({organizationalUnitIds:t,setOrganizationalUnitIds:s}),disableAddButton:0===i,onAddButtonClick:()=>s([...t,""]),onRemoveButtonClick:e=>{let{detail:{itemIndex:a}}=e;const r=t.slice();r.splice(a,1),s(r)}})),r.createElement(ap,null),e&&e!==Zd.NONE&&r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "}},r.createElement(Xm,null)))},sp=e=>{let{description:t}=e;return r.createElement(Cr.Z,{"data-testid":"organizational-units-deployment-targets",header:r.createElement(Rr.Z,{variant:"h2",description:t},g("organizational_units"))},r.createElement(np,null))},ip=e=>{let{description:t}=e;const{deploymentOption:a}=tu();return r.createElement(r.Fragment,null,r.createElement(z.Z,{color:"text-body-secondary"},g("stacksets_wizard_changes_description")),r.createElement(z.Z,{margin:{vertical:"l"}},r.createElement(Jm,null)),"ORGANIZATIONAL_UNITS"===a?r.createElement(sp,{description:t}):r.createElement(Qm,null))},lp=()=>{const{addStacksToStackSetOption:e,setStackSetsWizardState:t}=tu();return r.createElement(Cr.Z,{header:r.createElement(Rr.Z,null,g("add_stacks_to_stack_set"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:"",description:"",stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,className:"e2e-test-add-stacks-options-tiles",value:e,items:[{label:g("deploy_new_stacks"),value:"DEPLOY_NEW_STACKS"},{label:g("import_stacks_to_stack_set"),value:"IMPORT_STACKS_TO_STACK_SET"}],onChange:e=>t({addStacksToStackSetOption:e.detail.value})}))))},op=()=>{const{autoDeployment:e,setStackSetsWizardState:t}=tu();return r.createElement(Cr.Z,{className:"e2e-test-auto-deploy-container",header:r.createElement(Rr.Z,null,g("auto_deployment_options"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("automatic_deployment"),description:g("automatic_deployment_description")},r.createElement(Ut.Z,{"data-testid":"auto-deployment",ariaRequired:!0,value:e.enabled?"enabled":"disabled",items:[{value:"enabled",label:g("enabled_label")},{value:"disabled",label:g("disabled_label")}],onChange:a=>{const r={enabled:"enabled"===a.detail.value,...e.retainStacksOnAccountRemoval?{retainStacksOnAccountRemoval:!0}:{retainStacksOnAccountRemoval:!1}};t({autoDeployment:r})}})),e?.enabled&&r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("account_removal_behavior"),description:g("retain_stacks_on_account_removal_description")},r.createElement(Ut.Z,{"data-testid":"retain-stacks",ariaRequired:!0,value:e.retainStacksOnAccountRemoval?"retain":"delete",items:[{value:"delete",label:g("delete_stacks")},{value:"retain",label:g("retain_stacks")}],onChange:a=>{const r={...e,retainStacksOnAccountRemoval:"retain"===a.detail.value};t({autoDeployment:r})}}))))},cp=[{label:g("stackSet.wizard.number"),value:"number"},{label:g("stackSet.wizard.percentage"),value:"percentage"}],dp=e=>{let{displayRetainStacksToggle:t=!1}=e;const{failureToleranceErrorKey:a,maxConcurrentErrorKey:n,operationPreferences:{failureToleranceCount:s,failureToleranceFormat:i,failureTolerancePercentage:l,maxConcurrentCount:o,maxConcurrentFormat:c,maxConcurrentPercentage:d,regionConcurrencyType:u},retainStacks:m,setOperationPreferences:p,setStackSetsWizardState:_}=tu();return r.createElement(Cr.Z,{"data-testid":"deployment-options",header:r.createElement(Rr.Z,null,g("stackSet.wizard.deployment_options"))},r.createElement(Es.Z,{direction:"vertical",size:"s"},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stackSet.wizard.maximum_concurrent_account"),description:g("stackSet.wizard.maximum_concurrent_account_description"),stretch:!0,errorText:n},r.createElement($s.Z,{gridDefinition:[{colspan:2},{colspan:10}]},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select max concurrent","data-testid":"max-concurrent-format-select",options:cp,selectedOption:cp.find((e=>e.value===c)),onChange:e=>{p({maxConcurrentFormat:e.detail.selectedOption.value}),_({maxConcurrentErrorKey:""})}}),r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"max-concurrent-value-input",value:"number"===c?o:d,type:"number",onChange:e=>{const t="number"===c?{maxConcurrentCount:e.detail.value}:{maxConcurrentPercentage:e.detail.value};p(t),_({maxConcurrentErrorKey:""})}}))),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"failure-tolerance-form-field",label:g("stackSet.wizard.failure_tolerance"),description:g("stackSet.wizard.failure_tolerance_description"),stretch:!0,errorText:a},r.createElement($s.Z,{gridDefinition:[{colspan:2},{colspan:10}]},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select failure tolerance","data-testid":"failure-tolerance-format-select",options:cp,selectedOption:cp.find((e=>e.value===i)),onChange:e=>{p({failureToleranceFormat:e.detail.selectedOption.value}),_({failureToleranceErrorKey:""})}}),r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"failure-tolerance-value-input",value:"number"===i?s:l,type:"number",onChange:e=>{const t="number"===i?{failureToleranceCount:e.detail.value}:{failureTolerancePercentage:e.detail.value};p(t),_({failureToleranceErrorKey:""})}}))),t&&r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stackSet.wizard.retain_stacks"),description:g("stackSet.wizard.retain_stacks_desc")},r.createElement(ed.Z,{"data-testid":"retain-stacks-toggle",checked:m,onChange:e=>_({retainStacks:e.detail.checked})},g("stackSet.wizard.retain_stacks"))),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},className:"e2e-test-term-region-concurrency",label:g("region_concurrency"),description:g("region_concurrency_description"),stretch:!0},r.createElement(Ut.Z,{"data-testid":"region-concurrency-radio-group",value:u,items:[{value:Dd.SEQUENTIAL,label:g("region_concurrency_sequential"),description:g("region_concurrency_sequential_description")},{value:Dd.PARALLEL,label:g("region_concurrency_parallel"),description:g("region_concurrency_parallel_description")}],onChange:e=>p({regionConcurrencyType:e.detail.value}),ariaRequired:!0}))))},up=()=>{const{addStacksToStackSetOption:e,organizationalUnitsOption:t,setStackSetsWizardState:a}=tu(),n=g("DEPLOY_NEW_STACKS"===e?"deployment_targets":"associate_organizational_units"),s="DEPLOY_NEW_STACKS"===e?r.createElement(r.Fragment,null,r.createElement("span",null,g("deployment_targets_description")),r.createElement(zr,{ariaLabel:"creating a stack set with service-managed permissions",pathAlias:"create-service-managed-stack-set-deployment-targets"})):r.createElement(r.Fragment,null,r.createElement("span",null,g("associate_organizational_units_description")),r.createElement(zr,{ariaLabel:"service-managed stack import for AWS CloudFormation StackSets",pathAlias:"service-managed-import"}));return r.createElement(Cr.Z,{header:r.createElement(Rr.Z,null,n)},r.createElement(Or.Z,null,r.createElement(Ks.Z,{stretch:!0,label:s},r.createElement(pi.Z,{ariaRequired:!0,className:"e2e-test-deployment-targets-tiles",onChange:e=>a({organizationalUnitsOption:e.detail.value}),value:t,items:[{label:g("DEPLOY_NEW_STACKS"===e?"deploy_to_organization_label":"associate_with_organization_label"),value:"ORGANIZATION"},{label:g("DEPLOY_NEW_STACKS"===e?"deploy to organizational_units_label":"associate_with_organizational_units_label"),value:"ORGANIZATIONAL_UNITS"}]})),"ORGANIZATIONAL_UNITS"===t&&r.createElement(np,null)))},mp=e=>{let{deployedRegions:t=[],index:a,isCreate:n,region:s,selectedRegions:i=[],setRegions:l}=e;const o=Sr(),c=((e,t,a,r)=>e?Sr().filter((e=>r===e.value||!a.includes(e.value))):Sr().filter((e=>t.includes(e.value)&&(r===e.value||!a.includes(e.value)))))(n,t,i,s),d=i.filter((e=>e));return r.createElement(z.Z,{margin:{bottom:"xs"}},r.createElement($s.Z,{gridDefinition:[{colspan:7},{colspan:5}]},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select region",className:"e2e-test-region-select",options:c,selectedOption:c.find((e=>e.value===s)),onChange:e=>{const r=i.slice();r.splice(a,1,e.detail.selectedOption.value);const s=n?o:t;i.length<s.length?l([...r.filter((e=>e)),""]):l(r)}}),r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{ariaLabel:"Up",iconName:"angle-up",className:"e2e-test-region-move-up",disabled:""===s||0===a,onClick:()=>{const e=i.slice(),t=e[a];e[a]=e[a-1],e[a-1]=t,l(e)}}),r.createElement(Ot.Z,{ariaLabel:"Down",iconName:"angle-down",className:"e2e-test-region-move-down",disabled:""===s||a===i.length-1,onClick:()=>{const e=i.slice(),t=e[a];e[a]=e[a+1],e[a+1]=t,l(e)}}),r.createElement(Ot.Z,{ariaLabel:"Remove",className:"e2e-test-region-button-remove",disabled:""===s,onClick:()=>{const e=i.slice();e.splice(a,1),d.length===t.length?l([...e,""]):l(e)}},g("stackSet.wizard.remove")))))},pp=e=>{let{isCreate:t=!1}=e;const{id:a}=(0,Q.UO)(),{data:n}=Iu({stackSetId:a}),{regions:s,regionsErrorKey:i,setStackSetsWizardState:l}=tu(),o=n?.regions?n.regions:[],c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e?Sr():Sr().filter((e=>t.includes(e.value)))}(t,o),d=s.filter((e=>e)),u=e=>{l({regions:e,regionsErrorKey:""})};return r.createElement(Cr.Z,{"data-testid":"specify-regions-container",header:r.createElement(Rr.Z,{description:r.createElement(r.Fragment,null,r.createElement("span",null,g("stackSet.wizard.specify_regions_description")),r.createElement(zr,{ariaLabel:"performing stack set operations involving regions that are disabled by default",pathAlias:"stacksets-opt-in-regions"}))},g("stackSet.wizard.specify_regions"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},errorText:i},s.map(((e,a)=>r.createElement(mp,{key:a,deployedRegions:o,index:a,isCreate:t,region:e,selectedRegions:s,setRegions:u}))),r.createElement(z.Z,{margin:{top:"l"}},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{className:"e2e-test-region-button-add-all",disabled:d.length===c.length,onClick:()=>{const e=c.map((e=>e.value)),t=Array.from(new Set([...d,...e]));u(t)}},g("stackSet.wizard.add_all_regions")),r.createElement(Ot.Z,{className:"e2e-test-region-button-remove-all",disabled:1===s.length,onClick:()=>u([""])},g("stackSet.wizard.remove_all_regions")))))))},_p=e=>{let{stackIdsToImport:t,setStackIdsToImport:a}=e;return[{label:g("stack_id"),control:(e,n)=>r.createElement(Vs.Z,{ariaRequired:!0,className:"e2e-test-import-stack-ids-input",value:e,placeholder:"arn:aws:cloudformation:region:account:stack-name",onChange:e=>{const r=t.slice();r.splice(n,1,e.detail.value),a(r)}}),errorText:e=>(e=>{const t=RegExp(/^(arn:\b(aws|aws-us-gov|aws-cn)\b:[-a-zA-Z0-9:/._+]*)$/);return e&&(t.test(e)?null:g("invalid_stack_id"))||null})(e)}]},Ep=()=>{const{stackIdsToImport:e,stackIdsToImportErrorKey:t,stackIdsUrl:a,stackIdsUrlErrorKey:n,stacksToImportSource:s,setStackSetsWizardState:i}=tu(),l=10-e.length,o=e=>{i({stackIdsToImport:e,stackIdsToImportErrorKey:""})};return r.createElement(Cr.Z,{header:r.createElement(Rr.Z,null,g("stacks_to_import"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack_source"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,className:"e2e-test-import-stack-tiles",value:s,items:[{label:g("stack_id"),value:"STACK_IDS"},{label:g("stack_ids_url"),value:"STACK_IDS_URL"}],onChange:e=>i({stacksToImportSource:e.detail.value,stackIdsUrlErrorKey:"",stackIdsToImportErrorKey:""})})),"STACK_IDS_URL"===s?r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack_ids_url"),constraintText:g("amazon_s3_url"),errorText:n,stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,className:"e2e-test-import-stack-url-input",placeholder:g("stack.template_url_placeholder"),value:a,onChange:e=>i({stackIdsUrl:e.detail.value,stackIdsUrlErrorKey:""})})):r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},errorText:t},r.createElement(ep.Z,{empty:g("no_stack_ids_specified"),addButtonText:g("add_another_stack_id"),removeButtonText:g("remove_item_button_label"),items:e,additionalInfo:g("remaining_stack_ids",l.toString()),definition:_p({stackIdsToImport:e,setStackIdsToImport:o}),disableAddButton:0===l,onAddButtonClick:()=>o([...e,""]),onRemoveButtonClick:t=>{let{detail:{itemIndex:a}}=t;const r=e.slice();r.splice(a,1),o(r)}}))))},gp=()=>{const{id:e}=(0,Q.UO)(),{isFetching:t=!0}=Iu({stackSetId:e}),{accountsOption:a,addStacksToStackSetOption:n,organizationalUnitsOption:s,ouIdErrorKey:i,permissionModel:l,setStackSetsWizardState:o}=tu();(0,r.useEffect)((()=>{o({deploymentFormat:a})}),[a]),(0,r.useEffect)((()=>{"DEPLOY_NEW_STACKS"===n&&o({deploymentFormat:"SERVICE_MANAGED"===l?s:a}),"IMPORT_STACKS_TO_STACK_SET"===n&&o("SERVICE_MANAGED"===l?{deploymentFormat:"ORGANIZATION"===s?"IMPORT_STACKS_TO_ORGANIZATION":"IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS"}:{deploymentFormat:"IMPORT_STACKS_TO_STACK_SET"})}),[n,s,l]);const c=r.createElement(r.Fragment,null,"IMPORT_STACKS_TO_STACK_SET"===n&&r.createElement(Ep,null),r.createElement(up,null)),d="DEPLOY_NEW_STACKS"===n?r.createElement(Qm,null):r.createElement(Ep,null);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(lp,null),t&&r.createElement(vr.Z,null),t||"SERVICE_MANAGED"!==l?d:c,"DEPLOY_NEW_STACKS"===n&&r.createElement(pp,{isCreate:!0}),r.createElement(dp,null),i&&r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(sn.Z,{type:"error",visible:!0},r.createElement("span",null,i)))||null)},hp=[{id:"parameterKey",header:g("stackSet.wizard.column_name"),cell:e=>e.parameterKey,minWidth:200},{id:"stacksetValue",header:g("stackSet.wizard.stackset_value"),cell:e=>e.parameterValue,minWidth:200},{id:"overrideValue",header:g("stackSet.wizard.override_value"),cell:e=>e.overrideValue,minWidth:200}],Sp=e=>{let{buttonDropdownConfig:t}=e;const[a,n]=(0,r.useState)(""),[s,i]=(0,r.useState)([]),{id:l}=(0,Q.UO)(),{modalType:o,setModalType:c}=ls(),{deploymentFormat:d,resetParameterValues:u}=tu(),m=ur(d),{data:{parameters:p=[]}={},isFetching:_}=Iu({stackSetId:l}),{data:E={},isFetching:h}=vu({stackSetId:l,enabled:!m}),{parameters:S,setStackSetsWizardState:T}=tu(),b=Qa(S).filter(fa(a));(0,r.useEffect)((()=>{if(!_&&!h){const e=Qi({detailsParameters:p,templateSummary:E});T({...e})}}),[_,h]);const f={override:()=>c(xd.OVERRIDE_PARAMETER),revert:()=>c(xd.REVERT_TO_STACK_SET_VALUE),reset:()=>{u(s),i([])}},k=r.createElement(Rr.Z,{actions:r.createElement(lo.Z,{className:"e2e-test-button-edit-override",items:t,disabled:0===s.length,onItemClick:e=>f[e.detail.id]()},g("stackSet.wizard.edit_override_value"))},g("stackSet.wizard.parameters"));if(m)return r.createElement(yi.Z,{className:"e2e-test-override-table",header:k,columnDefinitions:hp,trackBy:"parameterKey",loading:_,items:[],empty:r.createElement(ci,{header:g("no_parameters_displayed"),description:g("parameters_description_import")})});const A=a&&!b.length?r.createElement(nl,{onClick:()=>n("")}):r.createElement(ci,{header:g("stacksList.stackParameters.empty_parameters_header"),description:g("stacksList.stackParameters.empty_parameters_description")});return r.createElement(r.Fragment,null,r.createElement(yi.Z,{ariaLabels:{selectionGroupLabel:"Parameter selection",itemSelectionLabel:(e,t)=>`Select ${t.parameterKey}`,allItemsSelectionLabel:()=>"Select all parameters"},className:"e2e-test-override-table",header:k,columnDefinitions:hp,trackBy:"parameterKey",loading:_,empty:A,items:b,filter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter stack parameters",filteringPlaceholder:g("stacksList.stackParameters.search_parameters"),filteringText:a,filteringClearAriaLabel:"Clear stack parameters filter input",onChange:e=>n(e.detail.filteringText)}),resizableColumns:!0,selectedItems:s,onSelectionChange:e=>{i(e.detail.selectedItems)},selectionType:"multi"}),o===xd.REVERT_TO_STACK_SET_VALUE&&r.createElement(Ku,{loading:_,selectedParameters:s,setSelectedParameters:i}),o===xd.OVERRIDE_PARAMETER&&r.createElement(Fu,{selectedParameters:s,setSelectedParameters:i}))},Tp=[{text:g("stackSet.wizard.override_button"),id:"override",disabled:!1},{text:g("stackSet.wizard.reset_override_header"),id:"reset",disabled:!1}],bp=()=>r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Sp,{buttonDropdownConfig:Tp})),fp=e=>{let{capability:t}=e;const a={CAPABILITY_IAM:"cfn-iam-capability-label",CAPABILITY_NAMED_IAM:"cfn-named-iam-capability-label"}[t]||"cfn-unknown-capability-label",n={CAPABILITY_IAM:"stack.review_acknowledge_create_iam_resources",CAPABILITY_NAMED_IAM:"stack.review_acknowledge_create_named_iam_resources"}[t]||"stack.review_acknowledge_unknown_capability";return r.createElement(z.Z,{variant:"strong",className:a},g(n,t))},kp=e=>{let{capabilities:t,hasModules:a,hasTransforms:n}=e;const s={CAPABILITY_IAM:"stack.review_capabilities_reason_iam",CAPABILITY_NAMED_IAM:"stack.review_capabilities_reason_named_iam"},i={CAPABILITY_IAM:"cfn-iam-capability-message",CAPABILITY_NAMED_IAM:"cfn-named-iam-capability-message"};return n||a?n&&!a?r.createElement(z.Z,{margin:{top:"xs"},className:"cfn-transforms-capabilities-message"},g("stack.review_transforms_capabilities_message"),r.createElement(zr,{ariaLabel:"capability warnings",pathAlias:"transform-capabilities-warning"})):a?r.createElement(z.Z,{margin:{top:"xs"},className:"cfn-modules-capabilities-message"},g("modules_capabilities_message"),r.createElement(zr,{ariaLabel:"controlling access with AWS Identity and Access Management",pathAlias:"capabilities"})):null:r.createElement("div",null,t.map((e=>r.createElement(z.Z,{key:e,margin:{top:"xs"},className:i[e]||"cfn-unknown-capability-message"},g(s[e]||"stack.review_capabilities_reason_unknown"),r.createElement(zr,{ariaLabel:"controlling access with AWS Identity and Access Management of these resources",pathAlias:"capabilities"})))))},Ap=()=>{const{id:e}=(0,Q.UO)(),{capabilities:t,templateType:a,templateUrls:n,setCapabilityAcknowledgment:s,setStackSetsWizardState:i}=tu(),{data:l}=vu({...a===R.EXISTING?{stackSetId:e}:{templateURL:n[a]},enabled:a!==R.IMPORT}),{capabilities:o=null,capabilitiesReason:c=null,declaredTransforms:d=null,resourceTypes:u=[]}=l||{};(0,r.useEffect)((()=>{const e=o?.reduce(((e,t)=>({...e,[t]:!1})),{});i({capabilities:e})}),[]);const m=ya(u),p=Boolean(d?.length),_=((e,t,a)=>e||t?["CAPABILITY_IAM","CAPABILITY_NAMED_IAM","CAPABILITY_AUTO_EXPAND"]:a)(m,p,o),E=((e,t)=>e&&!t?g("stack.review_transforms_capabilities_reason"):t)(p,c),h=Boolean(_?.length);return h||p?r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(Or.Z,null,r.createElement(Rr.Z,{variant:"h3"},((e,t)=>g(e&&t?"stack.review_capabilities_transforms_label":t?"stack.review_capabilities_label":"stack.review_transforms_label"))(p,h)),r.createElement(sn.Z,{"data-testid":"capabilities-alert",header:E&&r.createElement(z.Z,{variant:"strong",className:"cfn-capability-reason"},E),visible:!0,dismissible:!1},r.createElement(kp,{capabilities:_,hasModules:m,hasTransforms:p}),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "}},r.createElement(z.Z,{margin:{top:"m"}},_.map(((e,a)=>r.createElement(z.Z,{margin:{top:"xs"},key:e},r.createElement(Ys.Z,{className:`e2e-test-checkbox-${a}`,checked:Boolean(t?.[e]),controlId:`${e}-checkbox-control_${a}`,onChange:t=>s(e,t.detail.checked)},r.createElement(fp,{capability:e})))))))))):null},Ip=()=>{const[e,t]=(0,r.useState)(""),{accounts:a,accountsOption:n,deploymentFormat:s,organizationalUnitForAccounts:i}=tu(),{accountsFromOrganizationalUnit:l=[],isFetching:c}=((e,t)=>{const[a,n]=(0,r.useState)(!1),{setStackSetsWizardState:s}=tu(),i={resource:o.ApiResource.Accounts,action:o.ApiAction.List,requestParams:{parentId:e},xsrfToken:me.xsrfToken,placeholderData:[],queryOptions:{enabled:Boolean(e)&&"ACCOUNTS_FROM_ORGANIZATIONAL_UNITS"===t},filteringFields:[]},l=(0,o.useSDKInfiniteQuery)(i);return es({status:l.status,error:l.error,errorText:{errorContent:l.error?.message}}),(0,r.useEffect)((()=>{l?.hasNextPage?l?.fetchNextPage():n(!0)}),[l?.hasNextPage]),(0,r.useEffect)((()=>{if(a&&!l?.hasNextPage){const e=l?.cachedData?.accounts?.map((e=>e.id))||[];s({accountsFromOrganizationalUnit:e})}}),[a,l?.hasNextPage]),{accountsFromOrganizationalUnit:l?.cachedData?.accounts?.map((e=>e.id))||[],...l}})(i,s),d=("ACCOUNTS_FROM_ORGANIZATIONAL_UNITS"===n?l:a).filter((t=>t.toLowerCase().indexOf(e.toLowerCase())>-1)),u=e&&!d.length?r.createElement(nl,{onClick:()=>t("")}):r.createElement(ci,{header:g("stackSet.wizard.empty_accounts_header"),description:g("stackSet.wizard.empty_accounts_description")});return r.createElement(yi.Z,{className:"e2e-test-review-accounts-table",header:r.createElement(Rr.Z,null,g("stackSet.wizard.accounts")),loading:c,columnDefinitions:[{id:"accounts",header:g("stackSet.wizard.column_account"),cell:e=>e}],trackBy:"",items:d,empty:u,filter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter accounts",filteringText:e,filteringClearAriaLabel:"Clear accounts filter input",onChange:e=>t(e.detail.filteringText)})})},yp=()=>{const{accountsOption:e,accountsS3URL:t}=tu();return r.createElement(z.Z,{className:"e2e-test-review-table-account"},"ACCOUNT_S3_URL"===e?r.createElement(Cr.Z,{"data-testid":"account-s3-url-section",header:r.createElement(Rr.Z,null,g("stackSet.wizard.accounts"))},r.createElement(z.Z,null,g("stackSet.wizard.s3_url")),r.createElement(z.Z,null,t)):r.createElement(Ip,null))},Cp=e=>[{id:"deploymentTargets",header:e,cell:e=>r.createElement("span",null,r.createElement(z.Z,{variant:"span",margin:{right:"xxs"}},r.createElement($.Z,{alt:"folder",name:"folder"})),e)}],Rp=()=>{const{addStacksToStackSetOption:e,autoDeployment:t,deploymentFormat:a,organization:n,organizationalUnitIds:s,accountFilterType:i,accounts:l}=tu(),[o,c]=(0,r.useState)(""),{isFetching:d}=yu(a),u="ORGANIZATION"===a||"IMPORT_STACKS_TO_ORGANIZATION"===a?n:s.filter((e=>e)),m=tp.find((e=>i===e.value)),p=(l??[]).filter(fa(o)),_=r.createElement(Rr.Z,{counter:d&&l?"":`(${l?.length})`},g("stackSet.wizard.account_numbers"));return r.createElement(z.Z,null,r.createElement(Cr.Z,{"data-testid":"review-deployment-configuration-section",header:r.createElement(Rr.Z,null,g("deployment_configuration"))},r.createElement(Or.Z,{columns:2,variant:"text-grid"},r.createElement(Nr,{id:"automatic-deployment",itemKey:g("automatic_deployment"),itemValue:t?.enabled?r.createElement(qr.Z,{iconAriaLabel:"success",type:"success"},g("enabled_label")):r.createElement(qr.Z,{iconAriaLabel:"error",type:"error"},g("disabled_label"))}),t.enabled&&r.createElement(Nr,{id:"retain-stacks-on-account-removal",itemKey:g("retain_stacks_on_account_removal"),itemValue:t.retainStacksOnAccountRemoval?g("retain_stacks"):g("delete_stacks")}),m&&r.createElement(Nr,{id:"account-filter-type",itemKey:g("account_filter_type_header"),itemValue:r.createElement("span",null,m.label," - ",m.description)}))),r.createElement(Es.Z,{size:"l"},r.createElement(yi.Z,{className:"e2e-test-deployment-targets-table",loading:d,columnDefinitions:Cp(g("DEPLOY_NEW_STACKS"===e?"deployment_targets":"associated_organizational_units")),items:u,empty:r.createElement(ci,{header:g("no_deployment_targets"),description:""})}),l?.length>0&&r.createElement(Li,{testId:"e2e-test-account-filter-number-table",isLoading:d,columnDefinitions:[{id:"accountFilterNumbers",header:g("stackSet.wizard.account_numbers"),cell:e=>r.createElement("span",null,e)}],allItems:p,trackByKey:"id",preferences:{pageSize:5},defaultSort:null,header:_,customFilter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter organizational unit IDs",filteringPlaceholder:g("stackSet.details.filter_placeholder"),filteringText:o,filteringClearAriaLabel:"Clear organizational unit IDs filter input",disabled:d,onChange:e=>c(e.detail.filteringText)})})))},vp=e=>{let{displayReviewRetainStacks:t=!1}=e;const{operationPreferences:{failureToleranceCount:a,failureToleranceFormat:n,failureTolerancePercentage:s,maxConcurrentPercentage:i,maxConcurrentCount:l,maxConcurrentFormat:o,regionConcurrencyType:c},retainStacks:d}=tu(),u="number"===o?l:i,m="number"===n?a:s;return r.createElement(xr,{id:"deployment-options",columns:2,header:r.createElement(Rr.Z,null,g("stackSet.wizard.deployment_options"))},r.createElement(Nr,{id:"maximum-concurrent-account",itemKey:g("stackSet.wizard.maximum_concurrent_account_review"),itemValue:u}),r.createElement(Nr,{id:"failure-tolerance",itemKey:g("stackSet.wizard.failure_tolerance_review"),itemValue:m}),r.createElement(Jr,{policy:A.REGION_CONCURRENCY},r.createElement(Nr,{id:"region-concurrency-type",itemKey:g("region_concurrency"),itemValue:c})),t&&r.createElement(Nr,{id:"retain-stacks",itemKey:g("stackSet.wizard.retain_stacks"),itemValue:g(d?"yes_label":"no_label")}))},Lp=()=>{const[e,t]=(0,r.useState)(""),{regions:a}=tu(),n=a.filter((t=>t&&t.toLowerCase().indexOf(e.toLowerCase())>-1)),s=e&&!n.length?r.createElement(nl,{onClick:()=>t("")}):r.createElement(ci,{header:g("stackSet.wizard.empty_regions_header"),description:g("stackSet.wizard.empty_regions_description")});return r.createElement(yi.Z,{className:"e2e-test-review-regions-table",header:r.createElement(Rr.Z,null,g("stackSet.wizard.regions")),columnDefinitions:[{id:"regions",header:g("stackSet.wizard.column_region"),cell:e=>e}],trackBy:"",items:n,empty:s,filter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter regions",filteringText:e,filteringClearAriaLabel:"Clear regions filter input",onChange:e=>t(e.detail.filteringText)})})},Pp=()=>{const[e,t]=(0,r.useState)(""),{stackIdsToImport:a}=tu(),n=a.filter((t=>t.toLowerCase().indexOf(e.toLowerCase())>-1)),s=e&&!n.length?r.createElement(nl,{onClick:()=>t("")}):r.createElement(ci,{header:g("stacks_to_import_empty_header"),description:g("stacks_to_import_empty_description")});return r.createElement(yi.Z,{className:"e2e-test-review-stack-ids",header:r.createElement(Rr.Z,null,g("stacks_to_import")),columnDefinitions:[{id:"stackIds",header:g("stack_ids"),cell:e=>e}],trackBy:"",items:n,empty:s,filter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter stacks",filteringText:e,filteringPlaceholder:g("stackSet.list.filter_stacksets_by_name"),filteringClearAriaLabel:"Clear stacks filter input",onChange:e=>t(e.detail.filteringText)})})},Np=()=>{const{stackIdsUrl:e,stacksToImportSource:t}=tu();return"STACK_IDS"===t?r.createElement(Pp,null):r.createElement(Cr.Z,{className:"e2e-test-review-stack-url",header:r.createElement(Rr.Z,null,g("stacks_to_import"))},r.createElement(z.Z,null,r.createElement(z.Z,null,g("stack_ids_url")),r.createElement(z.Z,null,e)))},Op=()=>{const{managedExecution:e}=tu();return r.createElement(Cr.Z,{"data-testid":"review-execution-configuration",header:r.createElement(Rr.Z,null,g("execution_configuration"))},r.createElement(Nr,{id:"managed-execution",itemKey:g("managed_execution"),itemValue:r.createElement(Em,{active:e.active})}))},xp=[{id:"parameterKey",header:g("stackSet.wizard.column_name"),cell:e=>e.parameterKey,minWidth:200},{id:"stacksetValue",header:g("stackSet.wizard.stackset_value"),cell:e=>e.parameterValue,minWidth:200},{id:"overrideValue",header:g("stackSet.wizard.override_value"),cell:e=>e.overrideValue,minWidth:200}],Dp=()=>{const[e,t]=(0,r.useState)(""),{parameters:a}=tu(),n=Qa(a).filter(fa(e)),s=e&&!n.length?r.createElement(nl,{onClick:()=>t("")}):r.createElement(ci,{header:g("stacksList.stackParameters.empty_parameters_header"),description:g("stacksList.stackParameters.empty_parameters_description")});return r.createElement(yi.Z,{"data-testid":"review-parameter-overrides-table",header:r.createElement(Rr.Z,null,g("stackSet.wizard.parameter_override")),columnDefinitions:xp,trackBy:"parameterKey",empty:s,items:n,filter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter parameters",filteringPlaceholder:g("stacksList.stackParameters.search_parameters"),filteringText:e,filteringClearAriaLabel:"Clear parameters filter input",onChange:e=>t(e.detail.filteringText)}),resizableColumns:!0})},wp=()=>{const{permissionModel:e,iamAdminRole:t,executionRoleName:a}=tu();return r.createElement(Cr.Z,{"data-testid":"review-permissions",header:r.createElement(Rr.Z,null,g("stack.review_permissions_header"))},"SERVICE_MANAGED"===e?r.createElement(Nr,{id:"permission-model",itemKey:g("permission_management"),itemValue:e}):r.createElement(Or.Z,null,r.createElement(Nr,{id:"iam-admin-role-arn",itemKey:g("stackSet.wizard.iam_admin_role_review_label"),itemValue:t.arn}),r.createElement(Nr,{id:"execution-role-name",itemKey:g("stackSet.wizard.iam_execution_role_label"),itemValue:a})))},Zp=()=>{const{stackSetDescription:e,templateUrls:t,templateType:a}=tu();return r.createElement(Cr.Z,{"data-testid":"review-stack-set-overview",header:r.createElement(Rr.Z,null,g("stackSet.wizard.stacksets_overview"))},r.createElement(Or.Z,null,t[a]&&r.createElement(Nr,{id:"stack-set-template-url",itemKey:g("stackSet.wizard.template_url"),itemValue:t[a]}),r.createElement(Nr,{id:"stack-set-description",itemKey:g("stackSet.wizard.stacksets_description"),itemValue:e})))},Up=e=>{let{setActiveStepIndex:t}=e;const{deploymentFormat:a}=tu(),n=!ur(a);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"deployment-step-review",headerText:g("stackSet.wizard.deployment_step_description"),stepIndex:0,setActiveStepIndex:t},{ORGANIZATION:r.createElement(Rp,null),ORGANIZATIONAL_UNITS:r.createElement(Rp,null),ACCOUNTS:r.createElement(yp,null),ACCOUNTS_FROM_ORGANIZATIONAL_UNITS:r.createElement(yp,null),ACCOUNT_S3_URL:r.createElement(yp,null),IMPORT_STACKS_TO_STACK_SET:r.createElement(Np,null),IMPORT_STACKS_TO_ORGANIZATION:r.createElement(r.Fragment,null,r.createElement(Np,null),r.createElement(Rp,null)),IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS:r.createElement(r.Fragment,null,r.createElement(Np,null),r.createElement(Rp,null))}[a],n&&r.createElement(Lp,null),r.createElement(vp,null)),r.createElement(Ei,{headerId:"override-step-review",headerText:g("stackSet.wizard.overrides_step_description"),stepIndex:1,setActiveStepIndex:t},r.createElement(Dp,null)))};var Fp=a(56552);const Mp=()=>{const{accountsOption:e,addStacksToStackSetOption:t,organizationalUnitsOption:a,ouIdErrorKey:n,permissionModel:s,setStackSetsWizardState:i}=tu();(0,r.useEffect)((()=>{i({deploymentFormat:e})}),[e]),(0,r.useEffect)((()=>{"DEPLOY_NEW_STACKS"===t&&i({deploymentFormat:"SERVICE_MANAGED"===s?a:e}),"IMPORT_STACKS_TO_STACK_SET"===t&&i("SERVICE_MANAGED"===s?{deploymentFormat:"ORGANIZATION"===a?"IMPORT_STACKS_TO_ORGANIZATION":"IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS"}:{deploymentFormat:"IMPORT_STACKS_TO_STACK_SET"})}),[t,a,s]);const l=r.createElement(r.Fragment,null,"IMPORT_STACKS_TO_STACK_SET"===t&&r.createElement(Ep,null),r.createElement(up,null)),o="DEPLOY_NEW_STACKS"===t?r.createElement(Qm,null):r.createElement(Ep,null);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(lp,null),"SERVICE_MANAGED"===s?l:o,"SERVICE_MANAGED"===s?r.createElement(op,null):null,"DEPLOY_NEW_STACKS"===t&&r.createElement(pp,{isCreate:!0}),r.createElement(dp,null),n&&r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(sn.Z,{type:"error",visible:!0},r.createElement("span",null,n)))||null)},Kp=()=>{const{stackSetDescription:e,setStackSetsWizardState:t}=tu(),a=r.createElement(Rr.Z,{"data-testid":"stack-set-description-header",description:g("stackSet.wizard.description_field_description")},g("stackSet.details.stackset_description_label"));return r.createElement(Cr.Z,{header:a},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stackSet.details.stackset_description_label"),stretch:!0},r.createElement(si.Z,{ariaRequired:!0,"data-testid":"stack-set-description-textarea",value:e,onChange:e=>t({stackSetDescription:e.detail.value}),placeholder:g("stackSet.details.stackset_description_label")})))},Wp=e=>{let{disabled:t=!1}=e;const{stackSetName:a,stackSetNameErrorKey:n,setStackSetsWizardState:s}=tu(),i=r.createElement(Rr.Z,{"data-testid":"stack-set-name-header",variant:"h2"},g("stackSet.wizard.stack_set_name_label"));return r.createElement(Cr.Z,{header:i},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stackSet.wizard.stack_set_name_label"),constraintText:g("stack.parameters_stack_name_hint"),errorText:n,stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"stack-set-name-input",controlId:"stackSetName",value:a,onChange:e=>s({stackSetName:e.detail.value,stackSetNameErrorKey:""}),placeholder:g("stackSet.wizard.stack_set_name_label"),disabled:t})))},zp=e=>{let{setActiveStepIndex:t}=e;const{parameters:a,parameterGroups:n,parametersNotInAParameterGroup:s,previousTemplateSource:i,templateType:l,templateUrls:c,setParameterValue:d,setStackSetsWizardState:u}=tu(),{data:m={},isFetching:p}=vu({templateURL:c[l],errorHandler:()=>{t(0)},enabled:l!==R.IMPORT});(0,r.useEffect)((()=>{const e=i!==c[l];if(!p&&e){const e=Qi({detailsParameters:[],templateSummary:m||{}}),t=tl(m?.capabilities||[]);u({...e,capabilities:t,description:m.description||"",previousTemplateSource:c[l]})}}),[p]);const _=Ji(m?.parameters,L),{externalValues:E={}}=(0,o.useListExternalValues)({uniqueAWSTypes:_,xsrfToken:me.xsrfToken});if(p)return r.createElement(vr.Z,null);const h=Boolean(Object.keys(a).length);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Wp,null),r.createElement(Kp,null),r.createElement(Cr.Z,{header:r.createElement(Rr.Z,{description:g("stack.parameters_description")},g("stack.parameters_header"))},l===R.IMPORT?r.createElement(ci,{header:g("no_parameters_displayed"),description:g("parameters_description_import")}):h?r.createElement(mi,{externalValues:E,parameterGroups:n,parameters:a,parametersNotInAParameterGroup:s,setParameterValue:d}):r.createElement(ci,{header:g("stacksList.stackParameters.empty_parameters_header"),description:g("stacksList.stackParameters.empty_parameters_description")})))},$p=e=>{let{isUpdate:t=!1}=e;const{managedExecution:a,parameters:n,templateType:s,setStackSetsWizardState:i}=tu(),l=!(!t||s===R.EXISTING&&t&&!Wi(n)),o=g(l?"managed_execution_options_disabled_description":"managed_execution_description");return r.createElement(Cr.Z,{className:"e2e-test-term-managed-execution",header:r.createElement(Rr.Z,null,g("execution_configuration"))},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("managed_execution"),description:o},r.createElement(Ut.Z,{onChange:e=>i({managedExecution:{active:"active"===e.detail.value}}),ariaRequired:!0,value:a.active?"active":"inactive",items:[{value:"inactive",label:g("inactive"),description:g("managed_execution_inactive_description"),disabled:l},{value:"active",label:g("active"),description:g("managed_execution_active_description"),disabled:l}]})))},Vp=()=>{const{tags:e,setStackSetsWizardState:t}=tu();return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(fi,{tags:e,loading:!1,setTags:e=>t({tags:e})}),r.createElement($p,null))},Gp=e=>{let{setActiveStepIndex:t}=e;const{allChecked:a,deploymentFormat:n,parameters:s,tags:i}=tu(),l=Xa(s),o=ja(i),c=!ur(n);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"template-step-review",headerText:g("stackSet.wizard.template_step_description"),stepIndex:0,setActiveStepIndex:t},r.createElement(Zp,null),r.createElement(wp,null)),r.createElement(Ei,{headerId:"details-step-review",headerText:g("stackSet.wizard.details_step_description"),stepIndex:1,setActiveStepIndex:t},r.createElement(dl,{columnDefinitions:[{id:"parameterKey",header:g("stacksList.stackParameters.column_label_key"),cell:e=>e?.parameterKey||"-",minWidth:200,sortingField:"parameterKey"},{id:"parameterValue",header:g("stacksList.stackParameters.column_label_value"),cell:e=>e?.parameterValue||"-",minWidth:200,sortingField:"parameterValue"}],parameters:l,tableTestId:"review-parameters-table",visibleContentOptionsGroups:[{label:null,options:[{id:"parameterKey",label:g("stacksList.stackParameters.column_label_key"),editable:!0},{id:"parameterValue",label:g("stacksList.stackParameters.column_label_value"),editable:!0}]}]})),r.createElement(Ei,{headerId:"options-step-review",headerText:g("stackSet.wizard.options_step_description"),stepIndex:2,setActiveStepIndex:t},r.createElement(ml,{tableTestId:"review-tags-table",tags:o}),r.createElement(Op,null)),r.createElement(Ei,{headerId:"deployment-step-review",headerText:g("stackSet.wizard.deployment_step_description"),stepIndex:3,setActiveStepIndex:t},{ORGANIZATION:r.createElement(Rp,null),ORGANIZATIONAL_UNITS:r.createElement(Rp,null),ACCOUNTS:r.createElement(yp,null),ACCOUNTS_FROM_ORGANIZATIONAL_UNITS:r.createElement(yp,null),ACCOUNT_S3_URL:r.createElement(yp,null),IMPORT_STACKS_TO_STACK_SET:r.createElement(Np,null),IMPORT_STACKS_TO_ORGANIZATION:r.createElement(r.Fragment,null,r.createElement(Np,null),r.createElement(Rp,null)),IMPORT_STACKS_TO_ORGANIZATIONAL_UNITS:r.createElement(r.Fragment,null,r.createElement(Np,null),r.createElement(Rp,null))}[n],c&&r.createElement(Lp,null),r.createElement(vp,null)),r.createElement(Ap,null),!a&&r.createElement(sn.Z,{"data-testid":"checkbox-validation-alert",type:"error"},g("review_step_checkbox_validation_error")))},Bp=()=>{const{executionRoleName:e,iamAdminRole:t,iamAdminRoleErrorKey:a,setStackSetsWizardState:n}=tu();return r.createElement(Hc.Z,null,r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"iam-role-form-field",label:g("stackSet.wizard.iam_admin_role_label"),description:g("stack.options_permissions_field_desc"),stretch:!0,errorText:a},r.createElement(Hs,{iamRole:t,setIamRole:e=>n({iamAdminRole:e,iamAdminRoleErrorKey:""})})),r.createElement("div",{key:"iam-admin-role-alert"},t?.arn?.trim()&&r.createElement(sn.Z,{"data-testid":"iam-admin-role-alert",type:"warning"},g("stackSet.wizard.permission_alert"))),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"execution-role-name-form-field",label:g("stackSet.wizard.iam_execution_role_label"),constraintText:g("stackSet.wizard.iam_execution_role_hint")},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"execution-role-name-input",value:e,onChange:e=>n({executionRoleName:e.detail.value}),placeholder:"AWSCloudFormationStackSetExecutionRole"}))))},Hp=()=>{const{isManagementAccount:e,isDelegatedAdminAccount:t}=ku(),{isFetching:a,isTrustedAccessEnabled:n}=Cd();return a?null:t?r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(sn.Z,{"data-testid":"delegated-admin-permissions-alert",type:"info",visible:!0},g("delegated_admin_permissions_info_box"))):e&&!n?r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(sn.Z,{header:g("enable_trusted_access_alert_label"),visible:!0},g("enable_trusted_access_alert_description"),r.createElement(zr,{ariaLabel:"enabling trusted access with AWS Organizations",pathAlias:"stack-set-enable-trusted-access"}))):null},qp=[{label:g("service_managed_permissions"),description:g("service_managed_permissions_description"),value:"SERVICE_MANAGED"},{label:g("self_service_permissions"),description:g("self_service_permissions_description"),value:"SELF_MANAGED"}],Yp=e=>{let{disableTileSelection:t=!1}=e;const{permissionModel:a,setStackSetsWizardState:n}=tu(),s=r.createElement(Rr.Z,{description:r.createElement(r.Fragment,null,r.createElement("span",null,g("stackSet.wizard.permission_description")),r.createElement(zr,{ariaLabel:"AWS CloudFormation StackSets",pathAlias:"stack-set-permissions-model"}))},g("stack.options_permission_header")),i=qp.map((e=>({...e,disabled:t&&e.value!==a})));return r.createElement(Cr.Z,{header:s},r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(pi.Z,{ariaRequired:!0,className:"e2e-test-permissions-selector-tiles",value:a||"SELF_MANAGED",items:i,onChange:e=>{n({permissionModel:e.detail.value})}})),"SERVICE_MANAGED"===a?r.createElement(Hp,null):r.createElement(Bp,null))},Xp=e=>{let{disablePermissionModelTiles:t=!1}=e;const{isDelegatedAdminAccount:a,isManagementAccount:n}=ku();return r.createElement(r.Fragment,null,n||a?r.createElement(Yp,{disableTileSelection:t}):r.createElement(Cr.Z,{header:r.createElement(Rr.Z,null,g("stack.options_permission_header"))},r.createElement(Bp,null)))},jp="cloudformation-stackset-sample-templates",Qp=[{label:g("stackSet.wizard.sample_template_cloudtrail_enable_name"),description:g("stackSet.wizard.sample_template_cloudtrail_enable_description"),value:Le("EnableAWSCloudtrail.yml",jp)},{label:g("stackSet.wizard.sample_template_config_rule_enable_name"),description:g("stackSet.wizard.sample_template_config_rule_enable_description"),value:Le("EnableAWSConfig.yml",jp)},{label:g("stackSet.wizard.sample_template_config_rule_with_central_logging_enable_name"),description:g("stackSet.wizard.sample_template_config_rule_with_central_logging_enable_description"),value:Le("EnableAWSConfigForOrganizations.yml",jp)},{label:g("stackSet.wizard.sample_template_guardduty_name"),description:g("stackSet.wizard.sample_template_guardduty_description"),value:Le("EnableAWSGuardDuty.yml",jp)},{label:g("stackSet.wizard.sample_template_check_root_account_mfa_name"),description:g("stackSet.wizard.sample_template_check_root_account_mfa_description"),value:Le("ConfigRuleRootAccountMFAEnabled.yml",jp)},{label:g("stackSet.wizard.sample_template_config_rule_cloudtrail_name"),description:g("stackSet.wizard.sample_template_config_rule_cloudtrail_description"),value:Le("ConfigRuleCloudtrailEnabled.yml",jp)},{label:g("stackSet.wizard.sample_template_config_rule_eip_name"),description:g("stackSet.wizard.sample_template_config_rule_eip_description"),value:Le("ConfigRuleEipAttached.yml",jp)},{label:g("stackSet.wizard.sample_template_config_rule_encrypted_ebs_name"),description:g("stackSet.wizard.sample_template_config_rule_encrypted_ebs_description"),value:Le("ConfigRuleEncryptedVolumes.yml",jp)},{label:g("stackSet.wizard.sample_template_publish_module_with_version_name"),description:g("stackSet.wizard.sample_template_publish_module_with_version_description"),value:Le("PublishModuleWithExplicitVersion.yaml",jp)},{label:g("stackSet.wizard.sample_template_publish_module_without_version_name"),description:g("stackSet.wizard.sample_template_publish_module_without_version_description"),value:Le("PublishModule.yaml",jp)},{label:g("stackSet.wizard.sample_template_publish_resource_with_version_name"),description:g("stackSet.wizard.sample_template_publish_resource_with_version_description"),value:Le("PublishResourceWithExplicitVersion.yaml",jp)},{label:g("stackSet.wizard.sample_template_publish_resource_without_version_name"),description:g("stackSet.wizard.sample_template_publish_resource_without_version_description"),value:Le("PublishResource.yaml",jp)}],Jp=[{value:"SPECIFY_TEMPLATE",label:g("stackSet.wizard.template_is_ready")},{value:"SAMPLE_TEMPLATE",label:g("stackSet.wizard.use_sample_template")}],e_=[{value:"S3_URL",label:g("stack.template_url_title")},{value:"UPLOAD_TEMPLATE",label:g("stack.upload_template_file")},{value:"IMPORT_TEMPLATE",label:g("specify_template_from_stack_id")}],t_=[{value:"S3_URL",label:g("stack.template_url_title")},{value:"UPLOAD_TEMPLATE",label:g("stack.upload_template_file")}],a_={S3_URL:R.TEXT,UPLOAD_TEMPLATE:R.UPLOAD,SAMPLE_TEMPLATE:R.SAMPLE,IMPORT_TEMPLATE:R.IMPORT},r_=()=>{const{permissionModel:e,prepareTemplateTile:t,specifyTemplateTile:a,templateErrorKey:n,templateType:s,templateUrls:i,setStackSetsTemplateUrl:l,setStackSetsWizardState:o}=tu();return(0,r.useEffect)((()=>{o("SPECIFY_TEMPLATE"===t?{templateType:a_[a]}:{templateType:R.SAMPLE})}),[t,a]),r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Xp,null),r.createElement(_i,{selectedTile:t,tilesDefinition:Jp,setTile:e=>{o({prepareTemplateTile:e,templateErrorKey:""})}}),"SPECIFY_TEMPLATE"===t&&r.createElement(Si,{isCreateChangeSetFlow:!1,isUpdateFlow:!1,selectedTile:a,templateErrorKey:n,templateType:s,templateUrls:i,tilesDefinition:"SERVICE_MANAGED"===e?t_:e_,setTemplateUrl:(e,t)=>{o({templateErrorKey:""}),l(e,t)},setTile:e=>{o({specifyTemplateTile:e,templateErrorKey:""})}}),"SAMPLE_TEMPLATE"===t&&r.createElement(gi,{errorText:n,isCreateChangeSetFlow:!1,isUpdateFlow:!1,sampleTemplateGroups:Qp,sampleTemplateUrl:i[R.SAMPLE],setTemplateUrl:(e,t)=>{o({templateErrorKey:""}),l(e,t)}}))},n_=()=>{const{id:e}=(0,Q.UO)(),{isFetching:t}=Iu({stackSetId:e,enabled:!1}),{accountsOption:a,ouIdErrorKey:n,permissionModel:s,setStackSetsWizardState:i}=tu();return(0,r.useEffect)((()=>{i({deploymentFormat:a})}),[a]),r.createElement(Es.Z,{direction:"vertical",size:"l"},t?r.createElement(vr.Z,null):"SERVICE_MANAGED"===s?r.createElement(sp,{description:g("delete_stack_instances_description")}):r.createElement(Qm,null),r.createElement(pp,null),r.createElement(dp,{displayRetainStacksToggle:!0}),n&&r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(sn.Z,{type:"error",visible:!0},r.createElement("span",null,n)))||null)},s_=e=>{let{setActiveStepIndex:t}=e;const{deploymentFormat:a}=tu();return r.createElement(Ei,{headerId:"deployment-step-review",headerText:g("stackSet.wizard.deployment_step_description"),stepIndex:0,setActiveStepIndex:t},"ORGANIZATIONAL_UNITS"===a?r.createElement(Rp,null):r.createElement(yp,null),r.createElement(Lp,null),r.createElement(vp,{displayReviewRetainStacks:!0}))},i_=()=>{const{id:e}=(0,Q.UO)(),{isFetching:t}=Iu({stackSetId:e}),{accountsOption:a,deploymentOption:n,ouIdErrorKey:s,permissionModel:i,setStackSetsWizardState:l}=tu();return(0,r.useEffect)((()=>{l("ACCOUNTS"===n?{deploymentFormat:a}:{deploymentFormat:n})}),[n,a]),r.createElement(Es.Z,{direction:"vertical",size:"l"},t?r.createElement(vr.Z,null):"SERVICE_MANAGED"===i?r.createElement(ip,{description:r.createElement(r.Fragment,null,r.createElement("span",null,g("organizational_units_description")),r.createElement(zr,{ariaLabel:"overriding parameters on stack instances",pathAlias:"service-managed-stack-set-parameter-override-deployment-targets"}))}):r.createElement(Qm,null),r.createElement(pp,null),r.createElement(dp,null),s&&r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(sn.Z,{type:"error",visible:!0},r.createElement("span",null,s)))||null)},l_=[{text:g("stackSet.wizard.override_button"),id:"override",disabled:!1},{text:g("stackSet.wizard.reset_button"),id:"revert",disabled:!1},{text:g("stackSet.wizard.reset_override_header"),id:"reset",disabled:!1}],o_=()=>r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Sp,{buttonDropdownConfig:l_})),c_=e=>{let{setActiveStepIndex:t}=e;const{deploymentFormat:a}=tu();return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"deployment-step-review",headerText:g("stackSet.wizard.deployment_step_description"),stepIndex:0,setActiveStepIndex:t},"ORGANIZATIONAL_UNITS"===a?r.createElement(Rp,null):r.createElement(yp,null),r.createElement(Lp,null),r.createElement(vp,null)),r.createElement(Ei,{headerId:"override-step-review",headerText:g("stackSet.wizard.overrides_step_description"),stepIndex:1,setActiveStepIndex:t},r.createElement(Dp,null)))},d_=()=>{const{id:e}=(0,Q.UO)(),{isFetching:t}=Iu({stackSetId:e}),{accountsOption:a,deploymentOption:n,ouIdErrorKey:s,permissionModel:i,setStackSetsWizardState:l}=tu();return(0,r.useEffect)((()=>{l("ACCOUNTS"===n?{deploymentFormat:a}:{deploymentFormat:n})}),[n,a]),r.createElement(Es.Z,{direction:"vertical",size:"l"},t?r.createElement(vr.Z,null):"SERVICE_MANAGED"===i?r.createElement(ip,{description:r.createElement(r.Fragment,null,r.createElement("span",null,g("organizational_units_description")),r.createElement(zr,{ariaLabel:"overriding parameters on stack instances",pathAlias:"service-managed-stack-set-parameter-override-deployment-targets"}))}):r.createElement(Qm,null),r.createElement(pp,null),r.createElement(dp,null),s&&r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(sn.Z,{type:"error",visible:!0},r.createElement("span",null,s)))||null)},u_=e=>{let{setActiveStepIndex:t}=e;const{id:a}=(0,Q.UO)(),{parameters:n,parameterGroups:s,parametersNotInAParameterGroup:i,previousTemplateSource:l,templateType:c,templateUrls:d,setParameterValue:u,setStackSetsWizardState:m}=tu(),{data:{parameters:p=[]}={},isFetching:_}=Iu({stackSetId:a}),{data:E={},isFetching:h}=vu({errorHandler:()=>{t(0)},...c===R.EXISTING?{stackSetId:a}:{templateURL:d[c]}});(0,r.useEffect)((()=>{const e=c===R.EXISTING?a:d[c];if(!h&&!_&&l!==e){const t=Qi({detailsParameters:p||[],templateSummary:E}),a=tl(E.capabilities||[]);m({...t,capabilities:a,description:E.description||"",previousTemplateSource:e})}}),[h,_]);const S=Ji(E?.parameters,L),{externalValues:T={}}=(0,o.useListExternalValues)({uniqueAWSTypes:S,xsrfToken:me.xsrfToken});if(h)return r.createElement(vr.Z,null);const b=Boolean(Object.keys(n).length);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Wp,{disabled:!0}),r.createElement(Kp,null),r.createElement(Cr.Z,{header:r.createElement(Rr.Z,{description:g("stack.parameters_description")},g("stack.parameters_header"))},b?r.createElement(mi,{externalValues:T,parameterGroups:s,parameters:n,parametersNotInAParameterGroup:i,setParameterValue:u}):r.createElement(ci,{header:g("stacksList.stackParameters.empty_parameters_header"),description:g("stacksList.stackParameters.empty_parameters_description")})))},m_=()=>{const{id:e}=(0,Q.UO)(),{tags:t,setStackSetsWizardState:a}=tu(),{isFetching:n}=Iu({stackSetId:e});return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(fi,{tags:t,loading:n,setTags:e=>a({tags:e})}),r.createElement($p,{isUpdate:!0}))},p_=e=>{let{setActiveStepIndex:t}=e;const{allChecked:a,deploymentFormat:n,parameters:s,tags:i}=tu(),l=Xa(s),o=ja(i);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"template-step-review",headerText:g("stackSet.wizard.template_step_description"),stepIndex:0,setActiveStepIndex:t},r.createElement(Zp,null),r.createElement(wp,null)),r.createElement(Ei,{headerId:"details-step-review",headerText:g("stackSet.wizard.details_step_description"),stepIndex:1,setActiveStepIndex:t},r.createElement(dl,{columnDefinitions:[{id:"parameterKey",header:g("stacksList.stackParameters.column_label_key"),cell:e=>e?.parameterKey||"-",minWidth:200,sortingField:"parameterKey"},{id:"parameterValue",header:g("stacksList.stackParameters.column_label_value"),cell:e=>e?.parameterValue||"-",minWidth:200,sortingField:"parameterValue"}],parameters:l,tableTestId:"review-parameters-table",visibleContentOptionsGroups:[{label:null,options:[{id:"parameterKey",label:g("stacksList.stackParameters.column_label_key"),editable:!0},{id:"parameterValue",label:g("stacksList.stackParameters.column_label_value"),editable:!0}]}]})),r.createElement(Ei,{headerId:"options-step-review",headerText:g("stackSet.wizard.options_step_description"),stepIndex:2,setActiveStepIndex:t},r.createElement(ml,{tableTestId:"review-tags-table",tags:o}),r.createElement(Op,null)),r.createElement(Ei,{headerId:"deployment-step-review",headerText:g("stackSet.wizard.deployment_step_description"),stepIndex:3,setActiveStepIndex:t},"ORGANIZATIONAL_UNITS"===n?r.createElement(Rp,null):r.createElement(yp,null),r.createElement(Lp,null),r.createElement(vp,null)),r.createElement(Ap,null),!a&&r.createElement(sn.Z,{"data-testid":"checkbox-validation-alert",type:"error"},g("review_step_checkbox_validation_error")))},__=[{value:"CURRENT_TEMPLATE",label:g("stackSet.wizard.use_current_template")},{value:"SPECIFY_TEMPLATE",label:g("stackSet.wizard.replace_current_template")}],E_=[{value:"S3_URL",label:g("stack.template_url_title")},{value:"UPLOAD_TEMPLATE",label:g("stack.upload_template_file")}],g_={S3_URL:R.TEXT,UPLOAD_TEMPLATE:R.UPLOAD},h_=()=>{const{prepareTemplateTile:e,specifyTemplateTile:t,templateErrorKey:a,templateType:n,templateUrls:s,setStackSetsTemplateUrl:i,setStackSetsWizardState:l}=tu();return(0,r.useEffect)((()=>{l("CURRENT_TEMPLATE"===e?{templateType:R.EXISTING}:{templateType:g_[t]})}),[e,t]),r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Xp,{disablePermissionModelTiles:!0}),r.createElement(_i,{selectedTile:e,tilesDefinition:__,setTile:e=>{l({prepareTemplateTile:e,templateErrorKey:""})}}),"SPECIFY_TEMPLATE"===e&&r.createElement(Si,{isCreateChangeSetFlow:!1,isUpdateFlow:!0,selectedTile:t,templateErrorKey:a,templateType:n,templateUrls:s,tilesDefinition:E_,setTemplateUrl:(e,t)=>{l({templateErrorKey:""}),i(e,t)},setTile:e=>{l({specifyTemplateTile:e,templateErrorKey:""})}}))},S_=_r((()=>{const e=(0,Q.s0)(),{isDelegatedAdminAccount:t,isManagementAccount:a}=ku(),n=tu();(0,r.useEffect)((()=>()=>n.clearStackSetsWizardState()),[]),(0,r.useEffect)((()=>{n.setStackSetsWizardState({deploymentFormat:"SERVICE_MANAGED"===n.permissionModel?"ORGANIZATION":"ACCOUNTS",permissionModel:t||a?"SERVICE_MANAGED":null,templateType:R.TEXT})}),[t,a]);const{data:s=[]}=yu(n.deploymentFormat);(0,r.useEffect)((()=>{if(s.length){const e=s.map((e=>e?.id));n.setStackSetsWizardState({organization:e})}}),[s.length]);const[i,l]=(0,r.useState)(0),{mutate:o,isLoading:c}=Au(),{validate:d}=xu(!1),{validate:u}=Nu(),{validate:m}={validate:e=>{e()}},{validate:p}=Pu(!1),{validate:_}=Ou(),E=(0,Fp.useIsMutating)(),h=Boolean(E)||c;return r.createElement(Ym.Z,{i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},activeStepIndex:i,isLoadingNextStep:h,onNavigate:e=>{let{detail:t}=e;switch(t.requestedStepIndex){case 1:return d((()=>l(t.requestedStepIndex)));case 2:return u((()=>l(t.requestedStepIndex)));case 3:return m((()=>l(t.requestedStepIndex)));case 4:return p((()=>l(t.requestedStepIndex)));default:return l(t.requestedStepIndex)}},onCancel:()=>{e("/stacksets")},onSubmit:()=>{const e=((e,t)=>{const{autoDeployment:a,capabilities:r,executionRoleName:n,iamAdminRole:s,managedExecution:i,parameters:l,permissionModel:o,stackSetName:c,stackSetDescription:d,tags:u,templateType:m,templateUrls:p}=e;return{stackSetName:c,description:d||null,clientRequestToken:se(),...au(s.arn,o),...ru(a,o),...nu(r),...iu(n,o),...pu(l),..._u(o),...gu(u),...hu(m,p),...Su(o,t),...Tu(i,l,m,wd.CREATE_STACK_SET)}})(n,t);_((()=>o(e)))},steps:[{title:g("stackSet.wizard.template_step_description"),content:r.createElement(r_,null)},{title:g("stackSet.wizard.details_step_description"),content:r.createElement(zp,{setActiveStepIndex:l})},{title:g("stackSet.wizard.options_step_description"),content:r.createElement(Vp,null)},{title:g("stackSet.wizard.deployment_step_description"),content:r.createElement(Mp,null)},{title:g("stackSet.wizard.review_step_title"),content:r.createElement(Gp,{setActiveStepIndex:l})}]})}),Tt.STACK_SETS_CREATE),T_=_r((()=>{const[e,t]=(0,r.useState)(0),{id:a}=(0,Q.UO)(),n=(0,Q.s0)(),{isDelegatedAdminAccount:s}=ku(),i=tu(),{isFetching:l,refetch:c}=Iu({stackSetId:a,enabled:!1});(0,r.useEffect)((()=>(i.setStackSetsWizardState({prepareTemplateTile:"CURRENT_TEMPLATE",templateType:R.EXISTING}),c({throwOnError:!0,cancelRefetch:!0}),()=>i.clearStackSetsWizardState())),[]),Lu(!1);const d="SERVICE_MANAGED"===i.permissionModel?"service":"self",{mutate:u,isLoading:m}=eu({action:o.ApiAction.Update,resource:o.ApiResource.StackSets,redirectOnFailurePath:`/stacksets/${a}?permissions=${d}`,successHandler:()=>{n(`/stacksets/${a}/operations?permissions=${d}`)}}),{validate:p}=xu(!0),{validate:_}=Nu(),{validate:E}={validate:e=>{e()}},{validate:h}=Pu(!0),{validate:S}=Ou(),T=(0,Fp.useIsMutating)(),b=Boolean(T)||l||m;return r.createElement(Ym.Z,{i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},activeStepIndex:e,isLoadingNextStep:b,onNavigate:e=>{let{detail:a}=e;switch(a.requestedStepIndex){case 1:return p((()=>t(a.requestedStepIndex)));case 2:return _((()=>t(a.requestedStepIndex)));case 3:return E((()=>t(a.requestedStepIndex)));case 4:return h((()=>t(a.requestedStepIndex)));default:return t(a.requestedStepIndex)}},onCancel:()=>{n("/stacksets")},onSubmit:()=>{const e=((e,t,a)=>{const{accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,autoDeployment:l,capabilities:o,deploymentFormat:c,executionRoleName:d,iamAdminRole:u,managedExecution:m,operationPreferences:p,organization:_,organizationalUnitIds:E,parameters:g,permissionModel:h,regions:S,stackIdsToImport:T,stackIdsUrl:b,stackSetDescription:f,stacksToImportSource:k,tags:A,templateType:I,templateUrls:y}=e,C={accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,organization:_,organizationalUnitIds:E,stackIdsToImport:T,stackIdsUrl:b,stacksToImportSource:k};return{stackSetName:t,description:f||null,operationId:se(),operationPreferences:uu(p,S,c),regions:Eu(S),...au(u.arn,h),...ru(l,h),...nu(o),...su(c,C),...iu(d,h),...pu(g),..._u(h),...gu(A),...hu(I,y),...Su(h,a),...Tu(m,g,I,wd.UPDATE_STACK_SET)}})(i,a,s);S((()=>u(e)))},steps:[{title:g("stackSet.wizard.template_step_description"),content:r.createElement(h_,null)},{title:g("stackSet.wizard.details_step_description"),content:r.createElement(u_,{setActiveStepIndex:t})},{title:g("stackSet.wizard.options_step_description"),content:r.createElement(m_,null)},{title:g("stackSet.wizard.deployment_step_description"),content:r.createElement(d_,null)},{title:g("stackSet.wizard.review_step_title"),content:r.createElement(p_,{setActiveStepIndex:t})}]})}),Tt.STACK_SETS_MANAGE),b_=_r((()=>{const[e,t]=(0,r.useState)(0),{id:a}=(0,Q.UO)(),n=(0,Q.s0)(),{isDelegatedAdminAccount:s}=ku(),i=tu(),l="SERVICE_MANAGED"===i.permissionModel?"service":"self",{isFetching:c,refetch:d}=Iu({stackSetId:a,enabled:!1});(0,r.useEffect)((()=>(d({throwOnError:!0,cancelRefetch:!0}),()=>i.clearStackSetsWizardState())),[]),Lu(!1);const{mutate:u,isLoading:m}=eu({action:o.ApiAction.Update,resource:o.ApiResource.StackInstances,redirectOnFailurePath:`/stacksets/${a}?permissions=${l}`,successHandler:()=>{n(`/stacksets/${a}/operations?permissions=${l}`)}}),{validate:p}=Pu(!1);return r.createElement(Ym.Z,{i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},activeStepIndex:e,isLoadingNextStep:c||m,onNavigate:e=>{let{detail:a}=e;return 1===a.requestedStepIndex?p((()=>t(a.requestedStepIndex))):t(a.requestedStepIndex)},onCancel:()=>{n("/stacksets")},onSubmit:()=>{const e=((e,t,a)=>{const{accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,deploymentFormat:l,operationPreferences:o,organization:c,organizationalUnitIds:d,parameters:u,permissionModel:m,regions:p,stackIdsToImport:_,stackIdsUrl:E,stacksToImportSource:g}=e,h={accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,organization:c,organizationalUnitIds:d,stackIdsToImport:_,stackIdsUrl:E,stacksToImportSource:g};return{operationId:se(),operationPreferences:uu(o,p,l),regions:Eu(p),stackSetName:t,...Su(m,a),...su(l,h),...mu(u,!0)}})(i,a,s);u(e)},steps:[{title:g("stackSet.wizard.deployment_step_description"),content:r.createElement(i_,null)},{title:g("stackSet.wizard.overrides_step_description"),content:r.createElement(o_,null)},{title:g("stackSet.wizard.review_step_title"),content:r.createElement(c_,{setActiveStepIndex:t})}]})}),Tt.STACK_SETS_UPDATE_STACKS),f_=_r((()=>{const[e,t]=(0,r.useState)(0),{id:a}=(0,Q.UO)(),n=(0,Q.s0)(),{isDelegatedAdminAccount:s}=ku(),i=tu(),l="SERVICE_MANAGED"===i.permissionModel?"service":"self",{refetch:c}=Iu({stackSetId:a,enabled:!1});(0,r.useEffect)((()=>(c({throwOnError:!0,cancelRefetch:!0}),()=>i.clearStackSetsWizardState())),[]),Lu(!1);const{mutate:d,isLoading:u}=eu({action:o.ApiAction.Delete,resource:o.ApiResource.StackInstances,redirectOnFailurePath:`/stacksets/${a}?permissions=${l}`,successHandler:()=>{n(`/stacksets/${a}/operations?permissions=${l}`)}}),{validate:m}=Pu(!1);return r.createElement(Ym.Z,{i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},activeStepIndex:e,isLoadingNextStep:u,onNavigate:e=>{let{detail:a}=e;m((()=>t(a.requestedStepIndex)))},onCancel:()=>{n("/stacksets")},onSubmit:()=>{const e=((e,t,a)=>{const{accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,deploymentFormat:l,operationPreferences:o,organization:c,organizationalUnitIds:d,permissionModel:u,regions:m,retainStacks:p,stackIdsToImport:_,stackIdsUrl:E,stacksToImportSource:g}=e,h={accountFilterType:r,accounts:n,accountsFromOrganizationalUnit:s,accountsS3URL:i,organization:c,organizationalUnitIds:d,stackIdsToImport:_,stackIdsUrl:E,stacksToImportSource:g};return{operationId:se(),operationPreferences:uu(o,m,l),regions:Eu(m),retainStacks:p,stackSetName:t,...Su(u,a),...su(l,h)}})(i,a,s);d(e)},steps:[{title:g("stackSet.wizard.deployment_step_description"),content:r.createElement(n_,null)},{title:g("stackSet.wizard.review_step_title"),content:r.createElement(s_,{setActiveStepIndex:t})}]})}),Tt.STACK_SETS_DELETE),k_=_r((()=>{const[e,t]=(0,r.useState)(0),{id:a}=(0,Q.UO)(),n=(0,Q.s0)(),{isDelegatedAdminAccount:s}=ku(),i=tu(),l="SERVICE_MANAGED"===i.permissionModel?"service":"self",{refetch:c}=Iu({stackSetId:a,enabled:!1});(0,r.useEffect)((()=>(c({throwOnError:!0,cancelRefetch:!0}),()=>i.clearStackSetsWizardState())),[]),Lu(!0);const{mutate:d,isLoading:u}=eu({action:o.ApiAction.Create,resource:o.ApiResource.StackInstances,redirectOnFailurePath:`/stacksets/${a}?permissions=${l}`,successHandler:()=>{n(`/stacksets/${a}/operations?permissions=${l}`)}}),{mutate:m,isLoading:p}=eu({action:o.ApiAction.ImportStacks,resource:o.ApiResource.StackSets,redirectOnFailurePath:`/stacksets/${a}?permissions=${l}`,successHandler:()=>{n(`/stacksets/${a}/operations?permissions=${l}`)}}),{data:_=[]}=yu(i.deploymentFormat),{validate:E}=Pu(!1);return(0,r.useEffect)((()=>{if(_.length){const e=_.map((e=>e?.id));i.setStackSetsWizardState({organization:e})}}),[_.length]),r.createElement(Ym.Z,{i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},isLoadingNextStep:u||p,activeStepIndex:e,onNavigate:e=>{let{detail:a}=e;return 1===a.requestedStepIndex?E((()=>t(a.requestedStepIndex))):t(a.requestedStepIndex)},onCancel:()=>{n("/stacksets")},onSubmit:()=>{if(ur(i.deploymentFormat)){const e=fu(i,a,s);m(e)}else{const e=bu(i,a,s);d(e)}},steps:[{title:g("stackSet.wizard.deployment_step_description"),content:r.createElement(gp,null)},{title:g("stackSet.wizard.overrides_step_description"),content:r.createElement(bp,null)},{title:g("stackSet.wizard.review_step_title"),content:r.createElement(Up,{setActiveStepIndex:t})}]})}),Tt.ADD_STACK_TO_STACK_SET),A_=_r((()=>{const[e,t]=(0,r.useState)([]),a=os(),n=a.get("stackId")||"",s=a.get("logicalResourceId")||"",i=a.get("stackInstanceAccount")||"",l=a.get("stackInstanceRegion")||"",c=a.get("operationId")||"",d=Na(n),{id:u}=(0,Q.UO)(),m=decodeURIComponent(u),p=(0,o.getCurrentAccountId)(),_=(0,o.getRegion)(),E=i===p&&l===_,h=e=>Ia(e,"logicalResourceId")[s],S=as({stackId:n,transformCb:h,fetchAll:!0,enabled:E}),T=Ru({stackSetId:m,operationId:c,stackInstanceAccount:i,stackInstanceRegion:l,transformCb:h,fetchAll:!0,enabled:!E}),{mutate:b}=rs(s);return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1",actions:r.createElement(Dt,{text:g("drift.detect_resource_drift"),variant:"primary",loading:E?S.isFetching:T.isFetching,disabled:!E,onClick:()=>b({stackName:n,logicalResourceId:s})})},g("drift.drift_details_resource_header",d))},r.createElement(Es.Z,{size:"l"},r.createElement(Mi,{displayData:E?S.displayData:T.displayData,isFetching:E?S.isFetching:T.isFetching}),r.createElement(Cr.Z,{"data-testid":"drift-diff-viewer",disableContentPaddings:!0,disableHeaderPaddings:!0},r.createElement(Di,{selectedProperties:e,onSelectionChange:e=>t(e),propertyDifferences:E?S.displayData?.propertyDifferences:T.displayData?.propertyDifferences,isFetching:E?S.isFetching:T.isFetching}),r.createElement(wi,{selectedProperties:e,expectedProperties:E?S.displayData?.expectedProperties:T.displayData?.expectedProperties,actualProperties:E?S.displayData?.actualProperties:T.displayData?.actualProperties}))))}),Tt.STACK_SETS_RESOURCE_DRIFTS),I_=()=>{yd(),Rd(),Cd();const{search:e}=(0,Q.TH)();return Ie((0,o.getRIPRegion)())?r.createElement(Ld,null,r.createElement(Jd,null,r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:"create",element:r.createElement(S_,null)}),r.createElement(Q.AW,{path:":id/drifts",element:r.createElement(Nm,null)}),r.createElement(Q.AW,{path:":id/drifts/info",element:r.createElement(A_,null)}),r.createElement(Q.AW,{path:":id/manage/stacks",element:r.createElement(b_,null)}),r.createElement(Q.AW,{path:":id/manage",element:r.createElement(T_,null)}),r.createElement(Q.AW,{path:":id/delete",element:r.createElement(f_,null)}),r.createElement(Q.AW,{path:":id/create",element:r.createElement(k_,null)}),r.createElement(Q.AW,{path:":id/:selectedTabId",element:r.createElement(Im,null)}),r.createElement(Q.AW,{path:":id",element:r.createElement(Q.Fg,{to:{pathname:"info",search:e},replace:!0})}),r.createElement(Q.AW,{path:"*",element:r.createElement(qm,null)})))):null},y_=e=>{let{stackId:t,shouldAutoRefetch:a=!1,enabled:r=!0}=e;const n=(0,Q.s0)(),{pathname:s}=(0,Q.TH)(),i={action:o.ApiAction.Describe,resource:o.ApiResource.Stacks,requestParams:{stackName:t},xsrfToken:me.xsrfToken,enabled:r&&Boolean(t),placeholderData:{},...a&&{shouldAutoRefetch:a}},l=(0,o.useSDKQuery)(i);es({status:l?.status,error:l?.error,errorText:{errorContent:l?.error?.message},errorHandler:()=>{const{isValidationError:e,message:t}=l.error;e&&/^stack with id .* does not exist$/i.test(t)&&n(s)}});const c=l?.data?.stacks?.[0]||{};return{...l,data:c}},C_=e=>{let{analyticsKey:t,redirectOnCreation:a=!0,displayError:r=!0,successCb:n}=e;const i=(0,s.I0)(),l=(0,Q.s0)(),c={action:o.ApiAction.Create,resource:o.ApiResource.ChangeSets,xsrfToken:me.xsrfToken,onMutate:()=>{t&&u.logEvent(t,1)},onSuccess:e=>{let{stackId:r,id:s}=e;t&&u.logEvent(`${t}_success`,1),a&&l(`/stacks/changesets/changes?stackId=${encodeURIComponent(r)}&changeSetId=${encodeURIComponent(s)}`),n&&n({stackId:r,id:s})},onError:e=>{t&&u.logEvent(`${t}_failed`,1),r&&i(He({content:e?.isValidationError&&e?.message||g("create_stack_changeset_error_message"),type:"ERROR"}))}};return(0,o.useSDKMutation)(c)},R_=()=>{const e=(0,s.I0)(),t=(0,Fp.useQueryClient)(),a=(0,Q.s0)(),r={action:o.ApiAction.Create,resource:o.ApiResource.Stacks,xsrfToken:me.xsrfToken,onSuccess:e=>{let{stackId:r}=e;t.resetQueries([o.ApiResource.Stacks,o.ApiAction.List]),a(`/stacks/events?stackId=${encodeURIComponent(r)}`)},onError:t=>{e(He({content:ce(t)||g("create_stack_error_message"),type:"ERROR"}))}};return(0,o.useSDKMutation)(r)},v_=e=>{let{stackId:t,filteringFields:a=[],enabled:r=!0}=e;const n={resource:o.ApiResource.ChangeSets,action:o.ApiAction.List,requestParams:{stackName:t},filteringFields:a,xsrfToken:me.xsrfToken,queryOptions:{enabled:r&&Boolean(t)}},s=(0,o.useSDKInfiniteQuery)(n);return es({status:s?.status,error:s?.error,errorText:{errorContent:s?.error?.message}}),s},L_=e=>{let{changeSetId:t,stackId:a}=e;const r=(0,s.I0)(),n=(0,Q.s0)(),{refetch:i}=v_({stackId:a,enabled:!1}),l={action:o.ApiAction.Delete,resource:o.ApiResource.ChangeSets,method:"DELETE",xsrfToken:me.xsrfToken,onSuccess:()=>{i({throwOnError:!0,cancelRefetch:!0}),n(`/stacks/changesets?stackId=${encodeURIComponent(a)}`),r(He({content:fe(A.CSNS)?g("delete_change_set_alert",t):g("changeSets.delete_changeset",t),type:"INFO"}))},onError:()=>{r(He({content:g("changeSets.delete_changeset_error"),type:"ERROR"}))}};return(0,o.useSDKMutation)(l)},P_=e=>{let{changeSetId:t,stackId:a}=e;const r=(0,Q.s0)(),n={action:o.ApiAction.Describe,resource:o.ApiResource.ChangeSets,requestParams:{stackName:a,changeSetName:t},xsrfToken:me.xsrfToken,enabled:Boolean(a)&&Boolean(t),placeholderData:{}},s=(0,o.useSDKQuery)(n);return es({status:s?.status,error:s?.error,errorText:{errorContent:s?.error?.message},errorHandler:()=>{const{isValidationError:e,code:t,message:a}=s.error;e&&("ChangeSetNotFound"===t||/^stackname must be specified if changesetname is not specified as an arn\.$/i.test(a))&&r("/stacks")}}),s},N_=e=>{let{stackId:t,enabled:a=!0,fetchOnFilter:r=!1}=e;const n={action:o.ApiAction.Describe,resource:o.ApiResource.StackEvents,requestParams:{stackName:t},xsrfToken:me.xsrfToken,queryOptions:{enabled:a&&Boolean(t)},filteringFields:["logicalResourceId","resourceStatus"],fetchOnFilter:r},s=(0,o.useSDKInfiniteQuery)(n);return es({status:s?.status,error:s?.error,errorText:{errorContent:s?.error?.message}}),s},O_=e=>{let{stackId:t}=e;const a=(0,s.I0)(),{refetch:r}=y_({stackId:t,enabled:!1}),n={action:o.ApiAction.DetectDrift,resource:o.ApiResource.Stacks,xsrfToken:me.xsrfToken,onSuccess:()=>{a(He({content:g("stacksList.drift_detection_initiated",t),type:"INFO"})),r({throwOnError:!0,cancelRefetch:!0})},onError:e=>{a(He({content:e?.isValidationError&&e?.message||g("stacksList.drift_detection_error"),type:"ERROR"}))}};return(0,o.useSDKMutation)(n)},x_=e=>{let{analyticsKey:t,onSuccessText:a,stackId:r}=e;const n=(0,s.I0)(),i=(0,Q.s0)(),l={action:o.ApiAction.Execute,resource:o.ApiResource.ChangeSets,xsrfToken:me.xsrfToken,onMutate:()=>{t&&u.logEvent(t,1)},onSuccess:()=>{t&&u.logEvent(`${t}_success`,1),i(`/stacks/events?stackId=${encodeURIComponent(r)}`),n(He({content:a,type:"INFO"}))},onError:e=>{t&&u.logEvent(`${t}_failed`,1),n(He({content:e?.isValidationError&&e?.message||g("changeSets.execute_changeset_error"),type:"ERROR"}))}};return(0,o.useSDKMutation)(l)},D_=e=>{let{stackId:t,shouldAutoRefetch:a=!1,enabled:r=!0}=e;const n={action:o.ApiAction.Get,resource:o.ApiResource.StackPolicy,requestParams:{stackName:t},xsrfToken:me.xsrfToken,enabled:Boolean(t)&&r,placeholderData:{stackPolicyBody:null},...a&&{shouldAutoRefetch:a}},s=(0,o.useSDKQuery)(n);return es({status:s?.status,error:s?.error,errorText:{errorContent:g("stacksList.fetch_stack_policy_error_message")}}),s},w_=e=>{let{changeSetId:t,stackId:a,shouldAutoRefetch:r=!1,enabled:n=!0,templateStage:s}=e;const i={action:o.ApiAction.Get,resource:o.ApiResource.Template,requestParams:{stackName:a,...t&&{changeSetName:t},templateStage:s},xsrfToken:me.xsrfToken,enabled:Boolean(a)&&n,placeholderData:{templateBody:"",stagesAvailable:[]},...r&&{shouldAutoRefetch:r}};return(0,o.useSDKQuery)(i)},Z_=e=>{let{stackId:t,templateURL:a,enabled:r=!0,refetchOnMount:n=!1,successHandler:s,errorHandler:i}=e;const l={resource:o.ApiResource.TemplateSummary,action:o.ApiAction.Get,requestParams:{...t&&{stackName:t},...a&&{templateURL:a.replace(/\+/g,"%20")},...(0,o.isTangerineBox)()?{templateSummaryConfig:{treatUnrecognizedResourceTypesAsWarnings:fe(A.SKIP_API_OUTPUT_FOR_GET_TEMPLATE_SUMMARY)}}:{treatUnrecognizedResourceTypesAsWarnings:fe(A.SKIP_API_OUTPUT_FOR_GET_TEMPLATE_SUMMARY)}},xsrfToken:me.xsrfToken,placeholderData:{capabilities:null,capabilitiesReason:null,declaredTransforms:null,description:null,metadata:null,parameters:[],resourceIdentifierSummaries:[],resourceTypes:[],version:null},enabled:r,refetchOnMount:n,shouldAutoRefetch:!1,transformCb:e=>{const t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e?.declaredTransforms?.length?{...e,capabilities:[C.CAPABILITY_IAM,C.CAPABILITY_NAMED_IAM,C.CAPABILITY_AUTO_EXPAND],capabilitiesReason:g("stack.review_transforms_capabilities_reason")}:e}(e);let a={};try{t?.rules&&(a=ye.cv.parse(t.rules))}catch(e){K.error({level:F.ERROR,message:e})}return{...t,constraints:a}},...s&&{onSuccess:s}},c=(0,o.useSDKQuery)(l);return es({status:c.status,error:c.error,errorText:{errorContent:ce(c.error)},...i&&{errorHandler:i}}),c},U_={refetchOnMount:!1,refetchOnWindowFocus:!1,retry:!1,retryOnMount:!1,staleTime:0},F_=["action","logicalResourceId","physicalResourceId","replacement","resourceType"],M_=(e,t)=>{const[a,n]=(0,r.useState)(!0),[s,i]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),d=(0,o.getRegion)(),u=[o.ApiResource.ChangeSets,o.ApiAction.Describe,{stackId:t,changeSetId:e,listChanges:!0}],{data:m,isSuccess:p,fetchNextPage:_,hasNextPage:E,isFetching:g,isRefetching:h}=(0,Fp.useInfiniteQuery)({queryKey:u,queryFn:a=>{let{pageParam:r}=a;if((0,o.isTangerineBox)())return o.SDK_API[o.ApiResource.ChangeSets][o.ApiAction.Describe]({StackName:t,ChangeSetName:e});const n=(0,b.stringify)({region:d,stackName:t,changeSetName:e,...r&&{nextToken:r}}),s=`${o.API_REQUEST_URLS[o.ApiResource.ChangeSets][o.ApiAction.Describe]}?${n}`;return(0,o.ajaxRequest)({url:s,options:(0,o.createFetchRequest)()},me.xsrfToken)},getNextPageParam:e=>e.nextToken??void 0,select:e=>{let{pages:t}=e,a=t;(0,o.isTangerineBox)()&&(a=(0,o.transformKeys)(a,!0));const r=a?.[a.length-1]?.nextToken;return{changeSetId:a?.[0]?.changeSetId||"",status:a?.[0]?.status||"CREATE_PENDING",statusReason:a?.[0]?.statusReason||"",stackId:a?.[0]?.stackId||"",changes:a?.flatMap((e=>e?.changes||[]))||[],...r&&{nextToken:r}}},...U_,enabled:Boolean(t)&&Boolean(e),refetchInterval:e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CREATE_PENDING";return"CREATE_COMPLETE"!==e&&-1===e.indexOf("FAILED")}(e?.status)?2e3:(n(!1),!1)});(0,r.useEffect)((()=>{if(p){const e=l?m?.changes.filter((e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return 0===a.length&&(a=Object.keys(e)),a.some((a=>{return r=e[a],n=t,"string"==typeof r&&r.toLowerCase().indexOf(n.toLowerCase())>-1;var r,n}))}(e?.resourceChange,l,F_)))||[]:m?.changes;i(e)}}),[l,m]),(0,r.useEffect)((()=>{l&&E&&_()}),[l,m?.nextToken]);const S=(0,Fp.useQueryClient)();return{cachedData:m,displayData:s,filteringText:l,isFetching:g,isRefetching:h,isSuccess:p,hasNextPage:E,polling:a,fetchNextPage:_,refreshData:()=>{S.resetQueries(u,{refetchPage:(e,t)=>0===t})},setFilteringText:c}},K_=e=>{let{stackId:t,filteringFields:a=[],fetchAll:n=!1,enabled:s=!0}=e;const i={resource:o.ApiResource.StackResources,action:o.ApiAction.List,requestParams:{stackName:t},filteringFields:a,xsrfToken:me.xsrfToken,queryOptions:{enabled:Boolean(t)&&s}},l=(0,o.useSDKInfiniteQuery)(i);es({status:l?.status,error:l?.error,errorText:{errorContent:l?.error?.message}});const{hasNextPage:c,isFetching:d,fetchNextPage:u}=l||{};return(0,r.useEffect)((()=>{n&&c&&!d&&u()}),[c,d]),l},W_=e=>e?it[e.toLowerCase()]:it[st.ACTIVE],z_=e=>{let{filteringStatus:t=st.ACTIVE,filteringFields:a=[],enabled:n=!0,viewNested:s=!0}=e;const i={resource:o.ApiResource.Stacks,action:o.ApiAction.List,requestParams:{stackStatusFilter:W_(t)},filteringFields:a,xsrfToken:me.xsrfToken,queryOptions:{enabled:n}},l=(0,o.useSDKInfiniteQuery)(i),{cachedData:c,displayData:d,error:u,hasNextPage:m,isFetching:p,status:_,fetchNextPage:E}=l||{};(0,r.useEffect)((()=>{!p&&c?.stackSummaries?.length<100&&m&&E()}),[c?.stackSummaries?.length,m,p]),es({status:_,error:u,errorText:{errorContent:j(u,g("stacksList.fetch_stacks_error_message"))}});const h=(0,Fp.useQueryClient)(),S=[o.ApiResource.Stacks,o.ApiAction.List,{status:W_(t)}];return{...l,displayData:s?d:d.filter((e=>!e?.rootId)),updateStackData:e=>{h.setQueryData(S,(t=>t?{...t,pages:t?.pages?.map((t=>({...t,stackSummaries:t?.stackSummaries?.map((t=>t.stackId===e.stackId?{...t,...e}:t))})))}:t))}}},$_=e=>{let{onSuccess:t}=e;const a=(0,s.I0)(),r=(0,Q.s0)(),n=(0,Fp.useQueryClient)(),i={action:o.ApiAction.Update,resource:o.ApiResource.Stacks,xsrfToken:me.xsrfToken,onSuccess:e=>{let{stackId:a}=e;n.resetQueries([o.ApiResource.Stacks,o.ApiAction.Describe]),t?.(a),r(`/stacks/events?stackId=${encodeURIComponent(a)}`)},onError:e=>{a(He({content:ce(e),type:"ERROR"}))}};return(0,o.useSDKMutation)(i)},V_=e=>{let{setDisplayedEvents:t}=e;const a=os().get("stackId")||"",{setModalType:n}=ls(),[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),{cachedData:u,error:m,hasNextPage:p,fetchNextPage:_,filteringText:E,setFilteringText:g,isFetching:h}=N_({stackId:a,fetchOnFilter:!1,enabled:!1});return(0,r.useEffect)((()=>{if(s&&!h){E&&g("");const{stackEvents:e}=u||{},{events:a,mostRecentOperationIndex:r,rootCauseEventIndex:s}=(e=>{let t=null,a=null;if(!e.length)return{mostRecentOperationIndex:a,rootCauseEventIndex:t};for(let t=0;t<e.length;t++){const{logicalResourceId:r,resourceStatusReason:n,stackName:s}=e[t]||{};if(r===s&&"User Initiated"===n){a=t;break}}if("number"==typeof a)for(let r=a;r>=0;r--){const{resourceStatus:a}=e[r]||{};if(Pa.indexOf(a)>-1){t=r,e[t].rootCause=!0;break}}return{events:e,mostRecentOperationIndex:a,rootCauseEventIndex:t}})(e);if(null===r&&p&&!m)_();else{if(null===s)o(!0);else{const{resourceStatusReason:e}=a[s];t(a),d(a[s]),e.toLowerCase().indexOf("embedded stack")>-1&&n(lt.NESTED_STACK_ROOT_CAUSE_EVENT)}i(!1)}}}),[s,h,m]),(0,r.useEffect)((()=>{const e=document?.querySelector("[data-id=root-cause-event-badge]")||null;e?.scrollIntoView?.({behavior:"smooth",block:"center"})}),[s]),{displayNotFoundAlert:l,searchingRootCause:s,rootCauseEvent:c,setDisplayNotFoundAlert:o,setSearchingRootCause:i}},G_=(0,r.createContext)({cachedEvents:[],describeStackEventsLoading:!1,displayedEvents:[],displayNotFoundAlert:!1,error:null,filteringText:"",hasNextPage:!1,isFetchingNextPage:!1,rootCauseEvent:null,searchingRootCause:!1,describeStackEvents:()=>{},fetchNextPage:()=>{},resetEventsQuery:()=>{},setDisplayNotFoundAlert:()=>{},setFilteringText:()=>{},setProviderEnabled:()=>{},setSearchingRootCause:()=>{}}),B_=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(!1),s=os().get("stackId")||"",{setModalType:i}=ls(),[l,o]=(0,r.useState)({}),{cachedData:c,displayData:d,error:u,hasNextPage:m,fetchNextPage:p,filteringText:_,setFilteringText:E,isFetching:g,isFetchingNextPage:h,refreshData:S,refetch:T}=N_({stackId:s,fetchOnFilter:!1,enabled:!1}),{displayNotFoundAlert:b,searchingRootCause:f,rootCauseEvent:k,setDisplayNotFoundAlert:A,setSearchingRootCause:I}=V_({setDisplayedEvents:e=>{o({...l,[s]:e})}});return(0,r.useEffect)((()=>{a&&s&&(S(),T({throwOnError:!0,cancelRefetch:!0,refetchPage:(e,t)=>0===t}),E(""),A(!1),i(null))}),[a,s]),(0,r.useEffect)((()=>{s&&a&&(d?.length||_)&&o({...l,[s]:d})}),[d?.length,s]),r.createElement(G_.Provider,{value:{cachedEvents:c?.stackEvents||[],describeStackEventsLoading:g,displayedEvents:l?.[s]||[],error:u,filteringText:_,hasNextPage:m,isFetchingNextPage:h,describeStackEvents:T,fetchNextPage:p,resetEventsQuery:S,setFilteringText:E,setProviderEnabled:n,displayNotFoundAlert:b,searchingRootCause:f,rootCauseEvent:k,setDisplayNotFoundAlert:A,setSearchingRootCause:I}},t)},H_="CLEAR_STACKS_WIZARD_STATE",q_="SET_PARAMETER_VALUE",Y_="SET_RESOURCE_IDENTIFIER_VALUE",X_="SET_STACKS_WIZARD_STATE",j_="SET_STACKS_TEMPLATE_URL",Q_="SET_CAPABILITY_ACKNOWLEDGMENT",J_={allChecked:!0,capabilities:null,changeSetId:"",changeSetName:"",changeSetNameErrorKey:"",changeSetType:"UPDATE",description:"",disableRollback:!1,enableTerminationProtection:!1,includeNestedStacks:!0,notificationArns:[""],parameterErrorKeys:{failMap:new Map,globalFailureMessages:[]},parameterGroups:[],parameters:{},parametersNotInAParameterGroup:[],prepareTemplateTile:"SPECIFY_TEMPLATE",previousTemplateSource:"",resourcesToImport:{},roleType:"EXISTING",roleArn:"",roleArnErrorKey:"",rollbackConfiguration:{monitoringTimeErrorKey:"",monitoringTimeInMinutes:"",rollbackTriggers:[{arn:"",type:"AWS::CloudWatch::Alarm"}]},specifyTemplateTile:"S3_URL",stackId:"",stackName:"",stackNameErrorKey:"",stackPolicyBody:"",stackPolicyDuringUpdateBody:"",stackPolicyDuringUpdateURL:"",stackPolicyOption:v.NONE,stackPolicyUrl:"",tags:[],templateErrorKey:"",templateType:R.TEXT,templateUrls:{[R.SAMPLE]:"",[R.TEXT]:"",[R.UPLOAD]:""},timeoutErrorKey:"",timeoutInMinutes:""},eE=(e,t)=>{const{type:a,payload:r}=t;switch(a){case H_:return J_;case Q_:return{...e,capabilities:{...e.capabilities,[r.capability]:r.checked}};case q_:{const{parameterKey:t,parameterValue:a,usePreviousValue:n}=r,s=Nd()({},e.parameters[t],{..."string"==typeof a&&{parameterValue:a,usePreviousValue:!1},..."boolean"==typeof n&&{usePreviousValue:n}}),i=new Map(e.parameterErrorKeys.failMap);return i.has(t)&&i.delete(t),{...e,parameters:{...e.parameters,[t]:s},parameterErrorKeys:{...e.parameterErrorKeys,failMap:i}}}case Y_:{const{logicalResourceId:t,resourceIdentifierProperty:a,resourceIdentifierValue:n}=r;return{...e,resourcesToImport:{...e.resourcesToImport,[t]:{...e.resourcesToImport[t],resourceIdentifiers:{...e.resourcesToImport[t].resourceIdentifiers,[a]:n}}}}}case X_:return{...e,...r};case j_:return{...e,templateUrls:{...e.templateUrls,[r.templateType]:r.templateUrl}};default:return e}},tE=(0,r.createContext)({...J_,setCapabilityAcknowledgment:()=>{},clearStacksWizardState:()=>{},setParameterValue:()=>{},setResourceIdentifierValue:()=>{},setStacksWizardState:()=>{},setStacksTemplateUrl:()=>{}}),aE=e=>{let{children:t}=e;const[a,n]=(0,r.useReducer)(eE,J_),s={...a,clearStacksWizardState:()=>n({type:H_}),setCapabilityAcknowledgment:(e,t)=>n({type:Q_,payload:{capability:e,checked:t}}),setParameterValue:e=>n({type:q_,payload:e}),setResourceIdentifierValue:e=>n({type:Y_,payload:e}),setStacksWizardState:e=>n({type:X_,payload:e}),setStacksTemplateUrl:(e,t)=>n({type:j_,payload:{templateType:e,templateUrl:t}})};return r.createElement(tE.Provider,{value:s},t)},rE=()=>{const e=(0,r.useContext)(tE);if(void 0===e)throw new Error("useStacksWizardState must be used within a StacksWizardStateProvider");return e},nE=e=>{let{externalValues:t,isUpdate:a=!1,isChangeSet:r=!1,templateSummary:n}=e;const{changeSetName:s,parameters:i,stackId:l,stackName:o,setStacksWizardState:c}=rE();return{validate:e=>{const d=br(o),u=fr(s),m=ka({externalValues:t,parametersState:i,stackId:l,stackName:o,templateSummary:n}),p=Boolean(m?.failMap?.size);let _=!0;(!a&&d||p)&&(_=!1),(r&&u||p)&&(_=!1),_?e():c({stackNameErrorKey:d,changeSetNameErrorKey:u,parameterErrorKeys:m})}}},sE=e=>{const{roleArn:t,rollbackConfiguration:a,timeoutInMinutes:r,setStacksWizardState:n}=rE();return{validate:s=>{const i=(e=>e?.trim()&&Number(e)<1?g("stack.options_timeout_validation_error"):"")(r),l=(e=>{const t=Number(e);return e?.trim()&&(t<0||t>180)?g("stack.options_rollback_configuration_monitoring_time_minutes_validation"):""})(a?.monitoringTimeInMinutes||""),o=(e=>e&&0!==e?.indexOf("arn:")?g("stack.options_permission_iam_validation_error"):"")(t);e?l||o?n({rollbackConfiguration:{...a,monitoringTimeErrorKey:l},roleArnErrorKey:o}):s():i||l||o?n({timeoutErrorKey:i,rollbackConfiguration:{...a,monitoringTimeErrorKey:l},roleArnErrorKey:o}):s()}}},iE=(e,t,a)=>{const{capabilities:r,parameters:n,stackId:s,stackName:i,setStacksWizardState:l}=rE();return{validate:o=>{const c=br(i),d=kr(r),u=ka({externalValues:t,parametersState:n,stackId:s,stackName:i,templateSummary:e}),m=Boolean(u?.failMap?.size);let p=!0;a&&(c||m)&&(p=!1),d||(p=!1),p?o():l({allChecked:d,parameterErrorKeys:u,stackNameErrorKey:c})}}},lE=()=>{const{templateType:e,templateUrls:t,setStacksWizardState:a}=rE();return{validate:r=>{const n=t[e]?.trim()||"",s=((e,t)=>{if(!t)switch(e){case R.TEXT:return g("stack.template_validation_enter_template");case R.UPLOAD:return g("stack.template_validation_upload_template");case R.EXISTING:return"";default:return g("stack.template_validation_select_template")}return""})(e,n);s?a({templateErrorKey:s}):r()}}},oE=e=>{let{resourcesToSkip:t,stackResource:a,setResourcesToSkip:n}=e;const{displayData:s,isFetching:i,refetch:l}=K_({stackId:a.physicalResourceId,fetchAll:!0,enabled:!1}),o=s?.filter((e=>e.resourceStatus===ct)).map((e=>{const s=`${Na(a.physicalResourceId)}.${e.logicalResourceId}`;return r.createElement(Ys.Z,{key:e.logicalResourceId,"data-testid":`${e.logicalResourceId}-checkbox`,description:r.createElement(q,{resourceId:e.physicalResourceId,resourceType:e.resourceType}),checked:-1!==t.indexOf(s),onChange:e=>{const a=e.detail.checked?[...t,s]:t.filter((e=>e!==s));n(a)}},e.logicalResourceId)}))||[];return r.createElement(Zt.Z,{"data-testid":`${a.logicalResourceId}-expandable-checkbox`,key:a.logicalResourceId,header:r.createElement(Ys.Z,{key:a.logicalResourceId,"data-testid":`${a.logicalResourceId}-checkbox`,description:r.createElement(q,{resourceId:a.physicalResourceId,resourceType:a.resourceType}),checked:-1!==t.indexOf(a.logicalResourceId),onChange:e=>{const r=a.logicalResourceId,s=e.detail.checked?[...t,r]:t.filter((e=>e!==r));n(s)}},a.logicalResourceId),onChange:e=>{e.detail.expanded&&l({throwOnError:!0,cancelRefetch:!0})}},i?r.createElement(vr.Z,null):o)},cE=e=>{let{resourcesToSkip:t,stackId:a,setResourcesToSkip:n}=e;const{displayData:s,isFetching:i}=K_({stackId:a,fetchAll:!0}),l=s?.filter((e=>e.resourceStatus===ct)).map((e=>"AWS::CloudFormation::Stack"===e.resourceType?r.createElement("div",{key:e.logicalResourceId},r.createElement(oE,{resourcesToSkip:t,stackResource:e,setResourcesToSkip:n})):r.createElement(Ys.Z,{key:e.logicalResourceId,"data-testid":`${e.logicalResourceId}-checkbox`,description:r.createElement(q,{resourceId:e.physicalResourceId,resourceType:e.resourceType}),checked:-1!==t.indexOf(e.logicalResourceId),onChange:a=>{const r=e.logicalResourceId,s=a.detail.checked?[...t,r]:t.filter((e=>e!==r));n(s)}},e.logicalResourceId)))||[];return r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{"data-testid":"continue-update-rollback-description"},g("continue_update_rollback_description"),r.createElement(zr,{ariaLabel:"continuing rolling back an update",pathAlias:"continue-rollback-skipresources"})),r.createElement(Zt.Z,{"data-testid":"resource-checkbox-section",headerText:g("advanced_troubleshooting")},i?r.createElement(vr.Z,null):r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,null,g("continue_update_rollback_advanced_description")),r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("resources_to_skip_label"),description:g("resources_to_skip_description")},l)),r.createElement(sn.Z,{type:"warning"},g("continue_update_rollback_alert_content")))))},dE=e=>{const t=Object.keys(e||{}).filter((t=>e[t]));return t.length?{capabilities:t}:{}},uE=e=>Object.keys(e||{}).map((t=>{const{parameterValue:a="",usePreviousValue:r}=e?.[t];return{parameterKey:t,...!r&&{parameterValue:a},...r&&{usePreviousValue:r}}})),mE=e=>({monitoringTimeInMinutes:e?.monitoringTimeInMinutes||null,rollbackTriggers:e?.rollbackTriggers.filter((e=>e.arn.trim()))}),pE=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>!e.markedForRemoval&&e.value)).map((e=>{let{key:t,value:a}=e;return{key:t,value:a}}))},_E=e=>{let{changeSetType:t,wizardState:a,preview:r=!1}=e;const{capabilities:n,changeSetName:s,description:i,includeNestedStacks:l,notificationArns:o,parameters:c,resourcesToImport:d,roleArn:u,rollbackConfiguration:m,stackName:p,tags:_,templateUrls:E,templateType:h}=a;return(r||"IMPORT"===t)&&Object.keys(n||{}).forEach((e=>n[e]=!0)),"IMPORT"===t?{...dE(n),changeSetName:`${p.slice(0,10)}-${ne()}`,changeSetType:t,clientToken:`Console-CreateChangeSet-${se()}`,description:g("resource_import_change_set_desc",p),parameters:uE(c),resourcesToImport:(S=d,Object.keys(S)?.map((e=>({resourceType:S[e].resourceType,logicalResourceId:e,resourceIdentifier:S[e].resourceIdentifiers})))||[]),stackName:p,templateURL:E[h]}:{...dE(n),changeSetName:s||`${p.slice(0,10)}-${ne()}`,changeSetType:t,clientToken:`Console-CreateChangeSet-${se()}`,...i&&{description:i},...fe(A.CSNS)&&{includeNestedStacks:!r&&l},notificationARNs:o?.filter((e=>e.trim()))||[],parameters:uE(c),...u&&{roleARN:u},rollbackConfiguration:mE(m),stackName:p,tags:pE(_),...h!==R.EXISTING&&{templateURL:E[h]},...h===R.EXISTING&&{usePreviousTemplate:!0}};var S},EE=e=>{const{capabilities:t,disableRollback:a,enableTerminationProtection:r,notificationArns:n,parameters:s,roleArn:i,rollbackConfiguration:l,stackName:o,stackPolicyBody:c,stackPolicyOption:d,stackPolicyUrl:u,tags:m,templateUrls:p,templateType:_,timeoutInMinutes:E}=e;return{...dE(t),clientRequestToken:`Console-CreateStack-${se()}`,disableRollback:a,enableTerminationProtection:r,notificationARNs:n?.filter((e=>e.trim()))||[],parameters:uE(s),...i&&{roleARN:i},rollbackConfiguration:mE(l),stackName:o,...d===v.FILE&&u&&{stackPolicyURL:u},...d===v.TEXT&&c&&{stackPolicyBody:c},tags:pE(m),templateURL:p[_],...E&&{timeoutInMinutes:E}}},gE=e=>{let{changeSetType:t,displayNestedStackOptions:a=!1}=e;const n=rE(),{changeSetName:s,changeSetNameErrorKey:i,description:l,includeNestedStacks:o,stackName:c,setStacksWizardState:d}=n;(0,r.useEffect)((()=>{const e=c?`${c.slice(0,10)}-${ne()}`:"";n.setStacksWizardState({changeSetName:e})}),[]);const{setModalType:u}=ls(),{mutate:m,isLoading:p}=C_({}),_=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",variant:"link",onClick:()=>u(null)},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"create-change-set-button",variant:"primary",loading:p,onClick:()=>{const e=fr(s);if(e)d({changeSetNameErrorKey:e});else{const e=_E({wizardState:n,changeSetType:t});m(e),u(null)}}},g("create_change_set_label"))));return r.createElement(Po.Z,{closeAriaLabel:"Close modal","data-testid":"create-change-set-modal",visible:!0,header:g("stack.change_set_modal_header"),footer:_,onDismiss:()=>u(null)},r.createElement(Or.Z,null,r.createElement(z.Z,null,g("stack.change_set_modal_desc")),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("stack.change_set_modal_change_set_name"),constraintText:g("stack.change_set_modal_change_set_name_hint_text"),errorText:i},r.createElement(Vs.Z,{"data-testid":"change-set-name-input",ariaRequired:!0,ariaLabel:"Enter change set name",value:s,placeholder:g("stack.change_set_modal_change_set_name_placeholder"),onChange:e=>d({changeSetName:e.detail.value,changeSetNameErrorKey:""})})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("stack.change_set_modal_change_set_description")},r.createElement(si.Z,{"data-testid":"change-set-description-textarea",ariaRequired:!0,ariaLabel:"Enter change set description",value:l,placeholder:g("stack.change_set_modal_change_set_description_placeholder"),onChange:e=>d({description:e.detail.value})})),a&&r.createElement(Jr,{policy:A.CSNS},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("change_sets_for_nested_stacks")},r.createElement(Ut.Z,{"data-testid":"include-nested-stacks-options",ariaRequired:!0,ariaLabel:"Select include nested stacks option",value:o?"enabled":"disabled",items:[{value:"enabled",label:g("enabled_label"),description:g("enable_include_nested_stacks_description")},{value:"disabled",label:g("disabled_label"),description:g("disable_include_nested_stacks_description")}],onChange:e=>d({includeNestedStacks:"enabled"===e.detail.value})})))))},hE=e=>{let{rootId:t,description:a,selectedTile:n,customActionLabel:s,customContent:i,setSelectedTile:l}=e;const{setModalType:o}=ls(),c=(0,Q.s0)();return r.createElement(Or.Z,{borders:"horizontal"},r.createElement(Es.Z,{direction:"vertical",size:"xs"},a,r.createElement(pi.Z,{"data-testid":"nested-stack-operation-tiles",ariaRequired:!0,ariaLabel:"Select nested stack operation",onChange:e=>l(e.detail.value),value:n,items:[{value:"ROOT_STACK",label:g("nested_stack_root_stack_tile")},{value:"CUSTOM_ACTION",label:s}]}),"ROOT_STACK"===n?r.createElement(z.Z,{margin:{top:"m",bottom:"m"}},r.createElement(Dt,{"data-testid":"root-stack-button",variant:"primary",text:g("root_stack_button"),onClick:()=>{o(null),c(`/stacks/stackinfo?stackId=${encodeURIComponent(t)}`)}})):i||null))},SE=()=>{const[e,t]=(0,r.useState)(""),[a,n]=(0,r.useState)(""),{setModalType:i}=ls(),{mutate:l,isLoading:c}=(()=>{const e=(0,s.I0)(),{refreshData:t}=ts(),a={resource:o.ApiResource.Topics,action:o.ApiAction.Create,xsrfToken:me.xsrfToken,placeholderData:[],onSuccess:a=>{let{topicArn:r}=a;t(),e(He({type:"SUCCESS",content:g("stack.notifications_sns_success",r)}))},onError:t=>{e(He({type:"ERROR",content:g("stack.notifications_sns_error",t.message)}))}};return(0,o.useSDKMutation)(a)})(),d=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",variant:"link",onClick:()=>i(null)},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"create-sns-topic-button",variant:"primary",loading:c,onClick:()=>{l({name:e,email:a}),i(null)}},g("stack.notifications_create_sns_topic"))));return r.createElement(Po.Z,{closeAriaLabel:"Close modal","data-testid":"create-sns-topic-modal",visible:!0,header:g("stack.notifications_create_an_sns_topic"),footer:d,onDismiss:()=>i(null)},r.createElement(Or.Z,null,r.createElement(z.Z,null,g("stack.notifications_sns_topic_desc")),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("stack.notifications_sns_topic_name")},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"sns-topic-name-input",ariaLabel:"Enter SNS topic name",controlId:"topic",value:e,placeholder:g("stack.notifications_sns_topic_name_placeholder"),onChange:e=>t(e.detail.value)})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("stack.notifications_sns_topic_email")},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"sns-topic-email-input",ariaLabel:"Enter SNS email address",controlId:"email",value:a,placeholder:g("stack.notifications_sns_topic_email_placeholder"),onChange:e=>n(e.detail.value)}))))},TE=e=>{let{rootId:t,deleteConfirmationText:a,selectedTile:n,setDeleteConfirmationText:s,setSelectedTile:i}=e;const l=r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,null,r.createElement("span",null,g("delete_stack_description")),r.createElement(zr,{ariaLabel:"deletion policy",pathAlias:"deletion-policy"})),r.createElement(z.Z,{"data-testid":"delete-nested-stack-warning",variant:"strong"},g("delete_nested_stack_warning")),r.createElement(z.Z,null,r.createElement("span",null,g("delete_nested_stack_warning_description")),r.createElement(zr,{ariaLabel:"working with nested stacks",pathAlias:"nested-stacks"}))),o=r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("delete_input_label")},r.createElement(Vs.Z,{"data-testid":"delete-confirmation-input",ariaLabel:"Enter delete confirmation",ariaRequired:!0,controlId:"deleteInput",value:a,placeholder:g("delete_input_placeholder"),onChange:e=>s(e.detail.value)}));return r.createElement(hE,{rootId:t,description:l,customActionLabel:g("delete_nested_stack_tile_label"),customContent:o,selectedTile:n,setSelectedTile:i})},bE=e=>{let{rootId:t}=e;const a=(0,Q.s0)(),{setModalType:n}=ls();return r.createElement(Or.Z,{columns:1,borders:"horizontal"},r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{"data-testid":"delete-nested-tp-stack-warning",variant:"strong"},g("delete_nested_termination_protected_stack_warning")),r.createElement(z.Z,null,r.createElement("span",null,g("delete_nested_termination_protected_stack_description")),r.createElement(zr,{ariaLabel:"deletion policy",pathAlias:"deletion-policy"})),r.createElement(Nr,{id:"root-id",itemKey:g("root_stack_title"),itemValue:t})),r.createElement(z.Z,{margin:{vertical:"s"}},r.createElement(Dt,{"data-testid":"root-stack-button",variant:"primary",text:g("root_stack_button"),onClick:()=>{n(null),a(`/stacks/stackinfo?stackId=${encodeURIComponent(t)}`)}})))},fE=e=>{let{stackId:t,resourcesToRetain:a,setResourcesToRetain:n}=e;const{displayData:s}=K_({stackId:t,fetchAll:!0}),i=s?.filter((e=>"DELETE_FAILED"===e.resourceStatus)).map((e=>{const t=a.findIndex((t=>t.physicalResourceId===e.physicalResourceId))>=0;return r.createElement("li",{key:e.physicalResourceId},r.createElement(Ys.Z,{"data-testid":`checkbox-${e.physicalResourceId}`,checked:t,description:r.createElement(q,{resourceId:e.physicalResourceId,resourceType:e.resourceType}),onChange:t=>{const r=t.detail.checked?[...a,e]:a.filter((t=>t.physicalResourceId!==e.physicalResourceId));n(r)}},e.logicalResourceId))}))||[];return r.createElement(Or.Z,{borders:"horizontal"},r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,null,r.createElement("span",null,g("delete_stack_description")),r.createElement(zr,{ariaLabel:"deletion policy",pathAlias:"deletion-policy"})),r.createElement(sn.Z,{"data-testid":"retain-resources-alert",header:g("delete_retain_resources_alert_header")},r.createElement(Es.Z,{direction:"vertical",size:"m"},r.createElement(z.Z,null,g("delete_retain_resources_alert_description")),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("delete_retain_resources_form_field_label"),description:g("delete_retain_resources_form_field_description")},r.createElement("ul",{className:"cfn-list-unstyled"},i))))))},kE=()=>{const{setModalType:e}=ls();return r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{"data-testid":"delete-tp-stack-message"},r.createElement("span",null,g("delete_termination_protection_attempt")),r.createElement(zr,{ariaLabel:"protecting a stack from being deleted",pathAlias:"stack-protection"})),r.createElement(Dt,{"data-testid":"edit-termination-protection-button",analyticsKey:"stack_action_tp",variant:"primary",text:g("termination_protection_link"),onClick:()=>e(lt.EDIT_TERMINATION_PROTECTION)}))},AE=e=>{let{selectedStack:t,selectedTile:a,resourcesToRetain:n,deleteConfirmationText:s,setDeleteConfirmationText:i,setResourcesToRetain:l,setSelectedTile:o}=e;const{rootId:c,stackId:d,stackStatus:u,stackName:m}=t||{},{data:p,isFetching:_}=y_({stackId:d}),{isFetching:E,refreshData:S}=K_({stackId:d,enabled:"DELETE_FAILED"===u}),{enableTerminationProtection:T}=p||{};return(0,r.useEffect)((()=>{"DELETE_FAILED"===u&&S()}),[]),_||E?r.createElement(vr.Z,null):c&&T?r.createElement(bE,{rootId:c}):T?r.createElement(kE,null):"DELETE_FAILED"===u?r.createElement(fE,{stackId:d,resourcesToRetain:n,setResourcesToRetain:l}):c?r.createElement(TE,{deleteConfirmationText:s,rootId:c,selectedTile:a,setDeleteConfirmationText:i,setSelectedTile:o}):r.createElement(r.Fragment,null,r.createElement(z.Z,{margin:{bottom:"s"}},h("stack.delete_stackset_modal_content",r.createElement("strong",null,m))),r.createElement(sn.Z,{"data-testid":"default-delete-stack-description",statusIconAriaLabel:"Info"},r.createElement("span",null,g("delete_stack_description")),r.createElement(zr,{ariaLabel:"deletion policy",pathAlias:"deletion-policy"})))},IE=e=>{let{changeSetId:t,stackId:a}=e;const[n,s]=(0,r.useState)(!1),{setModalType:i}=ls(),{mutate:l}=x_({stackId:a,onSuccessText:g("changeSets.execute_changeset",t)}),o=Boolean((0,Fp.useIsMutating)()),c=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",variant:"link",onClick:()=>i(null)},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"execute-change-set-button",className:"e2e-test-execute-change-set-button",variant:"primary",loading:o,onClick:()=>{l({changeSetName:t,stackName:a,disableRollback:n,clientRequestToken:`Console-ExecuteChangeSet-${se()}`}),i(null)}},g("execute_change_set_label")))),d=n?"disabled":"enabled";return r.createElement(Po.Z,{closeAriaLabel:"Close modal","data-testid":"execute-change-set-modal",visible:!0,header:g("execute_changeset_modal_label"),footer:c,onDismiss:()=>i(null)},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},controlId:"rollback-option-control","data-analytics-type":"eventDetail","data-analytics":`rollback-on-failure-${d}`,stretch:!0,label:g("rollback_toggle_label"),description:r.createElement(r.Fragment,null,r.createElement("span",null,g("rollback_toggle_description")),r.createElement(zr,{ariaLabel:"stack failure options",pathAlias:"stack-failure-options"}))},r.createElement(Ut.Z,{"data-testid":"rollback-on-failure-radio-group",controlId:"rollback-on-failure-radio-control",name:"rollback-on-failure-radio-control",ariaRequired:!0,items:[{controlId:"enabled",value:"enabled",label:g("rollback_enabled_label"),description:g("rollback_enabled_description")},{controlId:"disabled",value:"disabled",label:g("rollback_disabled_label"),description:g("rollback_disabled_description")}],value:d,onChange:e=>{s("disabled"===e.detail.value)}})))},yE=[{id:"logical-id",header:g("logical_id"),cell:e=>r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(ee,{to:`/stacks/events?stackId=${encodeURIComponent(e?.physicalResourceId)}`},e?.logicalResourceId),r.createElement(bs,{isNested:!0}))},{id:"resource-status",header:g("status"),cell:e=>e?.resourceStatus&&r.createElement(Ns,{status:e.resourceStatus})||"-"},{id:"timestamp",header:g("timestamp"),cell:e=>r.createElement(Ui,{timestamp:e?.timestamp})},{id:"resource-status-reason",header:g("status_reason"),cell:e=>e?.resourceStatusReason&&r.createElement("span",null,e.resourceStatusReason)||"-"}],CE=e=>{let{rootCauseEvent:t}=e;const{setModalType:a}=ls();return r.createElement(Po.Z,{"data-testid":"nested-stack-root-cause-event-modal",visible:!0,closeAriaLabel:"Close modal",size:"large",header:g("root_cause_of_failure"),onDismiss:()=>a(null)},r.createElement(Es.Z,{direction:"vertical",size:"m"},r.createElement(z.Z,null,g("nested_stack_root_cause_description")),r.createElement(Or.Z,{columns:2,borders:"vertical"},yE.map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(t)}))))))},RE=200,vE={Add:"green",Remove:"red",Modify:"blue",Import:"green",Dynamic:"grey"},LE={pageSize:25,wrapLines:!1},PE={isDescending:!0,sortingColumn:{sortingField:"logicalResourceId"}},NE=()=>{const e=os(),t=e.get("changeSetId")||"",a=e.get("stackId")||"",{cachedData:n,displayData:s,isFetching:i,filteringText:l,hasNextPage:c,fetchNextPage:d,refreshData:u,setFilteringText:m}=M_(t,a),p=-1!==n?.status?.indexOf("FAILED"),_=r.createElement(Rr.Z,{counter:!i&&`(${s?.length}${c?"+":""})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{disabled:p,loading:i,onRefresh:u}))},g("changeSets.header_changes")),E=p?r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(sn.Z,{header:g("stack.create_changeset_error"),type:"error"},n?.statusReason)):n?.changes?.length?r.createElement(nl,{onClick:()=>m("")}):r.createElement(ci,{header:g("changeSets.empty_change_list_header"),description:g("changeSets.empty_change_list_description")});return r.createElement(Li,{testId:"change-set-details-changes-table",header:_,resizableColumns:!0,isLoading:i,trackByKey:e=>e?.resourceChange?.logicalResourceId||"",defaultSort:PE,columnDefinitions:[{id:"action",header:g("changeSets.column_label_action"),cell:e=>{let{resourceChange:t}=e;return t.action&&r.createElement(Ts.Z,{color:(a=t.action,vE[a])},t.action)||"-";var a},minWidth:RE,enabled:!0},{id:"logicalResourceId",header:g("changeSets.column_label_logical_id"),cell:e=>{let{resourceChange:t}=e;return fe(A.CSNS)?r.createElement("div",null,r.createElement(Ms,{value:t?.logicalResourceId}),t?.changeSetId&&t?.physicalResourceId?r.createElement("div",null,r.createElement("a",{href:`https://${k.host}/cloudformation/home?region=${(0,o.getRegion)()}#/stacks/changesets/changes?stackId=${encodeURIComponent(t.physicalResourceId)}&changeSetId=${encodeURIComponent(t.changeSetId)}`,title:t.changeSetId},g("view_nested_change_set"))):null):r.createElement(Ms,{value:t.logicalResourceId})},minWidth:RE,enabled:!0},{id:"physicalResourceId",header:g("changeSets.column_label_physical_id"),cell:e=>{let{resourceChange:t}=e;return r.createElement(q,{resourceType:t.resourceType,resourceId:t.physicalResourceId})},minWidth:RE,enabled:!0},{id:"resourceType",header:g("changeSets.column_label_type"),cell:e=>{let{resourceChange:t}=e;return r.createElement(Ms,{value:t.resourceType})},minWidth:RE,enabled:!0},{id:"replacement",header:g("changeSets.column_label_replacement"),cell:e=>{let{resourceChange:t}=e;return r.createElement(Ms,{value:t.replacement})},minWidth:RE,enabled:!0},{id:"module",header:g("registry_module"),cell:e=>{let{resourceChange:t}=e;return t?.moduleInfo?.typeHierarchy&&t?.moduleInfo?.logicalIdHierarchy&&r.createElement(we,{moduleLogicalIdPath:t.moduleInfo.logicalIdHierarchy,moduleTypenamePath:t.moduleInfo.typeHierarchy})||"-"},minWidth:RE,enabled:fe(A.MODULE)},{id:"hookInvocations",header:g("column_label_hook_invocations"),cell:e=>{let{hookInvocationCount:t}=e;return t||"-"},enabled:fe(A.HOOKS)}].filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),preferences:LE,allItems:s,hasPaginationToken:c,fetchMore:d,customEmpty:E,customFilter:r.createElement(pl,{ariaLabel:"Filter changes",placeholder:g("changeSets.search_changes"),filteringText:l,loading:i,filterHandler:e=>{m(e)}})})},OE=[{id:"hookName",header:g("column_label_hook_name"),cell:e=>e?.typeName&&r.createElement(te,{type:"HOOK",typeName:e.typeName},e.typeName)||"-",minWidth:200,sortingField:"typeName"},{id:"resourceLogicalId",header:g("column_label_resource_logical_id"),cell:e=>e?.targetDetails?.resourceTargetDetails?.logicalResourceId||"-",minWidth:200},{id:"resourceType",header:g("registry_resource_type"),cell:e=>e?.targetDetails?.resourceTargetDetails?.resourceType||"-",minWidth:200},{id:"invocationPoint",header:g("column_label_invocation_point"),cell:e=>e?.invocationPoint||"-",minWidth:200},{id:"failureMode",header:g("column_label_failure_mode"),cell:e=>T({type:S.HookFailureMode,value:e?.failureMode||"-"}),minWidth:200},{id:"version",header:g("column_label_version"),cell:e=>e?.typeVersionId?.replace(/^0+/,"")||"-",minWidth:200}],xE={isDescending:!1,sortingColumn:{sortingField:"typeName"}},DE={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:[{label:"",options:OE.map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},wE=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a}=e.tablePreferences.STACK_CHANGE_SET_HOOK_INVOCATIONS;return{wrapLines:t,visibleContent:a,pageSize:50}})),ZE=()=>{const e=(0,s.I0)(),t=os(),a=t.get("changeSetId")||"",n=t.get("stackId")||"",i=(0,s.v9)(wE),{cachedData:l,displayData:c,filteringText:d,isFetching:u,hasNextPage:m,fetchNextPage:p,refreshData:_,setFilteringText:E}=(e=>{let{changeSetId:t,stackId:a,filteringFields:r=[],enabled:n=!0}=e;const s=(0,Q.s0)(),i={resource:o.ApiResource.ChangeSetHooks,action:o.ApiAction.Describe,requestParams:{changeSetName:t,stackName:a},filteringFields:r,xsrfToken:me.xsrfToken,queryOptions:{enabled:n&&Boolean(a)&&Boolean(t)}},l=(0,o.useSDKInfiniteQuery)(i);return es({status:l?.status,error:l?.error,errorText:{errorContent:l?.error?.message},errorHandler:()=>{const{isValidationError:e,code:t,message:a}=l?.error||{};e&&("ChangeSetNotFound"===t||/^stackname must be specified if changesetname is not specified as an arn\.$/i.test(a))&&s("/stacks")}}),l})({changeSetId:a,stackId:n,filteringFields:i?.visibleContent||[]}),h=r.createElement(Rr.Z,{counter:!u&&`(${c?.length}${m?"+":""})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:u,onRefresh:_}))},g("column_label_hook_invocations")),S=l?.hooks?.length?r.createElement(nl,{onClick:()=>E("")}):r.createElement(ci,{header:g("empty_hook_invocations"),description:g("hook_invocations_empty")});return r.createElement(Li,{testId:"hook-invocations-table",trackByKey:null,preferences:i,defaultSort:xE,collectionPreferencesProps:DE,columnDefinitions:OE,isLoading:u,allItems:c,header:h,customEmpty:S,customFilter:r.createElement(pl,{ariaLabel:"Filter hook invocations",placeholder:g("search_hook_invocations"),filteringText:d,loading:u,filterHandler:e=>E(e)}),hasPaginationToken:m,fetchMore:p,onConfirmPreferences:t=>e((e=>Je({preferenceType:N.ChangeSetHookInvocations,preferenceSettings:e}))(t)),stickyHeader:!0,resizableColumns:!0})},UE=e=>{let{capabilities:t=[],loading:a,tableTestId:n="capabilities-list-table"}=e;const s=r.createElement(Rr.Z,{counter:!a&&`(${t.length})`||""},g("changeSets.header_capabilities"));return r.createElement(yi.Z,{"data-testid":n,header:s,loading:a,columnDefinitions:[{id:"name",header:g("stacksList.stackChangeSets.column_label_name"),cell:e=>e,minWidth:200}],trackBy:"",empty:g("changeSets.no_values_submitted"),items:t,resizableColumns:!0})},FE=()=>{const e=os(),t=e.get("changeSetId")||"",a=e.get("stackId")||"",{data:n,isFetching:s}=P_({changeSetId:t,stackId:a}),{capabilities:i,notificationARNs:l,parameters:o,rollbackConfiguration:c,tags:d}=n||{};return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(dl,{loading:s,parameters:o||[],tableTestId:"change-set-details-parameters-table"}),r.createElement(ml,{displayDescription:!0,loading:s,tags:d||[],tableTestId:"change-set-details-tags-table"}),r.createElement(ul,{displayDescription:!0,rollbackConfiguration:c||{}}),r.createElement(Ki,{displayDescription:!0,notificationARNs:l||[]}),r.createElement(UE,{capabilities:i||[],loading:s,tableTestId:"change-set-details-capabilities-list-table"}))},ME=()=>{const e=os(),t=e.get("stackId")||"",a=e.get("changeSetId")||"",{cachedData:n,isFetching:s}=M_(a,t),{changes:i}=n||{},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?JSON.stringify(e,null,2):g("changeSets.no_changeset_details_found")}(i||[]);return r.createElement(Cr.Z,{"data-testid":"change-sets-details-json-changes",header:r.createElement(Rr.Z,null,g("changeSets.tab_label_json"))},s?r.createElement(vr.Z,null):r.createElement(Pr,null,l))},KE=()=>{const e=os(),t=e.get("stackId")||"",a=e.get("changeSetId")||"",{data:n={},isFetching:s}=w_({changeSetId:a,stackId:t,templateStage:"Processed"}),{data:i={},isFetching:l}=w_({changeSetId:a,stackId:t,templateStage:"Original"});return r.createElement(fm,{loading:l||s,processedTemplateBody:n?.templateBody,originalTemplateBody:i?.templateBody})},WE=[{id:"change-set-details-overview-change-set-id",header:g("changeSets.label_id"),cell:e=>e?.changeSetId||"-"},{id:"change-set-details-overview-status",header:g("changeSets.label_status"),cell:e=>e?.status&&r.createElement(Ns,{status:e.status})||"-"},{id:"change-set-details-overview-description",header:g("changeSets.label_description"),cell:e=>e?.description||"-"},{id:"change-set-details-overview-status-reason",header:g("changeSets.label_status_reason"),cell:e=>e?.statusReason||"-"},{id:"change-set-details-overview-creation-time",header:g("changeSets.label_created_time"),cell:e=>r.createElement(Ui,{timestamp:e?.creationTime||""})},{id:"change-set-details-overview-execution-status",header:g("changeSets.label_execution_status"),cell:e=>e?.executionStatus&&r.createElement(Ns,{status:e.executionStatus})||"-"}],zE=()=>{const e=os(),t=e.get("changeSetId")||"",a=e.get("stackId")||"",{data:n,isFetching:s,refreshData:i}=P_({changeSetId:t,stackId:a}),l=WE.map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(n||{})})));return r.createElement(Cr.Z,{"data-testid":"change-sets-details-overview",header:r.createElement(Rr.Z,{actions:r.createElement(Fr,{visible:!0,loading:s,onRefresh:i})},g("changeSets.overview_header"))},r.createElement(Or.Z,{columns:2,borders:"horizontal"},l))},$E={pageSize:25,wrapLines:!0},VE=()=>{const e=(0,Q.s0)(),t=os(),a=t.get("stackId")||"",[n,s]=(0,r.useState)(1),[i,l]=(0,r.useState)("logicalResourceId"),[o,c]=(0,r.useState)(null),d=(0,r.useRef)(),{cachedData:u,displayData:m,filteringText:p,isFetching:_,hasNextPage:E,fetchNextPage:h,setFilteringText:S}=as({stackId:a,fetchAll:!0}),{mutate:T}=rs(o?.logicalResourceId||""),b=(0,Fp.useIsMutating)(),{logicalResourceId:f}=o||{},k=r.createElement(Rr.Z,{actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Dt,{"data-testid":"view-drift-details-button",analyticsKey:"drift_detail_view_resource",text:g("drift.view_drift_details"),disabled:!o,onClick:()=>{t.set("logicalResourceId",f||""),e(`/stacks/drifts/info?${t.toString()}`)}}),r.createElement(Dt,{"data-testid":"detect-stack-resource-drift-button",analyticsKey:"drift_detail_resource_detect",text:g("drift.detect_resource_drift"),loading:Boolean(b),disabled:!o,onClick:()=>T({stackName:a,logicalResourceId:f})})),counter:_?"":E?`(${m.length}+)`:`(${m.length})`},g("drift.resource_drift_status")),I=u?.stackResourceDrifts?.length?r.createElement(nl,{onClick:()=>S("")}):r.createElement(ci,{header:g("stacksList.stackResources.no_resources_found"),description:""});return r.createElement(Li,{testId:"resource-drifts-table",trackByKey:"logicalResourceId",allItems:m,columnDefinitions:[{id:"logicalResourceId",header:g("stacksList.stackResources.column_label_logical_id"),cell:e=>e.logicalResourceId||"-",minWidth:200,sortingField:"logicalResourceId",enabled:!0},{id:"physicalResourceId",header:g("stacksList.stackResources.column_label_physical_id"),cell:e=>r.createElement(q,{resourceType:e.resourceType,resourceId:e.physicalResourceId}),minWidth:200,sortingField:"physicalResourceId",enabled:!0},{id:"resourceType",header:g("stacksList.stackResources.column_label_resource_type"),cell:e=>e.resourceType||"-",minWidth:200,sortingField:"resourceType",enabled:!0},{id:"stackResourceDriftStatus",header:g("stacksList.stackResources.column_label_drift_information"),cell:e=>e?.stackResourceDriftStatus&&r.createElement(Ns,{status:e.stackResourceDriftStatus})||"-",minWidth:200,sortingField:"stackResourceDriftStatus",enabled:!0},{id:"timestamp",header:g("stacksList.stackEvents.column_label_timestamp"),cell:e=>r.createElement(Ui,{timestamp:e.timestamp}),minWidth:200,sortingField:"timestamp",enabled:!0},{id:"module",header:g("registry_module"),cell:e=>e?.moduleInfo?.logicalIdHierarchy&&r.createElement(we,{moduleLogicalIdPath:e.moduleInfo.logicalIdHierarchy,moduleTypenamePath:e.moduleInfo.typeHierarchy})||"-",minWidth:200,sortingField:"module",enabled:fe(A.MODULE)}].filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),customEmpty:I,customFilter:r.createElement(pl,{ariaLabel:"Filter stack resource drifts",filteringText:p,loading:_,placeholder:g("stacksList.stackResources.search_resources"),filterHandler:e=>{d?.current?.setCurrentPageNumber(1),S(e)}}),defaultSort:(y=i,{isDescending:!1,sortingColumn:{sortingField:y}}),header:k,isLoading:_,hasPaginationToken:E,preferences:$E,resizableColumns:!0,selectionType:"single",sortingDisabled:_,selectedItems:o?[o]:[],fetchMore:h,onItemSelect:e=>c(e[0]),onSortingChange:e=>l(e?.sortingField||"logicalResourceId"),setCurrentPage:e=>{n!==e&&s(e)},cfnTableRef:d});var y},GE=[{id:"drift-details-overview-drift-status",header:g("stacksList.stackOverview.label_drift_information"),cell:e=>e.stackDriftStatus&&r.createElement(Ns,{status:e.stackDriftStatus})},{id:"drift-details-overview-drift-timestamp",header:g("stacksList.stackOverview.label_drift_timestamp"),cell:e=>r.createElement(Ui,{timestamp:e.lastCheckTimestamp})}],BE=e=>{let{driftInformation:t,loading:a}=e;const n=GE.map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(t||{})}))),s=a?r.createElement(vr.Z,null):n;return r.createElement(Cr.Z,{"data-testid":"stack-drift-status-section",header:r.createElement(Rr.Z,{description:r.createElement(r.Fragment,null,r.createElement("span",null,g("drift.drift_info_description")),r.createElement(zr,{ariaLabel:"detecting unmanaged configuration changes to stacks and resources",pathAlias:"drift"}))},g("drift.status_section_header"))},r.createElement(Or.Z,{columns:2,borders:"vertical"},s))},HE=()=>{const e=(0,Q.s0)(),t=os().get("stackId")||"",{setModalType:a}=ls(),{isFetching:n}=y_({stackId:t}),s=Boolean((0,Fp.useIsMutating)())||n;return r.createElement(sn.Z,{"data-testid":"debug-failed-stack-alert",type:"warning",header:g("debug_mode_notice_label"),className:"e2e-cfn-debug-info-bar","data-analytics":"debug-mode-banner","data-analytics-type":"eventContext"},r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,null,g("debug_mode_notice_description"),r.createElement(zr,{ariaLabel:"monitor and roll back stack operations",pathAlias:"triggers"})),r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"retry-failed-stack-button","data-analytics":"retry-failed-stack-button","data-analytics-type":"eventDetail",loading:s,onClick:()=>a(lt.RETRY_FAILED_STACK)},g("retry_btn_label")),r.createElement(Ot.Z,{"data-testid":"update-failed-stack-button","data-analytics-type":"eventDetail","data-analytics":"update-failed-stack-button",loading:s,onClick:()=>e(`/stacks/update?stackId=${t}`)},g("update_button_text")),r.createElement(Ot.Z,{"data-testid":"rollback-failed-stack-button","data-analytics":"rollback-failed-stack-button","data-analytics-type":"eventDetail",loading:s,onClick:()=>a(lt.ROLLBACK_STACK)},g("rollback_btn_label")))))},qE=e=>{let{stack:t}=e;const{setModalType:a}=ls(),n=(0,Q.s0)(),{rootId:s,stackId:i="",stackStatus:l=""}=t||{},{mutate:c}=O_({stackId:i}),d={cancelUpdateStack:()=>a(lt.CANCEL_UPDATE_STACK),continueUpdateRollback:()=>a(lt.CONTINUE_UPDATE_ROLLBACK),createChangeSetForCurrentStack:()=>s?a(lt.CREATE_NESTED_STACK_CHANGE_SET):n(`/stacks/changesets/create?${(0,b.stringify)({stackId:i})}`),createStack:()=>n("/stacks/create"),deleteStack:()=>a(lt.DELETE_STACK),driftDetection:()=>{c({stackName:i})},editTerminationProtection:()=>a(lt.EDIT_TERMINATION_PROTECTION),importResourcesIntoNewStack:()=>n("/stacks/create-import-resources"),importResourcesIntoStack:()=>n(`/stacks/update-import-resources?${(0,b.stringify)({stackId:i})}`),updateStack:()=>{s?a(lt.UPDATE_NESTED_STACK):n(`/stacks/update?${(0,b.stringify)({stackId:i})}`)},viewDrifts:()=>n(`/stacks/drifts?${(0,b.stringify)({stackId:i})}`),viewInApplicationManager:()=>{const e=`https://${k.host}/systems-manager/appmanager/internal/cfn-link?region=${(0,o.getRegion)()}&arn=${encodeURIComponent(i)}`;window.open(e,"_blank","noopener,noreferrer")}};return r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Dt,{"data-testid":"delete-stack-button",analyticsKey:"delete_stack",className:"e2e-test-delete-stack-button",text:g("delete_button_text"),disabled:Ua(l),onClick:()=>d.deleteStack()}),r.createElement(Dt,{"data-testid":"update-stack-button",analyticsKey:"update_stack",className:"e2e-test-update-stack-button",text:g("update_button_text"),disabled:wa(l),onClick:()=>d.updateStack()}),r.createElement(lo.Z,{"data-testid":"stack-actions",items:Va(t),disabled:!i,onItemClick:e=>{let{detail:{id:t}}=e;return d[t]()},className:"e2e-test-stack-actions","data-analytics-type":"eventDetail"},g("stack_actions_button_text")),r.createElement(Jr,{policy:A.RESOURCE_IMPORT,renderIfFalse:r.createElement(Dt,{"data-testid":"create-stack-button",analyticsKey:"create_stack",text:g("create_stack_link"),className:"cfn-create-stack-button e2e-test-create-stack-button",onClick:()=>n("/stacks/create")})},r.createElement(lo.Z,{"data-testid":"create-stack-options",className:"e2e-test-stack-create-actions",items:[{id:"createStack",text:g("with_new_resources"),disabled:!1},{id:"importResourcesIntoNewStack",text:g("with_existing_resources"),disabled:!1}],onItemClick:e=>{let{detail:{id:t}}=e;return d[t]()}},g("create_stack_label"))))},YE=()=>{const e=(0,Q.s0)();return r.createElement(z.Z,{"data-testid":"stacks-list-empty",textAlign:"center",color:"inherit"},r.createElement(z.Z,{"data-testid":"no-stacks-header",margin:{bottom:"xxs"},padding:{top:"xs"}},r.createElement("b",null,g("no_stacks"))),r.createElement(z.Z,{"data-testid":"no-stacks-body",color:"text-body-secondary"},g("no_stacks_to_display")),r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(Dt,{"data-testid":"create-stack-button",analyticsKey:"stack_list_empty_create",variant:"primary",text:g("create_stack_link"),onClick:()=>e("/stacks/create")})),r.createElement(z.Z,{margin:{bottom:"m"}},r.createElement(Dt,{"data-testid":"view-get-started-button",analyticsKey:"view_get_started_guide",text:g("view_get_started_guide"),target:"_blank",href:`${k.docsPath}/AWSCloudFormation/latest/UserGuide/GettingStarted.html`})))},XE=[{value:st.ACTIVE,label:g("stack_status_filter_active")},{value:st.COMPLETE,label:g("stack_status_filter_complete")},{value:st.FAILED,label:g("stack_status_filter_failed")},{value:st.DELETED,label:g("stack_status_filter_deleted")},{value:st.IN_PROGRESS,label:g("stack_status_filter_in_progress")}],jE=e=>{let{filteringStatus:t,filteringText:a,gridDefinition:n,loading:s,viewNested:i,onFilterStacksChange:l,onFilteringStatusChange:o,onViewNestedChange:c}=e;return r.createElement($s.Z,{gridDefinition:n},r.createElement(pl,{ariaLabel:"Filter stacks",controlId:"stacks-text-filter",placeholder:g("stacks_master_input_placeholder"),loading:s,filteringText:a,filterHandler:l}),r.createElement(Gs.Z,{"data-testid":"stacks-list-status-filter",ariaRequired:!0,ariaLabel:"Select stack status",controlId:"stacks-status-filter",disabled:s,options:XE,selectedOption:XE.find((e=>e.value===t))||null,onChange:e=>o(e.detail.selectedOption.value)}),r.createElement(z.Z,{margin:{top:"xxs"}},r.createElement(ed.Z,{"data-testid":"stacks-list-view-nested-toggle",controlId:"stacks-nested-filter",checked:i,disabled:s,onChange:e=>c(e.detail.checked)},g("view_nested_toggle_label"))))},QE={[lt.CANCEL_UPDATE_STACK]:e=>{let{selectedStack:t}=e;const{stackId:a,stackName:n}=t,{setModalType:i}=ls(),{mutate:l}=(e=>{const t=(0,s.I0)(),{refreshData:a}=y_({stackId:e,enabled:!1}),r={action:o.ApiAction.CancelUpdate,resource:o.ApiResource.Stacks,method:"POST",xsrfToken:me.xsrfToken,onSuccess:()=>{t(He({content:g("stacksList.cancel_update_stack_initiated",e),type:"INFO"})),a()},onError:e=>{t(He({content:e?.isValidationError&&e?.message||g("stacksList.cancel_update_stack_error"),type:"ERROR"}))}};return(0,o.useSDKMutation)(r)})(a),c=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",variant:"link",onClick:()=>i(null)},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"cancel-update-stack-button",variant:"primary",onClick:()=>{l({stackName:a,clientRequestToken:`Console-CancelUpdateStack-${se()}`}),i(null)}},g("stacksList.cancel_update"))));return r.createElement(Po.Z,{closeAriaLabel:"Close modal","data-testid":"cancel-update-stack-modal",visible:!0,header:g("stacksList.cancel_update_stack_title",n),footer:c,onDismiss:()=>i(null)},r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{variant:"p"},g("stacksList.confirm_cancel_update_stack")),r.createElement(z.Z,{variant:"strong"},n),r.createElement(z.Z,{variant:"p"},g("stacksList.confirm_cancel_update_stack_body"))))},[lt.CONTINUE_UPDATE_ROLLBACK]:e=>{let{selectedStack:t}=e;const a=(0,Q.s0)(),[n,i]=(0,r.useState)([]),{setModalType:l}=ls(),{rootId:c,stackId:d,stackName:u}=t,{mutate:m}=(e=>{const t=(0,s.I0)(),{refreshData:a}=y_({stackId:e,enabled:!1}),r={action:o.ApiAction.ContinueUpdateRollback,resource:o.ApiResource.Stacks,method:"POST",xsrfToken:me.xsrfToken,onSuccess:()=>{t(He({content:g("stacksList.continue_update_rollback_initiate",e),type:"INFO"})),a()},onError:e=>{t(He({content:e?.isValidationError&&e?.message||g("stacksList.continue_update_rollback_error"),type:"ERROR"}))}};return(0,o.useSDKMutation)(r)})(d||""),p=r.createElement(z.Z,{float:"right"},r.createElement(Dt,{"data-testid":"cancel-button",variant:"link",text:g("cancel_label"),onClick:()=>l(null)}),!c&&r.createElement(Dt,{"data-testid":"cont-upd-rollback-stack-button",analyticsKey:"cont_update_rb_modal_ok",variant:"primary",text:g("continue_update_rollback_button_text"),onClick:()=>{m({stackName:d,clientRequestToken:`Console-ContinueUpdateRollback-${se()}`,resourcesToSkip:n}),l(null)}}));return r.createElement(Po.Z,{"data-testid":"cont-upd-rollback-stack-modal",closeAriaLabel:"Close modal",header:g("stacksList.continue_update_rollback_title",u),footer:p,onDismiss:()=>l(null),visible:!0},c?r.createElement(Or.Z,{columns:1,borders:"horizontal"},r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{variant:"strong"},g("continue_update_rollback_nested_stack_warning")),r.createElement(z.Z,null,r.createElement("span",null,g("continue_update_rollback_nested_stack_description")),r.createElement(zr,{ariaLabel:"continuing rolling back an update",pathAlias:"continue-rollback-skipresources"})),r.createElement(Nr,{id:"root-id",itemKey:g("root_stack_title"),itemValue:c})),r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(Dt,{"data-testid":"root-stack-button",variant:"primary",analyticsKey:"navigate_to_root_stack",text:g("root_stack_button"),onClick:()=>{l(null),a(`/stacks/stackinfo?stackId=${encodeURIComponent(c)}`)}}))):r.createElement(cE,{resourcesToSkip:n,stackId:d,setResourcesToSkip:i}))},[lt.CREATE_NESTED_STACK_CHANGE_SET]:e=>{let{selectedStack:t}=e;const a=(0,Q.s0)(),[n,s]=(0,r.useState)("ROOT_STACK"),{setModalType:i}=ls(),{stackId:l,stackName:o,rootId:c}=t,d=r.createElement(z.Z,{float:"right"},r.createElement(Dt,{"data-testid":"cancel-button",analyticsKey:"create_nested_change_set_modal_cancel",variant:"link",text:g("cancel_label"),onClick:()=>i(null)}),!("ROOT_STACK"===n)&&r.createElement(Dt,{"data-testid":"create-nested-change-set-button",analyticsKey:"create_nested_change_set_modal_ok",variant:"primary",text:g("create_stack_changeset_link"),onClick:()=>{a(`/stacks/changesets/create?stackId=${encodeURIComponent(l)}`),i(null)}}));return r.createElement(Po.Z,{"data-testid":"create-nested-change-set-modal",closeAriaLabel:"Close modal",header:g("create_change_set_nested_stack_title",o),footer:d,onDismiss:()=>i(null),visible:!0},r.createElement(hE,{rootId:c,description:r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{variant:"strong"},g("create_change_set_nested_stack_warning")),r.createElement(z.Z,null,r.createElement("span",null,g("create_change_set_nested_stack_description")),r.createElement(zr,{ariaLabel:"working with nested stacks",pathAlias:"nested-stacks"}))),customActionLabel:g("create_change_set_nested_stack_text"),selectedTile:n,setSelectedTile:s}))},[lt.DELETE_STACK]:e=>{let{selectedStack:t}=e;const[a,n]=(0,r.useState)("ROOT_STACK"),[i,l]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),{setModalType:u}=ls(),{rootId:m,stackId:p,stackStatus:_}=t||{},{data:E,isFetching:h}=y_({stackId:p}),{enableTerminationProtection:S}=E||{},{mutate:T}=(e=>{const t=(0,s.I0)(),{refreshData:a}=y_({stackId:e,enabled:!1}),r={action:o.ApiAction.Delete,resource:o.ApiResource.Stacks,method:"DELETE",xsrfToken:me.xsrfToken,onSuccess:()=>{t(He({content:g("stacksList.delete_stack_initiated",e),type:"INFO"})),a()},onError:e=>{t(He({content:e?.isValidationError&&e?.message||g("stacksList.delete_stack_error"),type:"ERROR"}))}};return(0,o.useSDKMutation)(r)})(p||""),b=S||m&&"ROOT_STACK"===a&&"DELETE_FAILED"!==_,f=Boolean(m)&&"DELETE_FAILED"!==_&&"delete"!==i.toLowerCase(),k=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Dt,{"data-testid":"cancel-delete-stack-button",className:"e2e-test-delete-modal-cancel",analyticsKey:"delete_modal_cancel",variant:"link",text:g("cancel_label"),onClick:()=>u(null)}),!b&&r.createElement(Dt,{"data-testid":"delete-stack-button",className:"e2e-test-delete-modal-ok",analyticsKey:"delete_modal_ok",variant:"primary",text:g("delete"),disabled:f,loading:h,onClick:()=>{const e=c.map((e=>e.logicalResourceId));T({stackName:p,clientRequestToken:`Console-DeleteStack-${se()}`,...e?.length&&{retainResources:e}}),u(null)}}));return r.createElement(Po.Z,{"data-testid":"delete-stack-modal",closeAriaLabel:"Close modal",header:g("stacksList.delete_stack_link"),footer:k,onDismiss:()=>u(null),visible:!0},r.createElement(AE,{deleteConfirmationText:i,resourcesToRetain:c,selectedStack:t,selectedTile:a,setDeleteConfirmationText:l,setResourcesToRetain:d,setSelectedTile:n}))},[lt.EDIT_TERMINATION_PROTECTION]:e=>{let{selectedStack:t}=e;const a=(0,Q.s0)(),{rootId:n,stackId:i,stackName:l}=t,{data:c,isFetching:d}=y_({stackId:i}),{enableTerminationProtection:u=!1}=c||{},[m,p]=(0,r.useState)(!1),{setModalType:_}=ls(),{mutate:E}=(e=>{const t=(0,s.I0)(),{refreshData:a}=y_({stackId:e,enabled:!1}),r={action:o.ApiAction.UpdateTerminationProtection,resource:o.ApiResource.Stacks,xsrfToken:me.xsrfToken,onSuccess:()=>{t(He({content:g("stacksList.termination_protection_success",e),type:"SUCCESS"})),a()},onError:a=>{t(He({content:a.isValidationError&&a.message||g("stacksList.termination_protection_failed",e,a.message),type:"ERROR"}))}};return(0,o.useSDKMutation)(r)})(i);(0,r.useEffect)((()=>{d||p(u)}),[d]);const h=n?r.createElement(z.Z,{float:"right"},r.createElement(Dt,{"data-testid":"cancel-button",analyticsKey:"tp_modal_nested_cancel",variant:"link",text:g("cancel_label"),onClick:()=>_(null)})):r.createElement(z.Z,{float:"right"},r.createElement(Dt,{"data-testid":"cancel-button",analyticsKey:"tp_modal_cancel",variant:"link",text:g("cancel_label"),onClick:()=>_(null)}),r.createElement(Dt,{"data-testid":"update-termination-protection-button",analyticsKey:"tp_modal_ok",variant:"primary",className:"e2e-test-term-prot-confirm",text:g("save_termination_protection_label"),onClick:()=>{E({stackName:l,enableTerminationProtection:m}),_(null)}}));return r.createElement(Po.Z,{closeAriaLabel:"Close modal","data-testid":"edit-term-prot-modal",visible:!0,header:r.createElement(Rr.Z,{description:g("termination_protection_description")},g("termination_protection_modal_header",l)),footer:h,onDismiss:()=>_(null)},d?r.createElement(vr.Z,null):n?r.createElement(Or.Z,{columns:1,borders:"horizontal"},r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{variant:"strong"},g("termination_protection_nested_stack_warning")),r.createElement(z.Z,null,r.createElement("span",null,g("termination_protection_nested_stack_description")),r.createElement(zr,{ariaLabel:"protecting a stack from being deleted",pathAlias:"stack-protection"})),r.createElement(Nr,{id:"root-id",itemKey:g("root_stack_title"),itemValue:n})),r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(Dt,{"data-testid":"root-stack-button",variant:"primary",text:g("root_stack_button"),onClick:()=>{_(null),a(`/stacks/stackinfo?stackId=${encodeURIComponent(n)}`)}}))):r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("termination_protection_title")},r.createElement(Ut.Z,{"data-testid":"termination-protection-radio-group",ariaRequired:!0,ariaLabel:"Select termination protection option",value:m?"enabled":"disabled",items:[{value:"disabled",label:g("disabled_label")},{value:"enabled",label:g("enabled_label")}],onChange:e=>p("enabled"===e.detail.value)})))},[lt.RETRY_FAILED_STACK]:e=>{let{selectedStack:t}=e;const a=(0,s.I0)(),{stackId:n,stackName:i}=t,{setModalType:l}=ls(),{mutate:o}=$_({onSuccess:()=>{a(He({type:"INFO",content:g("retry_initiated_message",n)}))}}),c=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",variant:"link",onClick:()=>l(null)},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"retry-failed-stack-button",variant:"primary",onClick:()=>{const{capabilities:e,disableRollback:a,notificationARNs:r,roleARN:n,rollbackConfiguration:s,tags:c,parameters:d}=t||{};o({capabilities:e||[],clientRequestToken:`Console-RetryUpdateStack-${se()}`,...fe(A.PAUSE_AND_RESUME)&&{disableRollback:a},notificationARNs:r||[],parameters:d?.map((e=>{const{parameterKey:t}=e;return{parameterKey:t,usePreviousValue:!0}}))||[],roleARN:n,rollbackConfiguration:s,stackName:i,tags:c||[],usePreviousTemplate:!0}),l(null)}},g("retry_btn_label"))));return r.createElement(Po.Z,{closeAriaLabel:"Close modal","data-testid":"retry-failed-stack-modal",visible:!0,header:g("retry_stack_confirmation_title",i),footer:c,onDismiss:()=>l(null)},g("retry_stack_confirmation_description",n))},[lt.ROLLBACK_STACK]:e=>{let{selectedStack:t}=e;const{stackId:a,stackName:n}=t,{setModalType:i}=ls(),{mutate:l}=(e=>{const t=(0,s.I0)(),{refetch:a}=y_({stackId:e,enabled:!1}),r={action:o.ApiAction.Rollback,resource:o.ApiResource.Stacks,method:"POST",xsrfToken:me.xsrfToken,onSuccess:()=>{t(He({content:g("rollback_initiated_message",e),type:"INFO"})),a({throwOnError:!0,cancelRefetch:!0})},onError:e=>{t(He({content:e?.isValidationError&&e?.message||g("stacksList.continue_update_rollback_error"),type:"ERROR"}))}};return(0,o.useSDKMutation)(r)})(a),c=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",variant:"link",onClick:()=>i(null)},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"rollback-stack-button",variant:"primary",onClick:()=>{l({stackName:a,clientRequestToken:`Console-StackRollback-${se()}`}),i(null)}},g("rollback_btn_label"))));return r.createElement(Po.Z,{closeAriaLabel:"Close modal","data-testid":"rollback-stack-modal",visible:!0,header:g("rollback_stack_confirmation_title",n),footer:c,onDismiss:()=>i(null)},g("rollback_stack_confirmation_description",a))},[lt.UPDATE_NESTED_STACK]:e=>{let{selectedStack:t}=e;const a=(0,Q.s0)(),[n,s]=(0,r.useState)("ROOT_STACK"),{setModalType:i}=ls(),{stackId:l,stackName:o,rootId:c}=t,d=r.createElement(z.Z,{float:"right"},r.createElement(Dt,{"data-testid":"cancel-button",analyticsKey:"nested_update_modal_cancel",variant:"link",text:g("cancel_label"),onClick:()=>i(null)}),!("ROOT_STACK"===n)&&r.createElement(Dt,{"data-testid":"update-nested-stack-button",analyticsKey:"update_nested_modal_ok",variant:"primary",text:g("stacksList.update_stack_link"),onClick:()=>{a(`/stacks/update?stackId=${encodeURIComponent(l)}`),i(null)}}));return r.createElement(Po.Z,{"data-testid":"update-nested-stack-modal",closeAriaLabel:"Close modal",header:g("stacksList.update_stack_title",o),footer:d,onDismiss:()=>i(null),visible:!0},r.createElement(hE,{rootId:c,description:r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(z.Z,{variant:"strong"},g("update_nested_stack_warning")),r.createElement(z.Z,null,r.createElement("span",null,g("update_nested_stack_description")),r.createElement(zr,{ariaLabel:"working with nested stacks",pathAlias:"nested-stacks"}))),customActionLabel:g("update_nested_stack_tile_text"),selectedTile:n,setSelectedTile:s}))}},JE=e=>{let{stack:t}=e;const{modalType:a}=ls(),n=QE[a];return n?r.createElement(n,{selectedStack:t}):null},eg=e=>{let{stackId:t,changeSetId:a,tableValue:n}=e;return r.createElement("span",null,n?r.createElement(ee,{to:`/stacks/changesets/changes?stackId=${encodeURIComponent(t)}&changeSetId=${encodeURIComponent(a)}`},r.createElement(Zs,{text:n})):"-")},tg=()=>[{id:"changeSetName",header:g("stacksList.stackChangeSets.column_label_name"),cell:e=>r.createElement(eg,{stackId:e.stackId,changeSetId:e.changeSetId,tableValue:e.changeSetName}),minWidth:200,enabled:!0},{id:"formattedCreationTime",header:g("stacksList.stackChangeSets.column_label_creation_time"),cell:e=>r.createElement(Ui,{timestamp:e.creationTime}),minWidth:200,enabled:!0},{id:"status",header:g("stacksList.stackChangeSets.column_label_status"),cell:e=>r.createElement(Ns,{status:e.status}),minWidth:200,enabled:!0},{id:"description",header:g("stacksList.stackChangeSets.column_label_description"),cell:e=>e.description||"-",minWidth:200,enabled:!0},{id:"rootChangeSetId",header:g("root_change_set_id"),cell:e=>r.createElement(eg,{stackId:e.stackId,changeSetId:e.rootChangeSetId,tableValue:e.rootChangeSetId}),minWidth:200,enabled:fe(A.CSNS)},{id:"parentChangeSetId",header:g("parent_change_set_id"),cell:e=>r.createElement(eg,{stackId:e.stackId,changeSetId:e.parentChangeSetId,tableValue:e.parentChangeSetId}),minWidth:200,enabled:fe(A.CSNS)}],ag={isDescending:!1,sortingColumn:{sortingField:"formattedCreationTime"}},rg=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a,pageSize:r}=e.tablePreferences.STACK_CHANGE_SETS;return{wrapLines:t,visibleContent:a,pageSize:r}})),ng=()=>{const e=(0,Q.s0)(),t=os().get("stackId")||"",[a,n]=(0,r.useState)(null),{modalType:i,setModalType:l}=ls(),o=(0,s.I0)(),c=(0,s.v9)(rg),{cachedData:d,displayData:u,fetchNextPage:m,filteringText:p,hasNextPage:_,isFetching:E,refetch:h,refreshData:S,setFilteringText:T}=v_({stackId:t,filteringFields:c?.visibleContent||[],enabled:!1}),b=()=>h({throwOnError:!0,cancelRefetch:!0,refetchPage:(e,t)=>0===t});(0,r.useEffect)((()=>{S(),b()}),[]);const{changeSetId:f="",executionStatus:k,rootChangeSetId:I,status:y}=a||{},{mutate:C}=L_({changeSetId:f,stackId:t}),{mutate:R}=x_({stackId:t,onSuccessText:g("changeSets.execute_changeset",f)}),v=Boolean((0,Fp.useIsMutating)()),L=Boolean(I),P=za(y,L),O=Wa(k,L),x=r.createElement(Rr.Z,{counter:`(${u.length}${_?"+":""})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"delete-change-set-button",loading:v,disabled:!P,ariaLabel:"Delete change set",onClick:()=>{mr({eventType:ft.CLICK,eventContext:bt.CHANGE_SETS_TABLE_DELETE_BUTTON_CLICKED,funnel:Rt.CHANGE_SETS}),C({changeSetName:f,stackName:t})}},g("changeSets.delete")),r.createElement(Ot.Z,{"data-testid":"execute-change-set-button",loading:v,disabled:!O,ariaLabel:"Execute change set",onClick:()=>{fe(A.PAUSE_AND_RESUME)?l(lt.EXECUTE_CHANGE_SET):R({changeSetName:f,clientRequestToken:`Console-ExecuteChangeSet-${se()}`,stackName:t})}},g("changeSets.execute")),r.createElement(Zr,{loading:E,onRefresh:()=>{S(),b()}}))},g("change_sets")),D=d?.summaries?.length?r.createElement(nl,{onClick:()=>T("")}):r.createElement(z.Z,{textAlign:"center",color:"inherit"},r.createElement("b",null,g("empty_changesets")),r.createElement(z.Z,{padding:{bottom:"s"},color:"inherit"},g("no_changesets_to_display")),r.createElement(Dt,{"data-testid":"create-change-set-button",analyticsKey:"changeset_list_empty_create",text:g("create_stack_changeset_link"),onClick:()=>{e(`/stacks/changesets/create?stackId=${encodeURIComponent(t)}`)}}));return r.createElement(r.Fragment,null,r.createElement(Li,{testId:"change-sets-list-table",isLoading:E,columnDefinitions:tg().filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),trackByKey:"changeSetName",preferences:c,collectionPreferencesProps:{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:[{label:null,options:tg().filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},defaultSort:ag,hasPaginationToken:_,resizableColumns:!0,customFilter:r.createElement(pl,{ariaLabel:"Filter change sets",placeholder:g("stacksList.stackChangeSets.search_change_sets"),filteringText:p,loading:E,filterHandler:e=>{T(e)}}),customEmpty:D,allItems:u||[],header:x,fetchMore:m,stickyHeader:!0,selectionType:"single",selectedItems:a?[a]:[],onItemSelect:e=>{n(e[0])},onConfirmPreferences:e=>o((e=>Je({preferenceType:N.StackChangeSets,preferenceSettings:e}))(e))}),i===lt.EXECUTE_CHANGE_SET&&r.createElement(IE,{stackId:t,changeSetId:f||""}))},sg=e=>{let{loading:t,selectedStack:a}=e;const{changeSetId:n,lastUpdatedTime:s,stackId:i}=a||{};return r.createElement(Cr.Z,{"data-testid":"last-executed-change-set-section",header:r.createElement(Rr.Z,null,g("changeSets.last_executed_change_set"))},t?r.createElement(vr.Z,null):r.createElement(Or.Z,{columns:2,variant:"text-grid"},r.createElement(Nr,{id:"last-executed-change-set-name",itemKey:g("changeSets.change_set_id"),itemValue:n&&r.createElement(ee,{to:`/stacks/changesets/changes?stackId=${encodeURIComponent(i)}&changeSetId=${encodeURIComponent(n)}`},n)}),r.createElement(Nr,{id:"last-executed-time",itemKey:g("changeSets.execution_time"),itemValue:r.createElement(Ui,{timestamp:s})})))},ig=()=>{const e=os().get("stackId")||"",{data:t,isFetching:a,refetch:n}=y_({stackId:e,enabled:!1});return(0,r.useEffect)((()=>{n({throwOnError:!0,cancelRefetch:!0})}),[]),r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(ng,null),t?.changeSetId&&r.createElement(sg,{loading:a,selectedStack:t})||null)},lg=function(e){let{event:t=null}=e;return t&&t.hookType?r.createElement(xe.Z,{"data-testid":"event-hook-popover",size:"large",dismissButton:!1,position:"bottom",content:r.createElement(r.Fragment,null,r.createElement(z.Z,{padding:{bottom:"m"}},r.createElement(z.Z,{variant:"h3"},g("hook_invocation_details"))),r.createElement(Or.Z,{columns:2},r.createElement(Es.Z,{size:"m"},r.createElement(Nr,{id:"hook-name",itemKey:g("column_label_hook_name"),itemValue:r.createElement(te,{type:"HOOK",typeName:t.hookType},t.hookType)}),r.createElement(Nr,{id:"hook-status",itemKey:g("hook_status"),itemValue:xs({status:t.hookStatus})}),r.createElement(Nr,{id:"hook-failure-mode",itemKey:g("hook_failure_mode"),itemValue:T({type:S.HookFailureMode,value:t.hookFailureMode})})),r.createElement(Es.Z,{size:"m"},r.createElement(Nr,{id:"hook-invocation-point",itemKey:g("hook_invocation_point"),itemValue:t.hookInvocationPoint}),r.createElement(Nr,{id:"hook-status-reason",itemKey:g("hook_status_reason"),itemValue:t.hookStatusReason}))))},t.hookType):r.createElement("span",null,"-")},og="hookInvocations",cg=()=>[{id:"formattedTimestamp",header:g("stacksList.stackEvents.column_label_timestamp"),cell:e=>r.createElement(Ui,{timestamp:e?.timestamp}),sortingField:"timestamp",minWidth:200,enabled:!0},{id:"logicalResourceId",header:g("stacksList.stackEvents.column_label_logical_resource_id"),cell:e=>r.createElement(Ms,{value:e?.logicalResourceId}),minWidth:200,enabled:!0},{id:"resourceStatus",header:g("stacksList.stackEvents.column_label_resource_status"),cell:e=>r.createElement(Es.Z,{direction:"vertical",size:"xs"},r.createElement(Ns,{status:e?.resourceStatus}),e.rootCause&&r.createElement(Ts.Z,{color:"red","data-id":"root-cause-event-badge"},g("likely_root_cause"))),minWidth:200,enabled:!0},{id:"resourceStatusReason",header:g("stacksList.stackEvents.column_label_resource_status_reason"),cell:e=>r.createElement(Ms,{value:e?.resourceStatusReason}),minWidth:200,enabled:!0},{id:"resourceType",header:g("stacksList.stackEvents.column_label_resource_type"),cell:e=>r.createElement(Ms,{value:e?.resourceType}),minWidth:200,enabled:!0},{id:"physicalResourceId",header:g("stacksList.stackEvents.column_label_physical_id"),cell:e=>r.createElement(q,{resourceType:e?.resourceType,resourceId:e?.physicalResourceId}),minWidth:200,enabled:!0},{id:"clientRequestToken",header:g("stacksList.stackEvents.column_label_client_request_token"),cell:e=>r.createElement(Ms,{value:e?.clientRequestToken}),minWidth:200,enabled:!0},{id:"hookInvocations",header:g("column_label_hook_invocations"),cell:e=>r.createElement(lg,{event:e}),minWidth:600,enabled:fe(A.HOOKS)}],dg={isDescending:!0,sortingColumn:{sortingField:"timestamp"}},ug=e=>Je({preferenceType:N.StackEvents,preferenceSettings:e}),mg=(0,Ue.P1)(rl,(e=>{const{visibleContent:t,wrapLines:a}=e.tablePreferences.STACK_EVENTS;return{visibleContent:t,wrapLines:a,pageSize:100}})),pg=()=>{const e=os().get("stackId")||"",t=(0,s.I0)(),a=(0,s.v9)(mg),{modalType:n}=ls(),{cachedEvents:i,describeStackEvents:l,describeStackEventsLoading:o,displayedEvents:c,displayNotFoundAlert:d,error:u,fetchNextPage:m,filteringText:p,hasNextPage:_,isFetchingNextPage:E,rootCauseEvent:h,searchingRootCause:S,resetEventsQuery:T,setDisplayNotFoundAlert:b,setFilteringText:f,setProviderEnabled:k,setSearchingRootCause:I}=(()=>{const e=(0,r.useContext)(G_);if(void 0===e)throw new Error("useEventsData must be used within a EventsDataProvider");return e})(),{data:y,isFetching:C,refetch:R}=y_({stackId:e,enabled:!1}),{stackStatus:v}=y||{};(0,r.useEffect)((()=>{c.some((e=>null!=e.hookType))&&Boolean(a?.visibleContent?.indexOf(og)<0)&&(a.visibleContent.push(og),t(ug(a)))}),[c]),(0,r.useEffect)((()=>(k(!0),R({throwOnError:!0,cancelRefetch:!0}),()=>{k(!1),a?.visibleContent&&(a.visibleContent=a.visibleContent.filter((e=>e!==og)),t(ug(a)))})),[]);const L=i?.length?p&&_?r.createElement(Fs,null):r.createElement(nl,{onClick:()=>f("")}):r.createElement(ci,{header:g("stacksList.stackEvents.no_values_found"),description:""});return r.createElement(Es.Z,{size:"l",direction:"vertical"},d&&!u&&r.createElement(sn.Z,{"data-testid":"root-cause-not-detected-alert"},g("root_cause_not_detected")),r.createElement(Li,{testId:"events-table",header:r.createElement(Rr.Z,{counter:`(${c.length}${_?"+":""})`,actions:r.createElement(Es.Z,{size:"xs",direction:"horizontal"},r.createElement(Jr,{policy:A.ROOT_CAUSE_EVENT},r.createElement(Ot.Z,{"data-testid":"detect-root-cause-button",ariaLabel:"Detect root cause for failed stack",loading:C||S,disabled:-1===rt.indexOf(v),onClick:()=>{b(!1),I(!0)}},g("detect_root_cause"))),r.createElement(Fr,{visible:!0,timeout:6e4,loading:o,disabled:S,onAutoRefresh:()=>{!p&&c?.length<101&&(T(),l({throwOnError:!0,cancelRefetch:!0,refetchPage:(e,t)=>0===t}))},onRefresh:()=>{T(),l({throwOnError:!0,cancelRefetch:!0,refetchPage:(e,t)=>0===t}),R({throwOnError:!0,cancelRefetch:!0})}}))},g("stack.stack_details_events_label")),isLoading:!c?.length&&o,allItems:c,collectionPreferencesProps:{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_select_visible_columns_title"),options:[{label:null,options:cg().filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},columnDefinitions:cg().filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),defaultSort:dg,customEmpty:L,customFilter:r.createElement(pl,{ariaLabel:"Filter stack events",placeholder:g("stacksList.stackEvents.search_events"),filteringText:p,loading:o,filterHandler:e=>{f(e)}}),trackByKey:"",stickyHeader:!0,resizableColumns:!0,sortingDisabled:!0,preferences:{...a,pageSize:c?.length||100},onConfirmPreferences:e=>t(ug(e)),includePagination:!1}),_&&r.createElement(Us,{filteringText:p,onLoadMore:m,nextLoading:E}),n===lt.NESTED_STACK_ROOT_CAUSE_EVENT&&r.createElement(CE,{rootCauseEvent:h}))};var _g=a(19954);const Eg=[{id:"outputKey",header:g("stacksList.stackOutputs.column_label_key"),cell:e=>e.outputKey,minWidth:200,sortingField:"outputKey"},{id:"outputValue",header:g("stacksList.stackOutputs.column_label_value"),cell:e=>r.createElement(_g.Z,null,e.outputValue),minWidth:200,sortingField:"outputValue"},{id:"description",header:g("stacksList.stackOutputs.column_label_description"),cell:e=>e.description||"-",minWidth:200,sortingField:"description"},{id:"exportName",header:g("stacksList.stackOutputs.column_label_export_name"),cell:e=>e.exportName||"-",minWidth:200,sortingField:"exportName"}],gg={isDescending:!1,sortingColumn:{sortingField:"outputKey"}},hg=[{label:null,options:[{id:"outputKey",label:g("stacksList.stackOutputs.column_label_key"),editable:!0,visible:!0},{id:"outputValue",label:g("stacksList.stackOutputs.column_label_value"),editable:!0,visible:!0},{id:"description",label:g("stacksList.stackOutputs.column_label_description"),editable:!0,visible:!0},{id:"exportName",label:g("stacksList.stackOutputs.column_label_export_name"),editable:!0,visible:!0}]}],Sg={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:hg}},Tg=(0,Ue.P1)(rl,(e=>{const{visibleContent:t,wrapLines:a}=e.tablePreferences.STACK_OUTPUTS;return{visibleContent:t,wrapLines:a,pageSize:100}})),bg=()=>{const[e,t]=(0,r.useState)(""),a=(0,s.I0)(),n=(0,s.v9)(Tg),i=os().get("stackId"),{data:{outputs:l=[]}={},isFetching:o,refetch:c}=y_({stackId:i,enabled:!1});(0,r.useEffect)((()=>{c({throwOnError:!0,cancelRefetch:!0})}),[]);const d=l?.filter(fa(e))||[],u=r.createElement(Rr.Z,{counter:o||!d?.length?"":`(${d?.length})`,actions:r.createElement(Zr,{loading:o,onRefresh:()=>c({throwOnError:!0,cancelRefetch:!0})})},g("stack.stack_details_outputs_label")),m=l?.length?r.createElement(nl,{onClick:()=>t("")}):r.createElement(ci,{header:g("stacksList.stackOutputs.empty_outputs_header"),description:g("stacksList.stackOutputs.empty_outputs_description")});return r.createElement(Li,{header:u,isLoading:o,allItems:d,collectionPreferencesProps:Sg,columnDefinitions:Eg,defaultSort:gg,customEmpty:m,customFilter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter stack outputs",filteringPlaceholder:g("stacksList.stackOutputs.search_outputs"),filteringText:e,filteringClearAriaLabel:"Clear stack outputs filter input",disabled:o,onChange:e=>{t(e.detail.filteringText)}}),trackByKey:"outputKey",stickyHeader:!0,resizableColumns:!0,preferences:n,hasPaginationToken:!1,onConfirmPreferences:e=>a((e=>Je({preferenceType:N.StackOutputs,preferenceSettings:e}))(e))})},fg=()=>{const e=os().get("stackId"),{data:{parameters:t=[]}={},isFetching:a,refetch:n}=y_({stackId:e,enabled:!1});return(0,r.useEffect)((()=>{n({throwOnError:!0,cancelRefetch:!0})}),[]),r.createElement(dl,{loading:a,onRefresh:()=>n({throwOnError:!0,cancelRefetch:!0}),parameters:t||[]})};var kg=a(78640);const Ag=()=>[{id:"logicalResourceId",header:g("stacksList.stackResources.column_label_logical_id"),cell:e=>e?.logicalResourceId||"-",minWidth:200,sortingField:"logicalResourceId",enabled:!0},{id:"physicalResourceId",header:g("stacksList.stackResources.column_label_physical_id"),cell:e=>r.createElement(q,{resourceType:e?.resourceType,resourceId:e?.physicalResourceId}),minWidth:200,sortingField:"physicalResourceId",enabled:!0},{id:"resourceType",header:g("stacksList.stackResources.column_label_resource_type"),cell:e=>e?.resourceType||"-",minWidth:200,sortingField:"resourceType",enabled:!0},{id:"resourceStatus",header:g("stacksList.stackResources.column_label_resource_status"),cell:e=>{const t=Boolean(e?.resourceStatusReason),a=t?e.resourceStatusReason:null;return e?.resourceStatus&&r.createElement(Ns,{status:e.resourceStatus,isPopover:t,popoverSize:"medium",popoverPosition:"bottom",popoverContent:a})||"-"},minWidth:200,sortingField:"resourceStatus",enabled:!0},{id:"module",header:g("registry_module"),cell:e=>e?.moduleInfo?.logicalIdHierarchy&&e?.moduleInfo?.typeHierarchy&&r.createElement(we,{moduleLogicalIdPath:e.moduleInfo.logicalIdHierarchy,moduleTypenamePath:e.moduleInfo.typeHierarchy})||"-",minWidth:200,sortingField:"module",enabled:fe(A.MODULE)}],Ig={isDescending:!1,sortingColumn:{sortingField:"logicalResourceId"}},yg=e=>{let{preferences:t,treeViewToggle:a,setTablePreferences:n}=e;const s=os().get("stackId")||"",{refetch:i}=y_({stackId:s,enabled:!1}),{cachedData:l,displayData:o,filteringText:c,isFetching:d,hasNextPage:u,fetchNextPage:m,refreshData:p,refetch:_,setFilteringText:E}=K_({stackId:s,filteringFields:t?.visibleContent||[],enabled:!1}),h=()=>_({throwOnError:!0,cancelRefetch:!0,refetchPage:(e,t)=>0===t});(0,r.useEffect)((()=>{p(),h()}),[]);const S=r.createElement(Rr.Z,{counter:d?"":u?`(${o.length}+)`:`(${o.length})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},a,r.createElement(Zr,{loading:d,onRefresh:()=>{i({throwOnError:!0,cancelRefetch:!0}),p(),h()}}))},g("stack.stack_details_resources_label")),T=l?.stackResourceSummaries?.length?r.createElement(nl,{onClick:()=>E("")}):r.createElement(ci,{header:g("stacksList.stackResources.no_resources_found"),description:""});return r.createElement(Li,{testId:"stack-details-resources-table",trackByKey:"logicalResourceId",preferences:t,defaultSort:Ig,collectionPreferencesProps:{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:[{label:"",options:Ag().filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},columnDefinitions:Ag().filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),isLoading:d,allItems:o||[],header:S,customEmpty:T,customFilter:r.createElement(pl,{ariaLabel:"Filter stack resources",placeholder:g("stacksList.stackResources.search_resources"),filteringText:c,loading:d,filterHandler:e=>E(e)}),hasPaginationToken:u,stickyHeader:!0,resizableColumns:!0,fetchMore:m,onConfirmPreferences:n})},Cg=e=>{let{label:t,children:a}=e;return r.createElement("div",null,r.createElement(z.Z,{variant:"awsui-key-label"},t),r.createElement("div",null,a))},Rg={ADOPTION_FAILED:"error",ADOPTION_COMPLETE:"success",ADOPTION_IN_PROGRESS:"info",CREATE_IN_PROGRESS:"info",CREATE_FAILED:"error",CREATE_COMPLETE:"success",DELETE_IN_PROGRESS:"info",DELETE_FAILED:"error",DELETE_COMPLETE:"success",DELETE_SKIPPED:"info",UPDATE_IN_PROGRESS:"info",UPDATE_FAILED:"error",UPDATE_COMPLETE:"success",UPDATE_COMPLETE_CLEANUP_IN_PROGRESS:"info",IMPORT_FAILED:"error",IMPORT_COMPLETE:"success",IMPORT_IN_PROGRESS:"info",IMPORT_ROLLBACK_IN_PROGRESS:"error",IMPORT_ROLLBACK_FAILED:"error",IMPORT_ROLLBACK_COMPLETE:"error",UPDATE_ROLLBACK_IN_PROGRESS:"error",UPDATE_ROLLBACK_COMPLETE:"error",UPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS:"error",UPDATE_ROLLBACK_FAILED:"error",ROLLBACK_IN_PROGRESS:"error",ROLLBACK_COMPLETE:"error",ROLLBACK_FAILED:"error"},vg=e=>{let{resources:t}=e;return r.createElement(Es.Z,{direction:"vertical",size:"xs"},t.map(((e,a)=>r.createElement(r.Fragment,{key:`${e.parentId}-${e.logicalResourceId}`},r.createElement(z.Z,null,r.createElement($s.Z,{gridDefinition:[{colspan:6},{colspan:6}]},r.createElement(Es.Z,{size:"l"},r.createElement(Cg,{label:g("stacksList.stackResources.column_label_logical_id")},e.logicalResourceId)),r.createElement(Es.Z,{size:"l"},r.createElement(Cg,{label:g("stacksList.stackResources.column_label_resource_status")},r.createElement(qr.Z,{type:Rg?.[e.resourceStatus]},e.resourceStatus)))),e.resourceStatusReason&&r.createElement(z.Z,{margin:{top:"m"}},r.createElement(Cg,{label:g("stacksList.stackResources.column_label_resource_status_reason")},e.resourceStatusReason))),a<t.length-1&&r.createElement("hr",null)))))},Lg=e=>{let{children:t}=e;return r.createElement("div",{style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,overflow:"hidden"}},t)},Pg=()=>[{id:"logicalResourceId",header:g("stacksList.stackResources.column_label_logical_id"),cell:e=>r.createElement(Lg,null,e.displayableName),minWidth:200,sortingField:"logicalResourceId",enabled:!0},{id:"physicalResourceId",header:g("stacksList.stackResources.column_label_physical_id"),cell:e=>e.type===nr.LEAF?r.createElement(q,{resourceType:e.resourceType,resourceId:e.physicalResourceId}):"-",minWidth:200,sortingField:"physicalResourceId",enabled:!0},{id:"resourceType",header:g("stacksList.stackResources.column_label_resource_type"),cell:e=>e.type===nr.LEAF&&e.resourceType?r.createElement(Lg,null,e.resourceType):"-",minWidth:200,sortingField:"resourceType",enabled:!0},{id:"resourceStatus",header:g("stacksList.stackResources.column_label_resource_status"),cell:e=>{if(e?.type===nr.PARENT)return Ng(e);const t=ks?.[e?.resourceStatus]?.MOOD;return t?r.createElement(Ns,{status:e?.resourceStatus,mood:t,isPopover:Boolean(e?.resourceStatusReason),popoverContent:e?.resourceStatusReason,popoverPosition:"bottom"}):"-"},minWidth:200,sortingField:"resourceStatus",enabled:!0},{id:"module",header:g("registry_module"),cell:e=>e?.type===nr.LEAF&&e?.moduleInfo?.logicalIdHierarchy&&e?.moduleInfo?.typeHierarchy&&r.createElement(we,{moduleLogicalIdPath:e.moduleInfo.logicalIdHierarchy,moduleTypenamePath:e.moduleInfo.typeHierarchy})||"-",minWidth:200,sortingField:"module",enabled:fe(A.MODULE)}],Ng=e=>{const t=e?.descendants?.filter((e=>e?.resourceStatus?.endsWith("_FAILED")));if(t.length)return r.createElement(Ns,{status:g("resource_failed",`${t.length}`),mood:"NEGATIVE",isPopover:!0,popoverContent:r.createElement(vg,{resources:t}),popoverSize:"large",popoverPosition:"bottom"});const a=e?.descendants?.filter((e=>e?.resourceStatus?.includes("ROLLBACK")));if(a.length)return r.createElement(Ns,{status:`ROLLBACK RESOURCES: ${a.length}`,mood:"NEGATIVE",isPopover:!0,popoverContent:r.createElement(vg,{resources:a}),popoverSize:"large",popoverPosition:"bottom"});const n=e.descendants.filter((e=>e?.resourceStatus?.endsWith("_IN_PROGRESS")));if(n.length)return r.createElement(Ns,{status:`IN PROGRESS RESOURCES: ${n.length}`,mood:"INFO",isPopover:!0,popoverContent:r.createElement(vg,{resources:n}),popoverSize:"large",popoverPosition:"bottom"});const s=e.descendants.filter((e=>e?.resourceStatus));s?.sort(((e,t)=>(Number(e.lastUpdatedTimestamp)||0)-(Number(t.lastUpdatedTimestamp)||0)));const i=s[s.length-1];return i?r.createElement(Ns,{status:i.resourceStatus,mood:ks?.[i.resourceStatus]?.MOOD}):"-"},Og={isDescending:!1,sortingColumn:{sortingField:"logicalResourceId"}},xg=e=>{let{preferences:t,treeViewToggle:a,setTablePreferences:n}=e;const s=os().get("stackId")||"",{refetch:i}=y_({stackId:s,enabled:!1}),{data:l,isFetching:o,refreshData:c}=w_({stackId:s,templateStage:"Processed"}),{displayData:d,filteringText:u,isFetching:m,refetch:p,refreshData:_,setFilteringText:E}=K_({stackId:s,filteringFields:t?.visibleContent,fetchAll:!0,enabled:!1});(0,r.useEffect)((()=>{_(),p({throwOnError:!0,cancelRefetch:!0})}),[]);const h=m||o,S=(0,r.useMemo)((()=>{const e=new Map;return d?.forEach((t=>{e.set(t?.logicalResourceId,t)})),e}),[d]),T=(0,r.useCallback)((e=>{const t=new Map;return e.map((e=>{const a=S.get(e?.logicalResourceId),r=a?.resourceStatus?.endsWith("FAILED"),n={...e,...a,expanded:r};return t.set(n.id,n),n.type===nr.LEAF&&n.parentId&&or(n.parentId,n,t),n}))}),[S]),b=(0,r.useMemo)((()=>{if(!l?.templateBody)return[];try{const e=function(e){const t=[];return function e(a,r,n){for(const[s,i]of Object.entries(a)){const a=r?`${r}/${s}`:s;s===sr?t.push({id:a,logicalResourceId:i.LogicalId,displayableName:i.LogicalId,parentId:r,type:nr.LEAF}):(t.push({id:a,type:nr.PARENT,displayableName:"_id"===s?i:s,...n?{}:{parentId:r}}),"string"!=typeof i&&e(i,a))}}(e,"",!0),t}(function(e){const t=e.Resources||{},a={};for(const[e,r]of Object.entries(t)){const t=(r.Metadata||{})[ir];if(t){const[,...n]=t.split("/");n?.length>=1&&(r.LogicalId=e,lr(a,n,r))}}return a}(rr({templateBody:l?.templateBody}).parsedJSON));return T(e)}catch{return[]}}),[l?.templateBody,T]);return r.createElement(Sl,{columnDefinitions:Pg().filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),stickyHeaderVerticalOffset:-11,header:{title:g("stack.stack_details_resources_label"),counter:h?void 0:`${d?.length||""}`},filter:{filteringText:u,filteringPlaceholder:g("stacksList.stackResources.search_resources"),filteringClearAriaLabel:"Clear resources filter input",onChange:e=>E(e.detail.filteringText),empty:{title:g("stacksList.stackResources.no_resources_found"),subtitle:""}},items:b,loading:h,onClearFilter:()=>E(""),onRefresh:()=>{_(),p({throwOnError:!0,cancelRefetch:!0}),i({throwOnError:!0,cancelRefetch:!0}),c()},preferences:t,defaultSort:Og,viewSelect:a,visibleContentOptionsGroups:[{label:"",options:Pg().filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}],onConfirmPreferences:e=>n(e)})},Dg=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a}=e.tablePreferences.STACK_RESOURCES;return{wrapLines:t,visibleContent:a,pageSize:100}})),wg=()=>{const e=os().get("stackId")||"",[t,a]=(0,r.useState)(!0),n=(0,s.I0)(),i=(0,s.v9)(Dg),l=e=>n((e=>Je({preferenceType:N.StackResources,preferenceSettings:e}))(e)),{data:o}=w_({stackId:e,templateStage:"Processed"}),c=(0,r.useMemo)((()=>!!o?.templateBody&&function(e){if(!e)return!1;try{const t=rr({templateBody:e}).parsedJSON.Resources||{};return Object.values(t).some((e=>e?.Metadata?.[ir]))}catch(e){}return!1}(o.templateBody)),[o?.templateBody]),d=c?r.createElement(kg.Z,{selectedId:t?"tree":"flat",options:[{text:g("tree_view"),id:"tree"},{text:g("flat_view"),id:"flat"}],onChange:e=>a("tree"===e.detail.selectedId)}):null;return t&&c?r.createElement("div",{"data-testid":"tree-view-resources-table"},r.createElement(xg,{preferences:i,treeViewToggle:d,setTablePreferences:l})):r.createElement(yg,{preferences:i,treeViewToggle:d,setTablePreferences:l})},Zg=()=>{const e=os().get("stackId")||"",{data:t={},isFetching:a,refreshData:n}=y_({stackId:e,shouldAutoRefetch:!0}),{isFetching:s,refreshData:i}=D_({stackId:e}),l=[{id:"stack-id",header:g("stacksList.column_label_stack_id"),cell:e=>r.createElement(r.Fragment,null,r.createElement(Yr,{text:e?.stackId,showLabel:!1}),r.createElement(q,{resourceType:"AWS::CloudFormation::Stack",resourceId:e?.stackId})),enabled:!0},{id:"stack-description",header:g("stacksList.column_label_template_description"),cell:e=>e?.description||"-",enabled:!0},{id:"stack-status",header:g("stacksList.column_label_stack_status"),cell:e=>e?.stackStatus&&r.createElement(Ns,{status:e?.stackStatus})||"-",enabled:!0},{id:"stack-status-reason",header:g("stacksList.column_label_stack_status_reason"),cell:e=>e?.stackStatusReason||"-",enabled:!0},{id:"root-id",header:g("stacksList.stackOverview.label_root_stack"),cell:e=>e?.rootId&&(r.createElement(ee,{to:`/stacks/stackinfo?stackId=${encodeURIComponent(e?.rootId)}`},e?.rootId)||"-"),enabled:!0},{id:"parent-id",header:g("stacksList.stackOverview.label_parent_stack"),cell:e=>e?.parentId&&(r.createElement(ee,{to:`/stacks/stackinfo?stackId=${encodeURIComponent(e?.parentId)}`},e?.parentId)||"-"),enabled:!0},{id:"creation-timestamp",header:g("stacksList.column_label_creation_time"),cell:e=>r.createElement("div",null,r.createElement(z.Z,{margin:{bottom:"m"}},r.createElement(Ui,{timestamp:e?.creationTime})),r.createElement(Nr,{id:"updated-timestamp",itemKey:g("stacksList.column_label_last_updated_time"),itemValue:r.createElement(Ui,{timestamp:e?.lastUpdatedTime})})),enabled:!0},{id:"deletion-timestamp",header:g("stacksList.column_label_delete_time"),cell:e=>r.createElement(Ui,{timestamp:e?.deletionTime}),enabled:!0},{id:"drift-status",header:g("stacksList.column_label_drift_information"),cell:e=>e?.driftInformation?.stackDriftStatus&&r.createElement(Ns,{status:e?.driftInformation?.stackDriftStatus})||"-",enabled:fe(A.DRIFT_DETECTION)},{id:"drift-timestamp",header:g("stacksList.column_label_drift_timestamp"),cell:e=>e?.driftInformation&&r.createElement(Ui,{timestamp:e?.driftInformation?.lastCheckTimestamp})||"-",enabled:fe(A.DRIFT_DETECTION)},{id:"termination-protection",header:g("stacksList.stackOverview.label_termination_protection"),cell:e=>"boolean"==typeof e?.enableTerminationProtection&&r.createElement(ws,{enabled:e?.enableTerminationProtection,hasRootId:Boolean(e?.rootId)}),enabled:!0},{id:"role-arn",header:g("stacksList.stackOverview.label_iam_role"),cell:e=>e?.roleARN||"-",enabled:!0}].filter((e=>e.enabled)).map((e=>r.createElement(Nr,{key:e.id,id:e.id,itemKey:e.header,itemValue:e.cell(t),disabled:Boolean(e.disabled)})));return r.createElement(Cr.Z,{"data-testid":"stack-overview-section",header:r.createElement(Rr.Z,{actions:r.createElement(Zr,{loading:a||s,onRefresh:()=>{n(),i()}})},g("stacksList.stack_tab_overview"))},r.createElement(Or.Z,{columns:2,borders:"horizontal"},l))},Ug=()=>{const e=os().get("stackId")||"",{data:t,isFetching:a}=D_({stackId:e,shouldAutoRefetch:!0}),{stackPolicyBody:n=""}=t||{};return r.createElement(Zt.Z,{"data-testid":"stack-policy-section",headerText:g("stacksList.stackPolicy.stack_policy_header"),headerDescription:g("stack_info_stack_policy_description"),variant:"container"},a?r.createElement(vr.Z,{size:"large"}):n?r.createElement(Pr,null,n):r.createElement(ci,{header:g("stacksList.stackPolicy.empty_stack_policy_header"),description:g("stacksList.stackPolicy.empty_stack_policy_description")}))},Fg=()=>{const e=os().get("stackId")||"",{data:t,isFetching:a,refetch:n}=y_({stackId:e,enabled:!1}),{notificationARNs:s=[],rollbackConfiguration:i={},tags:l=[]}=t||{};return(0,r.useEffect)((()=>{n({throwOnError:!0,cancelRefetch:!0})}),[]),r.createElement(Es.Z,{direction:"vertical",size:"m"},r.createElement(Zg,null),r.createElement(ml,{displayDescription:!0,loading:a,tableTestId:"stack-details-tags",tags:l}),r.createElement(Ug,null),r.createElement(ul,{displayDescription:!0,rollbackConfiguration:i,variant:"expandable"}),r.createElement(Ki,{displayDescription:!0,notificationARNs:s,variant:"expandable"}))},Mg=()=>{const e=os().get("stackId")||"",{data:t={},isFetching:a,refetch:n}=w_({stackId:e,templateStage:"Processed",enabled:!1}),{data:s={},isFetching:i,refetch:l}=w_({stackId:e,templateStage:"Original",enabled:!1});return(0,r.useEffect)((()=>{n({throwOnError:!0,cancelRefetch:!0}),l({throwOnError:!0,cancelRefetch:!0})}),[]),r.createElement(fm,{loading:i||a,originalTemplateBody:s?.templateBody||"",processedTemplateBody:t?.templateBody,stackId:e,onRefresh:()=>{n({throwOnError:!0,cancelRefetch:!0}),l({throwOnError:!0,cancelRefetch:!0})}})},Kg=[{label:g("stack.stack_details_stack_info_label"),id:nt.STACKINFO,content:r.createElement(Fg,null)},{label:g("stack.stack_details_events_label"),id:nt.EVENTS,content:r.createElement(pg,null)},{label:g("stack.stack_details_resources_label"),id:nt.RESOURCES,content:r.createElement(wg,null)},{label:g("stack.stack_details_outputs_label"),id:nt.OUTPUTS,content:r.createElement(bg,null)},{label:g("stack.stack_details_parameters_label"),id:nt.PARAMETERS,content:r.createElement(fg,null)},{label:g("stack.stack_details_template_label"),id:nt.TEMPLATE,content:r.createElement(Mg,null)},{label:g("stack.stack_details_change_sets_label"),id:nt.CHANGESETS,content:r.createElement(ig,null)}],Wg=e=>{let{selectedTabId:t}=e;const a=(0,s.I0)(),n=(0,Q.s0)(),i=os(),l=i.get("stackId")||"",o=(0,s.v9)((e=>e.app.isSplitPanelHidden)),{data:c,isFetching:d}=y_({stackId:l}),{rootId:u,stackName:m,stackStatus:p}=c||{};if((0,r.useEffect)((()=>{a(je(!0))}),[]),(0,r.useEffect)((()=>{var e;(e=l)&&new RegExp(/^(?=arn:).*/).test(e.trim())||d||!c?.stackId||(i.set("stackId",c.stackId),n(`/stacks/${t}?${i.toString()}`))}),[l,d,c?.stackId]),!l)return r.createElement(ci,{header:g("stack_details_empty_header"),description:g("stack_details_empty_description")});const _=r.createElement(r.Fragment,null,("CREATE_FAILED"===p||"UPDATE_FAILED"===p)&&r.createElement(Jr,{policy:A.PAUSE_AND_RESUME},r.createElement(HE,null)),r.createElement(io.Z,{key:l,"data-testid":"stack-details-tabs",ariaLabel:"Stacks detail tabs",tabs:Kg,activeTabId:t,onChange:e=>{n(`/stacks/${e.detail.activeTabId}?${i.toString()}`)}}),r.createElement(JE,{stack:c}));return o?r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{"data-testid":"stack-details-header",variant:"h1",actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"show-stacks-button",ariaLabel:"Show stacks",iconAlign:"left",iconName:"treeview-expand",onClick:()=>a(Qe(!1))},g("stacks_title")),r.createElement(qE,{stack:c||{}}))},r.createElement(z.Z,{variant:"span",fontSize:"heading-xl","data-testid":"full-view-stack-details-header"},m),r.createElement(z.Z,{display:"inline-block","data-testid":"nested-stack-badge",margin:{top:"xs",bottom:"xs",left:"s"}},r.createElement(bs,{isNested:Boolean(u)}))),disableOverlap:!0},_):r.createElement(r.Fragment,null,r.createElement(Rr.Z,{"data-testid":"stack-details-header",variant:"h1",actions:r.createElement(qE,{stack:c||{}})},r.createElement(z.Z,{display:"inline-block","data-testid":"nested-stack-badge",margin:{top:"xs",bottom:"xs",left:"s"}},r.createElement(bs,{isNested:Boolean(u)}))),_)},zg=e=>{let{stack:t}=e;return r.createElement(r.Fragment,null,t?.rootId?r.createElement(r.Fragment,null,r.createElement(z.Z,{"data-testid":"stack-nested-label",margin:"n",color:"text-body-secondary",fontSize:"body-s",display:"block"},r.createElement("b",null,g("nested"))),r.createElement(z.Z,{"data-testid":"stack-nested-stack-name",margin:"n",variant:"span",display:"block"},t?.stackName)):r.createElement("span",{"data-testid":"stack-root-stack-name",title:t?.stackName},t?.stackName),r.createElement(z.Z,{margin:{top:"xs",bottom:"xs"},display:"block",fontSize:"body-s",color:"text-body-secondary"},r.createElement(Ui,{timestamp:t?.creationTime})),t?.stackStatus?r.createElement(z.Z,{margin:"n",display:"block"},r.createElement(Ns,{status:t?.stackStatus})):r.createElement(z.Z,{margin:"n",display:"block"},"-"))},$g=[{id:"stackInfo",header:g("stacks_title"),cell:e=>r.createElement(zg,{stack:e}),minWidth:200,width:250}],Vg=[{label:"",options:[{id:"stackInfo",label:g("stacks_title"),editable:!1}]}],Gg={isDescending:!0,sortingColumn:{sortingField:"creationTime"}},Bg={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:Vg}},Hg={pageSize:100,wrapLines:!0,visibleContent:["stackInfo"]},qg=e=>{let{selectedStack:t,setSelectedStack:a}=e;const[n,i]=(0,r.useState)(1),l=os(),o=l.get("stackId")||"",c=l.get("filteringText")||"",d=l.get("filteringStatus")||st.ACTIVE,u=l.get("viewNested")||"true",{pathname:m}=(0,Q.TH)(),p=(0,Q.s0)(),{selectedTabId:_}=(0,Q.UO)(),E=(0,s.I0)(),h=(0,r.useRef)(),{data:S,isFetching:T}=y_({stackId:o,enabled:!1}),{cachedData:b,displayData:f,hasNextPage:k,isFetching:A,fetchNextPage:I,refreshData:y,setFilteringText:C,updateStackData:R}=z_({filteringFields:["stackName"],filteringStatus:d,viewNested:"true"===u}),v=(e,t)=>{l.set(e,t),p(`${m}?${l.toString()}`,{replace:!0})};(0,r.useEffect)((()=>{c&&C(c)}),[]),(0,r.useEffect)((()=>{C(c)}),[c]),(0,r.useEffect)((()=>{if(f?.length){const e=f?.find((e=>e?.stackId===o))||null;e&&(a(e),h?.current?.setSelection([e]))}}),[f?.length,o]),(0,r.useEffect)((()=>{o&&!T&&R(S||{})}),[o,T]);const L=b?.stackSummaries?.length?r.createElement(nl,{onClick:()=>v("filteringText","")}):d!==st.ACTIVE?r.createElement(nl,{onClick:()=>{l.set("filteringText",""),l.set("filteringStatus",st.ACTIVE),l.set("viewNested","true"),p(`${m}?${l.toString()}`,{replace:!0})}}):r.createElement(YE,null);return r.createElement(ln,{errorKey:"stacks_master_error"},r.createElement(Li,{testId:"stacks-main",isLoading:A,columnDefinitions:$g,allItems:f,resizableColumns:!0,enableRowSelection:!0,header:r.createElement(Rr.Z,{"data-testid":"stacks-main-header",counter:`(${f.length}${k?"+":""})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Fr,{visible:!0,loading:A,onAutoRefresh:()=>{!c&&f?.length<101&&y()},onRefresh:y})),variant:"awsui-h1-sticky"},r.createElement(Ot.Z,{"data-testid":"hide-stacks-button",ariaLabel:"Hide stacks",iconName:"treeview-collapse",variant:"icon",onClick:()=>E(Qe(!0))}),g("stacks_title")),customEmpty:L,selectedItems:t?[t]:[],onItemSelect:e=>{o!==(e?.[0]?.stackId||"")&&(E(je(!0)),a(e?.[0]||null),l.set("stackId",e?.[0]?.stackId),p(`/stacks/${_}?${l.toString()}`))},trackByKey:"stackId",selectionType:"single",defaultSort:Gg,sortingDisabled:!0,fetchMore:I,setCurrentPage:e=>{n!==e&&i(e)},hasPaginationToken:k,preferences:Hg,collectionPreferencesProps:Bg,onConfirmPreferences:null,customFilter:r.createElement(jE,{gridDefinition:[{colspan:{default:12,xs:8}},{colspan:{default:6,xs:2}},{colspan:{default:6,xs:2}}],filteringStatus:d,filteringText:c,loading:A,viewNested:"true"===u,onFilterStacksChange:e=>{h?.current?.setCurrentPageNumber(1),v("filteringText",e)},onFilteringStatusChange:e=>{h?.current?.setCurrentPageNumber(1),v("filteringStatus",e)},onViewNestedChange:e=>{h?.current?.setCurrentPageNumber(1),v("viewNested",e?"true":"false")}}),cfnTableRef:h,variant:"full-page",stickyHeader:!0}))},Yg=_r((e=>{let{selectedStack:t,setSelectedStack:a}=e;const n=(0,s.v9)((0,Ue.P1)((e=>e.app),(e=>e.isSplitPanelHidden))),{selectedTabId:i}=(0,Q.UO)(),{pathname:l}=(0,Q.TH)(),o=(0,Q.s0)(),c=os(),d=c.get("filteringText")||"",u=c.get("filteringStatus")||"",m=c.get("viewNested")||"";return(0,r.useEffect)((()=>{d&&u&&m||(!d&&c.set("filteringText",""),!u&&c.set("filteringStatus",st.ACTIVE),!m&&c.set("viewNested","true"),o(`${l}?${c.toString()}`,{replace:!0}))}),[]),n?r.createElement(Wg,{selectedTabId:i}):r.createElement(qg,{selectedStack:t,setSelectedStack:a})}),Tt.STACK_DETAILS),Xg=()=>[{id:"stackName",header:g("stacksList.column_label_stack_name"),cell:e=>{const t=os();return t.set("stackId",e?.stackId),r.createElement("span",{title:e?.stackName},r.createElement(ee,{to:`/stacks/stackinfo?${t.toString()}`},e?.stackName),r.createElement(z.Z,{margin:{left:"s"}},r.createElement(bs,{isNested:Boolean(e?.rootId)})))},minWidth:200,width:300,enabled:!0},{id:"stackId",header:g("stacksList.column_label_stack_id"),cell:e=>r.createElement(Ms,{value:e?.stackId}),minWidth:200,width:250,enabled:!0},{id:"stackStatus",header:g("stacksList.column_label_stack_status"),cell:e=>e?.stackStatus&&r.createElement(Ns,{status:e.stackStatus})||"-",minWidth:200,width:250,enabled:!0},{id:"creationTime",header:g("stacksList.column_label_creation_time"),cell:e=>r.createElement(Ui,{timestamp:e?.creationTime}),minWidth:200,width:250,sortingField:"creationTime",enabled:!0},{id:"lastUpdatedTime",header:g("stacksList.column_label_last_updated_time"),cell:e=>r.createElement(Ui,{timestamp:e?.lastUpdatedTime}),minWidth:200,width:250,enabled:!0},{id:"deletionTime",header:g("stacksList.column_label_delete_time"),cell:e=>r.createElement(Ui,{timestamp:e.deletionTime}),minWidth:200,width:250,enabled:!0},{id:"driftStatus",header:g("stacksList.column_label_drift_information"),cell:e=>e?.driftInformation?.stackDriftStatus&&r.createElement(Ns,{status:e.driftInformation.stackDriftStatus})||"-",minWidth:200,width:250,enabled:fe(A.DRIFT_DETECTION)},{id:"driftTimestamp",header:g("stacksList.column_label_drift_timestamp"),cell:e=>e?.driftInformation&&r.createElement(Ui,{timestamp:e?.driftInformation?.lastCheckTimestamp})||"-",minWidth:200,width:250,enabled:fe(A.DRIFT_DETECTION)},{id:"stackStatusReason",header:g("stacksList.column_label_stack_status_reason"),cell:e=>r.createElement(Ms,{value:e?.stackStatusReason}),minWidth:200,width:250,enabled:!0},{id:"templateDescription",header:g("stacksList.column_label_template_description"),cell:e=>r.createElement(Ms,{value:e?.templateDescription}),minWidth:200,width:250,enabled:!0}],jg={isDescending:!0,sortingColumn:{sortingField:"creationTime"}},Qg=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a,pageSize:r}=e.tablePreferences.STACKS;return{wrapLines:t,visibleContent:a,pageSize:r}})),Jg=_r((e=>{let{selectedStack:t,setSelectedStack:a}=e;const[n,i]=(0,r.useState)(1),l=os(),o=l.get("stackId")||"",c=l.get("filteringText")||"",d=l.get("filteringStatus")||"",u=l.get("viewNested")||"",m=(0,s.I0)(),p=(0,Q.s0)(),{pathname:_,search:E}=(0,Q.TH)(),h=(0,s.v9)(Qg),S=(0,r.useRef)(),{cachedData:T,displayData:b,hasNextPage:f,isFetching:k,fetchNextPage:A,refreshData:I,setFilteringText:y}=z_({filteringFields:["stackName"],filteringStatus:d,viewNested:"true"===u}),C=e=>{a(e),S?.current?.setSelection(e?[e]:[])},R=(e,t)=>{l.set(e,t),p(`${_}?${l.toString()}`,{replace:!0})},v=()=>{C(null),l.set("filteringText",""),l.set("filteringStatus",st.ACTIVE),l.set("viewNested","true"),p(`${_}?${l.toString()}`,{replace:!0})};(0,r.useEffect)((()=>{c&&d&&u||(!c&&l.set("filteringText",""),!d&&l.set("filteringStatus",st.ACTIVE),!u&&l.set("viewNested","true"),p(`${_}?${l.toString()}`,{replace:!0}))}),[]),(0,r.useEffect)((()=>{y(c)}),[c]),(0,r.useEffect)((()=>{E||(!c&&l.set("filteringText",""),!d&&l.set("filteringStatus",st.ACTIVE),!u&&l.set("viewNested","true"),p(`${_}?${l.toString()}`,{replace:!0}))}),[E]),(0,r.useEffect)((()=>{if(!k&&o&&b?.length){const e=b?.find((e=>e?.stackId===o))||null;e?C(e):p("/stacks")}else C(null)}),[o,k,b?.length]);const L=r.createElement(Rr.Z,{"data-testid":"stacks-list-table-header",counter:`(${b?.length}${f?"+":""})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Fr,{visible:!0,loading:k,onAutoRefresh:()=>{!c&&b?.length<101&&I()},onRefresh:I}),r.createElement(qE,{stack:t})),variant:"awsui-h1-sticky"},g("stacks_title")),P=T?.stackSummaries?.length?r.createElement(nl,{onClick:()=>R("filteringText","")}):d!==st.ACTIVE?r.createElement(nl,{onClick:()=>v()}):r.createElement(YE,null);return r.createElement(r.Fragment,null,r.createElement(Li,{testId:"stacks-list-table",isLoading:k,columnDefinitions:Xg().filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),allItems:b,keepSelection:!1,resizableColumns:!0,stickyHeader:!0,header:L,customEmpty:P,selectedItems:t?[t]:[],onItemSelect:e=>{a(e?.[0]||null),l.set("stackId",e?.[0]?.stackId),p(`/stacks?${l.toString()}`)},trackByKey:"stackId",selectionType:"single",defaultSort:jg,sortingDisabled:!0,fetchMore:A,setCurrentPage:e=>{n!==e&&i(e)},hasPaginationToken:f,preferences:h,collectionPreferencesProps:{title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:[{label:"",options:Xg().filter((e=>e.enabled)).map((e=>{let{id:t,header:a}=e;return{id:t,label:a,editable:!0}}))}]}},onConfirmPreferences:e=>{m((e=>Je({preferenceType:N.Stacks,preferenceSettings:e}))(e))},customFilter:r.createElement(jE,{gridDefinition:[{colspan:{default:12,xxs:12,xs:8}},{colspan:{default:12,xxs:6,xs:2}},{colspan:{default:12,xxs:6,xs:2}}],filteringStatus:d,filteringText:c,loading:k,viewNested:"true"===u,onFilterStacksChange:e=>{o&&v(),S?.current?.setCurrentPageNumber(1),R("filteringText",e)},onFilteringStatusChange:e=>{o&&v(),S?.current?.setCurrentPageNumber(1),R("filteringStatus",e)},onViewNestedChange:e=>{o&&v(),S?.current?.setCurrentPageNumber(1),R("viewNested",e?"true":"false")}}),cfnTableRef:S,variant:"full-page"}),r.createElement(JE,{stack:t}))}),Tt.STACK_LIST),eh=()=>{const[e,t]=(0,r.useState)(null);return r.createElement(aE,null,r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:":selectedTabId",element:r.createElement(Yg,{selectedStack:e,setSelectedStack:t})}),r.createElement(Q.AW,{path:"*",element:r.createElement(Jg,{selectedStack:e,setSelectedStack:t})})))},th=()=>{const{changeSetName:e,changeSetNameErrorKey:t,description:a,setStacksWizardState:n}=rE();return r.createElement(Cr.Z,{"data-testid":"change-set-overview-container",header:r.createElement(Rr.Z,null,g("changeSets.overview_header"))},r.createElement(Or.Z,null,r.createElement(z.Z,null,g("stack.change_set_modal_desc")),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("stack.change_set_modal_change_set_name"),constraintText:g("stack.change_set_modal_change_set_name_hint_text"),errorText:t},r.createElement(Vs.Z,{"data-testid":"change-set-name-input",ariaRequired:!0,ariaLabel:"Enter change set name",value:e,placeholder:g("stack.change_set_modal_change_set_name_placeholder"),onChange:e=>n({changeSetName:e.detail.value,changeSetNameErrorKey:""})})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},stretch:!0,label:g("stack.change_set_modal_change_set_description")},r.createElement(si.Z,{"data-testid":"change-set-description-textarea",ariaRequired:!0,ariaLabel:"Enter change set description",value:a,placeholder:g("stack.change_set_modal_change_set_description_placeholder"),onChange:e=>n({description:e.detail.value})}))))},ah=()=>{const{stackName:e,stackNameErrorKey:t,setStacksWizardState:a}=rE();return r.createElement(Cr.Z,{"data-testid":"stack-name-container",header:r.createElement(Rr.Z,null,g("stack.stack_name_label"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.stack_name_label"),constraintText:g("stack.details_step_stackname_hint"),errorText:t,stretch:!0},r.createElement(Vs.Z,{ariaRequired:!0,ariaLabel:"Enter stack name",className:"e2e-stack-name-input","data-testid":"stack-name-input",controlId:"stackName",value:e,placeholder:g("stack.details_step_stackname_input_placeholder"),onChange:e=>a({stackName:e.detail.value,stackNameErrorKey:""})}))))},rh=e=>{let{externalValues:t,loading:a}=e;const{parameters:n,parameterErrorKeys:s,parameterGroups:i,parametersNotInAParameterGroup:l,setParameterValue:o}=rE();if(a)return r.createElement(vr.Z,null);const c=Boolean(Object.keys(n).length);return r.createElement(Cr.Z,{"data-testid":"stack-parameters-form",header:r.createElement(Rr.Z,{description:g("stack.parameters_description")},g("stack.parameters_header"))},c?r.createElement(mi,{externalValues:t,parameterErrorKeys:s,parameterGroups:i,parameters:n,parametersNotInAParameterGroup:l,setParameterValue:o}):r.createElement(ci,{header:g("stacksList.stackParameters.empty_parameters_header"),description:g("stacksList.stackParameters.empty_parameters_description")}))},nh=e=>{let{setActiveStepIndex:t}=e;const a=(0,Q.TH)(),n=(0,Q.s0)(),s=os().get("stackId")||"",{previousTemplateSource:i,templateType:l,templateUrls:c,setStacksWizardState:d}=rE(),{data:u,isFetching:m}=y_({stackId:s}),{data:p={},isFetching:_}=Z_({...l===R.EXISTING?{stackId:s}:{templateURL:c[l]},enabled:!m,errorHandler:()=>{t(0)}});(0,r.useEffect)((()=>{a?.search&&n(`${a.pathname}?stackId=${encodeURIComponent(s)}`,{replace:!0})}),[]),(0,r.useEffect)((()=>{const e=l===R.EXISTING?s:c[l];if(!_&&!m&&i!==e){const t=Qi({detailsParameters:u?.parameters||[],templateSummary:p}),a=tl(p?.capabilities||[]);d({...t,capabilities:a,description:p?.description||"",previousTemplateSource:e})}}),[_,m]);const E=Ji(p?.parameters,L),{externalValues:g={}}=(0,o.useListExternalValues)({uniqueAWSTypes:E,xsrfToken:me.xsrfToken});if(_)return r.createElement(vr.Z,null);const h=_||m;return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(th,null),r.createElement(rh,{externalValues:g,loading:h}))},sh=()=>{const{includeNestedStacks:e,setStacksWizardState:t}=rE();return r.createElement(Zt.Z,{"data-testid":"change-set-options",variant:"container",headerText:g("stack.stack_details_change_sets_label")},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("change_sets_for_nested_stacks"),description:r.createElement(z.Z,{color:"text-body-secondary",fontSize:"body-s"},g("change_sets_nested_stacks_description"),r.createElement(wr,{ariaLabel:"creating change sets for all nested stacks specified in your template",fontSize:"body-s",pathName:"change-sets-for-nested-stacks"})),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,"data-testid":"include-nested-stacks-tiles",ariaLabel:"Select include nested stacks",items:[{label:g("enabled_label"),description:g("enable_include_nested_stacks_description"),value:"enabled"},{label:g("disabled_label"),description:g("disable_include_nested_stacks_description"),value:"disabled"}],value:e?"enabled":"disabled",onChange:e=>t({includeNestedStacks:"enabled"===e.detail.value})}))))},ih=[{label:g("stack.options_permission_use_existing_role_tile_label"),value:"EXISTING"},{label:g("stack.options_permission_change_iam_role_tile_label"),value:"CHANGE"}],lh=e=>{let{isUpdate:t=!1}=e;const{roleArn:a,roleType:n,roleArnErrorKey:s,setStacksWizardState:i}=rE(),l=r.createElement("div",null,r.createElement(Hs,{iamRole:{arn:a},setIamRole:e=>i({roleArn:e?.arn||"",roleArnErrorKey:""})}),r.createElement("div",{key:"iam-role-alert"},a?.trim()&&r.createElement(z.Z,{margin:{vertical:"l"}},r.createElement(sn.Z,{"data-testid":"iam-role-alert",type:"warning"},g("stack.options_permission_iam_notes")))));return r.createElement(Cr.Z,{"data-testid":"permissions",header:r.createElement(Rr.Z,null,g("stack.options_permission_header"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},"data-testid":"iam-role-form-field",label:g("stack.options_permissions_field_header"),description:g("stack.options_permissions_field_desc"),stretch:!0,errorText:s},t?r.createElement(Es.Z,{size:"xxs"},r.createElement(pi.Z,{ariaRequired:!0,"data-testid":"iam-role-type-tiles",value:n,items:ih,onChange:e=>i({roleType:e.detail.value,roleArnErrorKey:""})}),"CHANGE"===n&&l):l)))},oh=()=>{const[e,t]=(0,r.useState)(!1),{rollbackConfiguration:a,setStacksWizardState:n}=rE(),{monitoringTimeErrorKey:s,monitoringTimeInMinutes:i,rollbackTriggers:l}=a;(0,r.useEffect)((()=>{s&&t(!0)}),[s]);const o=e=>{n({rollbackConfiguration:{...a,rollbackTriggers:e}})};return r.createElement(Zt.Z,{"data-testid":"rollback-configuration",variant:"container",headerText:g("stack.options_rollback_configuration_rollbacks_label"),headerDescription:g("stack.options_rollback_configuration_rollbacks_label_desc"),expanded:e,onChange:e=>t(e.detail.expanded)},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.options_rollback_configuration_monitoring_time"),description:g("stack.options_rollback_configuration_monitoring_time_desc"),errorText:s},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"monitoring-time-input",ariaLabel:"Enter monitoring time in minutes",controlId:"rollback-configuration-monitoring-time-in-minutes",placeholder:g("stack.options_rollback_configuration_monitoring_time_minutes"),type:"number",value:i,onChange:e=>n({rollbackConfiguration:{rollbackTriggers:l,monitoringTimeInMinutes:e.detail.value,monitoringTimeErrorKey:""}})})),r.createElement(ep.Z,{"data-testid":"rollback-triggers-editor",onAddButtonClick:()=>o([...l,{type:"AWS::CloudWatch::Alarm",arn:""}]),onRemoveButtonClick:e=>{const t=l.slice();t.splice(e.detail.itemIndex,1),o(t)},items:l,definition:[{label:g("stack.options_rollback_configuration_label"),control:(e,t)=>r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":`rollback-trigger-input-${t}`,ariaLabel:"Enter a CloudWatch alarm ARN",placeholder:g("stack.options_rollback_configuration_arn"),value:e.arn,onChange:e=>{const a=l.slice();a.splice(t,1,{arn:e.detail.value,type:"AWS::CloudWatch::Alarm"}),o(a)}})}],addButtonText:g("stack.options_rollback_configuration_add_alarm_button"),removeButtonText:g("remove_item_button_label"),disableAddButton:5===l.length,isItemRemovable:()=>l.length>1})))},ch=()=>{const[e,t]=(0,r.useState)(!1),{disableRollback:a,enableTerminationProtection:n,timeoutErrorKey:s,timeoutInMinutes:i,setStacksWizardState:l}=rE();return(0,r.useEffect)((()=>{s&&t(!0)}),[s]),r.createElement(Zt.Z,{"data-testid":"stack-creation-options",headerText:g("stack.options_stack_creation_options_header"),variant:"container",expanded:e,onChange:e=>t(e.detail.expanded)},r.createElement(Or.Z,null,!fe(A.PAUSE_AND_RESUME)&&r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.options_rollback_on_failure_label"),description:g("stack.options_rollback_on_failure_description")},r.createElement(Ut.Z,{ariaRequired:!0,"data-testid":"rollback-on-failure-radio-group",value:a?"disabled":"enabled",items:[{value:"enabled",label:g("enabled_label")},{value:"disabled",label:g("disabled_label")}],onChange:e=>l({disableRollback:"disabled"===e.detail.value})})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},errorText:s,label:g("stack.options_timeout_label"),description:g("stack.options_timeout_description")},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"timeout-in-minutes-input",type:"number",value:i,placeholder:g("stack.options_minutes_placeholder"),onChange:e=>l({timeoutInMinutes:e.detail.value,timeoutErrorKey:""})})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("termination_protection_title"),description:g("stack.options_termination_protection_description")},r.createElement(Ut.Z,{ariaRequired:!0,"data-testid":"termination-protection-radio-group",value:n?"enabled":"disabled",items:[{value:"disabled",label:g("disabled_label")},{value:"enabled",label:g("enabled_label")}],onChange:e=>l({enableTerminationProtection:"enabled"===e.detail.value})}))))},dh=()=>{const{disableRollback:e,setStacksWizardState:t}=rE();return r.createElement(Cr.Z,{"data-testid":"stack-failure-options",header:r.createElement(Rr.Z,null,g("rollback_section_label"))},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},controlId:"rollback-toggle-control",label:g("rollback_toggle_label"),description:r.createElement(r.Fragment,null,r.createElement("span",null,g("rollback_toggle_description")),r.createElement(wr,{ariaLabel:"stack failure options",pathName:"stack-failure-options"}))},r.createElement(Ut.Z,{"data-testid":"behavior-on-failure-radio-group",ariaLabel:"Select behavior on failure",ariaRequired:!0,name:"rollback-on-failure-radio-control",controlId:"rollback-on-failure-radio-control",value:e?"DISABLED":"ENABLED",items:[{controlId:"rollback-on-failure-enabled",value:"ENABLED",label:g("rollback_enabled_label"),description:g("rollback_enabled_description")},{controlId:"rollback-on-failure-disabled",value:"DISABLED",label:g("rollback_disabled_label"),description:g("rollback_disabled_description")}],onChange:e=>t({disableRollback:"DISABLED"===e.detail.value})}))))},uh=function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((t=>!e.includes(t.topicArn))).map((e=>({value:e.topicArn,label:e.topicArn})))},mh=()=>{const[e,t]=(0,r.useState)(!1),{modalType:a,setModalType:n}=ls(),{data:{topics:s=[]}={}}=ts(),{notificationArns:i,setStacksWizardState:l}=rE(),o=e=>{l({notificationArns:e})};return r.createElement("div",null,r.createElement(Zt.Z,{"data-testid":"stack-notifications",variant:"container",headerText:g("stack.options_notifications_header"),expanded:e,onChange:e=>t(e.detail.expanded)},r.createElement(Es.Z,{size:"m"},r.createElement(ep.Z,{onAddButtonClick:()=>o([...i,""]),onRemoveButtonClick:e=>{const t=i.slice();t.splice(e.detail.itemIndex,1),o(t)},items:i,definition:[{label:g("stack.options_notifications_label"),control:(e,t)=>r.createElement(Gs.Z,{ariaRequired:!0,filteringAriaLabel:"Filter topicArn",options:uh(s,i),selectedOption:{value:e,label:e},onChange:e=>{const a=i.slice();a.splice(t,1,e.detail.selectedOption.value),o(a)},filteringType:"auto"})}],addButtonText:g("add_sns_topic"),removeButtonText:g("remove_item_button_label"),disableAddButton:5===i.length,isItemRemovable:()=>i.length>1}),r.createElement(Ot.Z,{"data-testid":"create-new-sns-topic-button",onClick:()=>n(lt.CREATE_SNS_TOPIC)},g("stack.notifications_create_an_sns_topic")))),a===lt.CREATE_SNS_TOPIC&&r.createElement(SE,null))},ph=e=>{let{isUpdate:t=!1}=e;const[a,n]=(0,r.useState)(!1),{stackPolicyBody:s,stackPolicyDuringUpdateBody:i,stackPolicyOption:l,setStacksWizardState:o}=rE();return r.createElement(Zt.Z,{"data-testid":"stack-policy",variant:"container",headerText:g(t?"stack.options_stack_policy_update_header":"stack.options_stack_policy_header"),headerDescription:g("stack.options_stack_policy_description"),expanded:a,onChange:e=>n(e.detail.expanded)},r.createElement(Or.Z,null,r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.options_stack_policy_tile_label"),description:g("stack.options_stack_policy_tile_description"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,"data-testid":"stack-policy-tiles",ariaLabel:"Select stack policy type",value:l,items:[{value:v.NONE,label:g("stack.options_no_stack_policy_tile")},{value:v.TEXT,label:g("stack.options_stack_policy_text_tile")},{value:v.FILE,label:g("stack.options_upload_stack_policy")}],onChange:e=>o({stackPolicyOption:e.detail.value}),columns:3})),{[v.TEXT]:r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.options_policy_text_label"),constraintText:g("stack.options_policy_text_hint"),stretch:!0},r.createElement(si.Z,{ariaRequired:!0,"data-testid":"stack-policy-body-textarea",ariaLabel:"Enter stack policy body",controlId:"policyText",value:t?i:s,onChange:e=>o({...t?{stackPolicyDuringUpdateBody:e.detail.value}:{stackPolicyBody:e.detail.value}})})),[v.FILE]:r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},label:g("stack.options_upload_policy_label"),constraintText:g("stack.options_upload_policy_hint_text")},r.createElement(_s,{ariaLabel:"Upload stack policy file",buttonText:g("stack.options_upload_policy_button_text"),setFileUrl:e=>o({...t?{stackPolicyDuringUpdateURL:e}:{stackPolicyUrl:e}})})),[v.NONE]:null}[l]))},_h=()=>{const{tags:e,setStacksWizardState:t}=rE();return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(fi,{tags:e,loading:!1,setTags:e=>t({tags:e})}),r.createElement(lh,null),r.createElement(Hc.Z,{"data-testid":"advanced-options",header:r.createElement(Rr.Z,{variant:"h1",description:r.createElement(z.Z,{variant:"span"},g("stack.options_advanced_notes"),r.createElement(wr,{ariaLabel:"setting AWS CloudFormation stack options",pathName:"stackoptions",fontSize:"body-m"}))},g("stack.options_advanced_options_form_header"))},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(oh,null),r.createElement(mh,null),r.createElement(Jr,{policy:A.CSNS},r.createElement(sh,null)))))},Eh=e=>{let{capability:t}=e;const a={CAPABILITY_IAM:"cfn-iam-capability-label",CAPABILITY_NAMED_IAM:"cfn-named-iam-capability-label"}[t]||"cfn-unknown-capability-label",n={CAPABILITY_IAM:"stack.review_acknowledge_create_iam_resources",CAPABILITY_NAMED_IAM:"stack.review_acknowledge_create_named_iam_resources"}[t]||"stack.review_acknowledge_unknown_capability";return r.createElement(z.Z,{variant:"strong",className:a},g(n,t))},gh=e=>{let{capabilities:t,hasModules:a,hasTransforms:n}=e;const s={CAPABILITY_IAM:"stack.review_capabilities_reason_iam",CAPABILITY_NAMED_IAM:"stack.review_capabilities_reason_named_iam"},i={CAPABILITY_IAM:"cfn-iam-capability-message",CAPABILITY_NAMED_IAM:"cfn-named-iam-capability-message"};return n||a?n&&!a?r.createElement(z.Z,{margin:{top:"xs"},className:"cfn-transforms-capabilities-message"},g("stack.review_transforms_capabilities_message"),r.createElement(zr,{ariaLabel:"capability warnings",pathAlias:"transform-capabilities-warning"})):a?r.createElement(z.Z,{margin:{top:"xs"},className:"cfn-modules-capabilities-message"},g("modules_capabilities_message"),r.createElement(zr,{ariaLabel:"controlling access with AWS Identity and Access Management",pathAlias:"capabilities"})):null:r.createElement("div",null,t.map((e=>r.createElement(z.Z,{key:e,margin:{top:"xs"},className:i[e]||"cfn-unknown-capability-message"},g(s[e]||"stack.review_capabilities_reason_unknown"),r.createElement(zr,{ariaLabel:"controlling access with AWS Identity and Access Management",pathAlias:"capabilities"})))))},hh=()=>{const e=os().get("stackId")||"",{capabilities:t,templateType:a,templateUrls:n,setCapabilityAcknowledgment:s,setStacksWizardState:i}=rE(),{data:l,isFetching:o}=Z_({enabled:Boolean(e)||Boolean(n[a]),...a===R.EXISTING?{stackId:e}:{templateURL:n[a]}}),{capabilities:c=null,capabilitiesReason:d=null,declaredTransforms:u=null,resourceTypes:m=[]}=l||{};(0,r.useEffect)((()=>{if(!o){const e=c?.reduce(((e,t)=>({...e,[t]:!1})),{});i({capabilities:e})}}),[o]);const p=ya(m),_=Boolean(u?.length),E=((e,t,a)=>e||t?["CAPABILITY_IAM","CAPABILITY_NAMED_IAM","CAPABILITY_AUTO_EXPAND"]:a)(p,_,c),h=((e,t)=>e&&!t?g("stack.review_transforms_capabilities_reason"):t)(_,d),S=Boolean(E?.length);return S||_?r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(Or.Z,null,r.createElement(Rr.Z,{variant:"h3"},((e,t)=>g(e&&t?"stack.review_capabilities_transforms_label":t?"stack.review_capabilities_label":"stack.review_transforms_label"))(_,S)),r.createElement(sn.Z,{"data-testid":"capabilities-alert",header:h&&r.createElement(z.Z,{variant:"strong",className:"cfn-capability-reason"},h),visible:!0,dismissible:!1},r.createElement(gh,{capabilities:E,hasModules:p,hasTransforms:_}),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "}},r.createElement(z.Z,{margin:{top:"m"}},E.map(((e,a)=>r.createElement(z.Z,{margin:{top:"xs"},key:e},r.createElement(Ys.Z,{className:`e2e-test-checkbox-${a}`,checked:Boolean(t?.[e]),controlId:`${e}-checkbox-control_${a}`,onChange:t=>s(e,t.detail.checked)},r.createElement(Eh,{capability:e})))))))))):null},Sh=()=>{const{includeNestedStacks:e}=rE();return r.createElement(Cr.Z,{"data-testid":"review-change-set-options",header:r.createElement(Rr.Z,null,g("change_sets"))},r.createElement(Or.Z,null,r.createElement(Nr,{id:"include-nested-stacks",itemKey:g("change_sets_for_nested_stacks"),itemValue:g(e?"enabled_label":"disabled_label")})))},Th=()=>{const{changeSetName:e,description:t,templateUrls:a,templateType:n}=rE();return r.createElement(Cr.Z,{"data-testid":"review-change-set-overview",header:r.createElement(Rr.Z,null,g("changeSets.overview_header"))},r.createElement(Or.Z,null,r.createElement(Nr,{id:"change-set-name",itemKey:g("stack.stack_changeset_name_label"),itemValue:e}),r.createElement(Nr,{id:"change-set-description",itemKey:g("stack.parameters_stack_changeset_desc_placeholder"),itemValue:t}),r.createElement(Nr,{id:"change-set-template-url",itemKey:g("stack.review_template_info_template_url_label"),itemValue:n===R.EXISTING?g("stack.review_template_info_use_current_template"):a[n]})))},bh={Add:"green",Remove:"red",Modify:"blue",Import:"green",Dynamic:"grey"};function fh(){return[{id:"action",header:g("changeSets.column_label_action"),cell:e=>{let{resourceChange:t}=e;return t.action&&r.createElement(Ts.Z,{color:(a=t.action,bh[a])},t.action)||"-";var a},minWidth:200,enabled:!0},{id:"logicalResourceId",header:g("changeSets.column_label_logical_id"),cell:e=>{let{resourceChange:t}=e;return fe(A.CSNS)?r.createElement("div",null,r.createElement(Ms,{value:t.logicalResourceId}),t.changeSetId?r.createElement("div",null,r.createElement("a",{href:`https://${k.host}/cloudformation/home?region=${(0,o.getRegion)()}#/stacks/changesets/changes?stackId=${encodeURIComponent(t.physicalResourceId)}&changeSetId=${encodeURIComponent(t.changeSetId)}`,title:t.changeSetId},g("view_nested_change_set"))):null):r.createElement(Ms,{value:t.logicalResourceId})},minWidth:200,enabled:!0},{id:"physicalResourceId",header:g("changeSets.column_label_physical_id"),cell:e=>{let{resourceChange:t}=e;return r.createElement(q,{resourceType:t.resourceType,resourceId:t.physicalResourceId})},minWidth:200,enabled:!0},{id:"resourceType",header:g("changeSets.column_label_type"),cell:e=>{let{resourceChange:t}=e;return r.createElement(Ms,{value:t.resourceType})},minWidth:200,enabled:!0},{id:"replacement",header:g("changeSets.column_label_replacement"),cell:e=>{let{resourceChange:t}=e;return r.createElement(Ms,{value:t.replacement})},minWidth:200,enabled:!0},{id:"module",header:g("registry_module"),cell:e=>{let{resourceChange:t}=e;return t.moduleInfo&&t.moduleInfo.typeHierarchy&&t.moduleInfo.logicalIdHierarchy&&r.createElement(we,{moduleLogicalIdPath:t.moduleInfo.logicalIdHierarchy,moduleTypenamePath:t.moduleInfo.typeHierarchy})||"-"},minWidth:200,enabled:fe(A.MODULE)},{id:"hookInvocations",header:g("column_label_hook_invocations"),cell:e=>{let{hookInvocationCount:t}=e;return t||"-"},enabled:fe(A.HOOKS)}].filter((e=>e.enabled))}const kh={pageSize:10,wrapLines:!1},Ah={isDescending:!0,sortingColumn:{sortingField:"logicalResourceId"}},Ih={emptyState:{title:g("changeSets.empty_change_list_header"),subtitle:g("changeSets.empty_change_list_description"),action:""},noMatch:{title:"",subtitle:"",action:""},loadingText:g("change_set_preview_loading"),paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{}},yh=e=>{let{columnDefinitions:t=fh()}=e;const a=os(),n=rE(),s=a.get("stackId")||n.stackId||"",{mutate:i,isLoading:l,error:o}=C_({displayError:!1,redirectOnCreation:!1,successCb:e=>{let{id:t,stackId:a}=e;n.setStacksWizardState({changeSetId:t,stackId:a})}});(0,r.useEffect)((()=>{const e=_E({wizardState:n,changeSetType:n.changeSetType||"UPDATE",preview:!0});return i(e),()=>n.setStacksWizardState({changeSetId:""})}),[]);const{cachedData:c,displayData:d,isFetching:u,filteringText:m,hasNextPage:p,polling:_,fetchNextPage:E,refreshData:h,setFilteringText:S}=M_(n.changeSetId,s),T=l||u||n.changeSetId&&_,b=-1!==c?.status?.indexOf("FAILED")||Boolean(o),f=o?.message||c?.statusReason,k=r.createElement(Rr.Z,{counter:!T&&` (${d?.length}${p?"+":""})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{disabled:b,loading:T,onRefresh:h}))},g("changeSets.header_changes")),A=b?r.createElement(z.Z,{margin:{vertical:"m"}},r.createElement(sn.Z,{header:g("stack.create_changeset_error"),type:"error"},f)):c?.changes?.length?r.createElement(nl,{onClick:()=>S("")}):r.createElement(ci,{header:g("changeSets.empty_change_list_header"),description:g("changeSets.empty_change_list_description")});return r.createElement(Li,{className:"e2e-test-table-changeset-changes",i18nStrings:Ih,header:k,resizableColumns:!0,isLoading:T,trackByKey:e=>e?.resourceChange?.logicalResourceId||"",defaultSort:Ah,columnDefinitions:t,preferences:kh,allItems:d,hasPaginationToken:p,fetchMore:()=>E(),customEmpty:A,customFilter:r.createElement(pl,{ariaLabel:"Filter changes",placeholder:g("changeSets.search_changes"),filteringText:m,loading:T||b,filterHandler:e=>{S(e)}})})},Ch=()=>{const{roleArn:e}=rE(),t=e?.split("/")?.[1];return r.createElement(Cr.Z,{"data-testid":"review-permissions",header:r.createElement(Rr.Z,null,g("stack.review_permissions_header"))},e?r.createElement(Or.Z,{columns:2,borders:"vertical"},r.createElement(Nr,{id:"iam-role-name",itemKey:g("stack.review_permissions_iam_role_name_label"),itemValue:t}),r.createElement(Nr,{id:"iam-role-arn",itemKey:g("stack.review_permissions_iam_role_arn_label"),itemValue:e})):r.createElement(ci,{header:g("stack.review_permissions_empty_header"),description:g("stack.review_permissions_empty_description")}))},Rh=()=>{const{parameters:e,stackName:t,templateUrls:a,templateType:n}=rE(),s=a[n]||"",{data:i={}}=Z_({templateURL:s,enabled:Boolean(s)}),l=(e=>{let{parametersState:t={},stackName:a,templateParameters:r=[],templateUrl:n}=e;const s=r.map((e=>({...e,value:t?.[e.parameterKey]?.parameterValue}))).reduce(((e,t)=>e+(e=>{if(e.noEcho)return"";const t=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return`&param_${e.parameterKey}${a}=${encodeURIComponent(t)}`},a=e.value||"";if(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/^list<aws::/i.test(e)&&!y.includes(e)}(e.parameterType)){const e=encodeURIComponent("[]");return a.split(",").map((a=>t(encodeURIComponent(a),e))).join("")}return t(a)})(t)),"");return`#/stacks/quickcreate?templateURL=${encodeURIComponent(n)}&stackName=${encodeURIComponent(a)}${s}`})({parametersState:e,stackName:t,templateParameters:i?.parameters,templateUrl:s});return r.createElement(Zt.Z,{"data-testid":"quick-create-link-section",headerText:g("stack.review_quick_create_stack_link")},r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},description:r.createElement(z.Z,{variant:"span"},g("stack.review_quick_create_stack_notes"),r.createElement(wr,{ariaLabel:"creating quick-create links for stacks",pathName:"quick-create",fontSize:"body-m"}))},r.createElement(Dt,{analyticsKey:"wizard_quick_create_link",icon:"external",text:g("stack.review_quick_create_stack"),href:l,iconAlign:"right",target:"_blank"})))},vh=[{id:"logicalResourceId",header:g("resource_import_logical_id"),cell:e=>e.logicalResourceId,sortingField:"logicalResourceId"},{id:"resourceType",header:g("resource_import_resource_type"),cell:e=>e.resourceType,sortingField:"resourceType"},{id:"identifier",header:g("resource_import_identifier"),cell:e=>Object.keys(e.resourceIdentifiers).map(((t,a)=>r.createElement("div",{key:`identifier_${a}`},r.createElement("b",null,t),`: ${e?.resourceIdentifiers?.[t]||"-"}`)))}],Lh={isDescending:!1,sortingColumn:{sortingField:"logicalResourceId"}},Ph=()=>{const[e,t]=(0,r.useState)(""),{resourcesToImport:a}=rE(),n=Ya(a)||[],s=n.filter(fa(e)),i=e&&!s.length?r.createElement(nl,{onClick:()=>t("")}):r.createElement(ci,{header:g("resources_to_import_table_empty_header"),description:g("resources_to_import_table_empty_description")});return r.createElement(Li,{testId:"review-resources-to-import-table",header:r.createElement(Rr.Z,{counter:n.length.toString()},g("resources_to_import")),columnDefinitions:vh,trackByKey:"logicalResourceId",customEmpty:i,allItems:s,defaultSort:Lh,customFilter:r.createElement(Ci.Z,{filteringAriaLabel:"Filter resources to import",filteringPlaceholder:g("resources_to_import_table_filter_placeholder"),filteringClearAriaLabel:"Clear resources to import filter input",filteringText:e,onChange:e=>t(e.detail.filteringText)}),resizableColumns:!0,isLoading:!1,preferences:{}})},Nh=()=>{const{disableRollback:e,enableTerminationProtection:t,timeoutInMinutes:a}=rE();return r.createElement(Cr.Z,{"data-testid":"review-stack-creation-options",header:r.createElement(Rr.Z,null,g("stack.review_stack_creation_options_header"))},r.createElement(Or.Z,null,!fe(A.PAUSE_AND_RESUME)&&r.createElement(Nr,{id:"review-rollback-on-failure",itemKey:g("stack.review_stack_creation_options_rollback_failure_label"),itemValue:g(e?"disabled_label":"enabled_label")}),r.createElement(Nr,{id:"review-timeout-in-minutes",itemKey:g("stack.review_stack_creation_options_timeout_label"),itemValue:a?g("stack.options_minutes",a):"-"}),r.createElement(Nr,{id:"review-termination-protection",itemKey:g("stack.review_stack_creation_options_termination_protection_label"),itemValue:g(t?"enabled_label":"disabled_label")})))},Oh=()=>{const{disableRollback:e}=rE();return r.createElement(Cr.Z,{"data-testid":"review-stack-failure-options",header:r.createElement(Rr.Z,null,g("rollback_section_label"))},r.createElement(Nr,{id:"review-rollback-on-failure",itemKey:g("stack.options_rollback_on_failure_label"),itemValue:g(e?"disabled_label":"enabled_label")}))},xh=e=>{let{isUpdate:t=!1}=e;const{stackPolicyBody:a,stackPolicyDuringUpdateBody:n,stackPolicyDuringUpdateURL:s,stackPolicyOption:i,stackPolicyUrl:l}=rE();return r.createElement(Cr.Z,{"data-testid":"review-stack-policy",header:r.createElement(Rr.Z,null,g("stacksList.stackPolicy.stack_policy_header"))},{[v.FILE]:r.createElement(Nr,{id:"stack-policy-url",itemKey:g("stacksList.stackPolicy.stack_policy_url"),itemValue:t?s:l}),[v.TEXT]:r.createElement(Pr,null,t?n:a),[v.NONE]:r.createElement(ci,{header:g("stacksList.stackPolicy.empty_stack_policy_header"),description:g("stacksList.stackPolicy.empty_stack_policy_description")})}[i])},Dh=()=>{const{description:e,templateUrls:t,templateType:a}=rE();return r.createElement(Cr.Z,{"data-testid":"review-template-overview",header:r.createElement(Rr.Z,null,g("stack.review_template_info_template_title"))},r.createElement(Or.Z,null,r.createElement(Nr,{id:"stack-template-url",itemKey:g("stack.review_template_info_template_url_label"),itemValue:a===R.EXISTING?g("stack.review_template_info_use_current_template"):t[a]}),r.createElement(Nr,{id:"stack-description",itemKey:g("stack.review_template_info_stack_description_label"),itemValue:e})))},wh=e=>{let{setActiveStepIndex:t}=e;const{allChecked:a,notificationArns:n,parameters:s,rollbackConfiguration:i,tags:l}=rE(),o=Xa(s),c=ja(l);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"template-step-review",headerText:g("stack.specify_template_title"),stepIndex:0,setActiveStepIndex:t},r.createElement(Th,null)),r.createElement(Ei,{headerId:"details-step-review",headerText:g("stack.details_step_header"),stepIndex:1,setActiveStepIndex:t},r.createElement(dl,{columnDefinitions:[{id:"parameterKey",header:g("stacksList.stackParameters.column_label_key"),cell:e=>e?.parameterKey||"-",minWidth:200,sortingField:"parameterKey"},{id:"parameterValue",header:g("stacksList.stackParameters.column_label_value"),cell:e=>e?.parameterValue||"-",minWidth:200,sortingField:"parameterValue"}],parameters:o,tableTestId:"review-parameters-table",visibleContentOptionsGroups:[{label:null,options:[{id:"parameterKey",label:g("stacksList.stackParameters.column_label_key"),editable:!0},{id:"parameterValue",label:g("stacksList.stackParameters.column_label_value"),editable:!0}]}]})),r.createElement(Ei,{headerId:"options-step-review",headerText:g("stack.configure_stack_options_label"),stepIndex:2,setActiveStepIndex:t},r.createElement(ml,{tableTestId:"review-tags-table",tags:c}),r.createElement(Ch,null),r.createElement(ul,{rollbackConfiguration:i,variant:"container"}),r.createElement(Ki,{notificationARNs:n,variant:"container"}),r.createElement(Jr,{policy:A.CSNS},r.createElement(Sh,null))),r.createElement(hh,null),!a&&r.createElement(sn.Z,{"data-testid":"checkbox-validation-alert",type:"error"},g("review_step_checkbox_validation_error")))},Zh=[{value:"CURRENT_TEMPLATE",label:g("stack.use_current_template")},{value:"SPECIFY_TEMPLATE",label:g("stack.replace_current_template")},{value:"EDIT_IN_DESIGNER",label:g("stack.edit_in_designer")}],Uh=[{value:"SPECIFY_TEMPLATE",label:g("stack.template_is_ready")},{value:"SAMPLE_TEMPLATE",label:g("stack.use_sample_template")},{value:"USE_DESIGNER",label:g("stack.create_in_designer")}],Fh=[{value:"S3_URL",label:g("stack.template_url_title")},{value:"UPLOAD_TEMPLATE",label:g("stack.upload_template_file")}],Mh={S3_URL:R.TEXT,UPLOAD_TEMPLATE:R.UPLOAD,SAMPLE_TEMPLATE:R.SAMPLE},Kh=()=>{const e=os().get("stackId"),{changeSetType:t,prepareTemplateTile:a,specifyTemplateTile:n,templateErrorKey:s,templateType:i,templateUrls:l,setStacksTemplateUrl:o,setStacksWizardState:c}=rE(),d=Pe();return(0,r.useEffect)((()=>{c("SPECIFY_TEMPLATE"===a?{templateType:Mh[n]}:"SAMPLE_TEMPLATE"===a?{templateType:R.SAMPLE}:"USE_DESIGNER"===a?{templateType:R.DESIGNER}:{templateType:R.EXISTING})}),[a,n]),r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(_i,{selectedTile:a,tilesDefinition:"CREATE"===t?Uh:Zh,setTile:e=>{c({prepareTemplateTile:e,templateErrorKey:""})}}),"SPECIFY_TEMPLATE"===a&&r.createElement(Si,{isCreateChangeSetFlow:!0,isUpdateFlow:!1,selectedTile:n,stackId:e||"",templateErrorKey:s,templateType:i,templateUrls:l,tilesDefinition:Fh,setTemplateUrl:(e,t)=>{c({templateErrorKey:""}),o(e,t)},setTile:e=>{c({specifyTemplateTile:e,templateErrorKey:""})}}),"EDIT_IN_DESIGNER"===a&&r.createElement(zs,{isCreateChangeSetFlow:!0,isUpdateFlow:!1,stackId:e||""}),"SAMPLE_TEMPLATE"===a&&r.createElement(gi,{errorText:s,isCreateChangeSetFlow:!0,isUpdateFlow:!1,sampleTemplateGroups:d,sampleTemplateUrl:l[R.SAMPLE],stackId:e||"",setTemplateUrl:(e,t)=>{c({templateErrorKey:""}),o(e,t)}}),"USE_DESIGNER"===a&&r.createElement(Ws,{errorText:s}))},Wh=e=>{let{setActiveStepIndex:t}=e;const a=(0,Q.TH)(),n=(0,Q.s0)(),{previousTemplateSource:s,templateType:i,templateUrls:l,setStacksWizardState:c}=rE(),{data:d={},isFetching:u}=Z_({templateURL:l[i],errorHandler:()=>{t(0)}});(0,r.useEffect)((()=>{a?.search&&n(a.pathname,{replace:!0})}),[]),(0,r.useEffect)((()=>{const e=s!==l[i];if(!u&&e){const e=Qi({detailsParameters:[],templateSummary:d}),t=tl(d?.capabilities||[]);c({...e,capabilities:t,description:d?.description||"",previousTemplateSource:l[i]})}}),[u]);const m=Ji(d?.parameters,L),{externalValues:p={}}=(0,o.useListExternalValues)({uniqueAWSTypes:m,xsrfToken:me.xsrfToken});return u?r.createElement(vr.Z,null):r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(ah,null),r.createElement(rh,{externalValues:p,loading:u}))},zh=()=>{const{tags:e,setStacksWizardState:t}=rE();return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(fi,{tags:e,loading:!1,setTags:e=>t({tags:e})}),r.createElement(lh,null),r.createElement(Jr,{policy:A.PAUSE_AND_RESUME},r.createElement(dh,null)),r.createElement(Hc.Z,{"data-testid":"advanced-options",header:r.createElement(Rr.Z,{variant:"h1",description:r.createElement(z.Z,{variant:"span"},g("stack.options_advanced_notes"),r.createElement(wr,{ariaLabel:"setting AWS CloudFormation stack options",pathName:"stackoptions",fontSize:"body-m"}))},g("stack.options_advanced_options_form_header"))},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(ph,null),r.createElement(oh,null),r.createElement(mh,null),r.createElement(ch,null))))},$h=e=>{let{setActiveStepIndex:t}=e;const{allChecked:a,notificationArns:n,parameters:s,rollbackConfiguration:i,tags:l,templateType:o,templateUrls:c}=rE(),d=c[o],{data:u={}}=Z_({templateURL:d}),m=Xa(s),p=ja(l);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"template-step-review",headerText:g("stack.specify_template_title"),stepIndex:0,setActiveStepIndex:t},r.createElement(Dh,null)),r.createElement(Ei,{headerId:"details-step-review",headerText:g("stack.details_step_header"),stepIndex:1,setActiveStepIndex:t},r.createElement(dl,{columnDefinitions:[{id:"parameterKey",header:g("stacksList.stackParameters.column_label_key"),cell:e=>e?.parameterKey||"-",minWidth:200,sortingField:"parameterKey"},{id:"parameterValue",header:g("stacksList.stackParameters.column_label_value"),cell:e=>e?.parameterValue||"-",minWidth:200,sortingField:"parameterValue"}],parameters:m,tableTestId:"review-parameters-table",visibleContentOptionsGroups:[{label:null,options:[{id:"parameterKey",label:g("stacksList.stackParameters.column_label_key"),editable:!0},{id:"parameterValue",label:g("stacksList.stackParameters.column_label_value"),editable:!0}]}]})),r.createElement(Ei,{headerId:"options-step-review",headerText:g("stack.configure_stack_options_label"),stepIndex:2,setActiveStepIndex:t},r.createElement(ml,{tableTestId:"review-tags-table",tags:p}),r.createElement(Ch,null),r.createElement(Jr,{policy:A.PAUSE_AND_RESUME},r.createElement(Oh,null)),r.createElement(xh,null),r.createElement(ul,{rollbackConfiguration:i,variant:"container"}),r.createElement(Ki,{notificationARNs:n,variant:"container"}),r.createElement(Nh,null)),!u?.declaredTransforms?.length&&r.createElement(Rh,null),r.createElement(hh,null),!a&&r.createElement(sn.Z,{"data-testid":"checkbox-validation-alert",type:"error"},g("review_step_checkbox_validation_error")))},Vh=[{value:"SPECIFY_TEMPLATE",label:g("stack.template_is_ready")},{value:"SAMPLE_TEMPLATE",label:g("stack.use_sample_template")},{value:"USE_DESIGNER",label:g("stack.create_in_designer")}],Gh=[{value:"S3_URL",label:g("stack.template_url_title")},{value:"UPLOAD_TEMPLATE",label:g("stack.upload_template_file")}],Bh={S3_URL:R.TEXT,UPLOAD_TEMPLATE:R.UPLOAD,SAMPLE_TEMPLATE:R.SAMPLE},Hh=()=>{const{prepareTemplateTile:e,specifyTemplateTile:t,templateErrorKey:a,templateType:n,templateUrls:s,setStacksTemplateUrl:i,setStacksWizardState:l}=rE(),o=Pe();return(0,r.useEffect)((()=>{l("SPECIFY_TEMPLATE"===e?{templateType:Bh[t]}:"SAMPLE_TEMPLATE"===e?{templateType:R.SAMPLE}:{templateType:R.DESIGNER})}),[e,t]),r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(_i,{selectedTile:e,tilesDefinition:Vh,setTile:e=>{l({prepareTemplateTile:e,templateErrorKey:""})}}),"SPECIFY_TEMPLATE"===e&&r.createElement(Si,{isCreateChangeSetFlow:!1,isUpdateFlow:!1,selectedTile:t,templateErrorKey:a,templateType:n,templateUrls:s,tilesDefinition:Gh,setTemplateUrl:(e,t)=>{l({templateErrorKey:""}),i(e,t)},setTile:e=>{l({specifyTemplateTile:e,templateErrorKey:""})}}),"SAMPLE_TEMPLATE"===e&&r.createElement(gi,{errorText:a,isCreateChangeSetFlow:!1,isUpdateFlow:!1,sampleTemplateGroups:o,sampleTemplateUrl:s[R.SAMPLE],setTemplateUrl:(e,t)=>{l({templateErrorKey:""}),i(e,t)}}),"USE_DESIGNER"===e&&r.createElement(Ws,{errorText:a}))},qh=()=>r.createElement(Cr.Z,{"data-testid":"import-prerequisites",header:r.createElement(Rr.Z,{variant:"h2"},g("import_overview_section_header"))},r.createElement(Or.Z,null,r.createElement(Nr,{id:"import-template-description",itemKey:g("import_overview_template"),itemValue:g("import_overview_template_description")}),r.createElement(Nr,{id:"import-identifier-values-description",itemKey:g("import_overview_identifier_values"),itemValue:r.createElement(r.Fragment,null,r.createElement("span",null,g("import_overview_identifier_values_description")),r.createElement(zr,{ariaLabel:"resource import overview",pathAlias:"identify-resources-to-import"}))}))),Yh=()=>{const e=os().get("stackId")||"",{templateType:t,templateUrls:a}=rE(),{data:n={},isFetching:s}=Z_({templateURL:a[t]}),i=Ji(n?.parameters,L),{externalValues:l={}}=(0,o.useListExternalValues)({uniqueAWSTypes:i,xsrfToken:me.xsrfToken});if(s)return r.createElement(vr.Z,null);const c=s;return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement("div",{key:"resource-import-details-alert"},e&&r.createElement(sn.Z,{"data-testid":"resource-import-details-alert"},g("resource_import_specify_stack_details_alert"))),!e&&r.createElement(ah,null),r.createElement(rh,{externalValues:l,loading:c}))},Xh=()=>{const{resourcesToImport:e={},setResourceIdentifierValue:t}=rE(),a=Object.keys(e)||[],n=a.map(((a,n)=>{const s=e[a]||{},i=Object.keys(s?.resourceIdentifiers||[]).map(((e,i)=>r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},key:`resource-identifier-${i}`,label:e,description:g("resource_import_identifier_property")},r.createElement(Vs.Z,{ariaLabel:"Enter identifier property value",ariaRequired:!0,"data-testid":`resource-identifier-input-${n}`,placeholder:g("resource_identifier_value_input_placeholder"),value:s?.resourceIdentifiers?.[e]||"",onChange:r=>{t({logicalResourceId:a,resourceIdentifierProperty:e,resourceIdentifierValue:r.detail.value})}}))));return r.createElement("div",{key:`resource-${n}`},r.createElement(z.Z,{"data-testid":`logical-resource-id-${n}`,variant:"h3"},a),r.createElement("div",null,e[a]?.resourceType),r.createElement(Es.Z,{size:"s",direction:"vertical"},i))}));return r.createElement(Cr.Z,{"data-testid":"resources-to-import",header:r.createElement(Rr.Z,{counter:`(${a.length})`},g("resources_to_import"))},r.createElement(Or.Z,{borders:"horizontal"},r.createElement("div",null,g("resource_import_resources_to_import_desc")),n))},jh=e=>{let{setActiveStepIndex:t}=e;const a=(0,s.I0)(),n=os().get("stackId")||"",{previousTemplateSource:i,templateType:l,templateUrls:o,setStacksWizardState:c}=rE(),{data:d,isFetching:u}=y_({stackId:n}),m=()=>{t(1)},{data:p={},isFetching:_}=Z_({templateURL:o[l]||"",errorHandler:m}),{data:E={},isFetching:h}=Z_({stackId:n,enabled:Boolean(n),errorHandler:m});return(0,r.useEffect)((()=>{const e=i!==o[l];if(!_&&!h){const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const a=e.map((e=>e.resourceType)),r=t.map((e=>e.resourceType));return a.filter((e=>!r.includes(e)))}(e?.resourceIdentifierSummaries||[],t?.resourceIdentifierSummaries||[]);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter((e=>!t.includes(e)))}(e?.resourceTypes||[],t?.resourceTypes||[]).filter((e=>!a.includes(e)))}(p||{},E||{}),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const a=Ya(Ja(e)),r=Object.keys(Ja(t));return a.filter((e=>!r.includes(e.logicalResourceId)))}(p?.resourceIdentifierSummaries||[],E?.resourceIdentifierSummaries||[]);if(s.length?(a(He({type:"ERROR",content:r.createElement("div",{"data-testid":"resource-import-error"},g("resource_import_unsupported_resources",s.toString()),r.createElement(zr,{ariaLabel:"resources that support import and drift detection operations",pathAlias:"import-error-resources-not-supported"}))})),t(1)):i.length||(a(He({type:"ERROR",content:r.createElement("div",{"data-testid":"resource-import-error"},g("resource_import_no_resources_template"),r.createElement(zr,{ariaLabel:"resource import overview",pathAlias:"import-error-no-template-resources"}))})),t(1)),!u&&e){const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Ja(e?.resourceIdentifierSummaries||[]);if(!Object.keys(t).length)return a;const r=Ja(t?.resourceIdentifierSummaries||[]),n=Object.entries(a).filter((e=>{let[t]=e;return!r?.[t]}));return Object.fromEntries(n)}(p||{},n?E:{}),t=Qi({detailsParameters:n&&d?.parameters||[],templateSummary:p||{}}),a=tl(p?.capabilities||[]);c({...t,capabilities:a,description:p?.description||"",resourcesToImport:e,previousTemplateSource:o[l]})}}}),[_,h,u]),u||_||h?r.createElement(vr.Z,null):r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Xh,null))},Qh={Import:"green"},Jh=[{id:"action",header:g("changeSets.column_label_action"),cell:e=>{let{resourceChange:t}=e;return t?.action&&r.createElement(Ts.Z,{color:(a=t.action,Qh[a])},t.action)||"-";var a},minWidth:200},{id:"logicalResourceId",header:g("changeSets.column_label_logical_id"),cell:e=>{let{resourceChange:t}=e;return r.createElement(Ms,{value:t?.logicalResourceId})},minWidth:200},{id:"identifier",header:g("resource_import_identifier"),cell:e=>{let{resourceChange:t}=e;return r.createElement(q,{resourceType:t?.resourceType,resourceId:t?.physicalResourceId})},minWidth:200},{id:"resourceType",header:g("changeSets.column_label_type"),cell:e=>{let{resourceChange:t}=e;return r.createElement(Ms,{value:t?.resourceType})},minWidth:200}],eS=e=>{let{setActiveStepIndex:t}=e;const{parameters:a}=rE(),n=Xa(a);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"template-step-review",headerText:g("stack.specify_template_title"),stepIndex:1,setActiveStepIndex:t},r.createElement(Dh,null)),r.createElement(Ei,{headerId:"identify-resources-step-review",headerText:g("stack.identify_resources"),stepIndex:2,setActiveStepIndex:t},r.createElement(Ph,null)),r.createElement(Ei,{headerId:"details-step-review",headerText:g("stack.details_step_header"),stepIndex:3,setActiveStepIndex:t},r.createElement(dl,{columnDefinitions:[{id:"parameterKey",header:g("stacksList.stackParameters.column_label_key"),cell:e=>e?.parameterKey||"-",minWidth:200,sortingField:"parameterKey"},{id:"parameterValue",header:g("stacksList.stackParameters.column_label_value"),cell:e=>e?.parameterValue||"-",minWidth:200,sortingField:"parameterValue"}],parameters:n,tableTestId:"review-parameters-table",visibleContentOptionsGroups:[{label:null,options:[{id:"parameterKey",label:g("stacksList.stackParameters.column_label_key"),editable:!0},{id:"parameterValue",label:g("stacksList.stackParameters.column_label_value"),editable:!0}]}]})),r.createElement(yh,{columnDefinitions:Jh}))},tS=[{value:"S3_URL",label:g("stack.template_url_title")},{value:"UPLOAD_TEMPLATE",label:g("stack.upload_template_file")}],aS=()=>{const{specifyTemplateTile:e,templateErrorKey:t,templateType:a,templateUrls:n,setStacksTemplateUrl:s,setStacksWizardState:i}=rE();return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(sn.Z,{"data-testid":"resource-import-alert"},r.createElement("div",null,r.createElement(z.Z,{variant:"p"},g("resource_import_deletion_policy")),r.createElement(z.Z,{variant:"p"},g("resource_import_wizard_info_message")))),r.createElement(Si,{selectedTile:e,showViewDesignerButton:!1,templateErrorKey:t,templateType:a,templateUrls:n,tilesDefinition:tS,setTemplateUrl:(e,t)=>{i({templateErrorKey:""}),s(e,t)},setTile:e=>{i({templateType:"S3_URL"===e?R.TEXT:R.UPLOAD,specifyTemplateTile:e,templateErrorKey:""})}}))},rS=()=>{const e=(0,Q.s0)(),t=rE(),a=os().get("stackId")||t.stackId||"",{data:n,isFetching:i,refetch:l}=y_({stackId:a,enabled:!1});(0,r.useEffect)((()=>(a&&l({throwOnError:!0,cancelRefetch:!0}),()=>t.clearStacksWizardState())),[]);const[c,d]=(0,r.useState)(0),u=(0,s.I0)(),{data:m={},isFetching:p}=Z_({enabled:!1,templateURL:t.templateUrls[t.templateType]}),_=Ji(m?.parameters,L),{externalValues:E={}}=(0,o.useListExternalValues)({uniqueAWSTypes:_,xsrfToken:me.xsrfToken}),{mutate:h}=x_({analyticsKey:"ecs_ri",onSuccessText:g("resource_import_executing_change_set",a),stackId:a}),{cachedData:S,isFetching:T}=M_(t.changeSetId,a),b=(0,Fp.useIsMutating)();(0,r.useEffect)((()=>{if(!i){const e={capabilities:tl(n?.capabilities),stackId:n?.stackId||t?.stackId,stackName:n?.stackName||t?.stackName,changeSetType:"IMPORT"};t.setStacksWizardState(e)}}),[a,i]);const{validate:f}=lE(),{validate:k}=nE({externalValues:E,templateSummary:m}),A=i||p||Boolean(b)||T;return r.createElement(Ym.Z,{"data-testid":"import-resource-wizard",i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("import_resources_label"),optional:g("optional")},activeStepIndex:c,isLoadingNextStep:A,onNavigate:e=>{let{detail:t}=e;switch(t.requestedStepIndex){case 2:return f((()=>d(t.requestedStepIndex)));case 4:return k((()=>d(t.requestedStepIndex)));default:return d(t.requestedStepIndex)}},onCancel:()=>{e("/stacks")},onSubmit:()=>{"CREATE_COMPLETE"===S?.status?h({stackName:t.stackId,changeSetName:t.changeSetId,clientRequestToken:`Console-ExecuteChangeSet-${se()}`}):S?.status.indexOf("PENDING")>-1||S?.status.indexOf("IN_PROGRESS")>-1?u(He({type:"ERROR",content:g("execute_create_pending_change_set_exception")})):u(He({type:"ERROR",content:g("execute_create_failed_change_set_exception")}))},steps:[{title:g("stack.identify_resources"),description:r.createElement(r.Fragment,null,r.createElement("span",null,g("import_overview_description")),r.createElement(zr,{ariaLabel:"resource import overview",pathAlias:"import-overview"})),content:r.createElement(qh,null)},{title:g("stack.wizard_template_description"),content:r.createElement(aS,null)},{title:g("stack.identify_resources"),content:r.createElement(jh,{setActiveStepIndex:d})},{title:g("stack.details_step_header"),content:r.createElement(Yh,null)},{title:g("stack.review_header",t.stackName),content:r.createElement(eS,{setActiveStepIndex:d})}]})},nS=e=>{let{setActiveStepIndex:t}=e;const a=(0,Q.TH)(),n=(0,Q.s0)(),s=os().get("stackId")||"",{previousTemplateSource:i,templateType:l,templateUrls:c,setStacksWizardState:d}=rE(),{data:u,isFetching:m}=y_({stackId:s}),{data:p={},isFetching:_}=Z_({...l===R.EXISTING?{stackId:s}:{templateURL:c[l]},enabled:!m,errorHandler:()=>{t(0)}});(0,r.useEffect)((()=>{a?.search&&n(`${a.pathname}?stackId=${encodeURIComponent(s)}`,{replace:!0})}),[]),(0,r.useEffect)((()=>{const e=l===R.EXISTING?s:c[l];if(!_&&!m&&i!==e){const t=Qi({detailsParameters:u?.parameters||[],templateSummary:p}),a=tl(p?.capabilities||[]);d({...t,capabilities:a,description:p?.description||"",previousTemplateSource:e})}}),[_,m]);const E=Ji(p?.parameters,L),{externalValues:g={}}=(0,o.useListExternalValues)({uniqueAWSTypes:E,xsrfToken:me.xsrfToken});if(_)return r.createElement(vr.Z,null);const h=_||m;return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(rh,{externalValues:g,loading:h}))},sS=()=>{const{tags:e,setStacksWizardState:t}=rE();return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(fi,{tags:e,loading:!1,setTags:e=>t({tags:e})}),r.createElement(lh,null),r.createElement(Jr,{policy:A.PAUSE_AND_RESUME},r.createElement(dh,null)),r.createElement(Hc.Z,{"data-testid":"advanced-options",header:r.createElement(Rr.Z,{variant:"h1",description:r.createElement(z.Z,{variant:"span"},g("stack.options_advanced_notes"),r.createElement(wr,{ariaLabel:"setting AWS CloudFormation stack options",pathName:"stackoptions",fontSize:"body-m"}))},g("stack.options_advanced_options_form_header"))},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(ph,{isUpdate:!0}),r.createElement(oh,null),r.createElement(mh,null))))},iS=e=>{let{setActiveStepIndex:t}=e;const{allChecked:a,notificationArns:n,parameters:s,rollbackConfiguration:i,tags:l}=rE(),o=Xa(s),c=ja(l);return r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ei,{headerId:"template-step-review",headerText:g("stack.specify_template_title"),stepIndex:0,setActiveStepIndex:t},r.createElement(Dh,null)),r.createElement(Ei,{headerId:"details-step-review",headerText:g("stack.details_step_header"),stepIndex:1,setActiveStepIndex:t},r.createElement(dl,{columnDefinitions:[{id:"parameterKey",header:g("stacksList.stackParameters.column_label_key"),cell:e=>e?.parameterKey||"-",minWidth:200,sortingField:"parameterKey"},{id:"parameterValue",header:g("stacksList.stackParameters.column_label_value"),cell:e=>e?.parameterValue||"-",minWidth:200,sortingField:"parameterValue"}],parameters:o,tableTestId:"review-parameters-table",visibleContentOptionsGroups:[{label:null,options:[{id:"parameterKey",label:g("stacksList.stackParameters.column_label_key"),editable:!0},{id:"parameterValue",label:g("stacksList.stackParameters.column_label_value"),editable:!0}]}]})),r.createElement(Ei,{headerId:"options-step-review",headerText:g("stack.configure_stack_options_label"),stepIndex:2,setActiveStepIndex:t},r.createElement(ml,{tableTestId:"review-tags-table",tags:c}),r.createElement(Ch,null),r.createElement(Jr,{policy:A.PAUSE_AND_RESUME},r.createElement(Oh,null)),r.createElement(xh,{isUpdate:!0}),r.createElement(ul,{rollbackConfiguration:i,variant:"container"}),r.createElement(Ki,{notificationARNs:n,variant:"container"})),r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement(Or.Z,null,r.createElement(Rr.Z,{"data-testid":"review-changes-header",variant:"h3"},g("stack.review_preview_changes_header")),r.createElement(yh,null))),r.createElement(hh,null),!a&&r.createElement(sn.Z,{"data-testid":"checkbox-validation-alert",type:"error"},g("review_step_checkbox_validation_error")))},lS=[{value:"CURRENT_TEMPLATE",label:g("stack.use_current_template")},{value:"SPECIFY_TEMPLATE",label:g("stack.replace_current_template")},{value:"EDIT_IN_DESIGNER",label:g("stack.edit_in_designer")}],oS=[{value:"S3_URL",label:g("stack.template_url_title")},{value:"UPLOAD_TEMPLATE",label:g("stack.upload_template_file")}],cS={S3_URL:R.TEXT,UPLOAD_TEMPLATE:R.UPLOAD,SAMPLE_TEMPLATE:R.SAMPLE},dS=()=>{const e=os().get("stackId"),{prepareTemplateTile:t,specifyTemplateTile:a,templateErrorKey:n,templateType:s,templateUrls:i,setStacksTemplateUrl:l,setStacksWizardState:o}=rE();return(0,r.useEffect)((()=>{o("SPECIFY_TEMPLATE"===t?{templateType:cS[a]}:{templateType:R.EXISTING})}),[t,a]),r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(_i,{selectedTile:t,tilesDefinition:lS,setTile:e=>{o({prepareTemplateTile:e,templateErrorKey:""})}}),"SPECIFY_TEMPLATE"===t&&r.createElement(Si,{isCreateChangeSetFlow:!1,isUpdateFlow:!0,stackId:e||"",selectedTile:a,templateErrorKey:n,templateType:s,templateUrls:i,tilesDefinition:oS,setTemplateUrl:(e,t)=>{o({templateErrorKey:""}),l(e,t)},setTile:e=>{o({specifyTemplateTile:e,templateErrorKey:""})}}),"EDIT_IN_DESIGNER"===t&&r.createElement(zs,{isCreateChangeSetFlow:!1,isUpdateFlow:!0,stackId:e||""}))},uS=_r(rS,Tt.CREATE_IMPORT_RESOURCE_WIZARD),mS=_r(rS,Tt.UPDATE_IMPORT_RESOURCE_WIZARD),pS=_r((()=>{const e=rE(),t=(0,Q.s0)(),a=os(),n=a.get("stackId")||"",s=a.get("stackName"),i=a.get("templateURL"),{data:l,isFetching:c,refetch:d}=y_({stackId:n,enabled:!1});(0,r.useEffect)((()=>(d({throwOnError:!0,cancelRefetch:!0}),()=>e.clearStacksWizardState())),[]);const[u,m]=(0,r.useState)(0),{data:p={},isFetching:_}=Z_({enabled:!1,...e.templateType===R.EXISTING?{stackId:n}:{templateURL:e.templateUrls[e.templateType]}}),E=Ji(p?.parameters,L),{externalValues:h={}}=(0,o.useListExternalValues)({uniqueAWSTypes:E,xsrfToken:me.xsrfToken}),{mutate:S,isLoading:T}=C_({}),b=(0,Fp.useIsMutating)();(0,r.useEffect)((()=>{if(!c){const t="REVIEW_IN_PROGRESS"===l?.stackStatus?"CREATE":"UPDATE",a=`${l?.stackName?.slice(0,10)}-${ne()}`||"",r={capabilities:tl(l?.capabilities||[]),changeSetName:a,changeSetType:t,disableRollback:l?.disableRollback||!1,enableTerminationProtection:l?.enableTerminationProtection||!1,notificationArns:l?.notificationARNs?.length?l?.notificationARNs:[""],rollbackConfiguration:al(l?.rollbackConfiguration),tags:el(l?.tags),roleArn:l?.roleARN||"",stackId:l?.stackId,stackName:s||l?.stackName,..."UPDATE"===t&&!i&&{prepareTemplateTile:"CURRENT_TEMPLATE",templateType:R.EXISTING},...i&&{templateType:R.TEXT}};e.setStacksWizardState(r),i&&e.setStacksTemplateUrl(R.TEXT,i)}}),[n,c]);const{validate:f}=lE(),{validate:k}=nE({externalValues:h,templateSummary:p,isChangeSet:!0}),{validate:A}=sE(!0),{validate:I}=iE(),y=c||_||T||Boolean(b);return c?r.createElement(vr.Z,null):r.createElement(Ym.Z,{"data-testid":"create-change-set-wizard",i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},activeStepIndex:u,isLoadingNextStep:y,onNavigate:e=>{let{detail:t}=e;switch(t.requestedStepIndex){case 1:return f((()=>m(t.requestedStepIndex)));case 2:return k((()=>m(t.requestedStepIndex)));case 3:return A((()=>m(t.requestedStepIndex)));default:return m(t.requestedStepIndex)}},onCancel:()=>{t("/stacks")},onSubmit:()=>{const t=_E({wizardState:e,changeSetType:e.changeSetType});I((()=>S(t)))},steps:[{title:g("stack.create_existing_stack_changeset_link",l?.stackName||""),content:r.createElement(Kh,null)},{title:g("stack.details_step_header"),content:r.createElement(nh,{setActiveStepIndex:m})},{title:g("stack.configure_stack_options_label"),content:r.createElement(_h,null)},{title:g("stack.review_header",e.stackName),content:r.createElement(wh,{setActiveStepIndex:m})}]})}),Tt.CREATE_CHANGE_SET_WIZARD),_S=_r((()=>{const e=(0,Q.s0)(),{selectedTabId:t}=(0,Q.UO)(),a=os(),n=a.get("changeSetId")||"",s=a.get("stackId")||"",{modalType:i,setModalType:l}=ls(),{data:o,isFetching:c}=y_({stackId:s}),{data:d,isFetching:u}=P_({changeSetId:n,stackId:s}),{mutate:m}=L_({changeSetId:n,stackId:s}),{mutate:p}=x_({stackId:s,onSuccessText:g("changeSets.execute_changeset",n)}),{rootId:_}=o||{},{changeSetName:E,executionStatus:h,rootChangeSetId:S,status:T}=d||{},b=(0,Fp.useIsMutating)(),f=c||u||Boolean(b),k=Boolean(S);return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{"data-testid":"change-set-details-header",variant:"h1",actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"delete-change-set-button",ariaLabel:"Delete change set",loading:f,disabled:!za(T,k),onClick:()=>{mr({eventType:ft.CLICK,eventContext:bt.CHANGE_SETS_DETAILS_PAGE_DELETE_BUTTON_CLICKED,funnel:Rt.CHANGE_SETS}),m({stackName:s,changeSetName:n})}},g("changeSets.delete")),r.createElement(Ot.Z,{"data-testid":"execute-change-set-button",ariaLabel:"Execute change set",loading:f,disabled:!Wa(h,k),onClick:()=>{fe(A.PAUSE_AND_RESUME)?l(lt.EXECUTE_CHANGE_SET):p({changeSetName:n,stackName:s,clientRequestToken:`Console-ExecuteChangeSet-${se()}`})},variant:"primary"},g("changeSets.execute")))},E||"")},r.createElement(ln,{errorKey:"changeset_detail_error"},r.createElement(Es.Z,{size:"l"},S&&_&&r.createElement(Jr,{policy:A.CSNS},r.createElement(sn.Z,{"data-testid":"nested-change-set-alert",type:"info",buttonText:g("go_to_root_change_set"),onButtonClick:()=>e(`/stacks/changesets/changes?stackId=${encodeURIComponent(_)}&changeSetId=${encodeURIComponent(S)}`)},g("root_change_set_alert"))),r.createElement(zE,null),r.createElement(io.Z,{"data-testid":"change-set-details-tabs",ariaLabel:"change set details tabs",tabs:[{label:g("changeSets.tab_label_changes"),id:"changes",content:r.createElement(NE,null),enabled:!0},{label:g("changeSets.tab_label_input"),id:"inputs",content:r.createElement(FE,null),enabled:!0},{label:g("changeSets.tab_label_template"),id:"template",content:r.createElement(KE,null),enabled:!0},{label:g("changeSets.tab_label_json"),id:"json",content:r.createElement(ME,null),enabled:!0},{label:g("column_label_hook_invocations"),id:"hooks",content:r.createElement(ZE,null),enabled:fe(A.HOOKS)}].filter((e=>e.enabled)),activeTabId:t,onChange:t=>e(`/stacks/changesets/${t.detail.activeTabId}?stackId=${encodeURIComponent(s)}&changeSetId=${encodeURIComponent(n)}`)}),i===lt.EXECUTE_CHANGE_SET&&r.createElement(IE,{changeSetId:n,stackId:s}))))}),Tt.CHANGE_SET_DETAILS),ES=_r((()=>{const e=(0,Q.s0)(),t=rE(),{modalType:a,setModalType:n}=ls(),s=os(),i=s.get("templateURL"),l=s.get("stackName");(0,r.useEffect)((()=>{const e={...i?{templateType:R.TEXT}:{},...l?{stackName:l}:{}};return(i||l)&&t.setStacksWizardState(e),i&&t.setStacksTemplateUrl(R.TEXT,i),()=>t.clearStacksWizardState()}),[]);const[c,d]=(0,r.useState)(0),{data:u={},isFetching:m}=Z_({enabled:!1,templateURL:t.templateUrls[t.templateType]}),p=Ji(u?.parameters,L),{externalValues:_={}}=(0,o.useListExternalValues)({uniqueAWSTypes:p,xsrfToken:me.xsrfToken}),{mutate:E,isLoading:h}=R_(),S=(0,Fp.useIsMutating)(),{validate:T}=lE(),{validate:b}=nE({externalValues:_,templateSummary:u}),{validate:f}=sE(),{validate:k}=iE();return r.createElement("div",null,r.createElement(Ym.Z,{"data-testid":"create-stack-wizard",i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},activeStepIndex:c,isLoadingNextStep:h||m||Boolean(S),onNavigate:e=>{let{detail:t}=e;switch(t.requestedStepIndex){case 1:return T((()=>d(t.requestedStepIndex)));case 2:return b((()=>d(t.requestedStepIndex)));case 3:return f((()=>d(t.requestedStepIndex)));default:return d(t.requestedStepIndex)}},onCancel:()=>{e("/stacks")},onSubmit:()=>{const e=EE(t);k((()=>E(e)))},steps:[{title:g("stack.create_stack_title"),content:r.createElement(Hh,null)},{title:g("stack.details_step_header"),content:r.createElement(Wh,{setActiveStepIndex:d})},{title:g("stack.configure_stack_options_label"),content:r.createElement(zh,null)},{title:g("stack.review_header",t.stackName),content:r.createElement($h,{setActiveStepIndex:d})}],secondaryActions:3===c?r.createElement(Ot.Z,{"data-testid":"create-change-set-button",onClick:()=>n(lt.CREATE_CHANGE_SET)},g("create_change_set_label")):null}),a===lt.CREATE_CHANGE_SET&&r.createElement(gE,{changeSetType:"CREATE",displayNestedStackOptions:!0}))}),Tt.CREATE_STACK_WIZARD),gS=_r((()=>{const e=(0,Q.s0)(),t=rE(),a=os(),n=a.get("stackId")||"",s=a.get("templateURL"),{data:i,isFetching:l,refetch:c}=y_({stackId:n,enabled:!1}),{data:{stackPolicyBody:d=null}={},isFetching:u,refetch:m}=D_({stackId:n,enabled:!1});(0,r.useEffect)((()=>(s?(t.setStacksWizardState({prepareTemplateTile:"SPECIFY_TEMPLATE",specifyTemplateTile:"S3_URL",templateType:R.TEXT}),t.setStacksTemplateUrl(R.TEXT,s)):t.setStacksWizardState({prepareTemplateTile:"CURRENT_TEMPLATE",templateType:R.EXISTING}),c({throwOnError:!0,cancelRefetch:!0}),m({throwOnError:!0,cancelRefetch:!0}),()=>t.clearStacksWizardState())),[]);const[p,_]=(0,r.useState)(0),{data:E={},isFetching:h}=Z_({enabled:!1,...t.templateType===R.EXISTING?{stackId:n}:{templateURL:t.templateUrls[t.templateType]}}),S=Ji(E?.parameters,L),{externalValues:T={}}=(0,o.useListExternalValues)({uniqueAWSTypes:S,xsrfToken:me.xsrfToken}),{mutate:b,isLoading:f}=$_({}),k=(0,Fp.useIsMutating)();(0,r.useEffect)((()=>{if(!l){const e={capabilities:tl(i?.capabilities),changeSetType:"UPDATE",disableRollback:i?.disableRollback||!1,enableTerminationProtection:i?.enableTerminationProtection||!1,notificationArns:i?.notificationARNs?.length?i?.notificationARNs:[""],rollbackConfiguration:al(i?.rollbackConfiguration),tags:el(i?.tags),roleArn:i?.roleARN||"",stackId:i?.stackId,stackName:i?.stackName};t.setStacksWizardState(e)}}),[n,l]),(0,r.useEffect)((()=>{u||t.setStacksWizardState({stackPolicyDuringUpdateBody:d})}),[n,u]);const{validate:I}=lE(),{validate:y}=nE({externalValues:T,templateSummary:E}),{validate:C}=sE(!0),{validate:P}=iE(),N=l||u||h||f||Boolean(k);return r.createElement(Ym.Z,{"data-testid":"update-stack-wizard",i18nStrings:{stepNumberLabel:e=>g("stack.step",`${e}`),collapsedStepsLabel:(e,t)=>g("collapsed_steps_label",`${e}`,`${t}`),skipToButtonLabel:e=>g("skip_to_button_label",e.title),cancelButton:g("cancel_label"),previousButton:g("prev_label"),nextButton:g("next_label"),submitButton:g("submit_label"),optional:g("optional")},activeStepIndex:p,isLoadingNextStep:N,onNavigate:e=>{let{detail:t}=e;switch(t.requestedStepIndex){case 1:return I((()=>_(t.requestedStepIndex)));case 2:return y((()=>_(t.requestedStepIndex)));case 3:return C((()=>_(t.requestedStepIndex)));default:return _(t.requestedStepIndex)}},onCancel:()=>{e("/stacks")},onSubmit:()=>{const e=(e=>{const{capabilities:t,disableRollback:a,notificationArns:r,parameters:n,roleArn:s,rollbackConfiguration:i,stackName:l,stackPolicyDuringUpdateBody:o,stackPolicyDuringUpdateURL:c,stackPolicyOption:d,tags:u,templateType:m,templateUrls:p}=e;return{...dE(t),clientRequestToken:`Console-UpdateStack-${se()}`,...fe(A.PAUSE_AND_RESUME)&&{disableRollback:a},notificationARNs:r?.filter((e=>e.trim()))||[],parameters:uE(n),...s&&{roleARN:s},rollbackConfiguration:mE(i),stackName:l,...d===v.FILE&&c&&{stackPolicyDuringUpdateURL:c},...d===v.TEXT&&o&&{stackPolicyDuringUpdateBody:o},tags:pE(u),...m!==R.EXISTING&&{templateURL:p[m]},...m===R.EXISTING&&{usePreviousTemplate:!0}}})(t);P((()=>b(e)))},steps:[{title:g("stack.update_stack_title"),content:r.createElement(dS,null)},{title:g("stack.details_step_header"),content:r.createElement(nS,{setActiveStepIndex:_})},{title:g("stack.configure_stack_options_label"),content:r.createElement(sS,null)},{title:g("stack.review_header",t.stackName),content:r.createElement(iS,{setActiveStepIndex:_})}],secondaryActions:3===p?r.createElement(Ot.Z,{"data-testid":"view-change-set-button",disabled:f,loading:Boolean(k),onClick:()=>e(`/stacks/changesets/changes?stackId=${encodeURIComponent(n)}&changeSetId=${encodeURIComponent(t.changeSetId)}`)},g("view_change_set_label")):null})}),Tt.UPDATE_STACK_WIZARD),hS=_r((()=>{const[e,t]=(0,r.useState)([]),a=os(),n=a.get("stackId")||"",s=a.get("logicalResourceId")||"",{data:i}=y_({stackId:n}),l={stackId:n,transformCb:e=>Ia(e,"logicalResourceId")[s],fetchAll:!0},{displayData:o,isFetching:c}=as(l),{mutate:d}=rs(s);return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1",actions:r.createElement(Dt,{text:g("drift.detect_resource_drift"),variant:"primary",loading:c,onClick:()=>d({stackName:n,logicalResourceId:s})})},g("drift.drift_details_resource_header",i?.stackName))},r.createElement(Es.Z,{size:"l"},r.createElement(Mi,{displayData:o||{},isFetching:c}),r.createElement(Cr.Z,{"data-testid":"drift-diff-viewer",disableContentPaddings:!0,disableHeaderPaddings:!0},r.createElement(Di,{isFetching:c,propertyDifferences:o?.propertyDifferences,selectedProperties:e,onSelectionChange:e=>t(e)}),r.createElement(wi,{actualProperties:o?.actualProperties,expectedProperties:o?.expectedProperties,selectedProperties:e}))))}),Tt.STACK_RESOURCE_DRIFTS),SS=_r((()=>{const e=os().get("stackId")||"",t=(0,s.I0)(),a=(0,Q.s0)();(0,r.useEffect)((()=>{e||(a("/stacks"),t(He({type:"ERROR",header:g("invalid_url_error_message"),content:g("validate_stack_id_error_message")})))}),[]);const{data:n,isFetching:i,refreshData:l}=y_({stackId:e,shouldAutoRefetch:!1}),{isFetching:o,refreshData:c}=as({stackId:e,fetchAll:!0,enabled:!1}),{mutate:d}=O_({stackId:e}),u=(0,Fp.useIsMutating)(),m=Boolean(u)||i||o,{driftInformation:p,stackName:_}=n||{};return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{"data-testid":"stack-drifts-header",variant:"h1",actions:r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:m,onRefresh:()=>{l(),c()}}),r.createElement(Dt,{"data-testid":"detect-stack-drift-button",variant:"primary",analyticsKey:"drift_detail_stack_detect",text:g("drift.detect_stack_drift"),loading:m,onClick:()=>d({stackName:e})})))},g("breadcrumbs_drifts",_))},r.createElement(ln,{errorKey:"drift_detail_error"},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(BE,{loading:i,driftInformation:p}),r.createElement(sn.Z,null,r.createElement(r.Fragment,null,r.createElement("span",null,g("drift.resource_drift_info_section")),r.createElement(zr,{ariaLabel:"resources that support import and drift detection operations",pathAlias:"driftresources"}))),r.createElement(VE,null))))}),Tt.STACK_DRIFTS),TS=_r((()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),{modalType:a,setModalType:n}=ls(),i=os(),l=i.get("templateURL")||i.get("templateUrl")||"",c=i.get("stackName")||i.get("stackname")||"",d=(e=>{const t=[];return e?(e.forEach(((e,a)=>{if(0===a.indexOf("param_")){const r=a.slice(6).trim();r&&t.push({parameterKey:r,parameterValue:e})}})),t):t})(i),u=rE();(0,r.useEffect)((()=>{l||(t("/stacks"),e(He({content:g("quick_create_template_url_is_empty"),type:"ERROR"})));const a={templateType:R.TEXT,...c?{stackName:c}:{}};return(c||l)&&(u.setStacksWizardState(a),u.setStacksTemplateUrl(R.TEXT,l||"")),()=>u.clearStacksWizardState()}),[]);const{data:m={},isFetching:p}=Z_({enabled:Boolean(l),templateURL:l}),_=Ji(m?.parameters,L),{externalValues:E={}}=(0,o.useListExternalValues)({uniqueAWSTypes:_,xsrfToken:me.xsrfToken});(0,r.useEffect)((()=>{if(!p){const e=Qi({detailsParameters:d,templateSummary:m,presetParameters:!0});u.setStacksWizardState({...e,description:m?.description||""})}}),[p]);const{mutate:h}=R_(),{validate:S}=iE(m,E,!0),T=(0,Fp.useIsMutating)(),b=Boolean(T)||p;return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1"},g("stack.quick_create_stack"))},r.createElement("form",{onSubmit:e=>e.preventDefault()},r.createElement(Hc.Z,{"data-testid":"quick-create-wizard",actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"cancel-button",formAction:"none",variant:"link",loading:b,onClick:()=>t("/stacks")},g("cancel_label")),r.createElement(Ot.Z,{"data-testid":"create-change-set-button",onClick:()=>n(lt.CREATE_CHANGE_SET)},g("create_change_set_label")),r.createElement(Ot.Z,{"data-testid":"quick-create-stack-button",variant:"primary",loading:b,onClick:()=>{const e=EE(u);S((()=>h(e)))}},g("create_stack_label")))},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Dh,null),r.createElement(ah,null),r.createElement(rh,{loading:b,externalValues:E}),r.createElement(hh,null),!u.allChecked&&r.createElement(sn.Z,{"data-testid":"checkbox-validation-alert",type:"error"},g("review_step_checkbox_validation_error")))),a===lt.CREATE_CHANGE_SET&&r.createElement(gE,{changeSetType:"CREATE",displayNestedStackOptions:!0})))}),Tt.QUICK_CREATE_WIZARD),bS=()=>r.createElement(aE,null,r.createElement(Q.Z5,null,fe(A.RESOURCE_IMPORT)&&r.createElement(Q.AW,{path:"create-import-resources",element:r.createElement(uS,null)}),fe(A.RESOURCE_IMPORT)&&r.createElement(Q.AW,{path:"update-import-resources",element:r.createElement(mS,null)}),r.createElement(Q.AW,{path:"changesets/create",element:r.createElement(pS,null)}),r.createElement(Q.AW,{path:"changesets/:selectedTabId",element:r.createElement(_S,null)}),r.createElement(Q.AW,{path:"create",element:r.createElement(ES,null)}),r.createElement(Q.AW,{path:"create/*",element:r.createElement(ES,null)}),r.createElement(Q.AW,{path:"update",element:r.createElement(gS,null)}),r.createElement(Q.AW,{path:"update/*",element:r.createElement(gS,null)}),fe(A.DRIFT_DETECTION)&&r.createElement(Q.AW,{path:"drifts/info",element:r.createElement(hS,null)}),fe(A.DRIFT_DETECTION)&&r.createElement(Q.AW,{path:"drifts",element:r.createElement(SS,null)}),r.createElement(Q.AW,{path:"quickcreate",element:r.createElement(TS,null)}),r.createElement(Q.AW,{path:"*",element:r.createElement(eh,null)})));let fS=function(e){return e.CreatePending="CreatePending",e.DeletePending="DeletePending",e.UpdatePending="UpdatePending",e.CreateInProgress="CreateInProgress",e.UpdateInProgress="UpdateInProgress",e.DeleteInProgress="DeleteInProgress",e.Complete="Complete",e.Failed="Failed",e}({}),kS=function(e){return e.CREATE_GENERATED_TEMPLATE="CREATE_GENERATED_TEMPLATE",e.DELETE_GENERATED_TEMPLATE="DELETE_GENERATED_TEMPLATE",e.UPDATE_GENERATED_TEMPLATE="UPDATE_GENERATED_TEMPLATE",e.EXPAND_TEMPLATE_CODE="EXPAND_TEMPLATE_CODE",e.EDIT_TEMPLATE_RESOURCES="EDIT_TEMPLATE_RESOURCES",e.RESYNC_RESOURCES="RESYNC_RESOURCES",e}({}),AS=function(e){return e.RETAIN="RETAIN",e.DELETE="DELETE",e.NONE="NONE",e}({}),IS=function(e){return e.RETAIN="RETAIN",e.DELETE="DELETE",e.NONE="NONE",e}({}),yS=function(e){return e.NEW_TEMPLATE="NEW_TEMPLATE",e.EXISTING_TEMPLATE="EXISTING_TEMPLATE",e}({}),CS=function(e){return e.LogicalResourceId="logicalResourceId",e.ResourceType="resourceType",e.ResourceStatus="resourceStatus",e.ResourceIdentifier="resourceIdentifier",e.ResourceStatusReason="resourceStatusReason",e}({}),RS=function(e){return e.Complete="Complete",e.Failed="Failed",e.Pending="Pending",e.InProgress="InProgress",e}({});const vS=e=>{let{templateIdentifier:t,refetchInterval:a,errorHandler:r,enabled:n=!0}=e;const s={resource:o.ApiResource.GeneratedTemplate,action:o.ApiAction.Describe,requestParams:{identifier:t},xsrfToken:me.xsrfToken,shouldAutoRefetch:n&&Boolean(t?.length),refetchInterval:n&&Boolean(t?.length)?a:0,enabled:n&&Boolean(t?.length)},i=(0,o.useSDKQuery)(s);return es({status:i.status,error:i.error,errorText:{errorContent:g("template_detail_failed_get_details",t)},...r&&{errorHandler:r}}),i},LS=e=>{const t={action:o.ApiAction.Update,resource:o.ApiResource.GeneratedTemplate,xsrfToken:me.xsrfToken,method:"POST",onMutate:e=>{let{identifier:t}=e;const a=[o.ApiResource.GeneratedTemplate,o.ApiAction.Describe,{identifier:t}];o.queryClient.invalidateQueries(a)},...e.successHandler?{onSuccess:e.successHandler}:{},...e.errorHandler?{onSuccess:e.errorHandler}:{}};return(0,o.useSDKMutation)(t)},PS=e=>e.map(((e,t)=>({id:`${e.identifier}-${t}`,resourceId:e.identifier}))),NS=e=>{let{visible:t,dismiss:a,origin:n}=e;const{pathname:i}=(0,Q.TH)(),l=(0,Q.s0)(),c=os(),d=c.get("templateName"),u=c.get("templateArn"),{mutate:m,isLoading:p}=(e=>{let{successHandler:t}=e;const a=(0,s.I0)(),n=(0,Q.s0)(),[i,l]=(0,r.useState)(""),c={action:o.ApiAction.Delete,resource:o.ApiResource.GeneratedTemplate,xsrfToken:me.xsrfToken,method:"POST",onSuccess:()=>{n("/template-generator"),a(He({id:ne(),content:`Deleting template ${i}`,type:"INFO"})),t()},onMutate:e=>{let{identifier:t}=e;l(t)}},d=(0,o.useSDKMutation)(c);return es({status:d.status,error:d.error,errorText:{errorContent:g("delete_template_failed_header",i)}}),d})({successHandler:()=>a()}),_=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link",onClick:()=>a()},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary","data-testid":"delete-generated-template-confirm",onClick:()=>{m({identifier:u}),mr({eventContext:n,eventDetail:n===jr.TEMPLATE_GENERATOR_DETAIL?Xr.TEMPLATE_DETAIL_DELETE_FINISH:Xr.TEMPLATE_LIST_DELETE_FINISH})},loading:p},g("delete")));return r.createElement(Po.Z,{visible:t,header:g("delete_title",d),onDismiss:()=>(a(),void(i.includes("/template-generator/details")&&l("/template-generator"))),footer:_,closeAriaLabel:"Close modal"},r.createElement(z.Z,{margin:{bottom:"s"}},h("template_generator_delete_template_header",r.createElement("strong",null,d))),r.createElement(sn.Z,{type:"info"},g("template_generator_delete_template_description")))},OS={[AS.RETAIN]:{label:g("retain"),value:AS.RETAIN},[AS.DELETE]:{label:g("delete"),value:AS.DELETE}},xS={[IS.RETAIN]:{label:g("retain"),value:IS.RETAIN},[IS.DELETE]:{label:g("delete"),value:IS.DELETE}};g("template_generator_configuration_modal_generate_new_label"),g("template_generator_configuration_modal_generate_new_description"),yS.NEW_TEMPLATE,g("template_generator_configuration_modal_existing_label"),g("template_generator_configuration_modal_existing_description"),yS.EXISTING_TEMPLATE;var DS=function(e){return e.NewTemplate="NEW_TEMPLATE",e.ExistingStack="EXISTING_STACK",e}(DS||{});const wS=[{value:DS.NewTemplate,label:g("template_generator_configuration_modal_generate_new_label")},{value:DS.ExistingStack,label:g("template_generator_configuration_modal_generate_existing_stack")}],ZS=e=>{let{header:t,submitButtonLabel:a,visible:n,loading:s,submitting:i,initialTemplateConfiguration:l,onDismiss:o,onSubmit:c,isCreate:d=!1,error:u=null}=e;const[m,p]=(0,r.useState)(l.name),[_,E]=(0,r.useState)(l.cloudFormationTemplateConfiguration),[h,S]=(0,r.useState)(wS[0].value),[T,b]=(0,r.useState)("");(0,r.useEffect)((()=>{p(l.name),E(l.cloudFormationTemplateConfiguration)}),[l]);const f=r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{variant:"link","data-testid":"modal-button-cancel-template",onClick:o,disabled:i},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary","data-testid":"modal-button-confirm-template",loading:i,disabled:s,onClick:()=>{let e;d?(e={name:m,cloudFormationTemplateConfiguration:_,...T?{stackName:T}:{}},mr({eventContext:jr.TEMPLATE_GENERATOR_CREATE,eventDetail:Xr.TEMPLATE_LIST_CREATE_TEMPLATE_TYPE,eventValue:h}),mr({eventContext:jr.TEMPLATE_GENERATOR_CREATE,eventDetail:Xr.TEMPLATE_LIST_CREATE_DELETION_POLICY,eventValue:_.deletionPolicy}),mr({eventContext:jr.TEMPLATE_GENERATOR_CREATE,eventDetail:Xr.TEMPLATE_LIST_CREATE_UPDATE_REPLACE_POLICY,eventValue:_.updateReplacePolicy})):(e={identifier:l?.arn,newName:m,cloudFormationTemplateConfiguration:_},mr({eventContext:jr.TEMPLATE_GENERATOR_EDIT,eventDetail:Xr.TEMPLATE_DETAIL_EDIT_DELETION_POLICY,eventValue:_.deletionPolicy}),mr({eventContext:jr.TEMPLATE_GENERATOR_EDIT,eventDetail:Xr.TEMPLATE_DETAIL_EDIT_UPDATE_REPLACE_POLICY,eventValue:_.updateReplacePolicy})),c(e)}},a)));return r.createElement(Po.Z,{"data-analytics":d?jr.TEMPLATE_GENERATOR_CREATE:jr.TEMPLATE_GENERATOR_EDIT,"data-analytics-type":At.EVENT_CONTEXT,header:t,visible:n,onDismiss:o,footer:f,closeAriaLabel:"Close modal"},s?r.createElement(vr.Z,null):r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ks.Z,{"data-testid":"template-name-field",label:g("template_name")},r.createElement(Vs.Z,{ariaRequired:!0,"data-testid":"template-name-input",value:m,placeholder:g("template_generator_configuration_modal_template_name_placeholder"),onChange:e=>p(e.detail.value)})),r.createElement(Zt.Z,{headerText:g("advanced_settings")},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(Ks.Z,{"data-testid":"deletion-policy-field",label:g("deletion_policy"),description:r.createElement(r.Fragment,null,r.createElement("span",null,g("template_generator_configuration_modal_deletion_policy_description")),r.createElement(wr,{ariaLabel:"specifying resource behavior if a stack is deleted",isInline:!0,pathName:"aws-attribute-deletionpolicy"}))},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select deletion policy","data-testid":"template-configuration-deletion-policy-select",selectedOption:OS[_.deletionPolicy],onChange:e=>{E({..._,deletionPolicy:e.detail.selectedOption.value})},options:Object.values(OS),selectedAriaLabel:"Selected deletion policy"})),r.createElement(Ks.Z,{"data-testid":"update-replace-policy-field",label:g("update_replace_policy"),description:r.createElement(r.Fragment,null,r.createElement("span",null,g("template_generator_configuration_modal_update_policy_description")),r.createElement(wr,{ariaLabel:"specifying resource behavior if a stack is updated",isInline:!0,pathName:"aws-attribute-updatereplacepolicy"}))},r.createElement(Gs.Z,{ariaRequired:!0,ariaLabel:"Select update replace policy","data-testid":"template-configuration-update-replace-policy-select",selectedOption:xS[_.updateReplacePolicy],onChange:e=>{E({..._,updateReplacePolicy:e.detail.selectedOption.value})},options:Object.values(xS),selectedAriaLabel:g("template_generator_configuration_modal_selected_update_replace_policy_aria_label")})),d&&r.createElement(r.Fragment,null,r.createElement(Ks.Z,{"data-testid":"template-type-field",label:g("template_type"),stretch:!0},r.createElement(pi.Z,{ariaRequired:!0,"data-testid":"template-stack-tiles",value:h,items:wS,onChange:e=>S(e.detail.value)})),h===DS.ExistingStack&&r.createElement(Ks.Z,{"data-testid":"stack-id-field",description:"The stack's resources will be added to the template in addition to your selected resources.",label:g("template_generator_configuration_modal_stack_label")},r.createElement(Vs.Z,{ariaRequired:!0,onChange:e=>{let{detail:t}=e;return b(t.value)},value:T,placeholder:g("template_generator_configuration_modal_stack_arn_name_placeholder")})))))),Boolean(u?.message?.length)&&r.createElement(sn.Z,{visible:!0,type:"error",header:g(d?"create_failed":"update_failed")},u.message))},US=e=>{let{visible:t,dismiss:a}=e;const n={name:"",cloudFormationTemplateConfiguration:{deletionPolicy:AS.DELETE,updateReplacePolicy:IS.DELETE}},{status:i,mutate:l,isLoading:c,error:d,reset:u}=(e=>{let{successHandler:t}=e;const a=(0,s.I0)(),r=(0,Q.s0)(),n=(0,Fp.useQueryClient)(),i={action:o.ApiAction.Create,resource:o.ApiResource.GeneratedTemplate,xsrfToken:me.xsrfToken,method:"POST",onSuccess:e=>{let{name:s,arn:i}=e;n.resetQueries([o.ApiResource.GeneratedTemplate,o.ApiAction.List]);const l=new URLSearchParams({templateName:s,templateArn:i});r(`/template-generator/details/templateResources?${l.toString()}`),a(He({id:ne(),header:g("create_template_succeeded_header",s),content:g("create_template_succeeded_description")})),t()}};return(0,o.useSDKMutation)(i)})({successHandler:a});return r.createElement(ZS,{visible:t,header:g("create_template"),submitButtonLabel:g("create_template"),initialTemplateConfiguration:n,onSubmit:e=>{l(e),mr({eventContext:jr.TEMPLATE_GENERATOR_LIST_TABLE,eventDetail:Xr.TEMPLATE_LIST_CREATE_FINISH})},onDismiss:()=>{a(),u()},submitting:c,templateNameErrorText:"error"===i?g("create_template_failed_header"):null,stackNameErrorText:"",error:"error"===i&&d,isCreate:!0})},FS=e=>{let{visible:t,initialTemplateConfiguration:a,updateHandler:n,dismiss:i}=e;const l=(0,s.I0)(),o=(0,Q.s0)(),c=(0,Q.TH)(),{mutate:d,isLoading:u,status:m,error:p,reset:_}=LS({successHandler:e=>{let{name:t,arn:a}=e;i();const r=new URLSearchParams({templateName:t,templateArn:a});o(`${c.pathname}?${r.toString()}`,{replace:!0}),l(He({id:ne(),type:"INFO",content:g("updating_template",t)})),n&&n()}});return r.createElement(ZS,{loading:u,visible:t,header:g("edit_template_configuration"),submitButtonLabel:g("save_label"),initialTemplateConfiguration:{...a,cloudFormationTemplateConfiguration:a.cloudFormationTemplateConfiguration||{deletionPolicy:AS.RETAIN,updateReplacePolicy:IS.RETAIN}},onSubmit:e=>{d(e),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL,eventDetail:Xr.TEMPLATE_DETAIL_EDIT_FINISH})},onDismiss:()=>{i(),_()},submitting:u,error:"error"===m&&p})},MS=e=>{const{isJson:t,isEmpty:a,templateBodyJson:n,templateBodyYaml:s,templateName:i,hasExpand:l,expandDisabled:o,origin:c,onExpand:d,setIsJson:u}=e,m="JSON",p="YAML",_=(e=>{const{isEmpty:t,isJson:a,templateBodyJson:r,templateBodyYaml:n,templateName:s}=e;return{"data-testid":"template-code-download",buttonLabel:g("download"),disabled:t,fileName:a?`${s}-template.json`:`${s}-template.yaml`,fileType:a?"application/json":"application/x-yaml",downloadBody:a?r:n}})({isEmpty:a,isJson:t,templateBodyJson:n,templateBodyYaml:s,templateName:i});return r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(lo.Z,{"data-testid":"template-code-file-type",disabled:a,items:[{text:"JSON",id:m,disabled:!1},{text:"YAML",id:p,disabled:!1}],onItemClick:e=>{let{detail:t}=e;u(t.id===m),mr({eventContext:c,eventDetail:Xr.TEMPLATE_CODE_TYPE,eventValue:t.id===m?m:p})}},t?m:p),r.createElement(Qr,_),r.createElement(xe.Z,{dismissButton:!1,position:"top",size:"small",triggerType:"custom",content:r.createElement(qr.Z,{type:"success",iconAriaLabel:"Copied"},g("copied"))},r.createElement(Ot.Z,{"data-testid":"template-code-copy",iconName:"copy",disabled:a,onClick:()=>{W(t?n:s),mr({eventContext:c,eventDetail:Xr.TEMPLATE_CODE_COPY,eventValue:t?m:p})}},g("copy"))),l&&null!=d&&r.createElement(Ot.Z,{ariaLabel:"Expand code","data-testid":"template-code-expand",disabled:o||a,iconName:"expand",onClick:()=>{d()}}))},KS=e=>{let{visible:t,dismiss:a,templateName:n,templateBodyJson:s,templateBodyYaml:i}=e;const[l,o]=(0,r.useState)(!0),c={isJson:l,templateBodyJson:s,templateBodyYaml:i,setIsJson:o,isEmpty:!1,hasExpand:!1,expandDisabled:!0,templateName:n,origin:jr.TEMPLATE_GENERATOR_CODE_EXPAND};return r.createElement(Po.Z,{onDismiss:()=>a(),visible:t,closeAriaLabel:"Close modal",header:g("template"),size:"max"},r.createElement(Es.Z,{size:"s"},r.createElement(z.Z,{float:"right"},r.createElement(MS,c)),r.createElement(Pr,null,l?c.templateBodyJson:c.templateBodyYaml)))},WS=e=>{let{originalResourceList:t}=e;const a=t?.reduce((function(e,t){const{resourceType:a,resourceIdentifier:r,logicalResourceId:n}=t;return e[n]={resourceType:a,resourceIdentifier:r,logicalResourceId:n,errorText:""},e}),{});return a},zS=e=>{let{visible:t,templateArn:a,resources:n,dismiss:s,updateHandler:i}=e;const[l,o]=(0,r.useState)(WS({originalResourceList:n})),[c,d]=(0,r.useState)({}),{mutate:u,isLoading:m,status:p,error:_,reset:E}=LS({successHandler:()=>{s(),i()}});return(0,r.useEffect)((()=>{o(WS({originalResourceList:n}))}),[n]),r.createElement(Po.Z,{visible:t,"data-testid":"template-resource-edit-modal",onDismiss:()=>{E(),s()},closeAriaLabel:"Close modal",footer:r.createElement(z.Z,{float:"right"},r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{variant:"link",onClick:()=>{E(),s()}},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary",loading:m,disabled:m,onClick:()=>{(()=>{const e={identifier:a,addResources:Object.values(c),removeResources:Object.keys(c)};u(e)})(),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL_RESOURCES,eventDetail:Xr.TEMPLATE_RESOURCES_EDIT_FINISH})}},g("ok_label")))),header:g("edit_resources")},r.createElement(Es.Z,{size:"l"},Object.keys(l).map(((e,t)=>r.createElement(z.Z,{key:`${l[e].resourceType}-${e}-box`},t>0&&r.createElement(z.Z,{margin:{bottom:"l"}},r.createElement("hr",{className:"cfn-template-resource-separater"})),r.createElement(Es.Z,{size:"l"},r.createElement(Or.Z,{columns:2},r.createElement(Al,{itemKey:g("resource_type"),itemValue:l[e].resourceType,id:`edit-resource-type-${t}`}),r.createElement(Al,{itemKey:g("physical_id"),itemValue:"-",id:`edit-physical-id-${t}`})),r.createElement(Ks.Z,{i18nStrings:{errorIconAriaLabel:"Error: "},description:g("edit_template_resource_modal_logical_id_description"),label:g("logical_id"),constraintText:g("edit_template_resource_modal_logical_id_hint_text"),errorText:l[e].errorText},r.createElement(Vs.Z,{ariaRequired:!0,key:`${l[e].resourceType}-${e}-input`,value:l[e].logicalResourceId,onChange:t=>{let{detail:a}=t;return((e,t)=>{if(e!==t){const{errorText:a,...r}=l[t],n={...c,[t]:{...r,logicalResourceId:e}};o({...l,[t]:{...l[t],logicalResourceId:e,...e.length?{}:{errorText:g("edit_template_resource_modal_logical_id_error_text")}}}),d(n)}})(a.value,e)}}))))))),"error"===p&&Boolean(_?.message?.length)&&r.createElement(sn.Z,{visible:!0,type:"error",header:g("edit_template_resource_modal_update_failed")},_?.message))},$S=e=>{let{visible:t,dismiss:a,updateHandler:n}=e;const s=os(),i=s.get("templateName"),l=s.get("templateArn"),{mutate:o,isLoading:c}=LS({successHandler:()=>a()}),d=r.createElement(z.Z,{variant:"span",float:"right"},r.createElement(Ot.Z,{variant:"link",onClick:()=>a()},g("cancel_label")),r.createElement(Ot.Z,{variant:"primary","data-testid":"resync-resources-confirm",onClick:()=>{o({identifier:l,refreshAllResources:!0}),n(),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL,eventDetail:Xr.TEMPLATE_DETAIL_RESYNC_FINISH})},loading:c},g("resync")));return r.createElement(Po.Z,{visible:t,header:g("resync_resources_modal_header",i),onDismiss:()=>a(),footer:d,closeAriaLabel:"Close modal"},g("resync_resources_modal_description"))},VS=[{id:"templateBrowserOverviewStep1",header:g("template_generator_overview_creat_template_header"),cell:g("template_generator_overview_creat_template_description")},{id:"templateBrowserOverviewStep2",header:g("template_generator_overview_add_resource_header"),cell:g("template_generator_overview_add_resource_description")},{id:"templateBrowserOverviewStep3",header:g("template_generator_overview_use_template_header"),cell:g("template_generator_overview_use_template_description")}],GS=e=>{let{expanded:t,onChange:a}=e;return r.createElement(Zt.Z,{"data-analytics":jr.TEMPLATE_GENERATOR_LIST_OVERVIEW,"data-analytics-type":At.EVENT_CONTEXT,variant:"container",headerText:g("template_generator_overview_header"),expanded:t,onChange:e=>{let{detail:t}=e;return a(t)}},r.createElement(Es.Z,{direction:"vertical",size:"m"},r.createElement(z.Z,null,g("template_generator_overview_description")),r.createElement(Or.Z,{columns:3,borders:"vertical",variant:"text-grid"},VS.map((e=>r.createElement(z.Z,{id:e.id,key:e.id},r.createElement(Es.Z,{direction:"vertical",size:"s"},r.createElement(z.Z,{variant:"strong"},e.header),r.createElement(z.Z,null,e.cell))))))))};var BS=a(83180),HS=a.n(BS),qS=function(e){return e.Arn="arn",e.Name="name",e.Status="status",e.CreationTime="creationTime",e.LastUpdated="lastUpdated",e.NumberOfResources="numberOfResources",e}(qS||{});const YS=[{id:qS.Name,key:e=>e.name,header:g("template_name"),cell:e=>{const t=`/template-generator/details/templateResources?${new URLSearchParams({templateName:e.name,templateArn:e.arn}).toString()}`;return r.createElement(ee,{to:t},e.name)}},{id:qS.Status,key:e=>e.status,header:g("template_status"),cell:e=>XS[e.status]},{id:qS.CreationTime,key:e=>e.creationTime,header:g("creation_time"),cell:e=>r.createElement(Ui,{timestamp:e.creationTime})},{id:qS.LastUpdated,key:e=>e.lastUpdatedTime,header:g("last_updated_time"),cell:e=>r.createElement(Ui,{timestamp:e.lastUpdatedTime})},{id:qS.NumberOfResources,key:e=>e.numberOfResources,header:g("resources"),cell:e=>e.numberOfResources}],XS={[fS.Complete]:r.createElement(qr.Z,{iconAriaLabel:"Complete"},g("complete")),[fS.CreatePending]:r.createElement(qr.Z,{iconAriaLabel:"Create pending",type:"pending"},g("create_pending")),[fS.UpdatePending]:r.createElement(qr.Z,{iconAriaLabel:"Update pending",type:"pending"},g("update_pending")),[fS.DeletePending]:r.createElement(qr.Z,{iconAriaLabel:"Delete pending",type:"pending"},g("delete_pending")),[fS.CreateInProgress]:r.createElement(qr.Z,{iconAriaLabel:"Create in progress",type:"in-progress"},g("create_in_progress")),[fS.UpdateInProgress]:r.createElement(qr.Z,{iconAriaLabel:"Update in progress",type:"in-progress"},g("update_in_progress")),[fS.DeleteInProgress]:r.createElement(qr.Z,{iconAriaLabel:"Delete in progress",type:"in-progress"},g("delete_in_progress")),[fS.Failed]:r.createElement(qr.Z,{iconAriaLabel:"Failed",type:"error"},g("failed"))},jS={emptyState:{title:g("no_templates"),subtitle:g("empty_templates_table_description"),action:""},noMatch:{title:g("no_matches"),subtitle:g("no_results_match"),action:""},filter:{countText:e=>`${e||0} matches`,ariaLabel:"Filter Templates",placeholder:g("template_browser_filter_placeholder"),filteringClearAriaLabel:"Clear templates filter input"},loadingText:g("template_browser_loading_Text"),paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{selectionGroupLabel:"Items selection",itemSelectionLabel:function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedItems:[]}).selectedItems.filter((t=>t.arn===e.arn)).length?g("is_selected",e.arn):g("not_selected")}}},QS=qS.Arn,JS={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:[{label:"Template properties",options:[{id:qS.Name,label:g("template_name"),editable:!0},{id:qS.Status,label:g("template_status"),editable:!0},{id:qS.CreationTime,label:g("creation_time"),editable:!0},{id:qS.LastUpdated,label:g("last_updated_time"),editable:!0},{id:qS.NumberOfResources,label:g("resources"),editable:!0}]}]}},eT=(YS.map((e=>e.id)),{isDescending:!0,sortingColumn:{sortingField:qS.LastUpdated}}),tT=e=>Je({preferenceType:N.TemplateBrowser,preferenceSettings:e}),aT=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a,overviewExpanded:r}=e.tablePreferences.TEMPLATE_BROWSER;return{wrapLines:t,visibleContent:a,overviewExpanded:r,pageSize:100}})),rT=()=>{const[e,t]=(0,r.useState)(!0),[a,n]=(0,r.useState)(!1),{onSplitPanelToggle:s}=cs(),i=os(),l=i.get("templateName"),c=i.get("templateArn"),{data:d}=vS({templateIdentifier:c||l,enabled:Boolean(c)}),u=!d?.resources?.length,{isLoading:m,data:p,refreshData:_}=(e=>{let{templateArn:t,enabled:a=!0}=e;const r={resource:o.ApiResource.GeneratedTemplate,action:o.ApiAction.Get,requestParams:{identifier:t},xsrfToken:me.xsrfToken,enabled:a,select:e=>({...e,templateBodyJson:JSON.stringify(JSON.parse(e.templateBodyJson),null,2)})},n=(0,o.useSDKQuery)(r);return es({status:n.status,error:n.error,errorText:{errorContent:g("generated_template_failed_get_template_code")}}),n})({templateArn:c,enabled:!u}),E={isEmpty:u,isJson:e,setIsJson:t,templateBodyJson:p?.templateBodyJson||"",templateBodyYaml:p?.templateBodyYaml||"",templateName:l,hasExpand:!0,expandDisabled:m,origin:jr.TEMPLATE_GENERATOR_DETAIL_CODE,onExpand:()=>n(!0)};return(0,r.useEffect)((()=>{_()}),[d?.resources]),r.createElement(r.Fragment,null,r.createElement(Cr.Z,{"data-analytics":jr.TEMPLATE_GENERATOR_DETAIL_CODE,"data-analytics-type":At.EVENT_CONTEXT,header:r.createElement(Rr.Z,{variant:"h2",actions:r.createElement(MS,E)},g("template"))},m&&r.createElement(vr.Z,null),!m&&r.createElement(r.Fragment,null,u&&r.createElement(z.Z,{textAlign:"center",color:"inherit"},r.createElement(z.Z,{margin:{bottom:"xxs"},padding:{top:"xxs"}},r.createElement("b",{"data-testid":"template-code-empty-header"},g("no_resources")),r.createElement(z.Z,{variant:"p","data-testid":"template-code-empty-body"},g("template_code_empty_description"))),r.createElement(Ot.Z,{"data-testid":"template-code-add-resource",onClick:()=>s({detail:{open:!0}})},g("add_resources"))),!u&&r.createElement(Pr,null,e?E.templateBodyJson:E.templateBodyYaml))),a&&r.createElement(KS,{templateName:l,templateBodyJson:E.templateBodyJson,templateBodyYaml:E.templateBodyYaml,visible:a,dismiss:()=>n(!1)}))};var nT=a(58210);let sT=function(e){return e.Complete="success",e.CreatePending="in-progress",e.UpdatePending="in-progress",e.DeletePending="in-progress",e.CreateInProgress="in-progress",e.UpdateInProgress="in-progress",e.DeleteInProgress="in-progress",e.Failed="error",e}({});const iT=g("template_detail_template_error"),lT={[fS.Complete]:()=>({resultText:g("complete"),statusType:sT.Complete}),[fS.Failed]:()=>({resultText:iT,statusType:sT.Failed}),[fS.CreatePending]:()=>({value:0,additionalInfo:r.createElement(qr.Z,{type:"pending","data-testid":"create-pending-indicator",iconAriaLabel:"Create pending"},g("create_pending")),statusType:sT.CreatePending}),[fS.UpdatePending]:()=>({value:0,additionalInfo:r.createElement(qr.Z,{type:"pending","data-testid":"update-pending-indicator",iconAriaLabel:"Update pending"},g("update_pending")),statusType:sT.UpdatePending}),[fS.DeletePending]:()=>({value:0,additionalInfo:r.createElement(qr.Z,{type:"pending","data-testid":"delete-pending-indicator",iconAriaLabel:"Delete pending"},g("delete_pending")),statusType:sT.DeletePending}),[fS.CreateInProgress]:(e,t)=>({value:e,additionalInfo:t,statusType:sT.CreateInProgress}),[fS.UpdateInProgress]:(e,t)=>({value:e,additionalInfo:t,statusType:sT.UpdateInProgress}),[fS.DeleteInProgress]:(e,t)=>({value:e,additionalInfo:t,statusType:sT.DeleteInProgress})},oT=e=>{let{templateId:t,creationTime:a,lastUpdateTime:n,deletionPolicy:s,updateReplacePolicy:i,stackId:l,templateStatus:o=fS.Complete,resourceCompleted:c=0,totalResources:d=0}=e;const u=c>=0&&d>0?Math.floor(c/d*100):0,m=g("template_status_progress",`${c}/${d}`),p=lT[o](u,m),_=!t||!a||!n;return r.createElement(r.Fragment,null,r.createElement(Cr.Z,{"data-testid":"template-detail-section-container","data-analytics":jr.TEMPLATE_GENERATOR_DETAIL_OVERVIEW,"data-analytics-type":At.EVENT_CONTEXT,header:r.createElement(Rr.Z,{variant:"h2"},g("template_detail_overview_header"))},r.createElement(Es.Z,{size:"m",direction:"vertical"},r.createElement(Or.Z,{columns:4,borders:"vertical",variant:"text-grid"},_?r.createElement(vr.Z,{"data-testid":"template-detail-spinner",size:"large"}):r.createElement(r.Fragment,null,r.createElement(Al,{id:"templateId",itemKey:g("template_detail_overview_template_id_label"),itemValue:r.createElement(Yr,{text:t})}),r.createElement(Al,{id:"creationTime",itemKey:g("creation_time"),itemValue:r.createElement(Ui,{timestamp:a})}),r.createElement(Al,{id:"lastUpdateTime",itemKey:g("last_updated_time"),itemValue:r.createElement(Ui,{timestamp:n})}),r.createElement(Al,{id:"templateStatus",itemKey:g("template_status"),itemValue:r.createElement(nT.Z,{variant:"key-value",status:p.statusType,"data-analytics":`template-id: ${t}, template-progress: ${o}`,"data-analytics-type":"eventDetail",value:p.value,resultText:p.resultText,additionalInfo:p.additionalInfo})}))),r.createElement(Zt.Z,{headerText:g("configurations"),variant:"footer"},r.createElement(z.Z,{margin:{top:"s"}},r.createElement(Or.Z,{columns:4,borders:"vertical",variant:"text-grid"},r.createElement(Al,{id:"deletionPolicy",itemKey:g("deletion_policy"),itemValue:s}),r.createElement(Al,{id:"updateReplacePolicy",itemKey:g("update_replace_policy"),itemValue:i}),r.createElement(Al,{id:"stackId",itemKey:g("template_detail_overview_stack_id_label"),itemValue:l})))))))},cT=[{id:CS.ResourceType,key:e=>e.resourceType,header:g("resource_type"),cell:e=>e.resourceType},{id:CS.LogicalResourceId,key:e=>e.logicalResourceId,header:g("logical_id"),cell:e=>e.logicalResourceId},{id:CS.ResourceStatus,key:e=>e.resourceStatus,header:g("template_status"),cell:e=>r.createElement(dT,{resourceStatus:e.resourceStatus,resourceStatusReason:e.resourceStatusReason})}],dT=e=>{let{resourceStatus:t,resourceStatusReason:a}=e;switch(t){case RS.Complete:return r.createElement(qr.Z,{iconAriaLabel:"Success status"},t);case RS.InProgress:return r.createElement(qr.Z,{iconAriaLabel:"In progress status",type:"in-progress"},t);case RS.Pending:return r.createElement(qr.Z,{iconAriaLabel:"Pending status",type:"pending"},t);case RS.Failed:return r.createElement(z.Z,{color:"text-status-error"},r.createElement(xe.Z,{dismissAriaLabel:"Close",header:g("template_resource_table_status_reason"),content:a},r.createElement(qr.Z,{iconAriaLabel:"Error status",type:"error"},t)))}},uT={selectionGroupLabel:g("items_selection"),itemSelectionLabel:function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedItems:[]}).selectedItems.filter((t=>t.logicalResourceId===e.logicalResourceId)).length?g("is_selected",e.logicalResourceId):g("not_selected")},tableLabel:g("template_resources")},mT=CS.LogicalResourceId,pT=(g("table_preferences_title"),g("table_preferences_confirm_label"),g("table_preferences_cancel_label"),g("table_size"),g("items","5"),g("items","10"),g("items","50"),g("items","100"),g("table_preferences_content_selector_title"),g("resources"),CS.LogicalResourceId,g("logical_id"),CS.ResourceType,g("resource_type"),cT.map((e=>e.id))),_T=(CS.LogicalResourceId,()=>{const e=["templateResources","templateCode"],t=(0,Q.s0)(),a=(0,Q.TH)(),n=(0,s.I0)(),i=os(),{onSplitPanelToggle:l,lastRefreshed:c}=cs(),{selectedTabId:d}=(0,Q.UO)(),u=i.get("templateName"),m=i.get("templateArn"),[p,_]=(0,r.useState)([]),[E,h]=(0,r.useState)(!0),[S,T]=(0,r.useState)(!0),[b,f]=(0,r.useState)(null),[k,A]=(0,r.useState)({arn:"-",name:"",statusReason:"",resourcesCompleted:0,totalResources:0,progress:{resourcesSucceeded:0},creationTime:null,lastUpdatedTime:null,resources:[],status:fS.Complete,cloudFormationTemplateConfiguration:{deletionPolicy:AS.NONE,updateReplacePolicy:IS.NONE},updateDisabled:!1,stackName:""}),{mutate:I,status:y,error:C}=LS({successHandler:e=>{let{name:r,arn:n}=e;f(null);const s=new URLSearchParams({templateName:r,templateArn:n});t(`${a.pathname}?${s.toString()}`,{replace:!0}),D()}}),{data:R,isLoading:v,isFetching:L}=vS({templateIdentifier:m||u,enabled:E,refetchInterval:1500,errorHandler:()=>t("/template-generator")}),P=R||{},N=(0,Fp.useIsMutating)();es({status:y,error:C,errorText:{errorContent:g("template_detail_failed_update_template",u)}});const O=!v&&P&&P.progress,x=`updateTemplateInProgress-${u}`,D=()=>{n(He({id:x,type:"INFO",content:g("updating_template",u)})),h(!0)};return(0,r.useEffect)((()=>{const e=P.status===fS.Complete||P.status===fS.Failed;if(!L){const{progress:t,status:a}=P,r=t||{},s=r.resourcesSucceeded+r.resourcesFailed,i=r.resourcesSucceeded+r.resourcesFailed+r.resourcesPending+r.resourcesProcessing;(k.lastUpdatedTime!==P.lastUpdatedTime||k.status.toString()!==fS[P.status].toString())&&A({...k,...P,status:fS[a],resourcesCompleted:s,totalResources:i,updateDisabled:r.resourcesPending+r.resourcesProcessing>0}),e&&n(Ye({id:x}))}h(!!S||!e)}),[L,P]),(0,r.useEffect)((()=>{if(!N){let e;return E&&(T(!0),A({...k,...P,status:fS.UpdatePending}),e=setTimeout((()=>{T(!1)}),5e3)),()=>{clearTimeout(e)}}}),[E]),(0,r.useEffect)((()=>{h(!0)}),[c]),(0,r.useEffect)((()=>(u||m||t("/template-generator"),()=>{const e=[o.ApiResource.GeneratedTemplate,o.ApiAction.Describe,{identifier:m}];o.queryClient.cancelQueries({queryKey:e})})),[]),r.createElement(Rl.Z,{"data-analytics":jr.TEMPLATE_GENERATOR_DETAIL,"data-analytics-type":At.EVENT_CONTEXT,header:r.createElement(Rr.Z,{"data-testid":"template-header",variant:"h1",actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"edit-template-button",disabled:v||k.updateDisabled||Boolean(N),onClick:()=>{f(kS.UPDATE_GENERATED_TEMPLATE),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL,eventDetail:Xr.TEMPLATE_DETAIL_EDIT_START})}},g("edit_label")),r.createElement(Ot.Z,{"data-testid":"delete-template-button",disabled:v||k.updateDisabled||Boolean(N),onClick:()=>{f(kS.DELETE_GENERATED_TEMPLATE),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL,eventDetail:Xr.TEMPLATE_DETAIL_DELETE_START})}},g("delete")),r.createElement(Ot.Z,{"data-testid":"resync-template-button",disabled:v||k.updateDisabled||Boolean(N),onClick:()=>{f(kS.RESYNC_RESOURCES),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL,eventDetail:Xr.TEMPLATE_DETAIL_RESYNC_START})}},g("template_detail_resync_resources_label")))},u)},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(oT,{creationTime:k.creationTime,lastUpdateTime:k.lastUpdatedTime,templateId:k.arn,templateStatus:k.status,totalResources:k.totalResources,resourceCompleted:k.resourcesCompleted,deletionPolicy:k.cloudFormationTemplateConfiguration.deletionPolicy,stackId:k.stackName,updateReplacePolicy:k.cloudFormationTemplateConfiguration.updateReplacePolicy}),r.createElement(io.Z,{ariaLabel:"Template detail code tab",onChange:e=>{let{detail:a}=e;const r=new URLSearchParams({templateName:u,templateArn:m}),n=`/template-generator/details/${a.activeTabId}?${r.toString()}`;t(n),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL,eventDetail:Xr.TEMPLATE_DETAIL_TAB,eventValue:a?.activeTabId||""})},activeTabId:e.includes(d)?d:e[0],tabs:[{label:g("template_resources"),id:e[0],content:r.createElement(yi.Z,{"data-analytics":jr.TEMPLATE_GENERATOR_DETAIL_RESOURCES,"data-analytics-type":At.EVENT_CONTEXT,onSelectionChange:e=>{let{detail:t}=e;const a=t.selectedItems;_(a)},selectedItems:p,ariaLabels:uT,columnDefinitions:cT,items:k.resources,loading:!O,loadingText:g("template_detail_loading_text"),selectionType:"multi",trackBy:mT,visibleColumns:pT,empty:r.createElement(ci,{header:g("no_template_resources"),description:g("template_detail_empty_description")}),header:r.createElement(Rr.Z,{counter:`(${k.resources.length})`,actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Ot.Z,{"data-testid":"remove-template-resources-button",disabled:v||Boolean(N)||k.updateDisabled||0===p.length,onClick:()=>{(()=>{const e=p.map((e=>{let{logicalResourceId:t}=e;return t}));I({identifier:u,removeResources:e}),_([])})(),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL_RESOURCES,eventDetail:Xr.TEMPLATE_RESOURCES_REMOVE_START})}},g("remove_item_button_label")),r.createElement(Ot.Z,{"data-testid":"edit-template-resources-button",disabled:v||Boolean(N)||k.updateDisabled||0===p.length,onClick:()=>{f(kS.EDIT_TEMPLATE_RESOURCES),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL_RESOURCES,eventDetail:Xr.TEMPLATE_RESOURCES_EDIT_START})}},g("edit_resources")),r.createElement(Ot.Z,{"data-testid":"add-template-resources-button",variant:"primary",disabled:v||Boolean(N)||k.updateDisabled,onClick:()=>{l({detail:{open:!0}}),mr({eventContext:jr.TEMPLATE_GENERATOR_DETAIL_RESOURCES,eventDetail:Xr.TEMPLATE_RESOURCES_ADD})}},g("add_resources")))},g("resources"))})},{label:g("template_code"),id:e[1],content:r.createElement(rT,null)}]})),b===kS.EDIT_TEMPLATE_RESOURCES&&r.createElement(zS,{visible:!0,dismiss:()=>f(null),templateArn:m,resources:p,updateHandler:()=>{D(),_([])}}),b===kS.UPDATE_GENERATED_TEMPLATE&&r.createElement(FS,{visible:!0,initialTemplateConfiguration:{arn:m,name:u,cloudFormationTemplateConfiguration:P.cloudFormationTemplateConfiguration},dismiss:()=>f(null),updateHandler:()=>D()}),b===kS.DELETE_GENERATED_TEMPLATE&&r.createElement(NS,{visible:!0,dismiss:()=>f(null),origin:jr.TEMPLATE_GENERATOR_DETAIL}),b===kS.RESYNC_RESOURCES&&r.createElement($S,{visible:!0,dismiss:()=>f(null),updateHandler:()=>D()}))}),ET=_T,gT=_r((()=>{const e=(0,s.I0)(),t=(0,Q.s0)(),a=(0,Q.TH)(),n=(0,s.v9)(aT),[i,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(null),{cachedData:u,displayData:m,fetchNextPage:p,filteringText:_,hasNextPage:E,isFetching:h,setFilteringText:S,refreshData:T}=(e=>{let{filteringFields:t}=e;const a={resource:o.ApiResource.GeneratedTemplate,action:o.ApiAction.List,requestParams:{maxResults:100},xsrfToken:me.xsrfToken,filteringFields:t},r=(0,o.useSDKInfiniteQuery)(a);return es({status:r.status,error:r.error,errorText:{errorContent:g("generated_template_failed_fetch_generated_templates")}}),r})({filteringFields:n.visibleContent}),b=0===i.length||h,f=m?`(${m.length}${E?"+":""})`:"0",k=(0,r.useMemo)((()=>{return e=u?.summaries,HS()(e,qS.Arn);var e}),[u]),A=e=>{const a=k[i].name,r=`/template-generator/details/${e}?${new URLSearchParams({templateName:a,templateArn:i[0]}).toString()}`;t(r)},I=u?.summaries?.length?r.createElement(nl,{onClick:()=>S("")}):r.createElement(ci,{header:g("no_templates"),description:g("empty_templates_table_description")}),y=r.createElement(Rr.Z,{counter:f,variant:"h2",actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:h,onRefresh:()=>{T(),mr({eventContext:jr.TEMPLATE_GENERATOR_LIST_TABLE,eventDetail:Xr.TEMPLATE_LIST_REFRESH})}}),r.createElement(Ot.Z,{"data-testid":"view-resources",disabled:b,onClick:()=>{A("templateResources"),mr({eventContext:jr.TEMPLATE_GENERATOR_LIST_TABLE,eventDetail:Xr.TEMPLATE_LIST_VIEW_RESOURCES})}},g("view_resources")),r.createElement(Ot.Z,{"data-testid":"view-code",disabled:b,onClick:()=>{A("templateCode"),mr({eventContext:jr.TEMPLATE_GENERATOR_LIST_TABLE,eventDetail:Xr.TEMPLATE_LIST_VIEW_TEMPLATE_CODE})}},g("view_template_code")),r.createElement(Ot.Z,{"data-testid":"delete-template",disabled:b,onClick:()=>{d(kS.DELETE_GENERATED_TEMPLATE),mr({eventContext:jr.TEMPLATE_GENERATOR_LIST_TABLE,eventDetail:Xr.TEMPLATE_LIST_DELETE_START})}},g("delete")),r.createElement(Ot.Z,{"data-testid":"create-template",variant:"primary",onClick:()=>{d(kS.CREATE_GENERATED_TEMPLATE),mr({eventContext:jr.TEMPLATE_GENERATOR_LIST_TABLE,eventDetail:Xr.TEMPLATE_LIST_CREATE_START})}},g("create_template")))},g("templates"));return r.createElement(Rl.Z,{header:r.createElement(Rr.Z,{variant:"h1"},g("template_generator"))},r.createElement(Es.Z,{direction:"vertical",size:"l"},r.createElement(GS,{expanded:n.overviewExpanded,onChange:t=>{let{expanded:a}=t;return e(tT({overviewExpanded:a}))}}),r.createElement(z.Z,{"data-analytics":jr.TEMPLATE_GENERATOR_LIST_TABLE,"data-analytics-type":At.EVENT_CONTEXT},r.createElement(Li,{testId:"template-browser-table",selectionType:"single",stickyHeader:!0,resizableColumns:!0,i18nStrings:{...jS},columnDefinitions:YS,trackByKey:QS,preferences:n,collectionPreferencesProps:JS,defaultSort:eT,allItems:m,isLoading:h,hasPaginationToken:E,fetchMore:p,selectedItems:i,onItemSelect:e=>{if(e&&e.length>0){const r=e[0].arn,n=k[r].name;l([r]);const s=new URLSearchParams({templateName:n,templateArn:r});t(`${a.pathname}?${s.toString()}`,{replace:!0})}},onConfirmPreferences:t=>e(tT({...n,...t})),header:y,customEmpty:I,customFilter:r.createElement(pl,{ariaLabel:"Filter templates",testId:"template-browser-filter",placeholder:g("template_browser_filter_placeholder"),filteringText:_,loading:h,filterHandler:e=>{S(e),mr({eventContext:jr.TEMPLATE_GENERATOR_LIST_TABLE,eventDetail:Xr.TEMPLATE_LIST_FILTER,eventValue:e})}})})),c===kS.CREATE_GENERATED_TEMPLATE&&r.createElement(US,{visible:!0,dismiss:()=>d(null)}),c===kS.DELETE_GENERATED_TEMPLATE&&r.createElement(NS,{visible:!0,dismiss:()=>d(null),origin:jr.TEMPLATE_GENERATOR_LIST_TABLE})))}),Tt.TEMPLATE_GENERATOR_LIST),hT=_r(ET,Tt.TEMPLATE_GENERATOR_DETAIL),ST=()=>fe(A.JAZZ)&&r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:"details/:selectedTabId",element:r.createElement(hT,null)}),r.createElement(Q.AW,{path:"*",element:r.createElement(gT,null)})),TT=e=>{const t=(0,b.parse)(e)||{};return t?.stackId&&encodeURIComponent(decodeURIComponent(t.stackId))||""},bT=e=>{const t=(0,b.parse)(e)||{};return t?.stackSetId||""},fT=e=>{const t=(0,b.parse)(e)||{};return t?.exportName||""},kT=e=>{const t=TT(e),a=(e=>{const t=(0,b.parse)(e)||{};return t?.changeSetId&&decodeURIComponent(t.changeSetId)||""})(e);return a&&`/stacks/changesets/changes?stackId=${t}&changeSetId=${a}`},AT={"/stacks":{contentType:"table"},"/stacks/stackinfo":{contentType:"table",isSplitPanelHiddenContentType:"default"},"/stacks/events":{contentType:"table",isSplitPanelHiddenContentType:"default"},"/stacks/resources":{contentType:"table",isSplitPanelHiddenContentType:"default"},"/stacks/outputs":{contentType:"table",isSplitPanelHiddenContentType:"default"},"/stacks/parameters":{contentType:"table",isSplitPanelHiddenContentType:"default"},"/stacks/template":{contentType:"table",isSplitPanelHiddenContentType:"default"}},IT=()=>{const{search:e}=(0,Q.TH)();return r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:"/stacks/new",element:r.createElement(Q.Fg,{to:`/stacks/create${e}`,replace:!0})}),r.createElement(Q.AW,{path:"/stack/update",element:r.createElement(Q.Fg,{to:`/stacks/update${e}`,replace:!0})}),r.createElement(Q.AW,{path:"/stack/changeset/new",element:r.createElement(Q.Fg,{to:(t=e,`/stacks/changesets/create${t}`),replace:!0})}),r.createElement(Q.AW,{path:"/stack/detail/drift",element:r.createElement(Q.Fg,{to:`/stacks/drifts?stackId=${TT(e)}`,replace:!0})}),r.createElement(Q.AW,{path:"/stack/detail",element:r.createElement(Q.Fg,{to:`/stacks/stackinfo?stackId=${TT(e)}`,replace:!0})}),r.createElement(Q.AW,{path:"/exports/detail",element:r.createElement(Q.Fg,{to:`/exports/${fT(e)}`,replace:!0})}),r.createElement(Q.AW,{path:"/changeset/detail",element:r.createElement(Q.Fg,{to:kT(e),replace:!0})}),r.createElement(Q.AW,{path:"/stacks/create/review",element:r.createElement(Q.Fg,{to:`/stacks/quickcreate${e}`,replace:!0})}),r.createElement(Q.AW,{path:"/stacksets/new",element:r.createElement(Q.Fg,{to:`/stacksets/create${e}`,replace:!0})}),r.createElement(Q.AW,{path:"/stackset/manage",element:r.createElement(Q.Fg,{to:`/stacksets/${bT(e)}`,replace:!0})}),r.createElement(Q.AW,{path:"/stackset/detail",element:r.createElement(Q.Fg,{to:`/stacksets/${bT(e)}`,replace:!0})}),r.createElement(Q.AW,{path:"/exports/*",element:r.createElement(Fl,null)}),r.createElement(Q.AW,{path:"/stacksets/*",element:r.createElement(I_,null)}),r.createElement(Q.AW,{path:"/registry/*",element:r.createElement(_d,null)}),r.createElement(Q.AW,{path:"/errors/*",element:r.createElement(Cl,null)}),r.createElement(Q.AW,{path:"/stacks/*",element:r.createElement(bS,null)}),r.createElement(Q.AW,{path:"/template-generator/*",element:r.createElement(ST,null)}),r.createElement(Q.AW,{path:"/spotlight/*",element:r.createElement(Id,null)}),r.createElement(Q.AW,{key:"redirect-page-not-found",path:"*",element:r.createElement(Q.Fg,{to:"/errors/page-notfound",replace:!0})}));var t};var yT=a(32372),CT=a(46403);const RT=[{id:"account",header:g("stackSet.details.stack_account"),cell:e=>e.account,minWidth:200,enabled:!0},{id:"region",header:g("stackSet.details.stack_region"),cell:e=>r.createElement(Ms,{value:e.region}),minWidth:200,enabled:!0},{id:"status",header:g("stackSet.details.stack_status"),cell:e=>r.createElement(Os,{status:e.status}),minWidth:200,enabled:!0},{id:"statusReason",header:g("stackSet.details.status_reason"),cell:e=>r.createElement(Ms,{value:e.statusReason}),minWidth:200,enabled:fe(A.SS_RESOURCE_DRIFT_DETECTION)}],vT=[{label:null,options:[{id:"account",label:g("stackSet.details.stack_account"),editable:!0},{id:"region",label:g("stackSet.details.stack_region"),editable:!0},{id:"status",label:g("stackSet.details.stack_status"),editable:!0},{id:"statusReason",label:g("stackSet.details.status_reason"),editable:!0}]}],LT={isDescending:!1,sortingColumn:{sortingField:"account"}},PT={emptyState:{title:g("stackSet.details.no_stacks_found"),subtitle:"",action:""},noMatch:{title:g("no_matches"),subtitle:g("no_results_match"),action:""},filter:{ariaLabel:"",placeholder:"",countText:()=>"",filteringClearAriaLabel:"Clear stacks filter input"},loadingText:"",paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{}},NT={title:g("table_preferences_title"),confirmLabel:g("table_preferences_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),wrapLinesPreference:{label:g("table_preferences_wrap_lines_label"),description:g("table_preferences_wrap_lines_desc")},visibleContentPreference:{title:g("table_preferences_content_selector_title"),options:vT}};function OT(){return OT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},OT.apply(this,arguments)}const xT=(0,Ue.P1)(rl,(e=>{const{wrapLines:t,visibleContent:a}=e.tablePreferences.STACK_SET_OPERATION_RESULTS;return{wrapLines:t,visibleContent:a,pageSize:100}})),DT=()=>{const e=(0,s.I0)(),t=(0,Q.TH)(),a=os(),n=(0,Q.s0)(),i=a.get("operationId"),[l,c]=(0,r.useState)(null),d=(0,CT.LX)({path:"/stacksets/:id/operations"},t.pathname),u=(0,s.v9)(xT),m=fe(A.SS_RESOURCE_DRIFT_DETECTION),{cachedData:p,displayData:_,hasNextPage:E,isFetching:h,fetchNextPage:S,filteringText:T,refreshData:b,setFilteringText:f}=((e,t)=>{const a=os().get("permissions"),{isDelegatedAdminAccount:r}=ku(),{isLoading:n}=Rd(),s={resource:o.ApiResource.StackSetOperationResults,action:o.ApiAction.List,requestParams:{stackSetName:e,operationId:t,maxResults:"100",...r&&"service"===a&&{callAs:"DELEGATED_ADMIN"}},filteringFields:["account","region","status"],xsrfToken:me.xsrfToken,queryOptions:{enabled:Boolean(e)&&!n}},i=(0,o.useSDKInfiniteQuery)(s);return es({status:i?.status,error:i?.error,errorText:{errorContent:i.error?.message}}),i})(d?.params.id,i),k=r.createElement(Rr.Z,{variant:"h2",counter:h?"":E?`(${_.length}+)`:`(${_.length})`,description:g("stack_instances_guide_description"),actions:r.createElement(Es.Z,{direction:"horizontal",size:"xs"},r.createElement(Zr,{loading:h,onRefresh:b}),m&&r.createElement(Ot.Z,{"data-testid":"view-drift-results",disabled:!l,onClick:()=>{a.set("operationId",i||""),n(`/stacksets/${d.params.id}/drifts?${a.toString()}&stackInstanceAccount=${l.account}&stackInstanceRegion=${l.region}`)}},g("stacksList.view_drifts_link")))},g("operation_stack_instances")),I=p?.summaries?.length?r.createElement(nl,{onClick:()=>f("")}):r.createElement(ci,{header:g("stackSet.details.no_stacks_found"),description:""});return r.createElement(Li,OT({className:"stackSet-operations-table",i18nStrings:PT,trackByKey:null,preferences:u,defaultSort:LT,collectionPreferencesProps:NT,columnDefinitions:RT.filter((e=>e.enabled)).map((e=>{let{enabled:t,...a}=e;return a})),isLoading:h,allItems:_,header:k,customEmpty:I},m?{selectionType:"single"}:{},{onItemSelect:e=>{c(e[0])},customFilter:r.createElement(pl,{ariaLabel:"Filter stack instances",className:"e2e-test-stackSet-operations-table-filter",placeholder:g("stackSet.details.filter_placeholder"),filteringText:T,loading:h,filterHandler:e=>f(e)}),hasPaginationToken:E,stickyHeader:!0,resizableColumns:!0,fetchMore:S,onConfirmPreferences:t=>e((e=>Je({preferenceType:N.StackSetOperationResults,preferenceSettings:e}))(t))}))},wT=e=>{const t=os().get("operationId"),a={...e,header:t?g("stack_instances_with_count",t):g("stackSet_split_panel_empty_header",g("stackSet.details.stacks_label"),g("stackSet.details.operations_label")),hidePreferencesButton:!1};return r.createElement(Ld,null,r.createElement(yT.Z,a,t?r.createElement(DT,null):g("stackSet_split_panel_empty_sub_header",g("operation"),g("stack_instances"))))};var ZT=function(e){return e.ResourceId="resourceId",e.Id="id",e.Status="status",e}(ZT||{}),UT=function(e){return e.InTemplate="success",e.NotInTemplate="info",e}(UT||{});const FT=[{id:ZT.ResourceId,key:e=>e.resourceId,header:g("physical_id"),cell:e=>e.resourceId},{id:ZT.Status,key:e=>e.status,header:g("status"),cell:e=>{const t=e.status===UT.InTemplate?g("in_template"):g("not_in_template");return r.createElement(qr.Z,{type:e.status,iconAriaLabel:e.status},t)}}],MT={emptyState:{title:g("resource_browser_table_empty_header"),subtitle:g("resource_browser_table_empty_description"),action:""},noMatch:{title:g("resource_browser_table_no_match_header"),subtitle:g("resource_browser_table_no_match_description"),action:""},filter:{countText:e=>1===e?`${e} ${g("match")}`:`${e||0} ${g("matches")}`,ariaLabel:"Filter Resources",placeholder:g("resource_browser_table_filter_placeholder"),filteringClearAriaLabel:"Clear resources filter input"},loadingText:g("resource_browser_table_loading"),paginationLabels:{nextPageLabel:g("next_page"),previousPageLabel:g("previous_page"),pageLabel:e=>g("pagination_page_label",String(e))},selectionLabels:{selectionGroupLabel:g("items_selection"),itemSelectionLabel:function(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedItems:[]}).selectedItems.filter((t=>t.resourceId===e.resourceId)).length?g("is_selected",e.resourceId):g("not_selected")},allItemsSelectionLabel:()=>g("resource_browser_table_selection_all_items")}},KT=(ZT.Id,{title:g("table_preferences"),confirmLabel:g("table_confirm_label"),cancelLabel:g("table_preferences_cancel_label"),pageSizePreference:{title:g("preferences_items_per_page"),options:[{value:5,label:g("items","5")},{value:10,label:g("items","10")},{value:20,label:g("items","20")}]},visibleContentPreference:{title:g("table_select_visible_columns_title"),options:[{label:g("resource_browser_table_preferences_resource_properties"),options:[{id:ZT.ResourceId,label:g("resource_id"),editable:!1}]}]}}),WT={isDescending:!0,sortingColumn:{sortingField:ZT.ResourceId}};var zT=function(e){return e.LOADING="loading",e.FINISHED="finished",e}(zT||{});const $T=e=>{let{items:t,onFilter:a,isLoading:n=!1}=e;const[s,i]=(0,r.useState)(null),{options:l}=(e=>{if(null==e)return{};const t={};return e.forEach((e=>{const a=e.split("::"),r=`${a[0]}::${a[1]}`,n={label:e,value:e,options:[]};t[r]?t[r].options=[...t[r].options,n]:t[r]={label:r,value:r,options:[n]}})),{options:Object.values(t)}})(t);return r.createElement(Es.Z,{direction:"vertical",size:"xxs"},r.createElement(z.Z,{variant:"strong"},g("resource_browser_specify_resource_type_header")),r.createElement(z.Z,{color:"text-body-secondary"},g("resource_browser_resource_type_filter_description")),r.createElement(Gs.Z,{ariaRequired:!0,filteringAriaLabel:"Filter resource type",ariaLabel:"Select resource type","data-testid":"resource-type-filter-select",selectedOption:s,onChange:e=>{let{detail:t}=e;var r;r=t.selectedOption,a(r),i(r),mr({eventContext:jr.RESOURCE_BROWSER_TABLE,eventDetail:Xr.RESOURCE_BROWSER_TYPE_FILTER,eventValue:t?.selectedOption?.value})},options:l,statusType:n?zT.LOADING:zT.FINISHED,filteringType:"auto",placeholder:g("resource_browser_resource_type_filter_placeholder"),selectedAriaLabel:"Selected"}))},VT=JSON.parse('{"D":["AWS::APS::Workspace","AWS::AccessAnalyzer::Analyzer","AWS::ApiGateway::ApiKey","AWS::ApiGateway::UsagePlan","AWS::ApiGatewayV2::VpcLink","AWS::AppIntegrations::EventIntegration","AWS::AppStream::DirectoryConfig","AWS::AppStream::ImageBuilder","AWS::Athena::NamedQuery","AWS::AutoScaling::LaunchConfiguration","AWS::AutoScaling::ScalingPolicy","AWS::Backup::Framework","AWS::Backup::ReportPlan","AWS::Batch::ComputeEnvironment","AWS::Batch::JobQueue","AWS::Batch::SchedulingPolicy","AWS::Cassandra::Keyspace","AWS::Cassandra::Table","AWS::CloudFront::CachePolicy","AWS::CloudFront::CloudFrontOriginAccessIdentity","AWS::CloudFront::Function","AWS::CloudFront::KeyGroup","AWS::CloudFront::OriginRequestPolicy","AWS::CloudFront::PublicKey","AWS::CloudFront::ResponseHeadersPolicy","AWS::CloudTrail::EventDataStore","AWS::CloudTrail::Trail","AWS::CloudWatch::CompositeAlarm","AWS::CloudWatch::MetricStream","AWS::CodeGuruProfiler::ProfilingGroup","AWS::CodeStarNotifications::NotificationRule","AWS::Config::AggregationAuthorization","AWS::Config::ConfigurationAggregator","AWS::Config::StoredQuery","AWS::ConnectCampaigns::Campaign","AWS::DataBrew::Dataset","AWS::DataBrew::Job","AWS::DataBrew::Project","AWS::DataBrew::Recipe","AWS::DataBrew::Ruleset","AWS::DataBrew::Schedule","AWS::DevOpsGuru::NotificationChannel","AWS::DynamoDB::Table","AWS::EC2::CapacityReservation","AWS::EC2::CustomerGateway","AWS::EC2::FlowLog","AWS::EC2::IPAM","AWS::EC2::IPAMPool","AWS::EC2::IPAMScope","AWS::EC2::KeyPair","AWS::EC2::LocalGatewayRoute","AWS::EC2::LocalGatewayRouteTableVPCAssociation","AWS::EC2::NatGateway","AWS::EC2::NetworkAcl","AWS::EC2::PrefixList","AWS::EC2::RouteTable","AWS::EC2::Subnet","AWS::EC2::SubnetRouteTableAssociation","AWS::EC2::TransitGateway","AWS::EC2::TransitGatewayAttachment","AWS::EC2::TransitGatewayConnect","AWS::EC2::TransitGatewayMulticastDomain","AWS::EC2::VPCPeeringConnection","AWS::EC2::VPNGateway","AWS::ECR::PullThroughCacheRule","AWS::ECR::RegistryPolicy","AWS::ECS::CapacityProvider","AWS::ECS::Cluster","AWS::ECS::ClusterCapacityProviderAssociations","AWS::EKS::Cluster","AWS::ElastiCache::User","AWS::ElastiCache::UserGroup","AWS::Events::Archive","AWS::FIS::ExperimentTemplate","AWS::GameLift::Alias","AWS::GlobalAccelerator::Accelerator","AWS::GreengrassV2::ComponentVersion","AWS::GroundStation::Config","AWS::GroundStation::DataflowEndpointGroup","AWS::GroundStation::MissionProfile","AWS::IAM::InstanceProfile","AWS::IAM::OIDCProvider","AWS::IAM::SAMLProvider","AWS::IAM::ServerCertificate","AWS::IVS::Channel","AWS::IVS::PlaybackKeyPair","AWS::IVS::RecordingConfiguration","AWS::IVS::StreamKey","AWS::IoT::CustomMetric","AWS::IoT::Dimension","AWS::IoT::Logging","AWS::IoT::ResourceSpecificLogging","AWS::IoT::TopicRule","AWS::IoT::TopicRuleDestination","AWS::IoTAnalytics::Channel","AWS::IoTAnalytics::Dataset","AWS::IoTAnalytics::Datastore","AWS::IoTAnalytics::Pipeline","AWS::IoTCoreDeviceAdvisor::SuiteDefinition","AWS::IoTEvents::AlarmModel","AWS::IoTEvents::DetectorModel","AWS::IoTEvents::Input","AWS::IoTSiteWise::AssetModel","AWS::IoTWireless::DeviceProfile","AWS::IoTWireless::NetworkAnalyzerConfiguration","AWS::IoTWireless::ServiceProfile","AWS::IoTWireless::WirelessGateway","AWS::KMS::Alias","AWS::KMS::Key","AWS::Kinesis::Stream","AWS::KinesisFirehose::DeliveryStream","AWS::Lambda::CodeSigningConfig","AWS::Location::GeofenceCollection","AWS::Location::Map","AWS::Location::PlaceIndex","AWS::Location::RouteCalculator","AWS::Location::Tracker","AWS::LookoutVision::Project","AWS::MediaPackage::Channel","AWS::MemoryDB::ACL","AWS::MemoryDB::Cluster","AWS::MemoryDB::ParameterGroup","AWS::MemoryDB::SubnetGroup","AWS::MemoryDB::User","AWS::NetworkFirewall::Firewall","AWS::NetworkFirewall::FirewallPolicy","AWS::NetworkFirewall::RuleGroup","AWS::NetworkManager::GlobalNetwork","AWS::Personalize::DatasetGroup","AWS::Personalize::Schema","AWS::Personalize::Solution","AWS::RDS::DBCluster","AWS::RDS::DBClusterParameterGroup","AWS::RDS::DBSubnetGroup","AWS::RDS::EventSubscription","AWS::RUM::AppMonitor","AWS::Redshift::EventSubscription","AWS::Redshift::ScheduledAction","AWS::RedshiftServerless::Namespace","AWS::RedshiftServerless::Workgroup","AWS::RefactorSpaces::Environment","AWS::Rekognition::Collection","AWS::Rekognition::Project","AWS::Rekognition::StreamProcessor","AWS::ResilienceHub::App","AWS::ResilienceHub::ResiliencyPolicy","AWS::RoboMaker::RobotApplication","AWS::RoboMaker::SimulationApplication","AWS::RolesAnywhere::CRL","AWS::RolesAnywhere::Profile","AWS::Route53::CidrCollection","AWS::Route53::DNSSEC","AWS::Route53::HealthCheck","AWS::Route53::KeySigningKey","AWS::Route53RecoveryControl::Cluster","AWS::Route53RecoveryControl::ControlPanel","AWS::Route53RecoveryReadiness::Cell","AWS::Route53RecoveryReadiness::ReadinessCheck","AWS::Route53RecoveryReadiness::RecoveryGroup","AWS::Route53RecoveryReadiness::ResourceSet","AWS::Route53Resolver::ResolverRule","AWS::Route53Resolver::ResolverRuleAssociation","AWS::S3::MultiRegionAccessPoint","AWS::S3::StorageLens","AWS::SES::DedicatedIpPool","AWS::SES::EmailIdentity","AWS::SQS::Queue","AWS::SSMIncidents::ReplicationSet","AWS::ServiceCatalogAppRegistry::Application","AWS::ServiceCatalogAppRegistry::AttributeGroup","AWS::StepFunctions::StateMachine","AWS::Transfer::Workflow","AWS::WAFv2::LoggingConfiguration"]}'),GT=()=>{const e=(0,r.useRef)(),t=os(),{onSplitPanelToggle:a,setLastRefreshed:n}=cs(),s=t.get("templateName"),i=t.get("templateArn"),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(null),[m,p]=(0,r.useState)(!1),[_,E]=(0,r.useState)(null),[h,S]=(0,r.useState)(!1),[T,b]=(0,r.useState)(!1),[f]=(0,r.useState)(VT.D),{mutate:k,isLoading:A,status:I,error:y={}}=LS({}),{displayData:C,fetchNextPage:R,hasNextPage:v,isFetching:L,filteringText:P,setFilteringText:N,refetch:O,status:x,error:D={}}=(e=>{let{resourceType:t}=e;const a={resource:o.ApiResource.Resources,action:o.ApiAction.List,requestParams:{maxResults:100,typeName:t},filteringFields:[],queryOptions:{enabled:Boolean(t)},transformCb:PS,xsrfToken:me.xsrfToken};return(0,o.useSDKInfiniteQuery)(a)})({resourceType:d}),{data:w={}}=vS({templateIdentifier:i||s,enabled:T,refetchInterval:1500}),Z=(e=>{const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current})(w?.status);(0,r.useEffect)((()=>{if(Z!==w?.status){const t=null!=w?.status&&w?.status!==fS.Complete&&w?.status!==fS.Failed;p(t),b(t),!t&&e?.current?.setSelection([])}}),[w?.status]),(0,r.useEffect)((()=>{"error"===I?(E({content:j(y,g("template_detail_failed_update_template",s)),type:"ERROR"}),S(!0)):S(!1)}),[I]),(0,r.useEffect)((()=>{"error"===x?(E({content:j(D,g("failed_list_resources_by_type",d)),type:"ERROR"}),S(!0)):S(!1)}),[x]);const U=(0,r.useMemo)((()=>((e,t)=>{const a=t?.map((t=>{return{...t,status:(a=t.resourceId,e?.some((e=>e?.resourceIdentifier?.identifier===a))?UT.InTemplate:UT.NotInTemplate)};var a}));return a||[]})(w?.resources,C)),[w?.resources,C]);return r.createElement(z.Z,{margin:{bottom:"s"},padding:{bottom:"s"}},r.createElement(Es.Z,{direction:"vertical",size:"s"},r.createElement(z.Z,{"data-analytics":jr.RESOURCE_BROWSER_FILTER,"data-analytics-type":At.EVENT_CONTEXT},r.createElement($T,{isLoading:!1,items:f,onFilter:t=>{c([]),e?.current?.setSelection([]),u(t.value),O({throwOnError:!0,cancelRefetch:!0})}})),r.createElement(sn.Z,{"data-testid":"resource-browser-added-alert",onDismiss:()=>p(!1),dismissAriaLabel:"Close alert",visible:m,action:r.createElement(Ot.Z,{onClick:()=>a({detail:{open:!1}})},"View resource status")},g("resource_browser_table_successful_resource_added_alert")),r.createElement(sn.Z,{"data-testid":"resource-browser-error-alert",onDismiss:()=>S(!1),dismissAriaLabel:"Close alert",visible:h,type:"error",dismissible:!0},_?.content),r.createElement(z.Z,{variant:"strong","data-testid":"add-resources-header"},g("resource_browser_add_resources_to_template_header")),r.createElement(z.Z,{"data-analytics":jr.RESOURCE_BROWSER_TABLE,"data-analytics-type":At.EVENT_CONTEXT},r.createElement(Li,{cfnTableRef:e,testId:"resource-browser-table",selectionType:"multi",stickyHeader:!1,i18nStrings:{...MT},columnDefinitions:FT,trackByKey:"resourceId",preferences:{},collectionPreferencesProps:KT,defaultSort:WT,allItems:U,isLoading:L,hasPaginationToken:v,fetchMore:R,selectedItems:l,onItemSelect:c,isItemDisabled:e=>e.status===UT.InTemplate,header:r.createElement(Rr.Z,{counter:U?`(${C?.length})`:"",variant:"h2",actions:r.createElement(Ot.Z,{loading:A,disabled:L||A||m||!l.length,onClick:()=>(()=>{const e=((e,t)=>t.map((t=>({resourceType:e,resourceIdentifier:{identifier:t.resourceId},logicalResourceId:`${t.resourceId}${Math.random().toString(36)}`.replace(/[^a-zA-Z0-9 ]/g,"")}))))(d,l);k({identifier:s,addResources:e}),n(Date.now().toString()),p(!0),b(!0),mr({eventContext:jr.RESOURCE_BROWSER_TABLE,eventDetail:Xr.RESOURCE_BROWSER_ADD})})()},g("add_to_template"))},d?g("resource_browser_table_header_resource_type_selected",d):g("resource_browser_table_header_resource_type_not_selected")),customFilter:r.createElement(pl,{ariaLabel:"Filter exports",placeholder:g("resource_browser_table_filter_placeholder"),filteringText:P,loading:L,filterHandler:e=>{N(e),mr({eventContext:jr.RESOURCE_BROWSER_TABLE,eventDetail:Xr.RESOURCE_BROWSER_RESOURCE_FILTER,eventValue:e})}}),customEmpty:P?.length||d?.length?r.createElement(nl,{onClick:P?.length?()=>N(""):null}):r.createElement(ci,{header:g("resource_browser_table_empty_header"),description:g("resource_browser_table_empty_description")})}))))},BT={header:"",className:"",hidePreferencesButton:!0,i18nStrings:{preferencesTitle:g("split_panel_preferences_title"),preferencesPositionLabel:g("split_panel_preferences_position_label"),preferencesPositionDescription:g("split_panel_preferences_position_description"),preferencesPositionSide:g("split_panel_preferences_position_side"),preferencesPositionBottom:g("split_panel_preferences_position_bottom"),preferencesConfirm:g("split_panel_preferences_confirm"),preferencesCancel:g("split_panel_preferences_cancel"),closeButtonAriaLabel:g("split_panel_preferences_close_aria_label"),openButtonAriaLabel:g("split_panel_preferences_open_aria_label"),resizeHandleAriaLabel:g("split_panel_preferences_resize_aria_label")}},HT=()=>{const{splitPanelConfigs:e}=cs();switch(e.type){case x.ResourceBrowser:{const e={...BT,header:g("resource_browser_header"),className:"resource-browser-split-panel",hidePreferencesButton:!0};return r.createElement(yT.Z,e,r.createElement(GT,null))}case x.StackSetOperations:return r.createElement(wT,BT);case x.StackDetails:{const e=os().get("stackId"),t=(0,Q.bS)("/stacks/:selectedTabId"),a={...BT,header:Na(e),className:"stack-details-split-panel",hidePreferencesButton:!1};return Object.values(nt).includes(t?.params?.selectedTabId)?r.createElement(yT.Z,a,r.createElement(Wg,{selectedTabId:t?.params?.selectedTabId})):null}default:return null}},qT=()=>{const{pathname:e}=(0,Q.TH)(),[t,a]=(0,r.useState)(!1),n=(0,s.I0)(),{splitPanelConfigs:i,onSplitPanelToggle:l,onSplitPanelPreferencesChange:o,onSplitPanelResize:c}=cs();us();const d=e=>e.app,u=(0,s.v9)((0,Ue.P1)(d,(e=>e.isNavigationOpen))),m=(0,s.v9)((0,Ue.P1)(d,(e=>e.isSplitPanelOpen))),p=(0,s.v9)((0,Ue.P1)(d,(e=>e.isSplitPanelHidden)));let _={...e?{"data-analytics-type":kt.SERVICE_SUBSECTION,"data-analytics":pr(e||"")}:{}};const E=p?AT[e]?.isSplitPanelHiddenContentType:AT[e]?.contentType;return r.createElement(ht.Z,{breadcrumbs:r.createElement(Hn,null),contentType:E||"default",navigationWidth:D.NAVIGATION_WIDTH,navigation:r.createElement(Qn,null),navigationOpen:u,onNavigationChange:e=>{let{detail:t}=e;return n(Xe(t.open))},notifications:r.createElement(dn,null),content:r.createElement(ln,null,r.createElement("div",_,r.createElement(IT,null))),tools:r.createElement(Pt,null),toolsWidth:D.TOOLS_WIDTH,toolsOpen:t,onToolsChange:e=>a(e.detail.open),toolsHide:!0,splitPanelSize:i.size,splitPanelOpen:m,splitPanelPreferences:{position:i.position},onSplitPanelToggle:l,onSplitPanelPreferencesChange:o,onSplitPanelResize:c,splitPanel:p?null:r.createElement(HT,null)})},YT=e=>{let{header:t,description:a,footer:n}=e;return r.createElement(Cr.Z,null,r.createElement(Es.Z,{size:"xl"},r.createElement(z.Z,{variant:"h2",padding:"n"},t),r.createElement("div",{"data-testid":"description"},a),r.createElement("div",null,n)))},XT=e=>{let{header:t}=e;const{category:a,title:n,subtitle:s,description:i,sidebar:l}=t;return r.createElement("div",{className:"cfn--custom-home-header"},r.createElement(z.Z,{padding:{vertical:"xxxl",horizontal:"s"}},r.createElement($s.Z,{gridDefinition:[{offset:{l:2,xxs:1},colspan:{l:8,xxs:10}},{colspan:{xl:6,l:5,s:6,xxs:10},offset:{l:2,xxs:1}},{colspan:{xl:2,l:3,s:4,xxs:10},offset:{s:0,xxs:1}}]},r.createElement(z.Z,{fontWeight:"light",padding:{top:"xs"}},r.createElement("span",{className:"cfn--custom-home-category "},a)),r.createElement("div",{className:"cfn--custom-home-header-title"},r.createElement(z.Z,{variant:"h1",fontWeight:"heavy",padding:"n",fontSize:"display-l",color:"inherit"},n),r.createElement(z.Z,{fontWeight:"light",padding:{bottom:"s"},fontSize:"display-l",color:"inherit"},s),r.createElement(z.Z,{variant:"p",fontWeight:"light"},r.createElement("span",{className:"cfn--custom-home-header-description"},i))),r.createElement("div",{className:"cfn--custom-home-header-sidebar"},l.map((e=>r.createElement(Es.Z,{key:e.header,size:"l"},r.createElement(YT,{header:e.header,description:e.description,footer:e.footer}))))))))},jT=e=>{let{showHowToVideo:t}=e;return r.createElement("div",{"data-testid":"how-it-works",className:"cfn--custom-home-section"},r.createElement(z.Z,{variant:"h1",tagOverride:"h2",padding:{bottom:"s",top:"n"},className:"cfn--custom-home-section-header"},g("service_home_how_it_works")),t&&r.createElement("iframe",{allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"video",width:"100%",frameBorder:"0",height:"315",sandbox:"allow-scripts allow-same-origin allow-presentation",src:"https://www.youtube-nocookie.com/embed/1h-GPXQrLZw"}),r.createElement(Cr.Z,null,r.createElement("ol",{className:"cfn--how-it-works-list"},[1,2,3].map((e=>r.createElement("li",{key:e},r.createElement("div",{className:"cfn--how-it-works-content"},r.createElement("div",null,r.createElement(Ts.Z,null,e)),r.createElement("div",{className:"cfn--how-it-works-item-content"},r.createElement("span",null,g(`how_it_works_${e}`))))))))))},QT=e=>{let{sidebar:t}=e;return r.createElement(Es.Z,{size:"xxl"},t.map((e=>{let{header:t,items:a}=e;return r.createElement(Cr.Z,{key:t,header:r.createElement(Rr.Z,{variant:"h2"},t,r.createElement(z.Z,{variant:"span",margin:{left:"xxs"}},r.createElement($.Z,{alt:"normal",variant:"normal",name:"external",size:"inherit"})))},r.createElement("div",{"data-testid":"sidebar-links-section"},a.map((e=>r.createElement("div",{className:"cfn--custom-inner-table-row",key:e.title},r.createElement(V.Z,{href:e.url},e.title))))))})))},JT={header:e=>r.createElement("div",{className:"cfn--custom-home-card-header"},e.name),sections:[{content:e=>r.createElement("div",{className:"cfn--custom-home-card"},r.createElement(z.Z,null,e.description))},{content:e=>e.footer}]},eb=e=>{let{mainContent:t}=e;return r.createElement("div",{"data-testid":"service-home-section"},t.map((e=>{let{header:t,items:a,cardsPerRow:n}=e;return r.createElement("div",{key:t,className:"cfn--custom-home-section"},r.createElement(z.Z,{variant:"h1",tagOverride:"h2",padding:{bottom:"s",top:"n"},className:"cfn--custom-home-section-header"},t),r.createElement(bl.Z,{cardDefinition:JT,items:a,cardsPerRow:n}))})))},tb="https://github.com/aws-cloudformation",ab=k.docsPath,rb=k.awsDocsBasePath,nb=k.marketingPath;function sb(){const e=(0,o.getRegion)(),t=(0,G.getPartitionForRegion)(e);return!("aws-cn"===t||t.startsWith("aws-iso"))}const ib=()=>{const e=(0,Q.s0)(),{mainContent:t,header:a,sidebar:n,showHowToVideo:s}=function(e){let{historyPush:t}=e;const a={category:g("service_home_category"),title:g("service_home_title"),subtitle:g("service_home_sub_title"),description:g("service_home_description"),sidebar:[{header:g("service_home_create_stack_title"),description:g("service_home_create_stack_description"),footer:r.createElement(Ot.Z,{onClick:()=>t("/stacks/create"),variant:"primary"},g("create_stack_label"))}]};let n=[{name:g("service_home_stacks_title"),description:g("service_home_stacks_decription"),footer:r.createElement(Ot.Z,{className:"cfn--whole-width",onClick:()=>t("/stacks")},g("service_home_stacks_button"))},{name:g("service_home_stacksets_title"),description:g("service_home_stacksets_description"),footer:r.createElement(Ot.Z,{className:"cfn--whole-width",onClick:()=>t("/stacksets")},g("service_home_stacksets_button"))},{name:g("service_home_changesets_title"),description:g("service_home_changesets_description"),footer:r.createElement(zr,{isInline:!1,ariaLabel:"creating a change set",pathAlias:"create-changeset"})},{name:g("service_home_drift_detection_title"),description:g("service_home_drift_detection_description"),footer:r.createElement(zr,{isInline:!1,ariaLabel:"detecting unmanaged configuration changes to stacks and resources",pathAlias:"drift"})},{name:g("service_home_template_linting_and_policy_as_code_title"),description:h("service_home_template_linting_and_policy_as_code_description",r.createElement(z.Z,{margin:{left:"n"}},r.createElement(zr,{externalLinkText:g("aws_cloudformation_resource_specification"),docsBaseUrl:ab,pathAlias:"cfn-resource-specification.html"}))),footer:r.createElement(z.Z,{float:"left"},h("service_home_template_linting_and_policy_as_code_learn_more",r.createElement(zr,{externalLinkText:"cfn-lint",docsBaseUrl:tb,pathAlias:"cfn-python-lint"}),r.createElement(zr,{externalLinkText:"cfn-guard",docsBaseUrl:tb,pathAlias:"cloudformation-guard"})))},{name:g("template_generator"),description:g("service_home_template_generator_description"),footer:r.createElement(Ot.Z,{className:"cfn--whole-width",onClick:()=>t("/template-generator")},g("service_home_template_generator_label"))}];const s=fe(A.UNO_REGISTRY)?{name:g("service_home_cloudformation_public_registry"),description:g("service_home_cloudformation_public_registry_description"),footer:r.createElement(Ot.Z,{className:"cfn--whole-width",onClick:()=>t("/registry/public-extensions")},g("service_home_view_registry_label"))}:{name:g("service_home_resource_types_title"),description:g("service_home_resource types_description"),footer:r.createElement(Ot.Z,{className:"cfn--whole-width",onClick:()=>t("/registry/enabled/resourceTypes")},g("service_home_resource_types_button"))};n.splice(-1,0,s),Ie((0,o.getRIPRegion)())||(n=n.filter((e=>e.name!==g("service_home_stacksets_title")))),fe(A.DRIFT_DETECTION)||(n=n.filter((e=>e.name!==g("service_home_drift_detection_title")))),fe(A.JAZZ)||(n=n.filter((e=>e.name!==g("template_generator"))));const i=[{header:g("service_home_benefits_and_features"),items:n,cardsPerRow:[{minWidth:500,cards:2}]}];return{header:a,sidebar:[{items:[{title:g("service_home_what_is_cloudformation"),url:`${rb}/AWSCloudFormation/latest/UserGuide/Welcome.html`},{title:g("service_home_get_started_with_cloudformation"),url:`${rb}/AWSCloudFormation/latest/UserGuide/GettingStarted.html`},{title:g("service_home_learn_templates"),url:`${rb}/AWSCloudFormation/latest/UserGuide/gettingstarted.templatebasics.html`},{title:g("service_home_quick_start"),url:`${nb}/quickstart/`}],header:g("service_home_get_started")},{items:[{title:g("service_home_documentation"),url:`${rb}/cloudformation/`},{title:g("service_home_api_reference"),url:`${rb}/AWSCloudFormation/latest/APIReference/`},{title:g("service_home_faqs"),url:`${nb}/cloudformation/faqs/`},{title:g("service_home_release_notes"),url:`${rb}/AWSCloudFormation/latest/UserGuide/ReleaseHistory.html`}],header:g("service_home_more_resources")}],mainContent:i,showHowToVideo:sb()}}({historyPush:t=>e(t)});return r.createElement("div",{className:"cfn--service-home"},r.createElement(XT,{header:a}),r.createElement(z.Z,{padding:{top:"xxxl",horizontal:"s"}},r.createElement($s.Z,{gridDefinition:[{colspan:{xl:6,l:5,s:6,xxs:10},offset:{l:2,xxs:1}},{colspan:{xl:2,l:3,s:4,xxs:10},offset:{s:0,xxs:1}}]},r.createElement("div",{className:"cfn--custom-home-main-content-area"},r.createElement(Es.Z,{size:"xxl"},r.createElement(jT,{showHowToVideo:s}),r.createElement(eb,{mainContent:t}))),r.createElement("div",{className:"cfn--custom-home__sidebar"},r.createElement(QT,{sidebar:n})))))},lb=()=>{const e=(0,s.I0)(),[t,a]=(0,r.useState)(!1),n=(0,s.v9)((0,Ue.P1)((e=>e.app),(e=>e.isNavigationOpen)));return us(),r.createElement("div",{className:"awsui"},r.createElement(ht.Z,{contentType:"default",disableContentPaddings:!0,navigationWidth:D.NAVIGATION_WIDTH,navigation:r.createElement(Qn,null),navigationOpen:n,onNavigationChange:t=>e(Xe(t.detail.open)),notifications:r.createElement(dn,null),content:r.createElement(ln,null,r.createElement("div",null,r.createElement(ib,null))),tools:r.createElement(Pt,null),toolsWidth:D.TOOLS_WIDTH,toolsOpen:t,onToolsChange:e=>a(e.detail.open),toolsHide:!0}))},ob=()=>{const e=(0,s.I0)(),t=(0,s.v9)((0,Ue.P1)((e=>e.app),(e=>e.firstLoad)));(0,r.useEffect)((()=>{if(window.AWSC){if(window.AWSC.Clog&&window.AWSC.Clog.setPageId){const e="cfnv2";window.AWSC.Clog.setPageId(e)}if(window.AWSC.Feedback&&window.AWSC.Feedback.setFolder){const e="03446db4-117f-479f-a70e-cadcb433ab5f";window.AWSC.Feedback.setFolder(e)}window.AWSC.Timer&&window.AWSC.Timer.customerReady&&window.AWSC.Timer.customerReady()}t&&e({type:Be})}),[]);const a=window.location.hash;return(0,r.useEffect)((()=>{a[1]&&"/"!==a[1]&&(window.location.href=`${window.location.origin+window.location.pathname+window.location.search}#/${a.slice(1)}`)}),[a]),ps(),r.createElement("div",null,r.createElement(Ze.ReactQueryDevtools,{initialIsOpen:!1}),r.createElement(_t,null,r.createElement(gt,null,r.createElement(mt,null,r.createElement(tt,null,r.createElement(B_,null,r.createElement(so,null,r.createElement(Q.Z5,null,r.createElement(Q.AW,{path:"*",element:r.createElement(qT,null)}),r.createElement(Q.AW,{path:"/",element:me.getStacks()?.stackSummaries?.length&&t?r.createElement(Q.Fg,{to:"/stacks"}):r.createElement(lb,null)})))))))))};a(97573),a(51959);var cb=a(73164),db=a(14845);const ub={isNavigationOpen:!0,isSplitPanelOpen:!1,isSplitPanelHidden:!1,firstLoad:!0},mb={tablePreferences:{STACKS:O.STACKS,STACK_CHANGE_SETS:O.STACK_CHANGE_SETS,STACK_CHANGE_SET_CHANGES:O.STACK_CHANGE_SET_CHANGES,STACK_CHANGE_SET_INPUT_PARAMETERS:O.STACK_CHANGE_SET_INPUT_PARAMETERS,STACK_CHANGE_SET_HOOK_INVOCATIONS:O.STACK_CHANGE_SET_HOOK_INVOCATIONS,STACK_EVENTS:O.STACK_EVENTS,STACK_RESOURCES:O.STACK_RESOURCES,STACK_PARAMETERS:O.STACK_PARAMETERS,STACK_SETS:O.STACK_SETS,STACK_SET_STACK_INSTANCES:O.STACK_SET_STACK_INSTANCES,STACK_SET_OPERATION_RESULTS:O.STACK_SET_OPERATION_RESULTS,STACK_SET_STACK_INSTANCE_RESOURCE_DRIFTS:O.STACK_SET_STACK_INSTANCE_RESOURCE_DRIFTS,STACK_OUTPUTS:O.STACK_OUTPUTS,STACK_TAGS:O.STACK_TAGS,EXPORTS:O.EXPORTS,MY_EXTENSIONS_MODULES:O.MY_EXTENSIONS_MODULES,MY_EXTENSIONS_HOOKS:O.MY_EXTENSIONS_HOOKS,EXTENSION_MODULE_RESOURCES:O.EXTENSION_MODULE_RESOURCES,EXTENSION_INPUT_PARAMETERS:O.EXTENSION_INPUT_PARAMETERS,EXTENSION_HOOK_TARGET_RESOURCE_TYPES:O.EXTENSION_HOOK_TARGET_RESOURCE_TYPES,MY_EXTENSIONS_RESOURCE_TYPES:O.MY_EXTENSIONS_RESOURCE_TYPES,PUBLIC_EXTENSIONS:O.PUBLIC_EXTENSIONS,TEMPLATE_BROWSER:O.TEMPLATE_BROWSER,RESOURCE_BROWSER:O.RESOURCE_BROWSER},announcementBanners:{}},pb={app:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ub,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $e:return{...e,isNavigationOpen:t.payload};case Ve:return{...e,isSplitPanelOpen:t.payload};case Ge:return{...e,isSplitPanelHidden:t.payload};case Be:return{...e,firstLoad:!1};default:return e}},appMetadata:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:{const{preferenceType:a,preferenceSettings:r}=t.payload;return{...e,tablePreferences:{...e.tablePreferences,[a]:{...e.tablePreferences[a],...r}}}}case ze:{const{show:a,id:r}=t.payload;return{...e,announcementBanners:{...e.announcementBanners,[r]:a}}}case"TOGGLE_DARK_MODE":return{...e};default:return e}},alerts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{alerts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return{alerts:(e.alerts.some((e=>e.content===t.payload.content))&&e.alerts||[t.payload,...e.alerts]).slice(0,4)};case Fe:return{alerts:[]};case Me:return{alerts:e.alerts.filter((e=>e.id!==t.payload.id))};default:return e}},tool:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{toolName:"cloud_formation",toolsOpen:!1},t=arguments.length>1?arguments[1]:void 0;return"SET_TOOL"===t.type?{toolName:t.payload,toolsOpen:!0}:e}},_b=function(){const e=(0,db.UY)({...pb});return(0,db.MT)(e,(0,cb.Uo)((0,db.md)()))}();window.amzn=window.amzn||{};const Eb=(0,o.getRegion)(),gb=(0,l.GT)({region:Eb}),hb=(0,o.isTangerineBox)()?(0,n.s)(document.getElementById("app")):(0,n.s)(document.getElementById("console-app"));function Sb(){return r.createElement(o.QueryClientProvider,null,r.createElement(s.zt,{store:_b},r.createElement(i.UT,null,r.createElement(ob,null))))}(0,o.isTangerineBox)()?(async()=>{const e=(0,o.getCurrentAccountId)(),t=(()=>{const e=(0,o.getRIPRegion)();return new pe.Features({projectId:"01GYB9TGXNTHADYETT9BKT39V3",region:e,prodish:be()})})(),a=(0,o.getRIPRegion)(),r={region:a,accountId:e,stage:be()?U.GAMMA:U.PRODUCTION,partition:(0,G.getPartitionForRegion)(a)};Te=await t.evaluateFeatures({visitorId:e,evaluationContext:r}),Te={...Te,...Se()},be()&&ke(Te)})().then((()=>{ae.getExperimentValue(A.CANARY_ONLY)?hb.render(r.createElement(Sb,null)):gb.then((()=>{hb.render(r.createElement(Sb,null))}))})):ae.getExperimentValue(A.CANARY_ONLY)?hb.render(r.createElement(Sb,null)):gb.then((()=>{hb.render(r.createElement(Sb,null))}))},97573:()=>{window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)},51959:()=>{Object.entries||(Object.entries=function(e){let t=Object.keys(e),a=t.length,r=new Array(a);for(;a--;)r[a]=[t[a],e[t[a]]];return r})},71359:()=>{},97666:e=>{"use strict";e.exports=JSON.parse('{"P":{"AWS::AmazonMQ::Broker":{"DeepLink":"https://$host/amazon-mq/home#/brokers/details?id=$resourceId"},"AWS::AmazonMQ::Configuration":{"DeepLink":"https://$host/amazon-mq/home#/configurations/details?id=$resourceId"},"AWS::ApiGateway::ApiKey":{"DeepLink":"https://$host/apigateway/home$region#/api-keys/$resourceId"},"AWS::ApiGateway::ClientCertificate":{"DeepLink":"https://$host/apigateway/home$region#/client-certificates/$resourceId"},"AWS::ApiGateway::RestApi":{"DeepLink":"https://$host/apigateway/home$region#/apis/$resourceId/resources"},"AWS::ApiGateway::UsagePlan":{"DeepLink":"https://$host/apigateway/home$region#/usage-plans/$resourceId"},"AWS::ApiGatewayV2::Api":{"DeepLink":"https://$host/apigateway/main/api-detail$region&api=$resourceId"},"AWS::AppStream::DirectoryConfig":{"DeepLink":"https://$host/appstream2/home#/directories?selected=$resourceId"},"AWS::AppStream::Fleet":{"DeepLink":"https://$host/appstream2/home#/fleets?selected=$resourceId"},"AWS::AppStream::Stack":{"DeepLink":"https://$host/appstream2/home$region#/stacks?selected=$resourceId"},"AWS::AutoScaling::AutoScalingGroup":{"DeepLink":"https://$host/ec2autoscaling/home$region#/details?id=$resourceIdDoubleEncoded"},"AWS::AutoScaling::LaunchConfiguration":{"DeepLink":"https://$host/ec2autoscaling/home$region#/lc?launchConfigurationName=$resourceIdDoubleEncoded"},"AWS::Backup::BackupVault":{"DeepLink":"https://$host/backup/home$region#backupvaults/details/$resourceId"},"AWS::Budgets::Budget":{"DeepLink":"https://$host/billing/home#/budgets/details?name=$resourceId"},"AWS::Cloud9::EnvironmentEC2":{"DeepLink":"https://$host/cloud9/home/environments/$resourceId"},"AWS::CloudFormation::Stack":{"DeepLink":"https://$host/cloudformation/home$region#/stacks/stackinfo?stackId=$resourceId"},"AWS::CloudWatch::Alarm":{"DeepLink":"https://$host/cloudwatch/home$region#alarm:alarm:alarmFilter=ANY;name=$resourceId"},"AWS::CloudWatch::Dashboard":{"DeepLink":"https://$host/cloudwatch/home$region#dashboards:name=$resourceId"},"AWS::CodeDeploy::Application":{"DeepLink":"https://$host/codesuite/codedeploy/applications/$resourceId$region"},"AWS::Cognito::IdentityPool":{"DeepLink":"https://$host/cognito/pool/?id=$resourceId"},"AWS::Cognito::UserPool":{"DeepLink":"https://$host/cognito/users/$region#/pool/$resourceId"},"AWS::DAX::ParameterGroup":{"DeepLink":"https://$host/dynamodb/home#cache-parameter-group:selected=$resourceId"},"AWS::DocDB::DBCluster":{"DeepLink":"https://$host/docdb/home#cluster-details/$resourceId"},"AWS::EC2::CustomerGateway":{"DeepLink":"https://$host/vpc/home#CustomerGateways:CustomerGatewayId=$resourceId"},"AWS::EC2::DHCPOptions":{"DeepLink":"https://$host/vpc/home$region#dhcpOptions:search=$resourceId"},"AWS::EC2::EIP":{"DeepLink":"https://$host/vpc/home$region#eips:search=$resourceId"},"AWS::EC2::Host":{"DeepLink":"https://$host/ec2/home#Hosts:hostId=$resourceId"},"AWS::EC2::Instance":{"DeepLink":"https://$host/ec2/home$region#Instances:search=$resourceId"},"AWS::EC2::InternetGateway":{"DeepLink":"https://$host/vpc/home$region#igws:search=$resourceId"},"AWS::EC2::LaunchTemplate":{"DeepLink":"https://$host/ec2/v2/home#LaunchTemplates:launchTemplateId=$resourceId"},"AWS::EC2::NetworkAcl":{"DeepLink":"https://$host/vpc/home$region#acls:search=$resourceId"},"AWS::EC2::NetworkInterface":{"DeepLink":"https://$host/ec2/home$region#NIC:search=$resourceId"},"AWS::EC2::PlacementGroup":{"DeepLink":"https://$host/ec2/v2/home#PlacementGroups:groupName=$resourceId"},"AWS::EC2::SecurityGroup":{"DeepLink":"https://$host/ec2/home$region#SecurityGroups:search=$resourceId"},"AWS::EC2::Subnet":{"DeepLink":"https://$host/vpc/home$region#subnets:search=$resourceId"},"AWS::EC2::TransitGateway":{"DeepLink":"https://$host/vpc/home#TransitGateways:transitGatewayId=$resourceId"},"AWS::EC2::Volume":{"DeepLink":"https://$host/ec2/home$region#Volumes:search=$resourceId"},"AWS::EC2::VPC":{"DeepLink":"https://$host/vpc/home$region#vpcs:search=$resourceId"},"AWS::EC2::VPCEndpoint":{"DeepLink":"https://$host/vpc/home#Endpoints:vpcEndpointId=$resourceId"},"AWS::EC2::VPCEndpointService":{"DeepLink":"https://$host/vpc/home#EndpointServices:service-id=$resourceId"},"AWS::EC2::VPNConnection":{"DeepLink":"https://$host/vpc/home$region#vpns:search=$resourceId"},"AWS::EC2::VPNGateway":{"DeepLink":"https://$host/vpc/home$region#vgws:search=$resourceId"},"AWS::ECS::Cluster":{"DeepLink":"https://$host/ecs/v2/clusters/$resourceId/","LegacyLink":"https://$host/ecs/home#/clusters/$resourceId/","LegacyLinkPartitions":["aws-iso.*"]},"AWS::ECR::Repository":{"DeepLink":"https://$host/ecr/repositories/$resourceId/"},"AWS::ElastiCache::CacheCluster":{"DeepLink":"https://$host/elasticache/home$region#/redis/$resourceId"},"AWS::ElastiCache::ReplicationGroup":{"DeepLink":"https://$host/elasticache/home$region#/redis/$resourceId"},"AWS::ElastiCache::GlobalReplicationGroup":{"DeepLink":"https://$host/elasticache/home$region#/global-datastore/$resourceId"},"AWS::ElastiCache::ParameterGroup":{"DeepLink":"https://$host/elasticache/home$region#/parameter-groups/$resourceId"},"AWS::ElastiCache::SubnetGroup":{"DeepLink":"https://$host/elasticache/home$region#/subnet-groups/$resourceId"},"AWS::ElastiCache::User":{"DeepLink":"https://$host/elasticache/home$region#/users/$resourceId"},"AWS::ElastiCache::UserGroup":{"DeepLink":"https://$host/elasticache/home$region#/user-groups/$resourceId"},"AWS::ElasticBeanstalk::Application":{"DeepLink":"https://$host/elasticbeanstalk/home$region#/application/overview?applicationName=$resourceId"},"AWS::ElasticLoadBalancing::LoadBalancer":{"DeepLink":"https://$host/ec2/home$region#LoadBalancers:search=$resourceId"},"AWS::ElasticLoadBalancingV2::LoadBalancer":{"DeepLink":"https://$host/ec2/home$region#LoadBalancers:search=$resourceIdNoEncoding"},"AWS::ElasticLoadBalancingV2::Listener":{"DeepLink":"https://$host/ec2/home$region#LoadBalancers:search=$resourceIdNoEncoding","Sub":{"listener":"loadbalancer"},"TruncateAfterLastSlash":true},"AWS::ElasticLoadBalancingV2::TargetGroup":{"DeepLink":"https://$host/ec2/home$region#TargetGroups:search=$resourceIdNoEncoding"},"AWS::Elasticsearch::Domain":{"DeepLink":"https://$host/esv3/home$region#opensearch/domains/$resourceId"},"AWS::Events::EventBus":{"DeepLink":"https://$host/events/home$region#/eventbus/$resourceId"},"AWS::Events::Rule":{"DeepLink":"https://$host/events/home$region#/rules/$resourceId","ResourceShouldMatchRegex":"^(?!arn:).*"},"AWS::Greengrass::Group":{"DeepLink":"https://$host/iot/home$region#/greengrass/groups/$resourceId"},"AWS::IAM::Group":{"DeepLink":"https://$host/iamv2/home?#/groups/details/$resourceId"},"AWS::IAM::ManagedPolicy":{"DeepLink":"https://$host/iam/home#/policies/$resourceId"},"AWS::IAM::Provider":{"DeepLink":"https://$host/iamv2/home?#/identity_providers/$resourceId"},"AWS::IAM::Role":{"DeepLink":"https://$host/iam/home?#/roles/$resourceId"},"AWS::IAM::User":{"DeepLink":"https://$host/iam/home?#/users/$resourceId"},"AWS::IoT::Policy":{"DeepLink":"https://$host/iot/home#/policy/$resourceId"},"AWS::IoT::Thing":{"DeepLink":"https://$host/iot/home#/thing/$resourceId"},"AWS::IoTAnalytics::Channel":{"DeepLink":"https://$host/iotanalytics/home#/channels/$resourceId"},"AWS::IoTAnalytics::Datastore":{"DeepLink":"https://$host/iotanalytics/home#/datastores/$resourceId"},"AWS::Kinesis::Stream":{"DeepLink":"https://$host/kinesis/home#/streams/details?streamName=$resourceId"},"AWS::KMS::Key":{"DeepLink":"https://$host/kms/home#/kms/keys/$resourceId"},"AWS::Lambda::Function":{"DeepLink":"https://$host/lambda/home$region#functions/$resourceId"},"AWS::Logs::LogGroup":{"DeepLink":"https://$host/cloudwatch/home$region#logStream:group=$resourceId"},"AWS::MediaLive::InputSecurityGroup":{"DeepLink":"https://$host/medialive/home#/inputSecurityGroups/$resourceId"},"AWS::MediaStore::Container":{"DeepLink":"https://$host/mediastore/home/containers/$resourceId"},"AWS::Neptune::DBCluster":{"DeepLink":"https://$host/neptune/home#cluster:ids=$resourceId"},"AWS::OpenSearchService::Domain":{"DeepLink":"https://$host/esv3/home$region#opensearch/domains/$resourceId"},"AWS::Pinpoint::App":{"DeepLink":"https://$host/pinpoint/home#/apps/$resourceId"},"AWS::PinpointEmail::ConfigurationSet":{"DeepLink":"https://$host/ses/home#edit-configuration-set:$resourceId"},"AWS::PinpointEmail::Identity":{"DeepLink":"https://$host/ses/home#verified-sender-details:domain:$resourceId"},"AWS::Pipes::Pipe":{"DeepLink":"https://$host/events/home$region#/pipe/$resourceId"},"AWS::RAM::ResourceShare":{"DeepLink":"https://$host/ram/home#ResourceShareView:rsId=$resourceId"},"AWS::RDS::DBCluster":{"DeepLink":"https://$host/rds/home#database:id=$resourceId;is-cluster=true"},"AWS::RDS::DBInstance":{"DeepLink":"https://$host/rds/home$region#dbinstance:id=$resourceId"},"AWS::RDS::DBParameterGroup":{"DeepLink":"https://$host/rds/home$region#parameter-groups:id=$resourceId"},"AWS::RDS::DBSubnetGroup":{"DeepLink":"https://$host/rds/home$region#db-subnet-groups:id=$resourceId"},"AWS::Redshift::Cluster":{"DeepLink":"https://$host/redshift/home$region#cluster-details:cluster=$resourceId"},"AWS::Redshift::ClusterParameterGroup":{"DeepLink":"https://$host/redshiftv2/home#workload-management?parameter-group=$resourceId"},"AWS::Route53::HealthCheck":{"DeepLink":"https://$host/route53/healthchecks/home#/details/$resourceId"},"AWS::Route53::HostedZone":{"DeepLink":"https://$host/route53/home#resource-record-sets:$resourceId"},"AWS::S3::Bucket":{"DeepLink":"https://$host/s3/home$region&bucket=$resourceId"},"AWS::SecretsManager::Secret":{"DeepLink":"https://$host/secretsmanager/home$region#!/secret?name=$resourceId"},"AWS::SecurityHub::Hub":{"DeepLink":"https://$host/securityhub/home"},"AWS::ServiceCatalog::Portfolio":{"DeepLink":"https://$host/servicecatalog/home#portfolios/$resourceId"},"AWS::ServiceCatalog::TagOption":{"DeepLink":"https://$host/servicecatalog/home#/tag-option?tagOptionId=$resourceId"},"AWS::ServiceDiscovery::HttpNamespace":{"DeepLink":"https://$host/cloudmap/home#namespaces/$resourceId"},"AWS::ServiceDiscovery::PublicDnsNamespace":{"DeepLink":"https://$host/cloudmap/home#namespaces/$resourceId"},"AWS::SES::ConfigurationSet":{"DeepLink":"https://$host/ses/home#edit-configuration-set:$resourceId"},"AWS::SES::ReceiptRuleSet":{"DeepLink":"https://$host/ses/home#rule-set:$resourceId"},"AWS::SNS::Topic":{"DeepLink":"https://$host/sns/v3/home$region#/topic/$resourceId"},"AWS::SSM::Parameter":{"DeepLink":"https://$host/systems-manager/parameters/$resourceId/description$region"},"AWS::StepFunctions::Activity":{"DeepLink":"https://$host/states/home$region#/tasks"},"AWS::StepFunctions::StateMachine":{"DeepLink":"https://$host/states/home$region#/statemachines/view/$resourceId"},"AWS::WAF::ByteMatchSet":{"DeepLink":"https://$host/wafv2/home#/stringmatchsets/bytematch/$resourceId"},"AWS::WAF::IPSet":{"DeepLink":"https://$host/wafv2/home#/ipsets/$resourceId"},"AWS::WAF::SizeConstraintSet":{"DeepLink":"https://$host/wafv2/home#/sizeconstraintsets/$resourceId"},"AWS::WAF::SqlInjectionMatchSet":{"DeepLink":"https://$host/wafv2/home#/sqlimatchsets/$resourceId"},"AWS::WAF::XssMatchSet":{"DeepLink":"https://$host/wafv2/home#/xssmatchsets/$resourceId"},"AWS::WAFRegional::ByteMatchSet":{"DeepLink":"https://$host/wafv2/home$region#/stringmatchsets/bytematch/$resourceId"},"AWS::WAFRegional::GeoMatchSet":{"DeepLink":"https://$host/wafv2/home$region#/geomatchsets/$resourceId"},"AWS::WAFRegional::IPSet":{"DeepLink":"https://$host/wafv2/home$region#/ipsets/$resourceId"},"AWS::WAFRegional::SizeConstraintSet":{"DeepLink":"https://$host/wafv2/home$region#/sizeconstraintsets/$resourceId"},"AWS::WAFRegional::SqlInjectionMatchSet":{"DeepLink":"https://$host/wafv2/home$region#/sqlimatchsets/$resourceId"},"AWS::WAFRegional::XssMatchSet":{"DeepLink":"https://$host/wafv2/home$region#/xssmatchsets/$resourceId"},"AWS::QLDB::Ledger":{"DeepLink":"https://$host/qldb/home#ledgerList/details/$resourceId"},"AWS::DLM::LifecyclePolicy":{"DeepLink":"https://$host/ec2/v2/home$region#Lifecycle:search=$resourceId;sort=PolicyId"},"AWS::DynamoDB::Table":{"DeepLink":"https://$host/dynamodb/home$region#tables:selected=$resourceId"}}}')}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=r,e=[],s.O=(t,a,r,n)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){for(var[a,r,n]=e[d],l=!0,o=0;o<a.length;o++)(!1&n||i>=n)&&Object.keys(s.O).every((e=>s.O[e](a[o])))?a.splice(o--,1):(l=!1,n<i&&(i=n));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[a,r,n]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);s.r(n);var i={};t=t||[null,a({}),a([]),a(a)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=a(l))Object.getOwnPropertyNames(l).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,s.d(n,i),n},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[i,l,o]=a,c=0;if(i.some((t=>0!==e[t]))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(o)var d=o(s)}for(t&&t(a);c<i.length;c++)n=i[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=globalThis.webpackChunk=globalThis.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),s.nc=void 0;var i=s.O(void 0,[736,95],(()=>s(54817)));i=s.O(i)})();